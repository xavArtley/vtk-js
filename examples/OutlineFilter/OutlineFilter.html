<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <div class="content"></div>
<script type="text/javascript">
!function(e){function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=43)}([function(e,n,t){"use strict";(function(e){function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function o(){return B}function i(){}function u(e,n){G[e]&&(G[e]=n||i)}function s(){G.log.apply(G,arguments)}function l(){G.info.apply(G,arguments)}function c(){G.debug.apply(G,arguments)}function d(){G.error.apply(G,arguments)}function f(){G.warn.apply(G,arguments)}function m(e){return e.charAt(0).toUpperCase()+e.slice(1)}function p(e){Object.keys(e).forEach(function(n){Array.isArray(e[n])&&(e[n]=[].concat(e[n]))})}function v(e,n){return Object.keys(e).find(function(t){return e[t]===n})}function g(e){return e.isA?e.getState():e}function h(){function e(e){o[e]=null}function n(n){function t(){e(n)}return Object.freeze({unsubscribe:t})}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(r);var o=[];r.mtime=Number.isInteger(r.mtime)?r.mtime:++B,r.classHierarchy=["vtkObject"],t.isDeleted=function(){return!!r.deleted},t.modified=function(e){if(r.deleted)return void d("instance deleted - cannot call any method");e&&e<r.mtime||(r.mtime=++B,o.forEach(function(e){return e&&e(t)}))},t.onModified=function(e){if(r.deleted)return d("instance deleted - cannot call any method"),null;var t=o.length;return o.push(e),n(t)},t.getMTime=function(){return r.mtime},t.isA=function(e){for(var n=r.classHierarchy.length;n--;)if(r.classHierarchy[n]===e)return!0;return!1},t.getClassName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return r.classHierarchy[r.classHierarchy.length-1-e]},t.set=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1;return Object.keys(e).forEach(function(u){var s=o?null:t["set"+m(u)];s&&Array.isArray(e[u])?i=s.apply(void 0,a(e[u]))||i:s?i=s(e[u])||i:(-1!==["mtime"].indexOf(u)||n||f("Warning: Set value to model directly "+u+", "+e[u]),r[u]=e[u],i=!0)}),i},t.get=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];if(!n.length)return r;var a={};return n.forEach(function(e){a[e]=r[e]}),a},t.getReferenceByName=function(e){return r[e]},t.delete=function(){Object.keys(r).forEach(function(e){return delete r[e]}),o.forEach(function(n,t){return e(t)}),r.deleted=!0},t.getState=function(){var e=Object.assign({},r,{vtkClass:t.getClassName()});Object.keys(e).forEach(function(n){null===e[n]||void 0===e[n]?delete e[n]:e[n].isA?e[n]=e[n].getState():Array.isArray(e[n])&&(e[n]=e[n].map(g))});var n={};return Object.keys(e).sort().forEach(function(t){n[t]=e[t]}),n.mtime&&delete n.mtime,n},t.shallowCopy=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.getClassName()!==t.getClassName())throw new Error("Cannot ShallowCopy "+e.getClassName()+" into "+t.getClassName());var a=e.get(),o=Object.keys(r).sort();Object.keys(a).sort().forEach(function(e){var t=o.indexOf(e);-1===t?n&&c("add "+e+" in shallowCopy"):o.splice(t,1),r[e]=a[e]}),o.length&&n&&c("Untouched keys: "+o.join(", ")),t.modified()}}function b(e,n,t){t.forEach(function(t){"object"===(void 0===t?"undefined":F(t))?e["get"+m(t.name)]=function(){return n[t.name]}:e["get"+m(t)]=function(){return n[t]}})}function y(e){if("object"===(void 0===e?"undefined":F(e))){var n=W[e.type];if(n)return function(t,r){return n(t,r,e)};throw d("No setter for field "+e),new TypeError("No setter for field")}return function(n,t){return function(r){return t.deleted?(d("instance deleted - cannot call any method"),!1):t[e]!==r&&(t[e]=r,n.modified(),!0)}}}function x(e,n,t){t.forEach(function(t){"object"===(void 0===t?"undefined":F(t))?e["set"+m(t.name)]=y(t)(e,n):e["set"+m(t)]=y(t)(e,n)})}function T(e,n,t){b(e,n,t),x(e,n,t)}function _(e,n,t){t.forEach(function(t){e["get"+m(t)]=function(){return[].concat(n[t])},e["get"+m(t)+"ByReference"]=function(){return n[t]}})}function A(e,n,t,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;t.forEach(function(t){e["set"+m(t)]=function(){for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];if(n.deleted)return d("instance deleted - cannot call any method"),!1;var s=i;if(1===s.length&&Array.isArray(s[0])&&(s=s[0]),s.length!==r){if(!(s.length<r&&void 0!==a))throw new RangeError("Invalid number of values for array setter");for(s=[].concat(s);s.length<r;)s.push(a)}var l=!1;return n[t].forEach(function(e,n){if(e!==s[n]){if(l)return;l=!0}}),(l||n[t].length!==s.length)&&(n[t]=[].concat(s),e.modified()),!0},e["set"+m(t)+"From"]=function(e){var r=n[t];e.forEach(function(e,n){r[n]=e})}})}function w(e,n,t,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;_(e,n,t),A(e,n,t,r,a)}function C(e,n,t,r){function a(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n.deleted)return void d("instance deleted - cannot call any method");if(r>=n.numberOfInputs){var a="algorithm "+e.getClassName()+" only has ";return a+=""+n.numberOfInputs,a+=" input ports. To add more input ports, use addInputData()",void d(a)}(n.inputData[r]!==t||n.inputConnection[r])&&(n.inputData[r]=t,n.inputConnection[r]=null,e.modified&&e.modified())}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return n.inputConnection[e]&&(n.inputData[e]=n.inputConnection[e]()),n.inputData[e]}function i(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n.deleted)return void d("instance deleted - cannot call any method");if(r>=n.numberOfInputs){var a="algorithm "+e.getClassName()+" only has ";return a+=""+n.numberOfInputs,a+=" input ports. To add more input ports, use addInputConnection()",void d(a)}n.inputData[r]=null,n.inputConnection[r]=t}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return n.inputConnection[e]}function s(e){if(n.deleted)return void d("instance deleted - cannot call any method");n.numberOfInputs++,i(e,n.numberOfInputs-1)}function l(e){if(n.deleted)return void d("instance deleted - cannot call any method");n.numberOfInputs++,a(e,n.numberOfInputs-1)}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return n.deleted?(d("instance deleted - cannot call any method"),null):(e.shouldUpdate()&&e.update(),n.output[t])}function f(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=function(){return c(n)};return t.filter=e,t}if(n.inputData?n.inputData=n.inputData.map(j.default):n.inputData=[],n.inputConnection?n.inputConnection=n.inputConnection.map(j.default):n.inputConnection=[],n.output?n.output=n.output.map(j.default):n.output=[],n.inputArrayToProcess?n.inputArrayToProcess=n.inputArrayToProcess.map(j.default):n.inputArrayToProcess=[],n.numberOfInputs=t,e.shouldUpdate=function(){for(var t=n.mtime,a=r,o=1/0;a--;){if(!n.output[a])return!0;var i=n.output[a].getMTime();if(i<t)return!0;i<o&&(o=i)}for(a=n.numberOfInputs;a--;)if(n.inputConnection[a]&&n.inputConnection[a].filter.shouldUpdate())return!0;for(a=n.numberOfInputs;a--;)if(e.getInputData(a)&&e.getInputData(a).getMTime()>o)return!0;return!1},n.numberOfInputs){for(var m=n.numberOfInputs;m--;)n.inputData.push(null),n.inputConnection.push(null);e.setInputData=a,e.setInputConnection=i,e.addInputData=l,e.addInputConnection=s,e.getInputData=o,e.getInputConnection=u}r&&(e.getOutputData=c,e.getOutputPort=f),e.update=function(){var t=[];if(n.numberOfInputs)for(var r=0;r<n.numberOfInputs;)t[r]=e.getInputData(r),r++;e.shouldUpdate()&&e.requestData&&e.requestData(t,n.output)},e.getNumberOfInputPorts=function(){return n.numberOfInputs},e.getNumberOfOutputPorts=function(){return r},e.getInputArrayToProcess=function(e){var t=n.inputArrayToProcess[e],r=n.inputData[e];return t&&r?r["get"+t.fieldAssociation]().getArray(t.arrayName):null},e.setInputArrayToProcess=function(e,t,r){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Scalars";n.inputArrayToProcess.length<e;)n.inputArrayToProcess.push(null);n.inputArrayToProcess[e]={arrayName:t,fieldAssociation:r,attributeType:a}}}function M(e,n,t){function r(e){for(var n=0;n<i.length;++n){if(L(i[n],1)[0]===e)return void i.splice(n,1)}}function a(e){function n(){r(e)}return Object.freeze({unsubscribe:n})}function o(){var t=arguments;if(n.deleted)return void d("instance deleted - cannot call any method");for(var r=i.slice(),a=0;a<r.length;++a){if("break"===function(n){var a=L(r[n],3),o=a[1],i=a[2];if(i<0)setTimeout(function(){return o.apply(e,t)},1-i);else if(o){var u=o.apply(e,t);if(u===H)return"break"}}(a))break}}var i=[],u=e.delete,s=1;e["invoke"+m(t)]=o,e["on"+m(t)]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n.deleted)return d("instance deleted - cannot call any method"),null;var r=s++;return i.push([r,e,t]),i.sort(function(e,n){return n[2]-e[2]}),a(r)},e.delete=function(){u(),i.forEach(function(e){return r(L(e,1)[0])})}}function O(e,n){var t=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r={};return e(r,t,n),Object.freeze(r)};return n&&j.default.register(n,t),t}function I(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.filter(function(e){return!!e}).forEach(function(e){return e.apply(void 0,t)})}}function S(e){return e&&e.isA&&e.isA("vtkObject")}function P(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(S(e)){if(r.indexOf(e)>=0)return t;r.push(e);var a=n(e);void 0!==a&&t.push(a);var o=e.get();Object.keys(o).forEach(function(e){var a=o[e];Array.isArray(a)?a.forEach(function(e){P(e,n,t,r)}):P(a,n,t,r)})}return t}function E(e,n,t){var r=this,a=void 0;return function(){for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];var s=r,l=function(){a=null,t||e.apply(s,i)},c=t&&!a;clearTimeout(a),a=setTimeout(l,n),c&&e.apply(s,i)}}function R(e,n){function t(){o=!1,null!==i&&(r.apply(void 0,a(i)),i=null)}function r(){for(var r=arguments.length,a=Array(r),u=0;u<r;u++)a[u]=arguments[u];if(o)return void(i=a);o=!0,e.apply(void 0,a),setTimeout(t,n)}var o=!1,i=null;return r}function N(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.keystore=Object.assign(n.keystore||{},t),e.setKey=function(e,t){n.keystore[e]=t},e.getKey=function(e,t){return n.keystore[e]},e.getAllKeys=function(e,t){return Object.keys(n.keystore)},e.deleteKey=function(e,t){return delete n.keystore[e]},e.clearKeystore=function(){return e.getAllKeys().forEach(function(e){return delete n.keystore[e]})}}function D(e,n){function t(e,n){s[n]||(s[n]=[]);for(var r=s[n],a=0;a<e.length;a++)r.push(e[a].name),u[e[a].name]=e[a],e[a].children&&e[a].children.length&&t(e[a].children,e[a].name)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return s[e]}function o(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,r=[],i=n.proxyId,u=a(t)||[],s=0;s<u.length;s++){var l=u[s],c=e["get"+m(l)],d=c?c():void 0,f={id:i,name:l,value:d},p=o(l);p.length&&(f.children=p),r.push(f)}return r}N(e,n);var i=e.delete;n.proxyId=""+K++,n.ui=JSON.parse(JSON.stringify(n.ui||[])),b(e,n,["proxyId","proxyGroup","proxyName"]),T(e,n,["proxyManager"]);var u={},s={};t(n.ui,Y),e.updateUI=function(r){n.ui=JSON.parse(JSON.stringify(r||[])),Object.keys(u).forEach(function(e){return delete u[e]}),Object.keys(s).forEach(function(e){return delete s[e]}),t(n.ui,Y),e.modified()},e.updateProxyProperty=function(e,n){var t=u[e];t&&Object.assign(t,n)},e.activate=function(){if(n.proxyManager){var t="setActive"+m(e.getProxyGroup().slice(0,-1));n.proxyManager[t]&&n.proxyManager[t](e)}},n.propertyLinkSubscribers=[],e.registerPropertyLinkForGC=function(e){n.propertyLinkSubscribers.push(e)},e.gcPropertyLinks=function(){for(;n.propertyLinkSubscribers.length;)n.propertyLinkSubscribers.pop().unbind(e)},n.propertyLinkMap={},e.getPropertyLink=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(c)return null;var t=[],a=null;for(l=s.length;l--;){var o=s[l];o.instance===e?a=o:t.push(o)}var i=a.instance["get"+m(a.propertyName)]();if(i!==u||n){for(u=i,c=!0;t.length;){var d=t.pop();d.instance.set(r({},d.propertyName,u))}c=!1}return i}function a(e,n){var t=[];for(l=s.length;l--;){var r=s[l];r.instance!==e||r.propertyName!==n&&void 0!==n||(r.subscription.unsubscribe(),t.push(l))}for(;t.length;)s.splice(t.pop(),1)}function o(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.onModified(t),i=s[0];return s.push({instance:e,propertyName:n,subscription:o}),r&&i&&t(i.instance,!0),{unsubscribe:function(){return a(e,n)}}}function i(){for(;s.length;)s.pop().subscription.unsubscribe()}if(n.propertyLinkMap[e])return n.propertyLinkMap[e];var u=null,s=[],l=0,c=!1,d={bind:o,unbind:a,unsubscribe:i};return n.propertyLinkMap[e]=d,d},e.listPropertyNames=function(){return o().map(function(e){return e.name})},e.getPropertyByName=function(e){return o().find(function(n){return n.name===e})},e.getProxySection=function(){return{id:n.proxyId,name:n.proxyGroup,ui:n.ui,properties:o()}},e.delete=function(){for(var t=Object.keys(n.propertyLinkMap),r=t.length;r--;)n.propertyLinkMap[t[r]].unsubscribe();for(r=n.propertyLinkSubscribers.length;r--;)n.propertyLinkSubscribers[r].unbind(e);i()}}function V(e,n,t){for(var r=e.delete,a=[],o=Object.keys(t),i=o.length;i--;){var u=o[i],s=t[u],l=s.modelKey,c=s.property,d=m(c),f=m(u);e["get"+f]=n[l]["get"+d],e["set"+f]=n[l]["set"+d],a.push(n[l].onModified(e.modified))}e.delete=function(){for(;a.length;)a.pop().unsubscribe();r()}}function k(e,n){function t(e){for(var t=Object.keys(e),r=t.length;r--;){var a=t[r];n[a].set(e[a])}}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n.this=e;for(var o=Object.keys(a),i=o.length;i--;)!function(){var u=o[i];n[u]=a[u];var s=r[u];e["set"+m(u)]=function(r){if(r!==n[u]){n[u]=r;t(s[r]),e.modified()}}}();o.length&&b(e,n,o)}Object.defineProperty(n,"__esModule",{value:!0}),n.EVENT_ABORT=n.VOID=void 0;var L=function(){function e(e,n){var t=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.setLoggerFunction=u,n.vtkLogMacro=s,n.vtkInfoMacro=l,n.vtkDebugMacro=c,n.vtkErrorMacro=d,n.vtkWarningMacro=f,n.capitalize=m,n.obj=h,n.get=b,n.set=x,n.setGet=T,n.getArray=_,n.setArray=A,n.setGetArray=w,n.algo=C,n.event=M,n.newInstance=O,n.chain=I,n.isVtkObject=S,n.traverseInstanceTree=P,n.debounce=E,n.throttle=R,n.keystore=N,n.proxy=D,n.proxyPropertyMapping=V,n.proxyPropertyState=k;var z=t(11),j=function(e){return e&&e.__esModule?e:{default:e}}(z),B=0,U=n.VOID=Symbol("void"),q={};["log","debug","info","warn","error","time","timeEnd","group","groupEnd"].forEach(function(e){q[e]=i}),e.console=console.hasOwnProperty("log")?console:q;var G={debug:i,error:e.console.error||i,info:e.console.info||i,log:e.console.log||i,warn:e.console.warn||i},W={enum:function(e,n,t){return function(r){if("string"==typeof r){if(void 0!==t.enum[r])return n[t.name]!==t.enum[r]&&(n[t.name]=t.enum[r],e.modified(),!0);throw d("Set Enum with invalid argument "+t+", "+r),new RangeError("Set Enum with invalid string argument")}if("number"==typeof r){if(n[t.name]!==r){if(-1!==Object.keys(t.enum).map(function(e){return t.enum[e]}).indexOf(r))return n[t.name]=r,e.modified(),!0;throw d("Set Enum outside numeric range "+t+", "+r),new RangeError("Set Enum outside numeric range")}return!1}throw d("Set Enum with invalid argument (String/Number) "+t+", "+r),new TypeError("Set Enum with invalid argument (String/Number)")}}},H=n.EVENT_ABORT=Symbol("Event abort"),K=1,Y="__root__";n.default={EVENT_ABORT:H,VOID:U,algo:C,capitalize:m,chain:I,enumToString:v,event:M,get:b,getArray:_,getCurrentGlobalMTime:o,getStateArrayMapFunc:g,isVtkObject:S,keystore:N,newInstance:O,obj:h,safeArrays:p,set:x,setArray:A,setGet:T,setGetArray:w,setLoggerFunction:u,traverseInstanceTree:P,vtkDebugMacro:c,vtkErrorMacro:d,vtkInfoMacro:l,vtkLogMacro:s,vtkWarningMacro:f,debounce:E,throttle:R,proxy:D,proxyPropertyMapping:V,proxyPropertyState:k}}).call(n,t(14))},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){return Ee("vtkMath::"+e+" - NOT IMPLEMENTED")}}function o(e,n){for(var t=0;t<3;t++){var r=e[t];e[t]=n[t],n[t]=r}}function i(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=[];n.length<e;)n.push(0);return n}function u(e){for(var n=1/0,t=0,r=e.length;t<r;++t)e[t]<n&&(n=e[t]);return n}function s(e){for(var n=-1/0,t=0,r=e.length;t<r;++t)n<e[t]&&(n=e[t]);return n}function l(e){for(var n=1;n<e;)n*=2;return n}function c(e){return e===l(e)}function d(e,n){for(var t=1,r=1;r<=n;++r)t*=(e-r+1)/r;return Math.floor(t)}function f(e,n){if(e<n)return 0;for(var t=i(n),r=0;r<n;++r)t[r]=r;return t}function m(e,n,t){for(var r=0,a=n-1;a>=0;--a)if(t[a]<e-n+a){for(var o=t[a]+1;a<n;)t[a++]=o++;r=1;break}return r}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+((arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)-e)*Math.random()}function v(e,n,t){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2]}function g(e,n,t){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}function h(e,n){e[0]*=n,e[1]*=n,e[2]*=n}function b(e,n){e[0]*=n,e[1]*=n}function y(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}function x(e,n,t){for(var r=0;r<3;r++)for(var a=0;a<3;a++)t[r][a]=e[r]*n[a]}function T(e,n,t){var r=e[1]*n[2]-e[2]*n[1],a=e[2]*n[0]-e[0]*n[2],o=e[0]*n[1]-e[1]*n[0];t[0]=r,t[1]=a,t[2]=o}function _(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;switch(n){case 1:return Math.abs(e);case 2:return Math.sqrt(e[0]*e[0]+e[1]*e[1]);case 3:return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);default:for(var t=0,r=0;r<n;r++)t+=e[r]*e[r];return Math.sqrt(t)}}function A(e){var n=_(e);return 0!==n&&(e[0]/=n,e[1]/=n,e[2]/=n),n}function w(e,n,t,r){var a=e[0]*e[0],o=e[1]*e[1],i=e[2]*e[2],u=Math.sqrt(a+o+i),s=void 0,l=void 0,c=void 0;a>o&&a>i?(s=0,l=1,c=2):o>i?(s=1,l=2,c=0):(s=2,l=0,c=1);var d=e[s]/u,f=e[l]/u,m=e[c]/u,p=Math.sqrt(d*d+m*m);if(0!==r){var v=Math.sin(r),g=Math.cos(r);n&&(n[s]=(m*g-d*f*v)/p,n[l]=v*p,n[c]=(-d*g-f*m*v)/p),t&&(t[s]=(-m*v-d*f*g)/p,t[l]=g*p,t[c]=(d*v-f*m*g)/p)}else n&&(n[s]=m/p,n[l]=0,n[c]=-d/p),t&&(t[s]=-d*f/p,t[l]=p,t[c]=-f*m/p)}function C(e,n,t){var r=y(n,n);if(0===r)return t[0]=0,t[1]=0,t[2]=0,!1;for(var a=y(e,n)/r,o=0;o<3;o++)t[o]=n[o];return h(t,a),!0}function M(e,n){return e[0]*n[0]+e[1]*n[1]}function O(e,n,t){var r=M(n,n);if(0===r)return t[0]=0,t[1]=0,!1;for(var a=M(e,n)/r,o=0;o<2;o++)t[o]=n[o];return b(t,a),!0}function I(e,n){return(e[0]-n[0])*(e[0]-n[0])+(e[1]-n[1])*(e[1]-n[1])+(e[2]-n[2])*(e[2]-n[2])}function S(e,n){var t=[0,0,0];return T(e,n,t),Math.atan2(_(t),y(e,n))}function P(e,n,t){var r=Math.abs(e-t);return 1/Math.sqrt(2*Math.PI*n)*Math.exp(-Math.pow(r,2)/(2*n))}function E(e,n,t){var r=Math.abs(e-t);return Math.exp(-Math.pow(r,2)/(2*n))}function R(e,n,t){for(var r=0;r<2;r++)for(var a=0;a<2;a++)t[r][a]=e[r]*n[a]}function N(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function D(e){var n=N(e);return 0!==n&&(e[0]/=n,e[1]/=n),n}function V(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return 2===n.length?n[0][0]*n[1][1]-n[1][0]*n[0][1]:4===n.length?n[0]*n[3]-n[1]*n[2]:Number.NaN}function k(e,n){for(var t=void 0,r=void 0,a=void 0,i=[0,0,0],u=0;u<3;u++)a=Math.abs(e[u][0]),(r=Math.abs(e[u][1]))>a&&(a=r),(r=Math.abs(e[u][2]))>a&&(a=r),i[u]=1/a;a=i[0]*Math.abs(e[0][0]),t=0,(r=i[1]*Math.abs(e[1][0]))>=a&&(a=r,t=1),(r=i[2]*Math.abs(e[2][0]))>=a&&(t=2),0!==t&&(o(e[t],e[0]),i[t]=i[0]),n[0]=t,e[1][0]/=e[0][0],e[2][0]/=e[0][0],e[1][1]-=e[1][0]*e[0][1],e[2][1]-=e[2][0]*e[0][1],a=i[1]*Math.abs(e[1][1]),t=1,(r=i[2]*Math.abs(e[2][1]))>=a&&(t=2,o(e[2],e[1]),i[2]=i[1]),n[1]=t,e[2][1]/=e[1][1],e[1][2]-=e[1][0]*e[0][2],e[2][2]-=e[2][0]*e[0][2]+e[2][1]*e[1][2],n[2]=2}function L(e,n,t){var r=t[n[0]];t[n[0]]=t[0],t[0]=r,r=t[n[1]],t[n[1]]=t[1],t[1]=r-e[1][0]*t[0],r=t[n[2]],t[n[2]]=t[2],t[2]=r-e[2][0]*t[0]-e[2][1]*t[1],t[2]/=e[2][2],t[1]=(t[1]-e[1][2]*t[2])/e[1][1],t[0]=(t[0]-e[0][1]*t[1]-e[0][2]*t[2])/e[0][0]}function F(e,n,t){var r=e[0][0],a=e[0][1],o=e[0][2],i=e[1][0],u=e[1][1],s=e[1][2],l=e[2][0],c=e[2][1],d=e[2][2],f=+V(u,c,s,d),m=-V(i,l,s,d),p=+V(i,l,u,c),v=-V(a,c,o,d),g=+V(r,l,o,d),h=-V(r,l,a,c),b=+V(a,u,o,s),y=-V(r,i,o,s),x=+V(r,i,a,u),T=r*f+a*m+o*p,_=f*n[0]+v*n[1]+b*n[2],A=m*n[0]+g*n[1]+y*n[2],w=p*n[0]+h*n[1]+x*n[2];t[0]=_/T,t[1]=A/T,t[2]=w/T}function z(e,n,t){var r=e[0][0]*n[0]+e[0][1]*n[1]+e[0][2]*n[2],a=e[1][0]*n[0]+e[1][1]*n[1]+e[1][2]*n[2],o=e[2][0]*n[0]+e[2][1]*n[1]+e[2][2]*n[2];t[0]=r,t[1]=a,t[2]=o}function j(e,n,t){for(var r=[[0,0,0],[0,0,0],[0,0,0]],a=0;a<3;a++)r[0][a]=e[0][0]*n[0][a]+e[0][1]*n[1][a]+e[0][2]*n[2][a],r[1][a]=e[1][0]*n[0][a]+e[1][1]*n[1][a]+e[1][2]*n[2][a],r[2][a]=e[2][0]*n[0][a]+e[2][1]*n[1][a]+e[2][2]*n[2][a];for(var o=0;o<3;o++)t[o][0]=r[o][0],t[o][1]=r[o][1],t[o][2]=r[o][2]}function B(e,n,t,r,a,o,i){r!==a&&Ee("Number of columns of A must match number of rows of B.");for(var u=0;u<t;u++)for(var s=0;s<o;s++){i[u][s]=0;for(var l=0;l<r;l++)i[u][s]+=e[u][l]*n[l][s]}}function U(e,n){var t=void 0;t=e[1][0],n[1][0]=e[0][1],n[0][1]=t,t=e[2][0],n[2][0]=e[0][2],n[0][2]=t,t=e[2][1],n[2][1]=e[1][2],n[1][2]=t,n[0][0]=e[0][0],n[1][1]=e[1][1],n[2][2]=e[2][2]}function q(e,n){var t=e[0][0],r=e[0][1],a=e[0][2],o=e[1][0],i=e[1][1],u=e[1][2],s=e[2][0],l=e[2][1],c=e[2][2],d=+V(i,l,u,c),f=-V(o,s,u,c),m=+V(o,s,i,l),p=-V(r,l,a,c),v=+V(t,s,a,c),g=-V(t,s,r,l),h=+V(r,i,a,u),b=-V(t,o,a,u),y=+V(t,o,r,i),x=t*d+r*f+a*m;n[0][0]=d/x,n[1][0]=f/x,n[2][0]=m/x,n[0][1]=p/x,n[1][1]=v/x,n[2][1]=g/x,n[0][2]=h/x,n[1][2]=b/x,n[2][2]=y/x}function G(e){for(var n=0;n<3;n++)e[n][0]=e[n][1]=e[n][2]=0,e[n][n]=1}function W(e){return e[0][0]*e[1][1]*e[2][2]+e[1][0]*e[2][1]*e[0][2]+e[2][0]*e[0][1]*e[1][2]-e[0][0]*e[2][1]*e[1][2]-e[1][0]*e[0][1]*e[2][2]-e[2][0]*e[1][1]*e[0][2]}function H(e,n){var t=e[0]*e[0],r=e[0]*e[1],a=e[0]*e[2],o=e[0]*e[3],i=e[1]*e[1],u=e[2]*e[2],s=e[3]*e[3],l=e[1]*e[2],c=e[1]*e[3],d=e[2]*e[3],f=i+u+s,m=1/(t+f),p=(t-f)*m;m*=2,n[0][0]=i*m+p,n[1][0]=(l+o)*m,n[2][0]=(c-a)*m,n[0][1]=(l-o)*m,n[1][1]=u*m+p,n[2][1]=(d+r)*m,n[0][2]=(c+a)*m,n[1][2]=(d-r)*m,n[2][2]=s*m+p}function K(e,n){function t(e,t){return e===n[t]}return!e.length!==n.length&&e.every(t)}function Y(e,n,t,r){var a=void 0,o=void 0,u=void 0,s=void 0,l=void 0,c=void 0,d=void 0,f=void 0,m=void 0,p=void 0,v=void 0,g=void 0,h=void 0,b=void 0,y=void 0,x=void 0,T=i(n),_=i(n),A=function(e,n,t,r,a){b=e[n][t],h=e[r][a],e[n][t]=b-g*(h+b*p),e[r][a]=h+g*(b-h*p)};for(l=0;l<n;l++){for(s=0;s<n;s++)r[l][s]=0;r[l][l]=1}for(l=0;l<n;l++)T[l]=t[l]=e[l][l],_[l]=0;for(a=0;a<De;a++){for(v=0,l=0;l<n-1;l++)for(s=l+1;s<n;s++)v+=Math.abs(e[l][s]);if(0===v)break;for(d=a<3?.2*v/(n*n):0,l=0;l<n-1;l++)for(s=l+1;s<n;s++)if(b=100*Math.abs(e[l][s]),a>3&&Math.abs(t[l])+b===Math.abs(t[l])&&Math.abs(t[s])+b===Math.abs(t[s]))e[l][s]=0;else if(Math.abs(e[l][s])>d){for(h=t[s]-t[l],Math.abs(h)+b===Math.abs(h)?m=e[l][s]/h:(f=.5*h/e[l][s],m=1/(Math.abs(f)+Math.sqrt(1+f*f)),f<0&&(m=-m)),y=1/Math.sqrt(1+m*m),g=m*y,p=g/(1+y),h=m*e[l][s],_[l]-=h,_[s]+=h,t[l]-=h,t[s]+=h,e[l][s]=0,o=0;o<=l-1;o++)A(e,o,l,o,s);for(o=l+1;o<=s-1;o++)A(e,l,o,o,s);for(o=s+1;o<n;o++)A(e,l,o,s,o);for(o=0;o<n;o++)A(r,o,l,o,s)}for(l=0;l<n;l++)T[l]+=_[l],t[l]=T[l],_[l]=0}if(a>=De)return Re("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(o=0;o<n-1;o++){for(u=o,x=t[u],a=o+1;a<n;a++)t[a]>=x&&(u=a,x=t[u]);if(u!==o)for(t[u]=t[o],t[o]=x,a=0;a<n;a++)x=r[a][o],r[a][o]=r[a][u],r[a][u]=x}var w=(n>>1)+(1&n);for(o=0;o<n;o++){for(c=0,a=0;a<n;a++)r[a][o]>=0&&c++;if(c<w)for(a=0;a<n;a++)r[a][o]*=-1}return 1}function X(e,n){var t=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];t[0][0]=e[0][0]+e[1][1]+e[2][2],t[1][1]=e[0][0]-e[1][1]-e[2][2],t[2][2]=-e[0][0]+e[1][1]-e[2][2],t[3][3]=-e[0][0]-e[1][1]+e[2][2],t[0][1]=t[1][0]=e[2][1]-e[1][2],t[0][2]=t[2][0]=e[0][2]-e[2][0],t[0][3]=t[3][0]=e[1][0]-e[0][1],t[1][2]=t[2][1]=e[1][0]+e[0][1],t[1][3]=t[3][1]=e[0][2]+e[2][0],t[2][3]=t[3][2]=e[2][1]+e[1][2];for(var r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=[0,0,0,0],o=[0,0,0,0],i=[0,0,0,0],u=0;u<4;u++)o[u]=t[u],i[u]=r[u];Y(o,4,a,i),n[0]=r[0][0],n[1]=r[1][0],n[2]=r[2][0],n[3]=r[3][0]}function Z(e,n,t){var r=e[0]*n[0],a=e[0]*n[1],o=e[0]*n[2],i=e[0]*n[3],u=e[1]*n[0],s=e[1]*n[1],l=e[1]*n[2],c=e[1]*n[3],d=e[2]*n[0],f=e[2]*n[1],m=e[2]*n[2],p=e[2]*n[3],v=e[3]*n[0],g=e[3]*n[1],h=e[3]*n[2],b=e[3]*n[3];t[0]=r-s-m-b,t[1]=a+u+p-h,t[2]=o-c+d+g,t[3]=i+l-f+v}function J(e,n){for(var t=0;t<3;t++)n[0][t]=e[0][t],n[1][t]=e[1][t],n[2][t]=e[2][t];for(var r=i(3),a=i(3),u=void 0,s=0;s<3;s++){var l=Math.abs(n[s][0]),c=Math.abs(n[s][1]),d=Math.abs(n[s][2]);u=c>l?c:l,u=d>u?d:u,r[s]=1,0!==u&&(r[s]/=u)}var f=Math.abs(n[0][0])*r[0],m=Math.abs(n[1][0])*r[1],p=Math.abs(n[2][0])*r[2];a[0]=0,u=f,m>=u&&(u=m,a[0]=1),p>=u&&(a[0]=2),0!==a[0]&&(o(n[a[0]],n[0]),r[a[0]]=r[0]);var v=Math.abs(n[1][1])*r[1],g=Math.abs(n[2][1])*r[2];a[1]=1,u=v,g>=u&&(a[1]=2,o(n[2],n[1])),a[2]=2;var h=0;if(W(n)<0){h=1;for(var b=0;b<3;b++)n[0][b]=-n[0][b],n[1][b]=-n[1][b],n[2][b]=-n[2][b]}var y=i(4);if(X(n,y),H(y,n),h)for(var x=0;x<3;x++)n[0][x]=-n[0][x],n[1][x]=-n[1][x],n[2][x]=-n[2][x];1!==a[1]&&o(n[a[1]],n[1]),0!==a[0]&&o(n[a[0]],n[0])}function Q(e,n,t){var r=void 0,a=void 0,u=void 0,s=void 0,l=void 0,c=void 0,d=[i(3),i(3),i(3)],f=i(3),m=i(3);for(r=0;r<3;r++)d[r][0]=e[r][0],d[r][1]=e[r][1],d[r][2]=e[r][2],f[r]=d[r],m[r]=t[r];if(Y(f,3,n,m),n[0]===n[1]&&n[0]===n[2])return void G(t);for(U(t,t),r=0;r<3;r++)if(n[(r+1)%3]===n[(r+2)%3]){for(c=Math.abs(t[r][0]),s=0,a=1;a<3;a++)c<(l=Math.abs(t[r][a]))&&(c=l,s=a);return s!==r&&(l=n[s],n[s]=n[r],n[r]=l,o(t[r],t[s])),t[s][s]<0&&(t[s][0]=-t[s][0],t[s][1]=-t[s][1],t[s][2]=-t[s][2]),a=(s+1)%3,u=(s+2)%3,t[a][0]=0,t[a][1]=0,t[a][2]=0,t[a][a]=1,T(t[s],t[a],t[u]),A(t[u]),T(t[u],t[s],t[a]),void U(t,t)}for(c=Math.abs(t[0][0]),s=0,r=1;r<3;r++)c<(l=Math.abs(t[r][0]))&&(c=l,s=r);for(0!==s&&(l=n[s],n[s]=n[0],n[0]=l,o(t[s],t[0])),Math.abs(t[1][1])<Math.abs(t[2][1])&&(l=n[2],n[2]=n[1],n[1]=l,o(t[2],t[1])),r=0;r<2;r++)t[r][r]<0&&(t[r][0]=-t[r][0],t[r][1]=-t[r][1],t[r][2]=-t[r][2]);W(t)<0&&(t[2][0]=-t[2][0],t[2][1]=-t[2][1],t[2][2]=-t[2][2]),U(t,t)}function $(e,n,t,r){var a=void 0,o=[i(3),i(3),i(3)];for(a=0;a<3;a++)o[0][a]=e[0][a],o[1][a]=e[1][a],o[2][a]=e[2][a];var u=W(o);if(u<0)for(a=0;a<3;a++)o[0][a]=-o[0][a],o[1][a]=-o[1][a],o[2][a]=-o[2][a];J(o,n),U(o,o),j(o,n,r),Q(r,t,r),j(n,r,n),U(r,r),u<0&&(t[0]=-t[0],t[1]=-t[1],t[2]=-t[2])}function ee(e,n,t){var r=void 0,a=void 0,o=void 0,u=void 0,s=0,l=void 0,c=void 0,d=void 0,f=i(t);for(r=0;r<t;r++){for(u=0,a=0;a<t;a++)(d=Math.abs(e[r][a]))>u&&(u=d);if(0===u)return Re("Unable to factor linear system"),0;f[r]=1/u}for(a=0;a<t;a++){for(r=0;r<a;r++){for(l=e[r][a],o=0;o<r;o++)l-=e[r][o]*e[o][a];e[r][a]=l}for(u=0,r=a;r<t;r++){for(l=e[r][a],o=0;o<a;o++)l-=e[r][o]*e[o][a];e[r][a]=l,(c=f[r]*Math.abs(l))>=u&&(u=c,s=r)}if(a!==s){for(o=0;o<t;o++)c=e[s][o],e[s][o]=e[a][o],e[a][o]=c;f[s]=f[a]}if(n[a]=s,Math.abs(e[a][a])<=Ve)return Re("Unable to factor linear system"),0;if(a!==t-1)for(c=1/e[a][a],r=a+1;r<t;r++)e[r][a]*=c}return 1}function ne(e,n,t,r){var a=void 0,o=void 0,i=void 0,u=void 0,s=void 0;for(i=-1,a=0;a<r;a++){if(u=n[a],s=t[u],t[u]=t[a],i>=0)for(o=i;o<=a-1;o++)s-=e[a][o]*t[o];else 0!==s&&(i=a);t[a]=s}for(a=r-1;a>=0;a--){for(s=t[a],o=a+1;o<r;o++)s-=e[a][o]*t[o];t[a]=s/e[a][a]}}function te(e,n,t){if(2===t){var r=i(2),a=V(e[0][0],e[0][1],e[1][0],e[1][1]);return 0===a?0:(r[0]=(e[1][1]*n[0]-e[0][1]*n[1])/a,r[1]=(-e[1][0]*n[0]+e[0][0]*n[1])/a,n[0]=r[0],n[1]=r[1],1)}if(1===t)return 0===e[0][0]?0:(n[0]/=e[0][0],1);var o=i(t);return 0===ee(e,o,t)?0:(ne(e,o,n,t),1)}function re(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=r||i(t),u=a||i(t);if(0===ee(e,o,t,u))return 0;for(var s=0;s<t;s++){for(var l=0;l<t;l++)u[l]=0;u[s]=1,ne(e,o,u,t);for(var c=0;c<t;c++)n[c][s]=u[c]}return 1}function ae(e,n){for(var t=+Number.MAX_VALUE,r=-Number.MAX_VALUE,a=0;a<n;a++)for(var o=a;o<n;o++)Math.abs(e[a][o])>qe&&(r=Math.abs(e[a][o]));for(var i=0;i<n;i++)Math.abs(e[i][i])<Ue&&(t=Math.abs(e[i][i]));return 0===t?Number.MAX_VALUE:r/t}function oe(e,n,t){return Y(e,3,n,t)}function ie(e,n,t,r){if(e<t)return Re("Insufficient number of samples. Underdetermined."),0;var a=void 0,o=void 0,u=void 0,s=i(t),l=i(t),c=i(t);for(a=0;a<t;a++)for(c[a]=i(t),s[a]=i(t),o=0;o<t;o++)s[a][o]=0;for(u=0;u<e;u++)for(a=0;a<t;a++)for(o=a;o<t;o++)s[a][o]+=n[u][a]*n[u][o];for(a=0;a<t;a++)for(o=0;o<a;o++)s[a][o]=s[o][a];for(Y(s,t,l,c),a=0;a<t;a++)r[a][0]=c[a][t-1];return 1}function ue(e,n,t,r,a,o){var u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(e<t||e<a)return Re("Insufficient number of samples. Underdetermined."),0;var s=i(a),l=1,c=void 0,d=0,f=void 0,m=void 0,p=void 0,v=0;if(u){for(m=0;m<a;m++)s[m]=1;for(f=0;f<e;f++)for(m=0;m<a;m++)Math.abs(r[f][m])>Ve&&(l=0,s[m]=0);if(l&&1===a)return Re("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),ie(e,n,t,o);if(l)v=1;else for(m=0;m<a;m++)s[m]&&(v=1)}if(v){for(c=i(t),m=0;m<t;m++)c[m]=[0];d=ie(e,n,t,c)}var g=i(t),h=i(t),b=i(t);for(f=0;f<t;f++){for(g[f]=i(t),h[f]=i(t),m=0;m<t;m++)g[f][m]=0,h[f][m]=0;for(b[f]=i(a),m=0;m<a;m++)b[f][m]=0}for(p=0;p<e;p++)for(f=0;f<t;f++){for(m=f;m<t;m++)g[f][m]+=n[p][f]*n[p][m];for(m=0;m<a;m++)b[f][m]+=n[p][f]*r[p][m]}for(f=0;f<t;f++)for(m=0;m<f;m++)g[f][m]=g[m][f];var y=re(g,h,t);if(y)for(f=0;f<t;f++)for(m=0;m<a;m++)for(o[f][m]=0,p=0;p<t;p++)o[f][m]+=h[f][p]*b[p][m];if(v)for(m=0;m<a;m++)if(s[m])for(f=0;f<t;f++)o[f][m]=c[f][0];return v?d&&y:y}function se(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,.5,1];switch(e.length){case 3:return n[0]=17*parseInt(e[0],16)/255,n[1]=17*parseInt(e[1],16)/255,n[2]=17*parseInt(e[2],16)/255,n;case 4:return n[0]=17*parseInt(e[1],16)/255,n[1]=17*parseInt(e[2],16)/255,n[2]=17*parseInt(e[3],16)/255,n;case 6:return n[0]=parseInt(e.substr(0,2),16)/255,n[1]=parseInt(e.substr(2,2),16)/255,n[2]=parseInt(e.substr(4,2),16)/255,n;case 7:return n[0]=parseInt(e.substr(1,2),16)/255,n[1]=parseInt(e.substr(3,2),16)/255,n[2]=parseInt(e.substr(5,2),16)/255,n;case 9:return n[0]=parseInt(e.substr(1,2),16)/255,n[1]=parseInt(e.substr(3,2),16)/255,n[2]=parseInt(e.substr(5,2),16)/255,n[3]=parseInt(e.substr(7,2),16)/255,n;default:return n}}function le(e,n){var t=void 0,r=void 0,a=Me(e,3),o=a[0],i=a[1],u=a[2],s=o,l=o;i>s?s=i:i<l&&(l=i),u>s?s=u:u<l&&(l=u);var c=s;r=c>0?(s-l)/s:0,r>0?(t=o===s?1/6*(i-u)/(s-l):i===s?1/3+1/6*(u-o)/(s-l):2/3+1/6*(o-i)/(s-l))<0&&(t+=1):t=0,n[0]=t,n[1]=r,n[2]=c}function ce(e,n){var t=Me(e,3),r=t[0],a=t[1],o=t[2],i=void 0,u=void 0,s=void 0;r>1/6&&r<=1/3?(u=1,i=(1/3-r)/(1/6),s=0):r>1/3&&r<=.5?(u=1,s=(r-1/3)/(1/6),i=0):r>.5&&r<=2/3?(s=1,u=(2/3-r)/(1/6),i=0):r>2/3&&r<=5/6?(s=1,i=(r-2/3)/(1/6),u=0):r>5/6&&r<=1?(i=1,s=(1-r)/(1/6),u=0):(i=1,u=r/(1/6),s=0),i=a*i+(1-a),u=a*u+(1-a),s=a*s+(1-a),i*=o,u*=o,s*=o,n[0]=i,n[1]=u,n[2]=s}function de(e,n){var t=Me(e,3),r=t[0],a=t[1],o=t[2],i=(r+16)/116,u=a/500+i,s=i-o/200;i=Math.pow(i,3)>.008856?Math.pow(i,3):(i-16/116)/7.787,u=Math.pow(u,3)>.008856?Math.pow(u,3):(u-16/116)/7.787,s=Math.pow(s,3)>.008856?Math.pow(s,3):(s-16/116)/7.787;n[0]=.9505*u,n[1]=1*i,n[2]=1.089*s}function fe(e,n){var t=Me(e,3),r=t[0],a=t[1],o=t[2],i=r/.9505,u=a/1,s=o/1.089;i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,n[0]=116*u-16,n[1]=500*(i-u),n[2]=200*(u-s)}function me(e,n){var t=Me(e,3),r=t[0],a=t[1],o=t[2],i=3.2406*r+-1.5372*a+-.4986*o,u=-.9689*r+1.8758*a+.0415*o,s=.0557*r+-.204*a+1.057*o;i>.0031308?i=1.055*Math.pow(i,1/2.4)-.055:i*=12.92,u>.0031308?u=1.055*Math.pow(u,1/2.4)-.055:u*=12.92,s>.0031308?s=1.055*Math.pow(s,1/2.4)-.055:s*=12.92;var l=i;l<u&&(l=u),l<s&&(l=s),l>1&&(i/=l,u/=l,s/=l),i<0&&(i=0),u<0&&(u=0),s<0&&(s=0),n[0]=i,n[1]=u,n[2]=s}function pe(e,n){var t=Me(e,3),r=t[0],a=t[1],o=t[2];r>.04045?r=Math.pow((r+.055)/1.055,2.4):r/=12.92,a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,o>.04045?o=Math.pow((o+.055)/1.055,2.4):o/=12.92,n[0]=.4124*r+.3576*a+.1805*o,n[1]=.2126*r+.7152*a+.0722*o,n[2]=.0193*r+.1192*a+.9505*o}function ve(e,n){var t=[0,0,0];pe(e,t),fe(t,n)}function ge(e,n){var t=[0,0,0];de(e,t),me(t,n)}function he(e){e[0]=1,e[1]=-1,e[2]=1,e[3]=-1,e[4]=1,e[5]=-1}function be(e){return!(e[1]-e[0]<0)}function ye(e,n,t){return e<n?n:e>t?t:e}function xe(e,n){var t=0;return n[0]!==n[1]&&(t=e<n[0]?n[0]:e>n[1]?n[1]:e,t=(t-n[0])/(n[1]-n[0])),t}function Te(e,n){if(!e||!n)return 0;for(var t=0;t<6;t+=2)if(e[t]<n[t]||e[t]>n[t+1]||e[t+1]<n[t]||e[t+1]>n[t+1])return 0;return 1}function _e(e,n,t){if(!e||!n)return 0;for(var r=0;r<6;r+=2)if(e[r]+t[r/2]<n[r]||e[r]-t[r/2]>n[r+1]||e[r+1]+t[r/2]<n[r]||e[r+1]-t[r/2]>n[r+1])return 0;return 1}function Ae(e,n,t){if(!e||!n||!t)return 0;for(var r=0;r<3;r++)if(e[r]+t[r]<n[2*r]||e[r]-t[r]>n[2*r+1])return 0;return 1}function we(e,n,t,r){for(var a=i(3),o=i(3),u=i(3),s=i(3),l=i(3),c=i(3),d=0;d<3;++d)a[d]=e[d]-n[d],o[d]=n[d]-t[d],u[d]=t[d]-e[d],s[d]=-a[d],l[d]=-o[d],c[d]=-u[d];var f=_(s),m=_(l),p=_(u),v=i(3);T(a,o,v);for(var g=_(v),h=f*m*p/(2*g),b=2*g*g,x=m*m*y(a,c)/b,A=p*p*y(s,o)/b,w=f*f*y(u,l)/b,C=0;C<3;++C)r[C]=x*e[C]+A*n[C]+w*t[C];return h}function Ce(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}Object.defineProperty(n,"__esModule",{value:!0});var Me=function(){function e(e,n){var t=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Oe=t(50),Ie=r(Oe),Se=t(0),Pe=r(Se),Ee=Pe.default.vtkErrorMacro,Re=Pe.default.vtkWarningMacro,Ne=0,De=20,Ve=1e-12,ke=function(){return Math.PI},Le=function(e){return e/180*Math.PI},Fe=function(e){return 180*e/Math.PI},ze=Math.round,je=Math.floor,Be=Math.ceil,Ue=Math.min,qe=Math.max,Ge=a("ceilLog2"),We=a("factorial"),He=function(e){(0,Ie.default)(""+e,{global:!0}),Ne=e},Ke=function(){return Ne},Ye=a("gaussian"),Xe=a("GetScalarTypeFittingRange"),Ze=a("GetAdjustedScalarRange"),Je=function(e){return!Number.isFinite(e)},Qe=Number.isFinite,$e=Number.isNaN;n.default={Pi:ke,radiansFromDegrees:Le,degreesFromRadians:Fe,round:ze,floor:je,ceil:Be,ceilLog2:Ge,min:Ue,max:qe,arrayMin:u,arrayMax:s,isPowerOfTwo:c,nearestPowerOfTwo:l,factorial:We,binomial:d,beginCombination:f,nextCombination:m,randomSeed:He,getSeed:Ke,random:p,gaussian:Ye,add:v,subtract:g,multiplyScalar:h,multiplyScalar2D:b,dot:y,outer:x,cross:T,norm:_,normalize:A,perpendiculars:w,projectVector:C,projectVector2D:O,distance2BetweenPoints:I,angleBetweenVectors:S,gaussianAmplitude:P,gaussianWeight:E,dot2D:M,outer2D:R,norm2D:N,normalize2D:D,determinant2x2:V,LUFactor3x3:k,LUSolve3x3:L,linearSolve3x3:F,multiply3x3_vect3:z,multiply3x3_mat3:j,multiplyMatrix:B,transpose3x3:U,invert3x3:q,identity3x3:G,determinant3x3:W,quaternionToMatrix3x3:H,areMatricesEqual:K,matrix3x3ToQuaternion:X,multiplyQuaternion:Z,orthogonalize3x3:J,diagonalize3x3:Q,singularValueDecomposition3x3:$,solveLinearSystem:te,invertMatrix:re,luFactorLinearSystem:ee,luSolveLinearSystem:ne,estimateMatrixCondition:ae,jacobi:oe,jacobiN:Y,solveHomogeneousLeastSquares:ie,solveLeastSquares:ue,hex2float:se,rgb2hsv:le,hsv2rgb:ce,lab2xyz:de,xyz2lab:fe,xyz2rgb:me,rgb2xyz:pe,rgb2lab:ve,lab2rgb:ge,uninitializeBounds:he,areBoundsInitialized:be,clampValue:ye,clampAndNormalizeValue:xe,getScalarTypeFittingRange:Xe,getAdjustedScalarRange:Ze,extentIsWithinOtherExtent:Te,boundsIsWithinOtherBounds:_e,pointIsWithinBounds:Ae,solve3PointCircle:we,inf:1/0,negInf:-1/0,isInf:Je,isNan:$e,isNaN:$e,isFinite:Qe,createUninitializedBounds:Ce}},function(e,n,t){"use strict";n.glMatrix=t(6),n.mat2=t(65),n.mat2d=t(66),n.mat3=t(29),n.mat4=t(67),n.quat=t(68),n.vec2=t(69),n.vec3=t(30),n.vec4=t(31)},function(e,n,t){"use strict";function r(e,n){n.classHierarchy.push("vtkViewNode"),e.build=function(e){},e.render=function(e){},e.traverse=function(t){var r=t.getTraverseOperation(),a=e[r];if(a)return void a(t);e.apply(t,!0);for(var o=0;o<n.children.length;o++)n.children[o].traverse(t);e.apply(t,!1)},e.apply=function(n,t){var r=e[n.getOperation()];r&&r(t,n)},e.getViewNodeFor=function(t){if(n.renderable===t)return e;for(var r=0;r<n.children.length;++r){var a=n.children[r],o=a.getViewNodeFor(t);if(o)return o}},e.getFirstAncestorOfType=function(e){return n.parent?n.parent.isA(e)?n.parent:n.parent.getFirstAncestorOfType(e):null},e.addMissingNode=function(t){if(t){var r=n.renderableChildMap.get(t);if(void 0!==r)r.setVisited(!0);else{var a=e.createViewNode(t);a&&(a.setParent(e),a.setVisited(!0),n.renderableChildMap.set(t,a),n.children.push(a))}}},e.addMissingNodes=function(t){if(t&&t.length)for(var r=0;r<t.length;++r){var a=t[r],o=n.renderableChildMap.get(a);if(void 0!==o)o.setVisited(!0);else{var i=e.createViewNode(a);i&&(i.setParent(e),i.setVisited(!0),n.renderableChildMap.set(a,i),n.children.push(i))}}},e.prepareNodes=function(){for(var e=0;e<n.children.length;++e)n.children[e].setVisited(!1)},e.setVisited=function(e){n.visited=e},e.removeUnusedNodes=function(){for(var e=null,t=0;t<n.children.length;++t){var r=n.children[t];if(r.getVisited())r.setVisited(!1);else{var a=r.getRenderable();a&&n.renderableChildMap.delete(a),e||(e=[]),e.push(r)}}e&&(n.children=n.children.filter(function(n){return!e.includes(n)}))},e.createViewNode=function(e){if(!n.myFactory)return u("Cannot create view nodes without my own factory"),null;var t=n.myFactory.createNode(e);return t&&t.setRenderable(e),t}}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,l,t),i.default.obj(e,n),i.default.event(e,n,"event"),n.renderableChildMap=new Map,i.default.get(e,n,["visited"]),i.default.setGet(e,n,["parent","renderable","myFactory"]),i.default.getArray(e,n,["children"]),r(e,n)}Object.defineProperty(n,"__esModule",{value:!0});var o=t(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=i.default.vtkErrorMacro,s=["Build","Render"],l={parent:null,renderable:null,myFactory:null,children:[],visited:!1},c=i.default.newInstance(a,"vtkViewNode");n.default={newInstance:c,extend:a,PASS_TYPES:s}},function(e,n){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=Number.MAX_VALUE,n=-Number.MAX_VALUE,t=0,r=0;return{add:function(a){e>a&&(e=a),n<a&&(n=a),t++,r+=a},get:function(){return{min:e,max:n,count:t,sum:r,mean:r/t}},getRange:function(){return{min:e,max:n}}}}function o(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=a(),o=e.length,i=0;if(n<0&&t>1){for(var u=0;u<o;u+=t){i=0;for(var s=0;s<t;s++)i+=e[u+s]*e[u+s];i=Math.pow(i,.5),r.add(i)}return r.getRange()}for(var l=n<0?0:n,c=l;c<o;c+=t)r.add(e[c]);return r.getRange()}function i(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=e||[];t.length<=n;)t.push(null);return t}function u(e){return Object.prototype.toString.call(e).split(" ")[1].slice(0,-1)}function s(e){for(var n=e.getNumberOfComponents(),t=0,r=0;r<e.getNumberOfTuples();++r){var a=g.default.norm(e.getTuple(r),n);a>t&&(t=a)}return t}function l(e,n){function t(){n.ranges=null,e.modified()}n.classHierarchy.push("vtkDataArray"),e.getElementComponentSize=function(){return n.values.BYTES_PER_ELEMENT},e.getComponent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n.values[e*n.numberOfComponents+t]},e.setComponent=function(e,r,a){a!==n.values[e*n.numberOfComponents+r]&&(n.values[e*n.numberOfComponents+r]=a,t())},e.getData=function(){return n.values},e.getRange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=e<0?n.numberOfComponents:e,r=null;return n.ranges||(n.ranges=i(n.ranges,n.numberOfComponents)),(r=n.ranges[t])?(n.rangeTuple[0]=r.min,n.rangeTuple[1]=r.max,n.rangeTuple):(r=o(n.values,e,n.numberOfComponents),n.ranges[t]=r,n.rangeTuple[0]=r.min,n.rangeTuple[1]=r.max,n.rangeTuple)},e.setTuple=function(e,t){for(var r=e*n.numberOfComponents,a=0;a<n.numberOfComponents;a++)n.values[r+a]=t[a]},e.getTuple=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,r=n.numberOfComponents||1;t.length&&(t.length=r);for(var a=e*r,o=0;o<r;o++)t[o]=n.values[a+o];return t},e.getTupleLocation=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*n.numberOfComponents},e.getNumberOfComponents=function(){return n.numberOfComponents},e.getNumberOfValues=function(){return n.values.length},e.getNumberOfTuples=function(){return n.values.length/n.numberOfComponents},e.getDataType=function(){return n.dataType},e.newClone=function(){return T({empty:!0,name:n.name,dataType:n.dataType,numberOfComponents:n.numberOfComponents})},e.getName=function(){return n.name||(e.modified(),n.name="vtkDataArray"+e.getMTime()),n.name},e.setData=function(e,r){n.values=e,n.size=e.length,n.dataType=u(e),r&&(n.numberOfComponents=r),n.size%n.numberOfComponents!=0&&(n.numberOfComponents=1),t()},e.shallowCopy=function(){return T(Object.assign({},n))},e.getState=function(){var t=Object.assign({},n,{vtkClass:e.getClassName()});t.values=Array.from(t.values),delete t.buffer,Object.keys(t).forEach(function(e){t[e]||delete t[e]});var r={};return Object.keys(t).sort().forEach(function(e){r[e]=t[e]}),r.mtime&&delete r.mtime,r}}function c(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(n,x,t),!n.empty&&!n.values&&!n.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");n.values?Array.isArray(n.values)&&(n.values=window[n.dataType].from(n.values)):n.values=new window[n.dataType](n.size),n.values&&(n.size=n.values.length,n.dataType=u(n.values)),p.default.obj(e,n),p.default.set(e,n,["name","numberOfComponents"]),l(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=n.STATIC=void 0,n.extend=c;var d=t(8),f=r(d),m=t(0),p=r(m),v=t(1),g=r(v),h=f.default.DefaultDataType,b=[],y=n.STATIC={computeRange:o,createRangeHelper:a,getDataType:u,getMaxNorm:s},x={name:"",numberOfComponents:1,size:0,dataType:h,rangeTuple:[0,0]},T=n.newInstance=p.default.newInstance(c,"vtkDataArray");n.default=Object.assign({newInstance:T,extend:c},y,f.default)},function(e,n,t){"use strict";var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.setMatrixArrayType=function(e){GLMAT_ARRAY_TYPE=e};var a=Math.PI/180;r.toRadian=function(e){return e*a},e.exports=r},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=Array.isArray(t)?t.join("\n"):t,o=!1;-1!==e.search(n)&&(o=!0);var i="";r&&(i="g");var u=new RegExp(n,i);return{replace:o,result:e.replace(u,a)}}function o(e,n){n.classHierarchy.push("vtkShaderProgram"),e.compileShader=function(){return n.vertexShader.compile()?n.fragmentShader.compile()?e.attachShader(n.vertexShader)&&e.attachShader(n.fragmentShader)?e.link()?(e.setCompiled(!0),1):(d("Links failed: "+n.error),0):(d(n.error),0):(d(n.fragmentShader.getSource().split("\n").map(function(e,n){return n+": "+e}).join("\n")),d(n.fragmentShader.getError()),0):(d(n.vertexShader.getSource().split("\n").map(function(e,n){return n+": "+e}).join("\n")),d(n.vertexShader.getError()),0)},e.cleanup=function(){"Unknown"!==n.shaderType&&0!==n.handle&&(n.context.deleteShader(n.handle),n.handle=0)},e.bind=function(){return!(!n.linked&&!n.link())&&(n.context.useProgram(n.handle),e.setBound(!0),!0)},e.isBound=function(){return!!n.bound},e.release=function(){n.context.useProgram(null),e.setBound(!1)},e.setContext=function(e){n.vertexShader.setContext(e),n.fragmentShader.setContext(e),n.geometryShader.setContext(e)},e.link=function(){if(n.inked)return!0;if(0===n.handle)return n.error="Program has not been initialized, and/or does not have shaders.",!1;if(n.uniformLocs={},n.context.linkProgram(n.handle),!n.context.getProgramParameter(n.handle,n.context.LINK_STATUS)){var t=n.context.getProgramInfoLog(n.handle);return d("Error linking shader "+t),n.handle=0,!1}return e.setLinked(!0),n.attributeLocs={},!0},e.setUniformMatrix=function(t,r){var a=e.findUniform(t);return-1===a?(n.error="Could not set uniform "+t+" . No such uniform.",!1):(n.context.uniformMatrix4fv(a,!1,r),!0)},e.setUniformMatrix3x3=function(t,r){var a=e.findUniform(t);return-1===a?(n.error="Could not set uniform "+t+" . No such uniform.",!1):(n.context.uniformMatrix3fv(a,!1,r),!0)},e.setUniformf=function(t,r){var a=e.findUniform(t);return-1===a?(n.error="Could not set uniform "+t+" . No such uniform.",!1):(n.context.uniform1f(a,r),!0)},e.setUniformfv=function(t,r){var a=e.findUniform(t);return-1===a?(n.error="Could not set uniform "+t+" . No such uniform.",!1):(n.context.uniform1fv(a,r),!0)},e.setUniformi=function(t,r){var a=e.findUniform(t);return-1===a?(n.error="Could not set uniform "+t+" . No such uniform.",!1):(n.context.uniform1i(a,r),!0)},e.setUniformiv=function(t,r){var a=e.findUniform(t);return-1===a?(n.error="Could not set uniform "+t+" . No such uniform.",!1):(n.context.uniform1iv(a,r),!0)},e.setUniform2f=function(t,r,a){var o=e.findUniform(t);if(-1===o)return n.error="Could not set uniform "+t+" . No such uniform.",!1;if(void 0===a)throw new RangeError("Invalid number of values for array");return n.context.uniform2f(o,r,a),!0},e.setUniform2fv=function(t,r){var a=e.findUniform(t);return-1===a?(n.error="Could not set uniform "+t+" . No such uniform.",!1):(n.context.uniform2fv(a,r),!0)},e.setUniform2i=function(t,r,a){var o=e.findUniform(t);if(-1===o)return n.error="Could not set uniform "+t+" . No such uniform.",!1;if(void 0===a)throw new RangeError("Invalid number of values for array");return n.context.uniform2i(o,r,a),!0},e.setUniform2iv=function(t,r){var a=e.findUniform(t);return-1===a?(n.error="Could not set uniform "+t+" . No such uniform.",!1):(n.context.uniform2iv(a,r),!0)},e.setUniform3f=function(t,r,a,o){var i=e.findUniform(t);if(-1===i)return n.error="Could not set uniform "+t+" . No such uniform.",!1;if(void 0===o)throw new RangeError("Invalid number of values for array");return n.context.uniform3f(i,r,a,o),!0},e.setUniform3fArray=function(t,r){var a=e.findUniform(t);if(-1===a)return n.error="Could not set uniform "+t+" . No such uniform.",!1;if(!Array.isArray(r)||3!==r.length)throw new RangeError("Invalid number of values for array");return n.context.uniform3f(a,r[0],r[1],r[2]),!0},e.setUniform3fv=function(t,r){var a=e.findUniform(t);return-1===a?(n.error="Could not set uniform "+t+" . No such uniform.",!1):(n.context.uniform3fv(a,r),!0)},e.setUniform3i=function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var i=e.findUniform(t);if(-1===i)return n.error="Could not set uniform "+t+" . No such uniform.",!1;var u=a;if(1===u.length&&Array.isArray(u[0])&&(u=u[0]),3!==u.length)throw new RangeError("Invalid number of values for array");return n.context.uniform3i(i,u[0],u[1],u[2]),!0},e.setUniform3iv=function(t,r){var a=e.findUniform(t);return-1===a?(n.error="Could not set uniform "+t+" . No such uniform.",!1):(n.context.uniform3iv(a,r),!0)},e.setUniform4f=function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var i=e.findUniform(t);if(-1===i)return n.error="Could not set uniform "+t+" . No such uniform.",!1;var u=a;if(1===u.length&&Array.isArray(u[0])&&(u=u[0]),4!==u.length)throw new RangeError("Invalid number of values for array");return n.context.uniform4f(i,u[0],u[1],u[2],u[3]),!0},e.setUniform4fv=function(t,r){var a=e.findUniform(t);return-1===a?(n.error="Could not set uniform "+t+" . No such uniform.",!1):(n.context.uniform4fv(a,r),!0)},e.setUniform4i=function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var i=e.findUniform(t);if(-1===i)return n.error="Could not set uniform "+t+" . No such uniform.",!1;var u=a;if(1===u.length&&Array.isArray(u[0])&&(u=u[0]),4!==u.length)throw new RangeError("Invalid number of values for array");return n.context.uniform4i(i,u[0],u[1],u[2],u[3]),!0},e.setUniform4iv=function(t,r){var a=e.findUniform(t);return-1===a?(n.error="Could not set uniform "+t+" . No such uniform.",!1):(n.context.uniform4iv(a,r),!0)},e.setUniform4fv=function(t,r,a){var o=e.findUniform(t);return-1===o?(n.error="Could not set uniform "+t+" . No such uniform.",!1):(n.context.uniform4fv(o,a),!0)},e.findUniform=function(e){if(!e||!n.linked)return-1;var t=n.uniformLocs[e];return void 0!==t?t:null===(t=n.context.getUniformLocation(n.handle,e))?(n.error="Uniform "+e+" not found in current shader program.",n.uniformLocs[e]=-1,-1):(n.uniformLocs[e]=t,t)},e.isUniformUsed=function(e){if(!e)return!1;var t=n.uniformLocs[e];return void 0!==t?null!==t:n.linked?(t=n.context.getUniformLocation(n.handle,e),n.uniformLocs[e]=t,null!==t):(d("attempt to find uniform when the shader program is not linked"),!1)},e.isAttributeUsed=function(e){if(!e)return!1;var t=Object.keys(n.attributeLocs).indexOf(e);return-1!==t||(n.linked?-1!==(t=n.context.getAttribLocation(n.handle,e))&&(n.attributeLocs[e]=t,!0):(d("attempt to find uniform when the shader program is not linked"),!1))},e.attachShader=function(t){if(0===t.getHandle())return n.error="Shader object was not initialized, cannot attach it.",!1;if("Unknown"===t.getShaderType())return n.error="Shader object is of type Unknown and cannot be used.",!1;if(0===n.handle){var r=n.context.createProgram();if(0===r)return n.error="Could not create shader program.",!1;n.handle=r,n.linked=!1}return"Vertex"===t.getShaderType()&&(0!==n.vertexShaderHandle&&n.comntext.detachShader(n.handle,n.vertexShaderHandle),n.vertexShaderHandle=t.getHandle()),"Fragment"===t.getShaderType()&&(0!==n.fragmentShaderHandle&&n.context.detachShader(n.handle,n.fragmentShaderHandle),n.fragmentShaderHandle=t.getHandle()),n.context.attachShader(n.handle,t.getHandle()),e.setLinked(!1),!0},e.detachShader=function(e){if(0===e.getHandle())return n.error="shader object was not initialized, cannot attach it.",!1;if("Unknown"===e.getShaderType())return n.error="Shader object is of type Unknown and cannot be used.",!1;switch(0===n.handle&&(n.errror="This shader prorgram has not been initialized yet."),e.getShaderType()){case"Vertex":return n.vertexShaderHandle!==e.getHandle()?(n.error="The supplied shader was not attached to this program.",!1):(n.context.detachShader(n.handle,e.getHandle()),n.vertexShaderHandle=0,n.linked=!1,!0);case"Fragment":return n.fragmentShaderHandle!==e.getHandle()?(n.error="The supplied shader was not attached to this program.",!1):(n.context.detachShader(n.handle,e.getHandle()),n.fragmentShaderHandle=0,n.linked=!1,!0);default:return!1}},e.setContext=function(e){n.context=e,n.vertexShader.setContext(e),n.fragmentShader.setContext(e),n.geometryShader.setContext(e)},e.setLastCameraMTime=function(e){n.lastCameraMTime=e}}function i(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,f,t),n.attributesLocs={},n.uniformLocs={},n.vertexShader=c.default.newInstance(),n.vertexShader.setShaderType("Vertex"),n.fragmentShader=c.default.newInstance(),n.fragmentShader.setShaderType("Fragment"),n.geometryShader=c.default.newInstance(),n.geometryShader.setShaderType("Geometry"),s.default.obj(e,n),s.default.get(e,n,["lastCameraMTime"]),s.default.setGet(e,n,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),o(e,n)}Object.defineProperty(n,"__esModule",{value:!0});var u=t(0),s=r(u),l=t(81),c=r(l),d=s.default.vtkErrorMacro,f={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null},m=s.default.newInstance(i,"vtkShaderProgram");n.default={newInstance:m,extend:i,substitute:a}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.DataTypeByteSize={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},a=n.VtkDataTypes={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},o=n.DefaultDataType=a.FLOAT;n.default={DefaultDataType:o,DataTypeByteSize:r,VtkDataTypes:a}},function(e,n,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,n){(function(n){e.exports=n}).call(n,{})},function(e,n,t){"use strict";(function(e){function t(n){if(null===n||void 0===n)return n;if(n.isA)return n;if(!n.vtkClass)return e.console&&e.console.error&&e.console.error("Invalid VTK object"),null;var r=o[n.vtkClass];if(!r)return e.console&&e.console.error&&e.console.error("No vtk class found for Object of type "+n.vtkClass),null;var i=Object.assign({},n);Object.keys(i).forEach(function(e){i[e]&&"object"===a(i[e])&&i[e].vtkClass&&(i[e]=t(i[e]))});var u=r(i);return u&&u.modified&&u.modified(),u}function r(e,n){o[e]=n}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default=t;var o={vtkObject:function(){return null}};t.register=r}).call(n,t(14))},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){function t(e,t){var r=[];if(e!==_.FLOAT&&n.openGLDataType===n.context.FLOAT)for(var a=n.width*n.height*n.components,o=0;o<t.length;o++){for(var i=new Float32Array(a),u=0;u<a;u++)i[u]=t[o][u];r.push(i)}if(e!==_.UNSIGNED_CHAR&&n.openGLDataType===n.context.UNSIGNED_BYTE)for(var s=n.width*n.height*n.components,l=0;l<t.length;l++){for(var c=new Uint8Array(s),d=0;d<s;d++)c[d]=t[l][d];r.push(c)}if(0===r.length)for(var f=0;f<t.length;f++)r.push(t[f]);return r}function r(e){var t=[],r=n.width,a=n.height,o=n.components;if(e&&(!v.default.isPowerOfTwo(r)||!v.default.isPowerOfTwo(a)))for(var i=v.default.nearestPowerOfTwo(r),u=v.default.nearestPowerOfTwo(a),s=i*u*n.components,l=0;l<e.length;l++)if(null!==e[l]){var c=null;switch(n.openGLDataType){case n.context.FLOAT:c=new Float32Array(s);break;default:case n.context.UNSIGNED_BYTE:c=new Uint8Array(s)}for(var d=a/u,f=r/i,m=0;m<u;m++){var p=m*i*o,g=m*d,h=Math.floor(g),b=Math.ceil(g);b>=a&&(b=a-1);var y=g-h,x=1-y;h=h*r*o,b=b*r*o;for(var T=0;T<i;T++){var _=T*o,A=T*f,w=Math.floor(A),C=Math.ceil(A);C>=r&&(C=r-1);var M=A-w;w*=o,C*=o;for(var O=0;O<o;O++)c[p+_+O]=e[l][h+w+O]*x*(1-M)+e[l][h+C+O]*x*M+e[l][b+w+O]*y*(1-M)+e[l][b+C+O]*y*M}}t.push(c),n.width=i,n.height=u}else t.push(null);if(0===t.length)for(var I=0;I<e.length;I++)t.push(e[I]);return t}var a=this;n.classHierarchy.push("vtkOpenGLTexture"),e.render=function(){if(n.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),n.openGLRenderWindow=n.openGLRenderer.getParent(),n.context=n.openGLRenderWindow.getContext(),n.renderable.getInterpolate()?(n.generateMipmap?e.setMinificationFilter(T.LINEAR_MIPMAP_LINEAR):e.setMinificationFilter(T.LINEAR),e.setMagnificationFilter(T.LINEAR)):(e.setMinificationFilter(T.NEAREST),e.setMagnificationFilter(T.NEAREST)),n.renderable.getRepeat()&&(e.setWrapR(x.REPEAT),e.setWrapS(x.REPEAT),e.setWrapT(x.REPEAT)),n.renderable.getInputData()&&n.renderable.setImage(null),!n.handle||n.renderable.getMTime()>n.textureBuildTime.getMTime()){null!==n.renderable.getImage()&&(n.renderable.getInterpolate()&&(n.generateMipmap=!0,e.setMinificationFilter(T.LINEAR_MIPMAP_LINEAR)),n.renderable.getImage()&&n.renderable.getImageLoaded()&&(e.create2DFromImage(n.renderable.getImage()),e.activate(),e.sendParameters(),n.textureBuildTime.modified()));var t=n.renderable.getInputData(0);if(t&&t.getPointData().getScalars()){for(var r=t.getExtent(),a=t.getPointData().getScalars(),o=[],i=0;i<6;++i){var u=n.renderable.getInputData(i),s=u?u.getPointData().getScalars().getData():null;s&&o.push(s)}6===o.length?e.createCubeFromRaw(r[1]-r[0]+1,r[3]-r[2]+1,a.getNumberOfComponents(),a.getDataType(),o):(n.renderable.getInterpolate()&&4===a.getNumberOfComponents()&&(n.generateMipmap=!0,e.setMinificationFilter(T.LINEAR_MIPMAP_LINEAR)),e.create2DFromRaw(r[1]-r[0]+1,r[3]-r[2]+1,a.getNumberOfComponents(),a.getDataType(),a.getData())),e.activate(),e.sendParameters(),n.textureBuildTime.modified()}}n.handle&&e.activate()},e.destroyTexture=function(){e.deactivate(),n.context&&n.handle&&n.context.deleteTexture(n.handle),n.handle=0,n.numberOfDimensions=0,n.target=0,n.components=0,n.width=0,n.height=0,n.depth=0,e.resetFormatAndType()},e.createTexture=function(){n.handle||(n.handle=n.context.createTexture(),n.target&&(n.context.bindTexture(n.target,n.handle),n.context.texParameteri(n.target,n.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(n.minificationFilter)),n.context.texParameteri(n.target,n.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(n.magnificationFilter)),n.context.texParameteri(n.target,n.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(n.wrapS)),n.context.texParameteri(n.target,n.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(n.wrapT)),n.context.bindTexture(n.target,null)))},e.getTextureUnit=function(){return n.openGLRenderWindow?n.openGLRenderWindow.getTextureUnitForTexture(e):-1},e.activate=function(){n.openGLRenderWindow.activateTexture(e),e.bind()},e.deactivate=function(){n.openGLRenderWindow&&n.openGLRenderWindow.deactivateTexture(e)},e.releaseGraphicsResources=function(t){t&&n.handle&&(t.makeCurrent(),t.activateTexture(e),t.deactivateTexture(e),n.context.deleteTexture(n.handle),n.handle=0,n.numberOfDimensions=0,n.target=0,n.internalFormat=0,n.format=0,n.openGLDataType=0,n.components=0,n.width=0,n.height=0,n.depth=0),n.shaderProgram&&(n.shaderProgram.releaseGraphicsResources(t),n.shaderProgram=null)},e.bind=function(){n.context.bindTexture(n.target,n.handle),n.autoParameters&&e.getMTime()>n.sendParametersTime.getMTime()&&e.sendParameters()},e.isBound=function(){var e=!1;if(n.context&&n.handle){var t=0;switch(n.target){case n.context.TEXTURE_2D:t=n.context.TEXTURE_BINDING_2D;break;default:C("impossible case")}e=n.context.getIntegerv(t)===n.handle}return e},e.sendParameters=function(){n.context.texParameteri(n.target,n.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(n.wrapS)),n.context.texParameteri(n.target,n.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(n.wrapT)),n.openGLRenderWindow.getWebgl2()&&n.context.texParameteri(n.target,n.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(n.wrapR)),n.context.texParameteri(n.target,n.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(n.minificationFilter)),n.context.texParameteri(n.target,n.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(n.magnificationFilter)),n.sendParametersTime.modified()},e.getInternalFormat=function(t,r){return n.internalFormat?n.internalFormat:(n.internalFormat=e.getDefaultInternalFormat(t,r),n.internalFormat||A("Unable to find suitable internal format for T="+t+" NC= "+r),n.internalFormat)},e.getDefaultInternalFormat=function(e,t){var r=0;return(r=n.openGLRenderWindow.getDefaultTextureInternalFormat(e,t,!1))?r:(r=a.openGLRenderWindow.getDefaultTextureInternalFormat(e,t,!0),r||(A("Unsupported internal texture type!"),A("Unable to find suitable internal format for T="+e+" NC= "+t)),r)},e.setInternalFormat=function(t){t!==n.context.InternalFormat&&(n.internalFormat=t,e.modified())},e.getFormat=function(t,r){return n.format||(n.format=e.getDefaultFormat(t,r)),n.format},e.getDefaultFormat=function(e,t){if(n.openGLRenderWindow.getWebgl2())switch(t){case 1:return n.context.RED;case 2:return n.context.RG;case 3:return n.context.RGB;case 4:return n.context.RGBA;default:return n.context.RGB}else switch(t){case 1:return n.context.LUMINANCE;case 2:return n.context.LUMINANCE_ALPHA;case 3:return n.context.RGB;case 4:return n.context.RGBA;default:return n.context.RGB}},e.resetFormatAndType=function(){n.format=0,n.internalFormat=0,n.openGLDataType=0},e.getDefaultDataType=function(e){if(n.openGLRenderWindow.getWebgl2())switch(e){case _.UNSIGNED_CHAR:return n.context.UNSIGNED_BYTE;case _.FLOAT:case _.VOID:default:return n.context.FLOAT}switch(e){case _.UNSIGNED_CHAR:return n.context.UNSIGNED_BYTE;case _.FLOAT:case _.VOID:default:return n.context.getExtension("OES_texture_float")&&n.context.getExtension("OES_texture_float_linear")?n.context.FLOAT:n.context.UNSIGNED_BYTE}},e.getOpenGLDataType=function(t){return n.openGLDataType||(n.openGLDataType=e.getDefaultDataType(t)),n.openGLDataType},e.getShiftAndScale=function(){var e=0,t=1;switch(n.openGLDataType){case n.context.BYTE:t=127.5,e=t-128;break;case n.context.UNSIGNED_BYTE:t=255,e=0;break;case n.context.SHORT:t=32767.5,e=t-32768;break;case n.context.UNSIGNED_SHORT:t=65536,e=0;break;case n.context.INT:t=2147483647.5,e=t-2147483648;break;case n.context.UNSIGNED_INT:t=4294967295,e=0;break;case n.context.FLOAT:}return{shift:e,scale:t}},e.getOpenGLFilterMode=function(e){switch(e){case T.NEAREST:return n.context.NEAREST;case T.LINEAR:return n.context.LINEAR;case T.NEAREST_MIPMAP_NEAREST:return n.context.NEAREST_MIPMAP_NEAREST;case T.NEAREST_MIPMAP_LINEAR:return n.context.NEAREST_MIPMAP_LINEAR;case T.LINEAR_MIPMAP_NEAREST:return n.context.LINEAR_MIPMAP_NEAREST;case T.LINEAR_MIPMAP_LINEAR:return n.context.LINEAR_MIPMAP_LINEAR;default:return n.context.NEAREST}},e.getOpenGLWrapMode=function(e){switch(e){case x.CLAMP_TO_EDGE:return n.context.CLAMP_TO_EDGE;case x.REPEAT:return n.context.REPEAT;case x.MIRRORED_REPEAT:return n.context.MIRRORED_REPEAT;default:return n.context.CLAMP_TO_EDGE}},e.create2DFromRaw=function(a,o,i,u,s){if(e.getOpenGLDataType(u),e.getInternalFormat(u,i),e.getFormat(u,i),!n.internalFormat||!n.format||!n.openGLDataType)return w("Failed to determine texture parameters."),!1;n.target=n.context.TEXTURE_2D,n.components=i,n.width=a,n.height=o,n.depth=1,n.numberOfDimensions=2,n.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();var l=[s],c=t(u,l),d=r(c);return n.context.pixelStorei(n.context.UNPACK_ALIGNMENT,1),n.context.texImage2D(n.target,0,n.internalFormat,n.width,n.height,0,n.format,n.openGLDataType,d[0]),n.generateMipmap&&n.context.generateMipmap(n.target),e.deactivate(),!0},e.createCubeFromRaw=function(a,o,i,u,s){if(e.getOpenGLDataType(u),e.getInternalFormat(u,i),e.getFormat(u,i),!n.internalFormat||!n.format||!n.openGLDataType)return w("Failed to determine texture parameters."),!1;n.target=n.context.TEXTURE_CUBE_MAP,n.components=i,n.width=a,n.height=o,n.depth=1,n.numberOfDimensions=2,n.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();var l=t(u,s),c=l;n.openGLRenderWindow.getWebgl2()||(c=r(l)),n.context.pixelStorei(n.context.UNPACK_ALIGNMENT,1);for(var d=0;d<6;d++)c[d]&&n.context.texImage2D(n.context.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,n.internalFormat,n.width,n.height,0,n.format,n.openGLDataType,c[d]);return e.deactivate(),!0},e.createDepthFromRaw=function(t,r,a,o){return e.getOpenGLDataType(a),n.format=n.context.DEPTH_COMPONENT,n.internalFormat=n.context.DEPTH_COMPONENT,n.internalFormat&&n.format&&n.openGLDataType?(n.target=n.context.TEXTURE_2D,n.components=1,n.width=t,n.height=r,n.depth=1,n.numberOfDimensions=2,n.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),n.context.pixelStorei(n.context.UNPACK_ALIGNMENT,1),n.context.texImage2D(n.target,0,n.internalFormat,n.width,n.height,0,n.format,n.openGLDataType,o),n.generateMipmap&&n.context.generateMipmap(n.target),e.deactivate(),!0):(w("Failed to determine texture parameters."),!1)},e.create2DFromImage=function(t){if(e.getOpenGLDataType(_.UNSIGNED_CHAR),e.getInternalFormat(_.UNSIGNED_CHAR,4),e.getFormat(_.UNSIGNED_CHAR,4),!n.internalFormat||!n.format||!n.openGLDataType)return w("Failed to determine texture parameters."),!1;n.target=n.context.TEXTURE_2D,n.components=4,n.width=t.width,n.height=t.height,n.depth=1,n.numberOfDimensions=2,n.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),n.context.pixelStorei(n.context.UNPACK_ALIGNMENT,1);var r=!v.default.isPowerOfTwo(t.width)||!v.default.isPowerOfTwo(t.height),a=document.createElement("canvas");a.width=r?v.default.nearestPowerOfTwo(t.width):t.width,a.height=r?v.default.nearestPowerOfTwo(t.height):t.height;var o=a.getContext("2d");o.translate(0,a.height),o.scale(1,-1),o.drawImage(t,0,0,t.width,t.height,0,0,a.width,a.height);var i=a;return n.context.texImage2D(n.target,0,n.internalFormat,n.format,n.openGLDataType,i),n.generateMipmap&&n.context.generateMipmap(n.target),e.deactivate(),!0},e.create3DFromRaw=function(t,r,a,o,i,u){return e.getOpenGLDataType(i),e.getInternalFormat(i,o),e.getFormat(i,o),n.internalFormat&&n.format&&n.openGLDataType?(n.target=n.context.TEXTURE_3D,n.components=o,n.width=t,n.height=r,n.depth=a,n.numberOfDimensions=3,n.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),n.context.texImage3D(n.target,0,n.internalFormat,n.width,n.height,n.depth,0,n.format,n.openGLDataType,u),n.generateMipmap&&n.context.generateMipmap(n.target),e.deactivate(),!0):(w("Failed to determine texture parameters."),!1)},e.create3DOneComponentFromRaw=function(t,r,a,o,i){var u=t*r*a,s=v.default.arrayMin(i),l=v.default.arrayMax(i);s===l&&(l=s+1),n.volumeInfo={min:s,max:l,width:t,height:r,depth:a};var c=function(e,n,t,r,a){e[n]=t},d=_.UNSIGNED_CHAR,f=1,m=!1;if(o===_.UNSIGNED_CHAR?(n.volumeInfo.min=0,n.volumeInfo.max=255):n.openGLRenderWindow.getWebgl2()||n.context.getExtension("OES_texture_float")&&n.context.getExtension("OES_texture_float_linear")?(d=_.FLOAT,c=function(e,n,t,r,a){e[n]=(t-r)/(a-r)}):(m=!0,d=_.UNSIGNED_CHAR,f=4,c=function(e,n,t,r,a){var o=(t-r)/(a-r),i=Math.floor(255*o);o=255*o-i,e[n]=i;var u=Math.floor(255*o);o=255*o-u,e[n+1]=u;var s=Math.floor(255*o);e[n+2]=s}),n.openGLRenderWindow.getWebgl2()){if(o!==_.UNSIGNED_CHAR){for(var p=new Float32Array(u),g=0;g<u;++g)p[g]=(i[g]-s)/(l-s);return e.create3DFromRaw(t,r,a,1,_.FLOAT,p)}return e.create3DFromRaw(t,r,a,1,o,i)}if(e.getOpenGLDataType(d),e.getInternalFormat(d,f),e.getFormat(d,f),!n.internalFormat||!n.format||!n.openGLDataType)return w("Failed to determine texture parameters."),!1;n.target=n.context.TEXTURE_2D,n.components=f,n.depth=1,n.numberOfDimensions=2;var h=n.context.getParameter(n.context.MAX_TEXTURE_SIZE),b=1,y=1;u>h*h&&(b=Math.ceil(Math.sqrt(u/(h*h))),y=b);var x=Math.sqrt(u)/b;x=v.default.nearestPowerOfTwo(x);var T=Math.floor(x*b/t),A=Math.ceil(a/T),C=v.default.nearestPowerOfTwo(r*A/y);n.width=x,n.height=C,n.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),n.volumeInfo={encodedScalars:m,min:s,max:l,width:t,height:r,depth:a,xreps:T,yreps:A,xstride:b,ystride:y};var M=void 0,O=x*C*f;M=d===_.FLOAT?new Float32Array(O):new Uint8Array(O);for(var I=0,S=0;S<A;S++)for(var P=Math.min(T,a-S*T),E=n.width-P*Math.floor(t/b),R=0;R<r;R+=y){for(var N=0;N<P;N++)for(var D=(S*T+N)*t*r+R*t,V=0;V<t;V+=b)c(M,I,i[D+V],s,l),I+=f;I+=E*f}return n.context.pixelStorei(n.context.UNPACK_ALIGNMENT,1),n.context.texImage2D(n.target,0,n.internalFormat,n.width,n.height,0,n.format,n.openGLDataType,M),e.deactivate(),!0},e.create3DLighting=function(t,r,a){n.computedGradients=!1;for(var o=t.getVolumeInfo(),i=o.width,s=o.height,l=o.depth,c=n.openGLRenderWindow.getWebgl2(),d=Math.floor(l/4)||1,f=[],m=0;m<l;){var p=new y.default,v=new u.default(p),g=m,h=Math.min(m+d,l-1),b=new r.constructor(r.slice(g*i*s,(h+1)*i*s));f.push(v.postMessage({width:i,height:s,depth:l,spacing:a,data:b,haveWebgl2:c,depthStart:g,depthEnd:h},[b.buffer])),m+=d}Promise.all(f).then(function(r){var a=new Float32Array(i*s*l*4),u=1/0,d=-1/0;r.forEach(function(e){var n=e.subGradients,t=e.subMinMag,r=e.subMaxMag,o=e.subDepthStart,l=o*i*s*4;a.set(n,l),u=Math.min(t,u),d=Math.max(r,d)});var f=i*s*l,m=new Uint8Array(4*f);if(c)for(var p=0,v=0;v<f;++v){var g=4*v;m[p++]=127.5+127.5*a[g],m[p++]=127.5+127.5*a[g+1],m[p++]=127.5+127.5*a[g+2],m[p++]=255*Math.sqrt(a[g+3]/d)}if(n.volumeInfo={min:u,max:d},c){var h=e.create3DFromRaw(i,s,l,4,_.UNSIGNED_CHAR,m);return n.computedGradients=!0,n.gradientsBuildTime.modified(),h}if(e.getOpenGLDataType(_.UNSIGNED_CHAR),e.getInternalFormat(_.UNSIGNED_CHAR,4),e.getFormat(_.UNSIGNED_CHAR,4),!n.internalFormat||!n.format||!n.openGLDataType)return w("Failed to determine texture parameters."),!1;n.target=n.context.TEXTURE_2D,n.components=4,n.depth=1,n.numberOfDimensions=2,n.width=t.getWidth(),n.height=t.getHeight();for(var b=0,y=0;y<o.yreps;y++)for(var x=Math.min(o.xreps,l-y*o.xreps),T=n.width-x*Math.floor(i/o.xstride),A=0;A<s;A+=o.ystride){for(var C=0;C<x;C++)for(var M=4*((y*o.xreps+C)*i*s+A*i),O=0;O<i;O+=o.xstride)m[b++]=127.5+127.5*a[M+4*O],m[b++]=127.5+127.5*a[M+4*O+1],m[b++]=127.5+127.5*a[M+4*O+2],m[b++]=255*Math.sqrt(a[M+4*O+3]/d);b+=4*T}return n.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),n.context.pixelStorei(n.context.UNPACK_ALIGNMENT,1),n.context.texImage2D(n.target,0,n.internalFormat,n.width,n.height,0,n.format,n.openGLDataType,m),e.deactivate(),n.computedGradients=!0,n.gradientsBuildTime.modified(),!0})},e.setOpenGLRenderWindow=function(t){n.openGLRenderWindow!==t&&(e.releaseGraphicsResources(),n.openGLRenderWindow=t,n.context=null,t&&(n.context=n.openGLRenderWindow.getContext()))},e.getMaximumTextureSize=function(e){return e&&e.isCurrent()?e.getIntegerv(e.MAX_TEXTURE_SIZE):-1}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,M,t),h.default.extend(e,n,t),n.sendParametersTime={},d.default.obj(n.sendParametersTime,{mtime:0}),n.textureBuildTime={},d.default.obj(n.textureBuildTime,{mtime:0}),n.gradientsBuildTime={},d.default.obj(n.gradientsBuildTime,{mtime:0}),d.default.set(e,n,["format","openGLDataType"]),d.default.setGet(e,n,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap"]),d.default.get(e,n,["width","height","volumeInfo","components","handle","target","computedGradients","gradientsBuildTime"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(48),u=r(i),s=t(15),l=r(s),c=t(0),d=r(c),f=t(5),m=r(f),p=t(1),v=r(p),g=t(3),h=r(g),b=t(59),y=r(b),x=l.default.Wrap,T=l.default.Filter,_=m.default.VtkDataTypes,A=d.default.vtkDebugMacro,w=d.default.vtkErrorMacro,C=d.default.vtkWarningMacro,M={openGLRenderWindow:null,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:x.CLAMP_TO_EDGE,wrapT:x.CLAMP_TO_EDGE,wrapR:x.CLAMP_TO_EDGE,minificationFilter:T.NEAREST,magnificationFilter:T.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:0,generateMipmap:!1,computedGradients:!1},O=n.newInstance=d.default.newInstance(o,"vtkOpenGLTexture");n.default=Object.assign({newInstance:O,extend:o},l.default)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.ObjectType={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};n.default={ObjectType:r}},function(e,n,t){"use strict";var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":a(window))&&(r=window)}e.exports=r},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.Wrap={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},a=n.Filter={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};n.default={Wrap:r,Filter:a}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){function t(e){switch(e){case c.ELEMENT_ARRAY_BUFFER:return n.context.ELEMENT_ARRAY_BUFFER;case c.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in n.context)return n.context.TEXTURE_BUFFER;default:case c.ARRAY_BUFFER:return n.context.ARRAY_BUFFER}}n.classHierarchy.push("vtkOpenGLBufferObject");var r=null,a=null,o=!0,i="";e.getType=function(){return r},e.setType=function(e){r=e},e.getHandle=function(){return a},e.isReady=function(){return!1===o},e.generateBuffer=function(e){var o=t(e);return null===a&&(a=n.context.createBuffer(),r=e),t(r)===o},e.upload=function(u,s){return e.generateBuffer(s)?(n.context.bindBuffer(t(r),a),n.context.bufferData(t(r),u,n.context.STATIC_DRAW),o=!1,!0):(i="Trying to upload array buffer to incompatible buffer.",!1)},e.bind=function(){return!!a&&(n.context.bindBuffer(t(r),a),!0)},e.release=function(){return!!a&&(n.context.bindBuffer(t(r),null),!0)},e.releaseGraphicsResources=function(){null!==a&&(n.context.bindBuffer(t(r),null),n.context.deleteBuffer(a),a=null)},e.setOpenGLRenderWindow=function(t){n.openGLRenderWindow!==t&&(e.releaseGraphicsResources(),n.openGLRenderWindow=t,n.context=null,t&&(n.context=n.openGLRenderWindow.getContext()))},e.getError=function(){return i}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,f,t),u.default.obj(e,n),u.default.get(e,n,["openGLRenderWindow"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=n.STATIC=void 0,n.extend=o;var i=t(0),u=r(i),s=t(13),l=r(s),c=l.default.ObjectType,d=n.STATIC={},f={objectType:c.ARRAY_BUFFER,openGLRenderWindow:null,context:null},m=n.newInstance=u.default.newInstance(o);n.default=Object.assign({newInstance:m,extend:o},d,l.default)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.Shading={FLAT:0,GOURAUD:1,PHONG:2},a=n.Representation={POINTS:0,WIREFRAME:1,SURFACE:2},o=n.Interpolation=r;n.default={Shading:r,Representation:a,Interpolation:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLPolyDataMapper"),e.buildPass=function(t){t&&(n.openGLActor=e.getFirstAncestorOfType("vtkOpenGLActor"),n.openGLRenderer=n.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),n.openGLRenderWindow=n.openGLRenderer.getParent(),n.openGLCamera=n.openGLRenderer.getViewNodeFor(n.openGLRenderer.getRenderable().getActiveCamera()))},e.translucentPass=function(n){n&&e.render()},e.opaqueZBufferPass=function(t){t&&(n.haveSeenDepthRequest=!0,n.renderDepth=!0,e.render(),n.renderDepth=!1)},e.opaquePass=function(n){n&&e.render()},e.render=function(){var t=n.openGLRenderWindow.getContext();if(n.context!==t){n.context=t;for(var r=S.Start;r<S.End;r++)n.primitives[r].setOpenGLRenderWindow(n.openGLRenderWindow)}var a=n.openGLActor.getRenderable(),o=n.openGLRenderer.getRenderable();e.renderPiece(o,a)},e.buildShaders=function(t,r,a){e.getShaderTemplate(t,r,a);var o=n.renderable.getViewSpecificProperties().OpenGL,i=null;if(o&&(i=o.ShaderReplacements),i)for(var u=0;u<i.length;u++){var s=i[u];if(s.replaceFirst){var l=s.shaderType,c=t[l],d=_.default.substitute(c,s.originalValue,s.replacementValue,s.replaceAll);t[l]=d.result}}if(e.replaceShaderValues(t,r,a),i)for(var f=0;f<i.length;f++){var m=i[f];if(!m.replaceFirst){var p=m.shaderType,v=t[p],g=_.default.substitute(v,m.originalValue,m.replacementValue,m.replaceAll);t[p]=g.result}}},e.getShaderTemplate=function(e,t,r){var a=n.renderable.getViewSpecificProperties().OpenGL,o=M.default;if(a){var i=a.VertexShaderCode;void 0!==i&&""!==i&&(o=i)}e.Vertex=o;var u=I.default;if(a){var s=a.FragmentShaderCode;void 0!==s&&""!==s&&(u=s)}e.Fragment=u;var l="";if(a){var c=a.GeometryShaderCode;void 0!==c&&(l=c)}e.Geometry=l},e.replaceShaderColor=function(e,t,r){var a=e.Vertex,o=e.Geometry,i=e.Fragment,u=n.lastBoundBO.getReferenceByName("lastLightComplexity"),s=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];u&&(s=s.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));var l=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];u&&(l=l.concat(["  vec3 specularColor;","  float specularPower;"])),l=l.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),u&&(l=l.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),0===n.lastBoundBO.getCABO().getColorComponents()||n.drawingEdges||(s=s.concat(["varying vec4 vertexColorVSOutput;"]),a=_.default.substitute(a,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,a=_.default.substitute(a,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,o=_.default.substitute(o,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,o=_.default.substitute(o,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),i=0===n.lastBoundBO.getCABO().getColorComponents()||n.drawingEdges?n.renderable.getInterpolateScalarsBeforeMapping()&&n.renderable.getColorCoordinates()&&!n.drawingEdges?_.default.substitute(i,"//VTK::Color::Impl",l.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:_.default.substitute(i,"//VTK::Color::Impl",l).result:_.default.substitute(i,"//VTK::Color::Impl",l.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result,i=_.default.substitute(i,"//VTK::Color::Dec",s).result,e.Vertex=a,e.Geometry=o,e.Fragment=i},e.replaceShaderLight=function(e,t,r){var a=e.Fragment,o=n.lastBoundBO.getReferenceByName("lastLightComplexity"),i=n.lastBoundBO.getReferenceByName("lastLightCount"),u=[];switch(o){case 0:a=_.default.substitute(a,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:a=_.default.substitute(a,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(var s=0;s<i;++s)u=u.concat(["uniform vec3 lightColor"+s+";","uniform vec3 lightDirectionVC"+s+"; // normalized","uniform vec3 lightHalfAngleVC"+s+"; // normalized"]);a=_.default.substitute(a,"//VTK::Light::Dec",u).result,u=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(var l=0;l<i;++l)u=u.concat(["  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC"+l+"));","  diffuseL += ((df) * lightColor"+l+");","  if (dot(normalVCVSOutput, lightDirectionVC"+l+") < 0.0)","    {","    float sf = pow( max(0.0, dot(lightHalfAngleVC"+l+",normalVCVSOutput)), specularPower);","    specularL += ((sf) * lightColor"+l+");","    }"]);u=u.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),a=_.default.substitute(a,"//VTK::Light::Impl",u,!1).result;break;case 3:for(var c=0;c<i;++c)u=u.concat(["uniform vec3 lightColor"+c+";","uniform vec3 lightDirectionVC"+c+"; // normalized","uniform vec3 lightHalfAngleVC"+c+"; // normalized","uniform vec3 lightPositionVC"+c+";","uniform vec3 lightAttenuation"+c+";","uniform float lightConeAngle"+c+";","uniform float lightExponent"+c+";","uniform int lightPositional"+c+";"]);a=_.default.substitute(a,"//VTK::Light::Dec",u).result,u=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(var d=0;d<i;++d)u=u.concat(["  attenuation = 1.0;","  if (lightPositional"+d+" == 0)","    {","      vertLightDirectionVC = lightDirectionVC"+d+";","    }","  else","    {","    vertLightDirectionVC = vertexVC.xyz - lightPositionVC"+d+";","    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /","      (lightAttenuation"+d+".x","       + lightAttenuation"+d+".y * distanceVC","       + lightAttenuation"+d+".z * distanceVC * distanceVC);","    // per OpenGL standard cone angle is 90 or less for a spot light","    if (lightConeAngle"+d+" <= 90.0)","      {","      float coneDot = dot(vertLightDirectionVC, lightDirectionVC"+d+");","      // if inside the cone","      if (coneDot >= cos(radians(lightConeAngle"+d+")))","        {","        attenuation = attenuation * pow(coneDot, lightExponent"+d+");","        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));","    diffuseL += ((df) * lightColor"+d+");","    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {","      float sf = attenuation*pow( max(0.0, dot(lightHalfAngleVC"+d+",normalVCVSOutput)), specularPower);","    specularL += ((sf) * lightColor"+d+");","    }"]);u=u.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),a=_.default.substitute(a,"//VTK::Light::Impl",u,!1).result;break;default:k("bad light complexity")}e.Fragment=a},e.replaceShaderNormal=function(t,r,a){if(n.lastBoundBO.getReferenceByName("lastLightComplexity")>0){var o=t.Vertex,i=t.Geometry,u=t.Fragment;n.lastBoundBO.getCABO().getNormalOffset()?(o=_.default.substitute(o,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,o=_.default.substitute(o,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,i=_.default.substitute(i,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,i=_.default.substitute(i,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,u=_.default.substitute(u,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,u=_.default.substitute(u,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):n.haveCellNormals?(u=_.default.substitute(u,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,u=_.default.substitute(u,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.getOpenGLMode(a.getProperty().getRepresentation(),n.lastBoundBO.getPrimitiveType())===n.context.LINES?(u=_.default.substitute(u,"//VTK::UniformFlow::Impl",["  vec3 fdx = vec3(dFdx(vertexVC.x),dFdx(vertexVC.y),dFdx(vertexVC.z));","  vec3 fdy = vec3(dFdy(vertexVC.x),dFdy(vertexVC.y),dFdy(vertexVC.z));","  //VTK::UniformFlow::Impl"]).result,u=_.default.substitute(u,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  fdx = normalize(fdx);","  fdy = normalize(fdy);","  if (abs(fdx.x) > 0.0)","    { normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(u=_.default.substitute(u,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,u=_.default.substitute(u,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,u=_.default.substitute(u,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),t.Vertex=o,t.Geometry=i,t.Fragment=u}},e.replaceShaderPositionVC=function(e,t,r){var a=e.Vertex,o=e.Geometry,i=e.Fragment;r.getProperty().getRepresentation()!==P.POINTS&&n.lastBoundBO.getPrimitiveType()!==S.Points||(a=_.default.substitute(a,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = "+r.getProperty().getPointSize()+".0;"],!1).result),n.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(a=_.default.substitute(a,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,a=_.default.substitute(a,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCDCMatrix * vertexMC;"]).result,a=_.default.substitute(a,"//VTK::Camera::Dec",["uniform mat4 MCDCMatrix;","uniform mat4 MCVCMatrix;"]).result,o=_.default.substitute(o,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,o=_.default.substitute(o,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,i=_.default.substitute(i,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,i=_.default.substitute(i,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(a=_.default.substitute(a,"//VTK::Camera::Dec",["uniform mat4 MCDCMatrix;"]).result,a=_.default.substitute(a,"//VTK::PositionVC::Impl",["  gl_Position = MCDCMatrix * vertexMC;"]).result),e.Vertex=a,e.Geometry=o,e.Fragment=i},e.replaceShaderTCoord=function(e,t,r){if(n.lastBoundBO.getCABO().getTCoordOffset()){var a=e.Vertex,o=e.Geometry,i=e.Fragment;if(n.drawingEdges)return;a=_.default.substitute(a,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;var u=n.openGLActor.getActiveTextures(),s=2,l=2;if(u&&u.length>0&&(s=u[0].getComponents(),u[0].getTarget()===n.context.TEXTURE_CUBE_MAP&&(l=3)),n.renderable.getColorTextureMap()&&(s=n.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),l=2),2===l)switch(a=_.default.substitute(a,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,o=_.default.substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,o=_.default.substitute(o,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,i=_.default.substitute(i,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,s){case 1:i=_.default.substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,1.0);"]).result;break;case 2:i=_.default.substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,tcolor.g);"]).result;break;default:i=_.default.substitute(i,"//VTK::TCoord::Impl","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*texture2D(texture1, tcoordVCVSOutput.st);").result}else switch(a=_.default.substitute(a,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,o=_.default.substitute(o,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,o=_.default.substitute(o,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,i=_.default.substitute(i,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,s){case 1:i=_.default.substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,1.0);"]).result;break;case 2:i=_.default.substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,tcolor.g);"]).result;break;default:i=_.default.substitute(i,"//VTK::TCoord::Impl","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*textureCube(texture1, tcoordVCVSOutput);").result}e.Vertex=a,e.Geometry=o,e.Fragment=i}},e.replaceShaderClip=function(e,t,r){var a=e.Vertex,o=e.Fragment;if(n.renderable.getNumberOfClippingPlanes()){var i=n.renderable.getNumberOfClippingPlanes();i>6&&(s.default.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),i=6),a=_.default.substitute(a,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,a=_.default.substitute(a,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,o=_.default.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,o=_.default.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}e.Vertex=a,e.Fragment=o},e.getCoincidentParameters=function(e,t){var r=null,a=t.getProperty();if(n.renderable.getResolveCoincidentTopology()||a.getEdgeVisibility()&&a.getRepresentation()===P.SURFACE){var o=n.lastBoundBO.getPrimitiveType();o===S.Points||a.getRepresentation()===P.POINTS?r=n.renderable.getCoincidentTopologyPointOffsetParameter():o===S.Lines||a.getRepresentation()===P.WIREFRAME?r=n.renderable.getCoincidentTopologyLineOffsetParameters():o!==S.Tris&&o!==S.TriStrips||(r=n.renderable.getCoincidentTopologyPolygonOffsetParameters()),o!==S.TrisEdges&&o!==S.TriStripsEdges||(r=n.renderable.getCoincidentTopologyPolygonOffsetParameters(),r.factor/=2,r.offset/=2)}return r},e.replaceShaderCoincidentOffset=function(t,r,a){var o=e.getCoincidentParameters(r,a);if(o&&(0!==o.factor||0!==o.offset)){var i=t.Fragment;i=_.default.substitute(i,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,n.context.getExtension("EXT_frag_depth")&&(0!==o.factor?(i=_.default.substitute(i,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,i=_.default.substitute(i,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):i=_.default.substitute(i,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),t.Fragment=i}},e.replaceShaderPicking=function(e,t,r){if(n.openGLRenderer.getSelector()){var a=e.Fragment;switch(n.openGLRenderer.getSelector().getCurrentPass()){case V.ID_LOW24:break;default:a=_.default.substitute(a,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,a=_.default.substitute(a,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(mapperIndex,1.0);").result}e.Fragment=a}},e.replaceShaderValues=function(t,r,a){if(e.replaceShaderColor(t,r,a),e.replaceShaderNormal(t,r,a),e.replaceShaderLight(t,r,a),e.replaceShaderTCoord(t,r,a),e.replaceShaderPicking(t,r,a),e.replaceShaderClip(t,r,a),e.replaceShaderCoincidentOffset(t,r,a),e.replaceShaderPositionVC(t,r,a),n.haveSeenDepthRequest){var o=t.Fragment;o=_.default.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=_.default.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,t.Fragment=o}},e.getNeedToRebuildShaders=function(t,r,a){var o=0,i=0,u=t.getPrimitiveType(),s=!0,l=n.currentInput,c=a.getProperty().getInterpolation()!==E.FLAT?l.getPointData().getNormals():null;null===c&&l.getCellData().getNormals()&&(c=l.getCellData().getNormals());var d=null!==c;if(a.getProperty().getRepresentation()!==P.POINTS&&u!==S.Points||(s=d),a.getProperty().getLighting()&&s){o=0;for(var f=r.getLightsByReference(),m=0;m<f.length;++m){var p=f[m];p.getSwitch()>0&&(i++,0===o&&(o=1)),1===o&&(i>1||1!==p.getIntensity()||!p.lightTypeIsHeadLight())&&(o=2),o<3&&p.getPositional()&&(o=3)}}var v=!1,g=n.lastBoundBO.getReferenceByName("lastLightComplexity"),h=n.lastBoundBO.getReferenceByName("lastLightCount");g===o&&h===i||(n.lastBoundBO.set({lastLightComplexity:o},!0),n.lastBoundBO.set({lastLightCount:i},!0),v=!0);var b=n.openGLRenderer.getSelector(),y=null===b?-1:b.getCurrentPass();return n.lastBoundBO.getReferenceByName("lastSelectionPass")!==y&&(n.lastBoundBO.set({lastSelectionPass:y},!0),v=!0),!!(n.lastHaveSeenDepthRequest!==n.haveSeenDepthRequest||0===t.getProgram()||t.getShaderSourceTime().getMTime()<e.getMTime()||t.getShaderSourceTime().getMTime()<a.getMTime()||t.getShaderSourceTime().getMTime()<n.renderable.getMTime()||t.getShaderSourceTime().getMTime()<n.currentInput.getMTime()||v)&&(n.lastHaveSeenDepthRequest=n.haveSeenDepthRequest,!0)},e.updateShaders=function(t,r,a){if(n.lastBoundBO=t,e.getNeedToRebuildShaders(t,r,a)){var o={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(o,r,a);var i=n.openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);i!==t.getProgram()&&(t.setProgram(i),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else n.openGLRenderWindow.getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),e.setMapperShaderParameters(t,r,a),e.setPropertyShaderParameters(t,r,a),e.setCameraShaderParameters(t,r,a),e.setLightingShaderParameters(t,r,a);var u=n.renderable.getViewSpecificProperties().ShadersCallbacks;u&&u.forEach(function(e){e.callback(e.userData,t,r,a)})},e.setMapperShaderParameters=function(t,r,a){if(t.getProgram().isUniformUsed("PrimitiveIDOffset")&&t.getProgram().setUniformi("PrimitiveIDOffset",n.primitiveIDOffset),t.getCABO().getElementCount()&&(n.VBOBuildTime.getMTime()>t.getAttributeUpdateTime().getMTime()||t.getShaderSourceTime().getMTime()>t.getAttributeUpdateTime().getMTime())){var o=n.lastBoundBO.getReferenceByName("lastLightComplexity");t.getProgram().isAttributeUsed("vertexMC")&&(t.getVAO().addAttributeArray(t.getProgram(),t.getCABO(),"vertexMC",t.getCABO().getVertexOffset(),t.getCABO().getStride(),n.context.FLOAT,3,!1)||k("Error setting vertexMC in shader VAO.")),t.getProgram().isAttributeUsed("normalMC")&&t.getCABO().getNormalOffset()&&o>0?t.getVAO().addAttributeArray(t.getProgram(),t.getCABO(),"normalMC",t.getCABO().getNormalOffset(),t.getCABO().getStride(),n.context.FLOAT,3,!1)||k("Error setting normalMC in shader VAO."):t.getVAO().removeAttributeArray("normalMC"),t.getProgram().isAttributeUsed("tcoordMC")&&t.getCABO().getTCoordOffset()?t.getVAO().addAttributeArray(t.getProgram(),t.getCABO(),"tcoordMC",t.getCABO().getTCoordOffset(),t.getCABO().getStride(),n.context.FLOAT,t.getCABO().getTCoordComponents(),!1)||k("Error setting tcoordMC in shader VAO."):t.getVAO().removeAttributeArray("tcoordMC"),t.getProgram().isAttributeUsed("scalarColor")&&t.getCABO().getColorComponents()?t.getVAO().addAttributeArray(t.getProgram(),t.getCABO().getColorBO(),"scalarColor",t.getCABO().getColorOffset(),t.getCABO().getColorBOStride(),n.context.UNSIGNED_BYTE,4,!0)||k("Error setting scalarColor in shader VAO."):t.getVAO().removeAttributeArray("scalarColor"),t.getAttributeUpdateTime().modified()}if(n.renderable.getNumberOfClippingPlanes()){var i=n.renderable.getNumberOfClippingPlanes();i>6&&(s.default.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),i=6);for(var u=[],l=0;l<i;l++){var c=[];n.renderable.getClippingPlaneInDataCoords(a.getMatrix(),l,c);for(var d=0;d<4;d++)u.push(c[d])}t.getProgram().setUniformi("numClipPlanes",i),t.getProgram().setUniform4fv("clipPlanes",6,u)}n.internalColorTexture&&t.getProgram().isUniformUsed("texture1")&&t.getProgram().setUniformi("texture1",n.internalColorTexture.getTextureUnit());var f=n.openGLActor.getActiveTextures();if(f)for(var m=0;m<f.length;++m){var p=f[m],v=p.getTextureUnit(),g="texture"+(v+1);t.getProgram().isUniformUsed(g)&&t.getProgram().setUniformi(g,v)}if(n.haveSeenDepthRequest&&t.getProgram().setUniformi("depthRequest",n.renderDepth?1:0),t.getProgram().isUniformUsed("coffset")){var h=e.getCoincidentParameters(r,a);t.getProgram().setUniformf("coffset",h.offset),t.getProgram().isUniformUsed("cfactor")&&t.getProgram().setUniformf("cfactor",h.factor)}var b=n.openGLRenderer.getSelector();b&&t.getProgram().isUniformUsed("mapperIndex")&&b.getCurrentPass()<V.ID_LOW24&&t.getProgram().setUniform3fArray("mapperIndex",b.getPropColorValue())},e.setLightingShaderParameters=function(e,t,r){var a=n.lastBoundBO.getReferenceByName("lastLightComplexity");if(!(a<2)){for(var o=e.getProgram(),u=0,s=t.getLightsByReference(),l=0;l<s.length;++l){var c=s[l];if(c.getSwitch()>0){var d=c.getColorByReference(),f=c.getIntensity();n.lightColor[0]=d[0]*f,n.lightColor[1]=d[1]*f,n.lightColor[2]=d[2]*f;var m=c.getDirection();n.lightDirection[0]=m[0],n.lightDirection[1]=m[1],n.lightDirection[2]=m[2],n.lightHalfAngle[0]=-n.lightDirection[0],n.lightHalfAngle[1]=-n.lightDirection[1],n.lightHalfAngle[2]=1-n.lightDirection[2],g.default.normalize(n.lightDirection),o.setUniform3fArray("lightColor"+u,n.lightColor),o.setUniform3fArray("lightDirectionVC"+u,n.lightDirection),o.setUniform3fArray("lightHalfAngleVC"+u,n.lightHalfAngle),u++}}if(!(a<3)){var p=t.getActiveCamera(),v=p.getViewMatrix();i.mat4.transpose(v,v),u=0;for(var h=0;h<s.length;++h){var b=s[h];if(b.getSwitch()>0){var y=b.getTransformedPosition(),x=i.vec3.fromValues(y[0],y[1],y[2]);i.vec3.transformMat4(x,x,v),o.setUniform3fArray("lightAttenuation"+u,b.getAttenuationValuesByReference()),o.setUniformi("lightPositional"+u,b.getPositional()),o.setUniformf("lightExponent"+u,b.getExponent()),o.setUniformf("lightConeAngle"+u,b.getConeAngle()),o.setUniform3fArray("lightPositionVC"+u,[x[0],x[1],x[2]]),u++}}}}},e.setCameraShaderParameters=function(e,t,r){var a=e.getProgram(),o=n.openGLCamera.getKeyMatrices(t),u=t.getActiveCamera(),s=n.openGLCamera.getKeyMatrixTime().getMTime();if(a.getLastCameraMTime()!==s&&(r.getIsIdentity()&&(a.setUniformMatrix("MCDCMatrix",o.wcdc),a.isUniformUsed("MCVCMatrix")&&a.setUniformMatrix("MCVCMatrix",o.wcvc),a.isUniformUsed("normalMatrix")&&a.setUniformMatrix3x3("normalMatrix",o.normalMatrix)),a.isUniformUsed("cameraParallel")&&a.setUniformi("cameraParallel",u.getParallelProjection()),a.setLastCameraMTime(s)),!r.getIsIdentity()){var l=n.openGLActor.getKeyMatrices();if(a.isUniformUsed("normalMatrix")){var c=i.mat3.create();i.mat3.multiply(c,o.normalMatrix,l.normalMatrix),a.setUniformMatrix3x3("normalMatrix",c)}i.mat4.identity(n.tmpMat4),i.mat4.multiply(n.tmpMat4,o.wcdc,l.mcwc),a.setUniformMatrix("MCDCMatrix",n.tmpMat4),a.isUniformUsed("MCVCMatrix")&&(i.mat4.multiply(n.tmpMat4,o.wcvc,l.mcwc),a.setUniformMatrix("MCVCMatrix",n.tmpMat4)),a.setLastCameraMTime(0)}},e.setPropertyShaderParameters=function(e,t,r){var a=e.getProgram(),o=r.getProperty(),i=o.getOpacity();a.setUniformf("opacityUniform",i);var u=n.drawingEdges?o.getEdgeColorByReference():o.getAmbientColorByReference();a.setUniform3fArray("ambientColorUniform",u),a.setUniformf("ambient",o.getAmbient());var s=n.drawingEdges?o.getEdgeColorByReference():o.getDiffuseColorByReference();if(a.setUniform3fArray("diffuseColorUniform",s),a.setUniformf("diffuse",o.getDiffuse()),!(n.lastBoundBO.getReferenceByName("lastLightComplexity")<1)){var l=o.getSpecularColorByReference();a.setUniform3fArray("specularColorUniform",l),a.setUniformf("specular",o.getSpecular()),a.setUniformf("specularPowerUniform",o.getSpecularPower())}},e.renderPieceStart=function(t,r){n.primitiveIDOffset=0,n.openGLRenderer.getSelector()&&(n.openGLRenderer.getSelector().getCurrentPass(),n.openGLRenderer.getSelector().renderProp(r)),e.updateBufferObjects(t,r),n.renderable.getColorTextureMap()&&n.internalColorTexture.activate(),n.lastBoundBO=null},e.renderPieceDraw=function(t,r){for(var a=r.getProperty().getRepresentation(),o=n.context,i=r.getProperty().getEdgeVisibility()&&a===P.SURFACE,u=S.Start;u<S.End;u++){var s=n.primitives[u].getCABO();if(s.getElementCount()){n.drawingEdges=i&&(u===S.TrisEdges||u===S.TriStripsEdges),e.updateShaders(n.primitives[u],t,r);var l=e.getOpenGLMode(a,u);o.drawArrays(l,0,s.getElementCount());var c=(l===o.POINTS?1:0)||(l===o.LINES?2:3);n.primitiveIDOffset+=s.getElementCount()/c}}},e.getOpenGLMode=function(e,t){return e===P.POINTS||t===S.Points?n.context.POINTS:e===P.WIREFRAME||t===S.Lines||t===S.TrisEdges||t===S.TriStripsEdges?n.context.LINES:n.context.TRIANGLES},e.renderPieceFinish=function(e,t){n.LastBoundBO&&n.LastBoundBO.getVAO().release(),n.renderable.getColorTextureMap()&&n.internalColorTexture.deactivate()},e.renderPiece=function(t,r){if(e.invokeEvent(L),n.renderable.getStatic()||n.renderable.update(),n.currentInput=n.renderable.getInputData(),e.invokeEvent(F),null===n.currentInput)return void k("No input!");if(n.currentInput.getPoints&&n.currentInput.getPoints().getNumberOfValues()){var a=n.context,o=r.getProperty().getBackfaceCulling(),i=r.getProperty().getFrontfaceCulling();o||i?i?(n.openGLRenderWindow.enableCullFace(),a.cullFace(a.FRONT)):(n.openGLRenderWindow.enableCullFace(),a.cullFace(a.BACK)):n.openGLRenderWindow.disableCullFace(),e.renderPieceStart(t,r),e.renderPieceDraw(t,r),e.renderPieceFinish(t,r)}},e.computeBounds=function(t,r){if(!e.getInput())return void g.default.uninitializeBounds(n.bounds);n.bounds=e.getInput().getBounds()},e.updateBufferObjects=function(n,t){e.getNeedToRebuildBufferObjects(n,t)&&e.buildBufferObjects(n,t)},e.getNeedToRebuildBufferObjects=function(t,r){var a=n.VBOBuildTime.getMTime();return a<e.getMTime()||a<n.renderable.getMTime()||a<r.getMTime()||a<n.currentInput.getMTime()},e.buildBufferObjects=function(e,t){var r=n.currentInput;if(null!==r){n.renderable.mapScalars(r,1);var a=n.renderable.getColorMapColors();n.haveCellScalars=!1;var o=n.renderable.getScalarMode();n.renderable.getScalarVisibility()&&(o!==R.USE_CELL_DATA&&o!==R.USE_CELL_FIELD_DATA&&o!==R.USE_FIELD_DATA&&r.getPointData().getScalars()||o===R.USE_POINT_FIELD_DATA||!a||(n.haveCellScalars=!0));var i=t.getProperty().getInterpolation()!==E.FLAT?r.getPointData().getNormals():null;null===i&&r.getCellData().getNormals()&&(n.haveCellNormals=!0,i=r.getCellData().getNormals());var u=t.getProperty().getRepresentation(),s=r.getPointData().getTCoords();if(n.openGLActor.getActiveTextures()||(s=null),n.renderable.getColorCoordinates()){s=n.renderable.getColorCoordinates(),n.internalColorTexture||(n.internalColorTexture=b.default.newInstance());var l=n.internalColorTexture;l.setMinificationFilter(N.NEAREST),l.setMagnificationFilter(N.NEAREST),l.setWrapS(D.CLAMP_TO_EDGE),l.setWrapT(D.CLAMP_TO_EDGE),l.setOpenGLRenderWindow(n.openGLRenderWindow);var c=n.renderable.getColorTextureMap(),d=c.getExtent(),f=c.getPointData().getScalars();l.create2DFromRaw(d[1]-d[0]+1,d[3]-d[2]+1,f.getNumberOfComponents(),f.getDataType(),f.getData()),l.activate(),l.sendParameters(),l.deactivate()}var m=r.getMTime()+"A"+u+"B"+r.getMTime()+"C"+(i?i.getMTime():1)+"D"+(a?a.getMTime():1)+"E"+t.getProperty().getEdgeVisibility()+"F"+(s?s.getMTime():1);if(n.VBOBuildString!==m){var p=r.getPoints(),v={points:p,normals:i,tcoords:s,colors:a,cellOffset:0,haveCellScalars:n.haveCellScalars,haveCellNormals:n.haveCellNormals};v.cellOffset+=n.primitives[S.Points].getCABO().createVBO(r.getVerts(),"verts",u,v),v.cellOffset+=n.primitives[S.Lines].getCABO().createVBO(r.getLines(),"lines",u,v),v.cellOffset+=n.primitives[S.Tris].getCABO().createVBO(r.getPolys(),"polys",u,v),v.cellOffset+=n.primitives[S.TriStrips].getCABO().createVBO(r.getStrips(),"strips",u,v);t.getProperty().getEdgeVisibility()&&u===P.SURFACE?(n.primitives[S.TrisEdges].getCABO().createVBO(r.getPolys(),"polys",P.WIREFRAME,{points:p,normals:i,tcoords:null,colors:null,cellOffset:0,haveCellScalars:!1,haveCellNormals:!1}),n.primitives[S.TriStripsEdges].getCABO().createVBO(r.getStrips(),"strips",P.WIREFRAME,{points:p,normals:i,tcoords:null,colors:null,cellOffset:0,haveCellScalars:!1,haveCellNormals:!1})):(n.primitives[S.TrisEdges].releaseGraphicsResources(n.openGLRenderWindow),n.primitives[S.TriStripsEdges].releaseGraphicsResources(n.openGLRenderWindow)),n.VBOBuildTime.modified(),n.VBOBuildString=m}}}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,z,t),w.default.extend(e,n,t),n.primitives=[],n.primTypes=S,n.tmpMat4=i.mat4.create();for(var r=S.Start;r<S.End;r++)n.primitives[r]=f.default.newInstance(),n.primitives[r].setPrimitiveType(r),n.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:-1},!0);s.default.setGet(e,n,["context"]),n.VBOBuildTime={},s.default.obj(n.VBOBuildTime,{mtime:0}),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(2),u=t(0),s=r(u),l=t(32),c=r(l),d=t(23),f=r(d),m=t(24),p=r(m),v=t(1),g=r(v),h=t(12),b=r(h),y=t(22),x=r(y),T=t(7),_=r(T),A=t(3),w=r(A),C=t(36),M=r(C),O=t(19),I=r(O),S={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6},P=x.default.Representation,E=x.default.Shading,R=p.default.ScalarMode,N=b.default.Filter,D=b.default.Wrap,V=c.default.PassTypes,k=s.default.vtkErrorMacro,L={type:"StartEvent"},F={type:"EndEvent"},z={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightHalfAngle:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1},j=n.newInstance=s.default.newInstance(o,"vtkOpenGLPolyDataMapper");n.default={newInstance:j,extend:o}},function(e,n){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\nuniform int PrimitiveIDOffset;\n\n// VC position of this fragment\n//VTK::PositionVC::Dec\n\n// optional color passed in from the vertex shader, vertexColor\n//VTK::Color::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// Depth Peeling Support\n//VTK::DepthPeeling::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// handle coincident offsets\n//VTK::Coincident::Dec\n\n//VTK::ZBuffer::Dec\n\nvoid main()\n{\n  // VC position of this fragment. This should not branch/return/discard.\n  //VTK::PositionVC::Impl\n\n  // Place any calls that require uniform flow (e.g. dFdx) here.\n  //VTK::UniformFlow::Impl\n\n  // Set gl_FragDepth here (gl_FragCoord.z by default)\n  //VTK::Depth::Impl\n\n  // Early depth peeling abort:\n  //VTK::DepthPeeling::PreColor\n\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::Color::Impl\n\n  // Generate the normal if we are not passed in one\n  //VTK::Normal::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::TCoord::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n\n  //VTK::DepthPeeling::Impl\n\n  //VTK::Picking::Impl\n\n  // handle coincident offsets\n  //VTK::Coincident::Impl\n\n  //VTK::ZBuffer::Impl\n}\n"},function(e,n,t){"use strict";function r(e,n){n.classHierarchy.push("vtkFramebuffer"),e.getBothMode=function(){return n.context.FRAMEBUFFER},e.saveCurrentBindingsAndBuffers=function(n){var t=void 0!==n?n:e.getBothMode();e.saveCurrentBindings(t),e.saveCurrentBuffers(t)},e.saveCurrentBindings=function(e){var t=n.context;n.previousDrawBinding=t.getParameter(n.context.FRAMEBUFFER_BINDING)},e.saveCurrentBuffers=function(e){},e.restorePreviousBindingsAndBuffers=function(n){var t=void 0!==n?n:e.getBothMode();e.restorePreviousBindings(t),e.restorePreviousBuffers(t)},e.restorePreviousBindings=function(e){var t=n.context;t.bindFramebuffer(t.FRAMEBUFFER,n.previousDrawBinding)},e.restorePreviousBuffers=function(e){},e.bind=function(){n.context.bindFramebuffer(n.context.FRAMEBUFFER,n.glFramebuffer),n.colorTexture&&n.colorTexture.bind()},e.create=function(e,t){n.glFramebuffer=n.context.createFramebuffer(),n.glFramebuffer.width=e,n.glFramebuffer.height=t},e.setColorBuffer=function(e,t){var r=n.context;n.colorTexture=e,r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.getHandle(),0)},e.getGLFramebuffer=function(){return n.glFramebuffer},e.setOpenGLRenderWindow=function(t){n.openGLRenderWindow!==t&&(e.releaseGraphicsResources(),n.openGLRenderWindow=t,n.context=null,t&&(n.context=n.openGLRenderWindow.getContext()))},e.releaseGraphicsResources=function(){n.glFramebuffer&&n.context.deleteFramebuffer(n.glFramebuffer),n.depthTexture&&n.depthTexture.releaseGraphicsResources(),n.colorTexture&&n.colorTexture.releaseGraphicsResources()},e.getSize=function(){var e=[0,0];return null!==n.glFramebuffer&&(e[0]=n.glFramebuffer.width,e[1]=n.glFramebuffer.height),e},e.populateFramebuffer=function(){e.bind();var t=n.context,r=s.default.newInstance();r.setOpenGLRenderWindow(n.openGLRenderWindow),r.setMinificationFilter(c.Filter.LINEAR),r.setMagnificationFilter(c.Filter.LINEAR),r.create2DFromRaw(n.glFramebuffer.width,n.glFramebuffer.height,4,l.VtkDataTypes.UNSIGNED_CHAR,null),e.setColorBuffer(r),n.depthTexture=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,n.depthTexture),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.glFramebuffer.width,n.glFramebuffer.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,n.depthTexture)}}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,d,t),i.obj(e,n),i.setGet(e,n,["colorTexture"]),r(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=a;var o=t(0),i=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(o),u=t(12),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=t(8),c=t(15),d={openGLRenderWindow:null,glFramebuffer:null,colorTexture:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0},f=n.newInstance=i.newInstance(a,"vtkFramebuffer");n.default=Object.assign({newInstance:f,extend:a})},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkDataSet"),p.forEach(function(e){n[e]?n[e]=(0,l.default)(n[e]):n[e]=d.default.newInstance()})}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,v,t),u.default.obj(e,n),u.default.setGet(e,n,p),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(11),l=r(s),c=t(76),d=r(c),f=t(79),m=r(f),p=["pointData","cellData","fieldData"],v={},g=n.newInstance=u.default.newInstance(o,"vtkDataSet");n.default=Object.assign({newInstance:g,extend:o},m.default)},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){return s.default.vtkErrorMacro("vtkProperty::"+e+" - NOT IMPLEMENTED")}}function o(e,n){n.classHierarchy.push("vtkProperty"),e.setColor=function(t,r,a){n.color[0]===t&&n.color[1]===r&&n.color[2]===a||(n.color[0]=t,n.color[1]=r,n.color[2]=a,e.modified()),e.setDiffuseColor(n.color),e.setAmbientColor(n.color),e.setSpecularColor(n.color)},e.computeCompositeColor=a("ComputeCompositeColor"),e.getColor=function(){var e=0;n.ambient+n.diffuse+n.specular>0&&(e=1/(n.ambient+n.diffuse+n.specular));for(var t=0;t<3;t++)n.color[t]=e*(n.ambient*n.ambientColor[t]+n.diffuse*n.diffuseColor[t]+n.specular*n.specularColor[t]);return[].concat(n.color)},e.addShaderVariable=a("AddShaderVariable"),e.setInterpolationToFlat=function(){return e.setInterpolation(f.FLAT)},e.setInterpolationToGouraud=function(){return e.setInterpolation(f.GOURAUD)},e.setInterpolationToPhong=function(){return e.setInterpolation(f.PHONG)},e.getInterpolationAsString=function(){return s.default.enumToString(f,n.interpolation)},e.setRepresentationToWireframe=function(){return e.setRepresentation(d.WIREFRAME)},e.setRepresentationToSurface=function(){return e.setRepresentation(d.SURFACE)},e.setRepresentationToPoints=function(){return e.setRepresentation(d.POINTS)},e.getRepresentationAsString=function(){return s.default.enumToString(d,n.representation)}}function i(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,m,t),s.default.obj(e,n),s.default.setGet(e,n,["lighting","interpolation","ambient","diffuse","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation"]),s.default.setGetArray(e,n,["ambientColor","specularColor","diffuseColor","edgeColor"],3),o(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=i;var u=t(0),s=r(u),l=t(17),c=r(l),d=c.default.Representation,f=c.default.Interpolation,m={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,specular:0,specularPower:1,opacity:1,interpolation:f.GOURAUD,representation:d.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null},p=n.newInstance=s.default.newInstance(i,"vtkProperty");n.default=Object.assign({newInstance:p,extend:i},c.default)},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLHelper"),e.setOpenGLRenderWindow=function(e){n.program.setContext(e.getContext()),n.VAO.setOpenGLRenderWindow(e),n.CABO.setOpenGLRenderWindow(e)},e.releaseGraphicsResources=function(e){n.VAO.releaseGraphicsResources(),n.CABO.releaseGraphicsResources(),n.CABO.setElementCount(0)}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,p,t),u.default.obj(e,n),n.shaderSourceTime={},u.default.obj(n.shaderSourceTime),n.attributeUpdateTime={},u.default.obj(n.attributeUpdateTime),u.default.setGet(e,n,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType"]),n.program=d.default.newInstance(),n.VAO=m.default.newInstance(),n.CABO=l.default.newInstance(),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(80),l=r(s),c=t(7),d=r(c),f=t(33),m=r(f),p={program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0},v=n.newInstance=u.default.newInstance(o);n.default={newInstance:v,extend:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){return s.default.vtkErrorMacro("vtkMapper::"+e+" - NOT IMPLEMENTED")}}function o(e,n){n.classHierarchy.push("vtkMapper"),e.getBounds=function(){var t=e.getInputData();return t?(n.static||e.update(),n.bounds=t.getBounds()):n.bounds=b.default.createUninitializedBounds(),n.bounds},e.setForceCompileOnly=function(e){n.forceCompileOnly=e},e.createDefaultLookupTable=function(){n.lookupTable=g.default.newInstance()},e.getColorModeAsString=function(){return s.default.enumToString(O,n.colorMode)},e.setColorModeToDefault=function(){return e.setColorMode(0)},e.setColorModeToMapScalars=function(){return e.setColorMode(1)},e.setColorModeToDirectScalars=function(){return e.setColorMode(2)},e.getScalarModeAsString=function(){return s.default.enumToString(I,n.scalarMode)},e.setScalarModeToDefault=function(){return e.setScalarMode(0)},e.setScalarModeToUsePointData=function(){return e.setScalarMode(1)},e.setScalarModeToUseCellData=function(){return e.setScalarMode(2)},e.setScalarModeToUsePointFieldData=function(){return e.setScalarMode(3)},e.setScalarModeToUseCellFieldData=function(){return e.setScalarMode(4)},e.setScalarModeToUseFieldData=function(){return e.setScalarMode(5)},Object.keys(w.default).forEach(function(n){e[n]=w.default[n]}),Object.keys(R).forEach(function(n){e[n]=R[n]}),n.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},_.default.addCoincidentTopologyMethods(e,n.topologyOffset,_.default.CATEGORIES.map(function(e){return{key:e,method:"RelativeCoincidentTopology"+e+"OffsetParameters"}})),e.getCoincidentTopologyPolygonOffsetParameters=function(){var n=R.getResolveCoincidentTopologyPolygonOffsetParameters(),t=e.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:n.factor+t.factor,offset:n.offset+t.offset}},e.getCoincidentTopologyLineOffsetParameters=function(){var n=R.getResolveCoincidentTopologyLineOffsetParameters(),t=e.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:n.factor+t.factor,offset:n.offset+t.offset}},e.getCoincidentTopologyPointOffsetParameter=function(){var n=R.getResolveCoincidentTopologyPointOffsetParameters(),t=e.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:n.factor+t.factor,offset:n.offset+t.offset}},e.getAbstractScalars=function(e,t,r,a,o){if(!e||!n.scalarVisibility)return null;var i=null;if(t===I.DEFAULT)(i=e.getPointData().getScalars())||(i=e.getCellData().getScalars());else if(t===I.USE_POINT_DATA)i=e.getPointData().getScalars();else if(t===I.USE_CELL_DATA)i=e.getCellData().getScalars();else if(t===I.USE_POINT_FIELD_DATA){var u=e.getPointData();i=r===S.BY_ID?u.getArrayByIndex(a):u.getArrayByName(o)}else if(t===I.USE_CELL_FIELD_DATA){var s=e.getCellData();i=r===S.BY_ID?s.getArrayByIndex(a):s.getArrayByName(o)}else if(t===I.USE_FIELD_DATA){var l=e.getFieldData();i=r===S.BY_ID?l.getArrayByIndex(a):l.getArrayByName(o)}return i},e.mapScalars=function(t,r){var a=e.getAbstractScalars(t,n.scalarMode,n.arrayAccessMode,n.arrayId,n.colorByArrayName);if(!a)return n.colorCoordinates=null,n.colorTextureMap=null,void(n.colorMapColors=null);if(n.useLookupTableScalarRange||e.getLookupTable().setRange(n.scalarRange[0],n.scalarRange[1]),e.canUseTextureMapForColoring(t))return void e.mapScalarsToTexture(a,r);n.colorCoordinates=null,n.colorTextureMap=null;var o=e.getLookupTable();o&&(o.build(),n.colorMapColors=o.mapScalars(a,n.colorMode,0))},e.scalarToTextureCoordinate=function(e,n,t){var r=.5,a=1;return b.default.isNan(e)||(a=.49,r=(e-n)*t,r>1e3?r=1e3:r<-1e3&&(r=-1e3)),{texCoordS:r,texCoordT:a}},e.createColorTextureCoordinates=function(n,t,r,a,o,i,u,s,l){var c=(i[1]-i[0])/s,d=[];d[0]=i[0]-c,d[1]=i[1]+c;var f=1/(d[1]-d[0]),m=t.getData(),p=n.getData(),v=0,h=0;if(o<0||o>=a)for(var b=0;b<r;++b){for(var y=0,x=0;x<a;++x)y+=p[v]*p[v],v++;var T=Math.sqrt(y);l&&(T=g.default.applyLogScale(T,u,i));var _=e.scalarToTextureCoordinate(T,d[0],f);m[h]=_.texCoordS,m[h+1]=_.texCoordT,h+=2}else{v+=o;for(var A=0;A<r;++A){var w=p[v];l&&(w=g.default.applyLogScale(w,u,i));var C=e.scalarToTextureCoordinate(w,d[0],f);m[h]=C.texCoordS,m[h+1]=C.texCoordT,h+=2,v+=a}}},e.mapScalarsToTexture=function(t,r){var a=n.lookupTable.getRange(),o=n.lookupTable.usingLogScale();o&&g.default.getLogRange(a,a);var i=n.lookupTable.getAlpha();if(n.colorMapColors=null,null==n.colorTextureMap||e.getMTime()>n.colorTextureMap.getMTime()||n.lookupTable.getMTime()>n.colorTextureMap.getMTime()||n.lookupTable.getAlpha()!==r){n.lookupTable.setAlpha(r),n.colorTextureMap=null,n.lookupTable.build();var u=n.lookupTable.getNumberOfAvailableColors();u>4094&&(u=4094),u+=2;for(var s=(a[1]-a[0])/(u-1-2),l=new Float64Array(2*u),c=0;c<u;++c)l[c]=a[0]+c*s-s,o&&(l[c]=Math.pow(10,l[c]));for(var d=0;d<u;++d)l[d+u]=NaN;n.colorTextureMap=p.default.newInstance(),n.colorTextureMap.setExtent(0,u-1,0,1,0,0);var m=f.default.newInstance({numberOfComponents:1,values:l});n.colorTextureMap.getPointData().setScalars(n.lookupTable.mapScalars(m,n.colorMode,0)),n.lookupTable.setAlpha(i)}if(!n.colorCoordinates||e.getMTime()>n.colorCoordinates.getMTime()||e.getInputData(0).getMTime()>n.colorCoordinates.getMTime()||n.lookupTable.getMTime()>n.colorCoordinates.getMTime()){n.colorCoordinates=null;var v=t.getNumberOfComponents(),h=t.getNumberOfTuples();n.colorCoordinates=f.default.newInstance({numberOfComponents:2,values:new Float32Array(2*h)});var b=n.lookupTable.getVectorComponent();n.lookupTable.getVectorMode()===P.MAGNITUDE&&t.getNumberOfComponents()>1&&(b=-1),e.createColorTextureCoordinates(t,n.colorCoordinates,h,v,b,a,n.lookupTable.getRange(),n.colorTextureMap.getPointData().getScalars().getNumberOfTuples()/2-2,o)}},e.getIsOpaque=function(){var n=e.getLookupTable();return!n||(n.build(),n.isOpaque())},e.canUseTextureMapForColoring=function(e){return!!n.interpolateScalarsBeforeMapping&&(!n.lookupTable||!n.lookupTable.getIndexedLookup())},e.clearColorArrays=function(){n.colorMapColors=null,n.colorCoordinates=null,n.colorTextureMap=null},e.getLookupTable=function(){return n.lookupTable||e.createDefaultLookupTable(),n.lookupTable},e.getMTime=function(){var e=n.mtime;if(null!==n.lookupTable){var t=n.lookupTable.getMTime();e=t>e?t:e}return e},e.getPrimativeCount=function(){var n=e.getInputData();return{points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getLines().getNumberOfCells()}},e.acquireInvertibleLookupTable=a("AcquireInvertibleLookupTable"),e.valueToColor=a("ValueToColor"),e.colorToValue=a("ColorToValue"),e.useInvertibleColorFor=a("UseInvertibleColorFor"),e.clearInvertibleColor=a("ClearInvertibleColor")}function i(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,N,t),c.default.extend(e,n,t),s.default.get(e,n,["colorCoordinates","colorMapColors","colorTextureMap"]),s.default.setGet(e,n,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","renderTime","resolveCoincidentTopology","scalarMode","scalarVisibility","static","useLookupTableScalarRange","viewSpecificProperties"]),s.default.setGetArray(e,n,["scalarRange"],2),n.viewSpecificProperties||(n.viewSpecificProperties={}),o(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=i;var u=t(0),s=r(u),l=t(82),c=r(l),d=t(5),f=r(d),m=t(84),p=r(m),v=t(86),g=r(v),h=t(1),b=r(h),y=t(25),x=r(y),T=t(88),_=r(T),A=t(89),w=r(A),C=t(35),M=r(C),O=M.default.ColorMode,I=M.default.ScalarMode,S=M.default.GetArray,P=x.default.VectorMode,E={Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},R={};_.default.addCoincidentTopologyMethods(R,E,_.default.CATEGORIES.map(function(e){return{key:e,method:"ResolveCoincidentTopology"+e+"OffsetParameters"}}));var N={colorMapColors:null,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,resolveCoincidentTopology:!1,viewSpecificProperties:null},D=n.newInstance=s.default.newInstance(i,"vtkMapper");n.default=Object.assign({newInstance:D,extend:i},R,w.default,M.default)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.VectorMode={MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},a=n.ScalarMappingTarget={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4};n.default={VectorMode:r,ScalarMappingTarget:a}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){function t(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,n){return 0===n?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}n.classHierarchy.push("vtkPolyData"),p.forEach(function(r){e["getNumberOf"+t(r)]=function(){return n[r].getNumberOfCells()},n[r]?n[r]=(0,l.default)(n[r]):n[r]=d.default.newInstance()}),e.getNumberOfCells=function(){return p.reduce(function(e,t){return e+n[t].getNumberOfCells()},0)}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,v,t),m.default.extend(e,n,t),u.default.setGet(e,n,["verts","lines","polys","strips"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(11),l=r(s),c=t(117),d=r(c),f=t(118),m=r(f),p=["verts","lines","polys","strips"],v={},g=n.newInstance=u.default.newInstance(o,"vtkPolyData");n.default={newInstance:g,extend:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function o(e,n){function t(){n.renderable&&(n.canvas.setAttribute("width",n.size[0]),n.canvas.setAttribute("height",n.size[1])),n.canvas.style.display=n.useOffScreen?"none":"block",n.el&&(n.el.style.cursor=n.cursorVisibility?n.cursor:"none")}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";return n.canvas.toDataURL(e)}n.classHierarchy.push("vtkOpenGLRenderWindow"),e.onModified(t),e.buildPass=function(t){if(t){if(!n.renderable)return;e.prepareNodes(),e.addMissingNodes(n.renderable.getRenderersByReference()),e.removeUnusedNodes(),e.initialize(),n.children.forEach(function(n){n.setOpenGLRenderWindow(e)})}},e.initialize=function(){if(!n.initialized){n.context=e.get3DContext(),n.textureUnitManager=x.default.newInstance(),n.textureUnitManager.setContext(n.context),n.shaderCache.setContext(n.context);var t=n.context;t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.BLEND),n.initialized=!0}},e.makeCurrent=function(){n.context.makeCurrent()},e.setContainer=function(t){n.el&&n.el!==t&&(n.canvas.parentNode===n.el?n.el.removeChild(n.canvas):A("Error: canvas parent node does not match container")),n.el!==t&&(n.el=t,n.el&&n.el.appendChild(n.canvas),e.modified())},e.isInViewport=function(e,t,r){var a=r.getViewportByReference(),o=n.size;return a[0]*o[0]<=e&&a[2]*o[0]>=e&&a[1]*o[1]<=t&&a[3]*o[1]>=t},e.getViewportSize=function(e){var t=e.getViewportByReference(),r=n.size;return[(t[2]-t[0])*r[0],(t[3]-t[1])*r[1]]},e.getViewportCenter=function(n){var t=e.getViewportSize(n);return[.5*t[0],.5*t[1]]},e.displayToNormalizedDisplay=function(e,t,r){return[e/n.size[0],t/n.size[1],r]},e.normalizedDisplayToDisplay=function(e,t,r){return[e*n.size[0],t*n.size[1],r]},e.worldToView=function(n,t,r,a){var o=e.getViewportSize(a);return a.worldToView(n,t,r,o[0]/o[1])},e.viewToWorld=function(n,t,r,a){var o=e.getViewportSize(a);return a.viewToWorld(n,t,r,o[0]/o[1])},e.worldToDisplay=function(n,t,r,a){var o=e.worldToView(n,t,r,a),i=a.viewToNormalizedDisplay(o[0],o[1],o[2]);return e.normalizedDisplayToDisplay(i[0],i[1],i[2])},e.displayToWorld=function(n,t,r,a){var o=e.displayToNormalizedDisplay(n,t,r),i=a.normalizedDisplayToView(o[0],o[1],o[2]);return e.viewToWorld(i[0],i[1],i[2],a)},e.normalizedDisplayToViewport=function(n,t,r,a){var o=a.getViewportByReference();o=e.normalizedDisplayToDisplay(o[0],o[1],0);var i=e.normalizedDisplayToDisplay(n,t,r);return[i[0]-o[0]-.5,i[1]-o[1]-.5,r]},e.viewportToNormalizedViewport=function(n,t,r,a){var o=e.getViewportSize(a);return o&&0!==o[0]&&0!==o[1]?[n/(o[0]-1),t/(o[1]-1),r]:[n,t,r]},e.normalizedViewportToViewport=function(e,t,r){return[e*(n.size[0]-1),t*(n.size[1]-1),r]},e.displayToLocalDisplay=function(e,t,r){return[e,n.size[1]-t-1,r]},e.viewportToNormalizedDisplay=function(n,t,r,a){var o=a.getViewportByReference();o=e.normalizedDisplayToDisplay(o[0],o[1],0);var i=n+o[0]+.5,u=t+o[1]+.5;return e.displayToNormalizedDisplay(i,u,r)},e.getPixelData=function(e,t,r,a){var o=new Uint8Array((r-e+1)*(a-t+1)*4);return n.context.readPixels(e,t,r-e+1,a-t+1,n.context.RGBA,n.context.UNSIGNED_BYTE,o),o},e.get2DContext=function(){return n.canvas.getContext("2d")},e.get3DContext=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0},r=null,a="undefined"!=typeof WebGL2RenderingContext;return n.webgl2=!1,n.defaultToWebgl2&&a&&(r=n.canvas.getContext("webgl2"))&&(n.webgl2=!0,_("using webgl2")),r||(r=n.canvas.getContext("webgl",t)||n.canvas.getContext("experimental-webgl",t)),navigator.getVRDisplays&&navigator.getVRDisplays().then(function(e){e.length>0&&(n.vrDisplay=e[0],n.vrDisplay.depthNear=.01,n.vrDisplay.depthFar=100)}),n.canvas.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1),n.canvas.addEventListener("webglcontextrestored",e.restoreContext,!1),r},e.startVR=function(){n.vrDisplay.isConnected?n.vrDisplay.requestPresent([{source:n.canvas}]).then(function(){if(n.oldCanvasSize=n.size.slice(),n.el&&n.hideInVR&&(n.el.style.display="none"),n.queryVRSize){var t=n.vrDisplay.getEyeParameters("left"),r=n.vrDisplay.getEyeParameters("right"),a=Math.floor(t.renderWidth+r.renderWidth),o=Math.floor(Math.max(t.renderHeight,r.renderHeight));e.setSize(a,o)}else e.setSize(n.vrResolution);n.renderable.getRenderers()[0].resetCamera(),n.vrFrameData=new VRFrameData,n.renderable.getInteractor().switchToVRAnimation(),e.vrRender()}):A("vrDisplay is not connected")},e.stopVR=function(){n.renderable.getInteractor().returnFromVRAnimation(),n.vrDisplay.exitPresent(),n.vrDisplay.cancelAnimationFrame(n.vrSceneFrame),e.setSize.apply(e,a(n.oldCanvasSize)),n.el&&n.hideInVR&&(n.el.style.display="block");var t=n.renderable.getRenderers()[0];t.getActiveCamera().setProjectionMatrix(null),t.setViewport(0,0,1,1),e.traverseAllPasses()},e.vrRender=function(){n.renderable.getInteractor().updateGamepads(n.vrDisplay.displayId),n.vrSceneFrame=n.vrDisplay.requestAnimationFrame(e.vrRender),n.vrDisplay.getFrameData(n.vrFrameData);var t=n.renderable.getRenderers()[0];t.setViewport(0,0,.5,1),t.getActiveCamera().computeViewParametersFromPhysicalMatrix(n.vrFrameData.leftViewMatrix),t.getActiveCamera().setProjectionMatrix(n.vrFrameData.leftProjectionMatrix),e.traverseAllPasses(),t.setViewport(.5,0,1,1),t.getActiveCamera().computeViewParametersFromPhysicalMatrix(n.vrFrameData.rightViewMatrix),t.getActiveCamera().setProjectionMatrix(n.vrFrameData.rightProjectionMatrix),e.traverseAllPasses(),n.vrDisplay.submitFrame()},e.restoreContext=function(){var n=p.default.newInstance();n.setCurrentOperation("Release"),n.traverse(e,null)},e.activateTexture=function(t){var r=n.textureResourceIds.get(t);if(void 0!==r)return void n.context.activeTexture(n.context.TEXTURE0+r);var a=e.getTextureUnitManager().allocate();if(a<0)return void A("Hardware does not support the number of textures defined.");n.textureResourceIds.set(t,a),n.context.activeTexture(n.context.TEXTURE0+a)},e.deactivateTexture=function(t){var r=n.textureResourceIds.get(t);void 0!==r&&(e.getTextureUnitManager().free(r),n.textureResourceIds.delete(t))},e.getTextureUnitForTexture=function(e){var t=n.textureResourceIds.get(e);return void 0!==t?t:-1},e.getDefaultTextureInternalFormat=function(e,t,r){if(n.webgl2)switch(e){case T.VtkDataTypes.UNSIGNED_CHAR:switch(t){case 1:return n.context.R8;case 2:return n.context.RG8;case 3:return n.context.RGB8;case 4:default:return n.context.RGBA8}default:case T.VtkDataTypes.FLOAT:switch(t){case 1:return n.context.R16F;case 2:return n.context.RG16F;case 3:return n.context.RGB16F;case 4:default:return n.context.RGBA16F}}switch(t){case 1:return n.context.LUMINANCE;case 2:return n.context.LUMINANCE_ALPHA;case 3:return n.context.RGB;case 4:default:return n.context.RGBA}},e.captureImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";return n.deleted?null:(e.traverseAllPasses(),r(t))},e.traverseAllPasses=function(){if(n.renderPasses)for(var t=0;t<n.renderPasses.length;++t)n.renderPasses[t].traverse(e,null);n.notifyImageReady&&e.invokeImageReady(r())},e.disableDepthMask=function(){n.depthMaskEnabled&&(n.context.depthMask(!1),n.depthMaskEnabled=!1)},e.enableDepthMask=function(){n.depthMaskEnabled||(n.context.depthMask(!0),n.depthMaskEnabled=!0)},e.disableCullFace=function(){n.cullFaceEnabled&&(n.context.disable(n.context.CULL_FACE),n.cullFaceEnabled=!1)},e.enableCullFace=function(){n.cullFaceEnabled||(n.context.enable(n.context.CULL_FACE),n.cullFaceEnabled=!0)}}function i(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,w,t),n.canvas=document.createElement("canvas"),n.textureResourceIds=new Map,b.default.extend(e,n,t),n.myFactory=f.default.newInstance(),n.shaderCache=g.default.newInstance(),n.renderPasses[0]=c.default.newInstance(),s.default.event(e,n,"imageReady"),-1!==navigator.appVersion.indexOf("Mac")&&(n.defaultToWebgl2=!0),-1!==navigator.platform.indexOf("Linux")&&(n.defaultToWebgl2=!0),"undefined"!=typeof InstallTrigger&&(n.defaultToWebgl2=!0),s.default.get(e,n,["shaderCache","textureUnitManager","webgl2"]),s.default.setGet(e,n,["initialized","context","canvas","renderPasses","notifyImageReady","defaultToWebgl2","cursor","hideInVR","queryVRSize"]),s.default.setGetArray(e,n,["size","vrResolution"],2),o(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=i;var u=t(0),s=r(u),l=t(47),c=r(l),d=t(61),f=r(d),m=t(28),p=r(m),v=t(105),g=r(v),h=t(3),b=r(h),y=t(107),x=r(y),T=t(8),_=s.default.vtkDebugMacro,A=s.default.vtkErrorMacro,w={cullFaceEnabled:!1,depthMaskEnabled:!0,shaderCache:null,initialized:!1,context:null,canvas:null,size:[300,300],cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,renderPasses:[],notifyImageReady:!1,webgl2:!1,defaultToWebgl2:!1,vrResolution:[2160,1200],queryVRSize:!1,hideInVR:!0},C=n.newInstance=s.default.newInstance(i,"vtkOpenGLRenderWindow");n.default={newInstance:C,extend:i}},function(e,n,t){"use strict";function r(e,n){n.classHierarchy.push("vtkRenderPass"),e.getOperation=function(){return n.currentOperation},e.setCurrentOperation=function(e){n.currentOperation=e,n.currentTraverseOperation="traverse"+i.default.capitalize(n.currentOperation)},e.getTraverseOperation=function(){return n.currentTraverseOperation},e.traverse=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.deleted||(n.currentParent=r,n.preDelegateOperations.forEach(function(n){e.setCurrentOperation(n),t.traverse(e)}),n.delegates.forEach(function(n){n.traverse(t,e)}),n.postDelegateOperations.forEach(function(n){e.setCurrentOperation(n),t.traverse(e)}))}}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,u,t),i.default.obj(e,n),i.default.get(e,n,["currentOperation"]),i.default.setGet(e,n,["delegates","currentParent","preDelegateOperations","postDelegateOperations"]),r(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=a;var o=t(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null},s=n.newInstance=i.default.newInstance(a,"vtkRenderPass");n.default={newInstance:s,extend:a}},function(e,n,t){"use strict";var r=t(6),a={};a.create=function(){var e=new r.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.fromMat4=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[4],e[4]=n[5],e[5]=n[6],e[6]=n[8],e[7]=n[9],e[8]=n[10],e},a.clone=function(e){var n=new r.ARRAY_TYPE(9);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n},a.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.transpose=function(e,n){if(e===n){var t=n[1],r=n[2],a=n[5];e[1]=n[3],e[2]=n[6],e[3]=t,e[5]=n[7],e[6]=r,e[7]=a}else e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8];return e},a.invert=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],l=n[7],c=n[8],d=c*i-u*l,f=-c*o+u*s,m=l*o-i*s,p=t*d+r*f+a*m;return p?(p=1/p,e[0]=d*p,e[1]=(-c*r+a*l)*p,e[2]=(u*r-a*i)*p,e[3]=f*p,e[4]=(c*t-a*s)*p,e[5]=(-u*t+a*o)*p,e[6]=m*p,e[7]=(-l*t+r*s)*p,e[8]=(i*t-r*o)*p,e):null},a.adjoint=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],l=n[7],c=n[8];return e[0]=i*c-u*l,e[1]=a*l-r*c,e[2]=r*u-a*i,e[3]=u*s-o*c,e[4]=t*c-a*s,e[5]=a*o-t*u,e[6]=o*l-i*s,e[7]=r*s-t*l,e[8]=t*i-r*o,e},a.determinant=function(e){var n=e[0],t=e[1],r=e[2],a=e[3],o=e[4],i=e[5],u=e[6],s=e[7],l=e[8];return n*(l*o-i*s)+t*(-l*a+i*u)+r*(s*a-o*u)},a.multiply=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=n[6],c=n[7],d=n[8],f=t[0],m=t[1],p=t[2],v=t[3],g=t[4],h=t[5],b=t[6],y=t[7],x=t[8];return e[0]=f*r+m*i+p*l,e[1]=f*a+m*u+p*c,e[2]=f*o+m*s+p*d,e[3]=v*r+g*i+h*l,e[4]=v*a+g*u+h*c,e[5]=v*o+g*s+h*d,e[6]=b*r+y*i+x*l,e[7]=b*a+y*u+x*c,e[8]=b*o+y*s+x*d,e},a.mul=a.multiply,a.translate=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=n[6],c=n[7],d=n[8],f=t[0],m=t[1];return e[0]=r,e[1]=a,e[2]=o,e[3]=i,e[4]=u,e[5]=s,e[6]=f*r+m*i+l,e[7]=f*a+m*u+c,e[8]=f*o+m*s+d,e},a.rotate=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=n[6],c=n[7],d=n[8],f=Math.sin(t),m=Math.cos(t);return e[0]=m*r+f*i,e[1]=m*a+f*u,e[2]=m*o+f*s,e[3]=m*i-f*r,e[4]=m*u-f*a,e[5]=m*s-f*o,e[6]=l,e[7]=c,e[8]=d,e},a.scale=function(e,n,t){var r=t[0],a=t[1];return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=a*n[3],e[4]=a*n[4],e[5]=a*n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},a.fromTranslation=function(e,n){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=n[0],e[7]=n[1],e[8]=1,e},a.fromRotation=function(e,n){var t=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=t,e[2]=0,e[3]=-t,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.fromScaling=function(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=0,e[4]=n[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.fromMat2d=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=0,e[3]=n[2],e[4]=n[3],e[5]=0,e[6]=n[4],e[7]=n[5],e[8]=1,e},a.fromQuat=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=t+t,u=r+r,s=a+a,l=t*i,c=r*i,d=r*u,f=a*i,m=a*u,p=a*s,v=o*i,g=o*u,h=o*s;return e[0]=1-d-p,e[3]=c-h,e[6]=f+g,e[1]=c+h,e[4]=1-l-p,e[7]=m-v,e[2]=f-g,e[5]=m+v,e[8]=1-l-d,e},a.normalFromMat4=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],l=n[7],c=n[8],d=n[9],f=n[10],m=n[11],p=n[12],v=n[13],g=n[14],h=n[15],b=t*u-r*i,y=t*s-a*i,x=t*l-o*i,T=r*s-a*u,_=r*l-o*u,A=a*l-o*s,w=c*v-d*p,C=c*g-f*p,M=c*h-m*p,O=d*g-f*v,I=d*h-m*v,S=f*h-m*g,P=b*S-y*I+x*O+T*M-_*C+A*w;return P?(P=1/P,e[0]=(u*S-s*I+l*O)*P,e[1]=(s*M-i*S-l*C)*P,e[2]=(i*I-u*M+l*w)*P,e[3]=(a*I-r*S-o*O)*P,e[4]=(t*S-a*M+o*C)*P,e[5]=(r*M-t*I-o*w)*P,e[6]=(v*A-g*_+h*T)*P,e[7]=(g*x-p*A-h*y)*P,e[8]=(p*_-v*x+h*b)*P,e):null},a.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},a.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},e.exports=a},function(e,n,t){"use strict";var r=t(6),a={};a.create=function(){var e=new r.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},a.clone=function(e){var n=new r.ARRAY_TYPE(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n},a.fromValues=function(e,n,t){var a=new r.ARRAY_TYPE(3);return a[0]=e,a[1]=n,a[2]=t,a},a.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e},a.set=function(e,n,t,r){return e[0]=n,e[1]=t,e[2]=r,e},a.add=function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e},a.subtract=function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e},a.sub=a.subtract,a.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e},a.mul=a.multiply,a.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e},a.div=a.divide,a.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e},a.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e},a.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e},a.scaleAndAdd=function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e},a.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],a=n[2]-e[2];return Math.sqrt(t*t+r*r+a*a)},a.dist=a.distance,a.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],a=n[2]-e[2];return t*t+r*r+a*a},a.sqrDist=a.squaredDistance,a.length=function(e){var n=e[0],t=e[1],r=e[2];return Math.sqrt(n*n+t*t+r*r)},a.len=a.length,a.squaredLength=function(e){var n=e[0],t=e[1],r=e[2];return n*n+t*t+r*r},a.sqrLen=a.squaredLength,a.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e},a.inverse=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e},a.normalize=function(e,n){var t=n[0],r=n[1],a=n[2],o=t*t+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o),e},a.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},a.cross=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=t[0],u=t[1],s=t[2];return e[0]=a*s-o*u,e[1]=o*i-r*s,e[2]=r*u-a*i,e},a.lerp=function(e,n,t,r){var a=n[0],o=n[1],i=n[2];return e[0]=a+r*(t[0]-a),e[1]=o+r*(t[1]-o),e[2]=i+r*(t[2]-i),e},a.hermite=function(e,n,t,r,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,l=i*(o-1),c=i*(3-2*o);return e[0]=n[0]*u+t[0]*s+r[0]*l+a[0]*c,e[1]=n[1]*u+t[1]*s+r[1]*l+a[1]*c,e[2]=n[2]*u+t[2]*s+r[2]*l+a[2]*c,e},a.bezier=function(e,n,t,r,a,o){var i=1-o,u=i*i,s=o*o,l=u*i,c=3*o*u,d=3*s*i,f=s*o;return e[0]=n[0]*l+t[0]*c+r[0]*d+a[0]*f,e[1]=n[1]*l+t[1]*c+r[1]*d+a[1]*f,e[2]=n[2]*l+t[2]*c+r[2]*d+a[2]*f,e},a.random=function(e,n){n=n||1;var t=2*r.RANDOM()*Math.PI,a=2*r.RANDOM()-1,o=Math.sqrt(1-a*a)*n;return e[0]=Math.cos(t)*o,e[1]=Math.sin(t)*o,e[2]=a*n,e},a.transformMat4=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=t[3]*r+t[7]*a+t[11]*o+t[15];return i=i||1,e[0]=(t[0]*r+t[4]*a+t[8]*o+t[12])/i,e[1]=(t[1]*r+t[5]*a+t[9]*o+t[13])/i,e[2]=(t[2]*r+t[6]*a+t[10]*o+t[14])/i,e},a.transformMat3=function(e,n,t){var r=n[0],a=n[1],o=n[2];return e[0]=r*t[0]+a*t[3]+o*t[6],e[1]=r*t[1]+a*t[4]+o*t[7],e[2]=r*t[2]+a*t[5]+o*t[8],e},a.transformQuat=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=t[0],u=t[1],s=t[2],l=t[3],c=l*r+u*o-s*a,d=l*a+s*r-i*o,f=l*o+i*a-u*r,m=-i*r-u*a-s*o;return e[0]=c*l+m*-i+d*-s-f*-u,e[1]=d*l+m*-u+f*-i-c*-s,e[2]=f*l+m*-s+c*-u-d*-i,e},a.rotateX=function(e,n,t,r){var a=[],o=[];return a[0]=n[0]-t[0],a[1]=n[1]-t[1],a[2]=n[2]-t[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e},a.rotateY=function(e,n,t,r){var a=[],o=[];return a[0]=n[0]-t[0],a[1]=n[1]-t[1],a[2]=n[2]-t[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e},a.rotateZ=function(e,n,t,r){var a=[],o=[];return a[0]=n[0]-t[0],a[1]=n[1]-t[1],a[2]=n[2]-t[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e},a.forEach=function(){var e=a.create();return function(n,t,r,a,o,i){var u,s;for(t||(t=3),r||(r=0),s=a?Math.min(a*t+r,n.length):n.length,u=r;u<s;u+=t)e[0]=n[u],e[1]=n[u+1],e[2]=n[u+2],o(e,e,i),n[u]=e[0],n[u+1]=e[1],n[u+2]=e[2];return n}}(),a.angle=function(e,n){var t=a.fromValues(e[0],e[1],e[2]),r=a.fromValues(n[0],n[1],n[2]);a.normalize(t,t),a.normalize(r,r);var o=a.dot(t,r);return o>1?0:Math.acos(o)},a.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},e.exports=a},function(e,n,t){"use strict";var r=t(6),a={};a.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},a.clone=function(e){var n=new r.ARRAY_TYPE(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},a.fromValues=function(e,n,t,a){var o=new r.ARRAY_TYPE(4);return o[0]=e,o[1]=n,o[2]=t,o[3]=a,o},a.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},a.set=function(e,n,t,r,a){return e[0]=n,e[1]=t,e[2]=r,e[3]=a,e},a.add=function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e[3]=n[3]+t[3],e},a.subtract=function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e[3]=n[3]-t[3],e},a.sub=a.subtract,a.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e[3]=n[3]*t[3],e},a.mul=a.multiply,a.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e[3]=n[3]/t[3],e},a.div=a.divide,a.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e[3]=Math.min(n[3],t[3]),e},a.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e[3]=Math.max(n[3],t[3]),e},a.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e},a.scaleAndAdd=function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e[3]=n[3]+t[3]*r,e},a.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],a=n[2]-e[2],o=n[3]-e[3];return Math.sqrt(t*t+r*r+a*a+o*o)},a.dist=a.distance,a.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],a=n[2]-e[2],o=n[3]-e[3];return t*t+r*r+a*a+o*o},a.sqrDist=a.squaredDistance,a.length=function(e){var n=e[0],t=e[1],r=e[2],a=e[3];return Math.sqrt(n*n+t*t+r*r+a*a)},a.len=a.length,a.squaredLength=function(e){var n=e[0],t=e[1],r=e[2],a=e[3];return n*n+t*t+r*r+a*a},a.sqrLen=a.squaredLength,a.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e},a.inverse=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e[3]=1/n[3],e},a.normalize=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=t*t+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),e[0]=t*i,e[1]=r*i,e[2]=a*i,e[3]=o*i),e},a.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]},a.lerp=function(e,n,t,r){var a=n[0],o=n[1],i=n[2],u=n[3];return e[0]=a+r*(t[0]-a),e[1]=o+r*(t[1]-o),e[2]=i+r*(t[2]-i),e[3]=u+r*(t[3]-u),e},a.random=function(e,n){return n=n||1,e[0]=r.RANDOM(),e[1]=r.RANDOM(),e[2]=r.RANDOM(),e[3]=r.RANDOM(),a.normalize(e,e),a.scale(e,e,n),e},a.transformMat4=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3];return e[0]=t[0]*r+t[4]*a+t[8]*o+t[12]*i,e[1]=t[1]*r+t[5]*a+t[9]*o+t[13]*i,e[2]=t[2]*r+t[6]*a+t[10]*o+t[14]*i,e[3]=t[3]*r+t[7]*a+t[11]*o+t[15]*i,e},a.transformQuat=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=t[0],u=t[1],s=t[2],l=t[3],c=l*r+u*o-s*a,d=l*a+s*r-i*o,f=l*o+i*a-u*r,m=-i*r-u*a-s*o;return e[0]=c*l+m*-i+d*-s-f*-u,e[1]=d*l+m*-u+f*-i-c*-s,e[2]=f*l+m*-s+c*-u-d*-i,e[3]=n[3],e},a.forEach=function(){var e=a.create();return function(n,t,r,a,o,i){var u,s;for(t||(t=4),r||(r=0),s=a?Math.min(a*t+r,n.length):n.length,u=r;u<s;u+=t)e[0]=n[u],e[1]=n[u+1],e[2]=n[u+2],e[3]=n[u+3],o(e,e,i),n[u]=e[0],n[u+1]=e[1],n[u+2]=e[2],n[u+3]=e[3];return n}}(),a.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},e.exports=a},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLHardwareSelector"),e.releasePixBuffers=function(){n.pixBuffer=[]},e.beginSelection=function(){n.openGLRenderer=n.openGLRenderWindow.getViewNodeFor(n.renderer),n.maxAttributeId=0,n.framebuffer=d.default.newInstance(),n.framebuffer.setOpenGLRenderWindow(n.openGLRenderWindow),n.framebuffer.saveCurrentBindingsAndBuffers();var t=n.openGLRenderWindow.getSize();n.framebuffer.create(t[0],t[1]),n.framebuffer.populateFramebuffer(),n.openGLRenderer.clear(),n.openGLRenderer.setSelector(e),n.hitProps=[],n.props=[],e.releasePixBuffers()},e.endSelection=function(){n.hitProps=[],n.openGLRenderer.setSelector(null),n.framebuffer.restorePreviousBindingsAndBuffers()},e.preCapturePass=function(){},e.postCapturePass=function(){},e.select=function(){var t=null;return e.captureBuffers()&&(t=e.generateSelection(n.area[0],n.area[1],n.area[2],n.area[3]),e.releasePixBuffers()),t},e.captureBuffers=function(){if(!n.renderer||!n.openGLRenderWindow)return x("Renderer and view must be set before calling Select."),!1;for(n.openGLRenderer=n.openGLRenderWindow.getViewNodeFor(n.renderer),e.invokeEvent({type:"StartEvent"}),n.originalBackground=n.renderer.getBackgroundByReference(),n.renderer.setBackground(0,0,0),e.beginSelection(),n.currentPass=g.MIN_KNOWN_PASS;n.currentPass<=g.MAX_KNOWN_PASS;n.currentPass++)e.passRequired(n.currentPass)&&(e.preCapturePass(n.currentPass),n.openGLRenderWindow.traverseAllPasses(),e.postCapturePass(n.currentPass),e.savePixelBuffer(n.currentPass));return e.endSelection(),n.renderer.setBackground(n.originalBackground),e.invokeEvent({type:"EndEvent"}),n.openGLRenderWindow.traverseAllPasses(),!0},e.passRequired=function(e){return!0},e.savePixelBuffer=function(t){n.pixBuffer[t]=n.openGLRenderWindow.getPixelData(n.area[0],n.area[1],n.area[2],n.area[3]),t===g.ACTOR_PASS&&e.buildPropHitList(n.pixBuffer[t])},e.buildPropHitList=function(t){for(var r=0;r<=n.area[3]-n.area[1];r++)for(var a=0;a<=n.area[2]-n.area[0];a++){var o=e.convert(a,r,t);o>0&&(o--,-1===n.hitProps.indexOf(o)&&n.hitProps.push(o))}},e.renderProp=function(t){n.currentPass===g.ACTOR_PASS&&(e.setPropColorValueFromInt(n.props.length+n.idOffset),n.props.push(t))},e.renderCompositeIndex=function(t){n.currentPass===g.COMPOSITE_INDEX_PASS&&e.setPropColorValueFromInt(t+n.idOffset)},e.renderAttributeId=function(e){e<0||(n.maxAttributeId=e>n.maxAttributeId?e:n.maxAttributeId)},e.getPropFromID=function(e){return e>=0&&e<n.props.length?n.props[e]:null},e.passTypeToString=function(e){return u.default.enumToString(g,e)},e.isPropHit=function(e){return n.hitProps.hasKey(e)},e.convert=function(e,t,r){if(!r)return 0;var a=4*(t*(n.area[2]-n.area[0]+1)+e),o=[];o[0]=r[a],o[1]=r[a+1],o[2]=r[a+2];var i=o[2];return i*=256,i+=o[1],i*=256,i+=o[0]},e.setPropColorValueFromInt=function(e){n.propColorValue[0]=e%256/255,n.propColorValue[1]=e/256%256/255,n.propColorValue[2]=e/65536%256/255},e.getPixelInformation=function(t,r,a){var o=r<0?0:r;if(0===o){if(a[0]=t[0],a[1]=t[1],t[0]<n.area[0]||t[0]>n.area[2]||t[1]<n.area[1]||t[1]>n.area[3])return null;var i=[t[0]-n.area[0],t[1]-n.area[1]],u=e.convert(i[0],i[1],n.pixBuffer[g.ACTOR_PASS]);if(u<=0)return null;var s={};s.valid=!0,s.propID=u-n.idOffset,s.prop=e.getPropFromID(s.propID);var l=e.convert(i[0],i[1],n.pixBuffer[g.COMPOSITE_INDEX_PASS]);return(l<0||l>16777215)&&(l=0),s.compositeID=l-n.idOffset,s}var c=[t[0],t[1]],d=[0,0],f=e.getPixelInformation(t,0,a);if(f&&f.valid)return f;for(var m=1;m<o;++m){for(var p=c[1]>m?c[1]-m:0;p<=c[1]+m;++p){if(d[1]=p,c[0]>=m&&(d[0]=c[0]-m,(f=e.getPixelInformation(d,0,a))&&f.valid))return f;if(d[0]=c[0]+m,(f=e.getPixelInformation(d,0,a))&&f.valid)return f}for(var v=c[0]>=m?c[0]-(m-1):0;v<=c[0]+(m-1);++v){if(d[0]=v,c[1]>=m&&(d[1]=c[1]-m,(f=e.getPixelInformation(d,0,a))&&f.valid))return f;if(d[1]=c[1]+m,(f=e.getPixelInformation(d,0,a))&&f.valid)return f}}return a[0]=t[0],a[1]=t[1],null},e.convertSelection=function(e,n){var t=[],r=0;return n.forEach(function(n,a){var o=m.default.newInstance();switch(o.setContentType(h.INDICES),e){case y.FIELD_ASSOCIATION_CELLS:o.setFieldType(b.CELL);break;case y.FIELD_ASSOCIATION_POINTS:o.setFieldType(b.POINT);break;default:x("Unknown field association")}o.getProperties().propID=n.info.propID,o.getProperties().prop=n.info.prop,o.getProperties().compositeID=n.info.compositeID,o.getProperties().pixelCount=n.pixelCount,o.setSelectionList(n.attributeIDs),t[r]=o,r++}),t},e.getInfoHash=function(e){return e.propID+" "+e.compositeID},e.generateSelection=function(t,r,a,o){for(var i=new Map,u=[0,0],s=r;s<=o;s++)for(var l=t;l<=a;l++){var c=[l,s],d=e.getPixelInformation(c,0,u);if(d&&d.valid){var f=e.getInfoHash(d);i.has(f)?(i.get(f).pixelCount++,-1===i.get(f).attributeIDs.indexOf(d.attributeID)&&i.get(f).attributeIDs.push(d.attributeID)):i.set(f,{info:d,pixelCount:1,attributeIDs:[d.attributeID]})}}return e.convertSelection(n.fieldAssociation,i)},e.attach=function(e,t){n.openGLRenderWindow=e,n.renderer=t}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,T,t),u.default.obj(e,n),n.area=[0,0,0,0],n.propColorValue=[0,0,0],n.props=[],u.default.setGet(e,n,["fieldAssociation","renderer","currentPass"]),u.default.setGetArray(e,n,["area"],4),u.default.setGetArray(e,n,["propColorValue"],3),u.default.event(e,n,"event"),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(73),l=r(s),c=t(20),d=r(c),f=t(74),m=r(f),p=t(21),v=r(p),g=l.default.PassTypes,h=m.default.SelectionContent,b=m.default.SelectionField,y=v.default.FieldAssociations,x=u.default.vtkErrorMacro,T={fieldAssociation:y.FIELD_ASSOCIATION_CELLS,renderer:null,area:null,openGLRenderWindow:null,openGLRenderer:null,currentPass:-1,propColorValue:null,props:null,idOffset:1},_=n.newInstance=u.default.newInstance(o,"vtkOpenGLHardwareSelector");n.default=Object.assign({newInstance:_,extend:o},l.default)},function(e,n,t){"use strict";function r(e,n){n.classHierarchy.push("vtkOpenGLVertexArrayObject"),e.exposedMethod=function(){},e.initialize=function(){n.instancingExtension=null,n.openGLRenderWindow.getWebgl2()||(n.instancingExtension=n.context.getExtension("ANGLE_instanced_arrays")),!n.forceEmulation&&n.openGLRenderWindow&&n.openGLRenderWindow.getWebgl2()?(n.extension=null,n.supported=!0,n.handleVAO=n.context.createVertexArray()):(n.extension=n.context.getExtension("OES_vertex_array_object"),!n.forceEmulation&&n.extension?(n.supported=!0,n.handleVAO=n.extension.createVertexArrayOES()):n.supported=!1)},e.isReady=function(){return 0!==n.handleVAO||!1===n.supported},e.bind=function(){if(e.isReady()||e.initialize(),e.isReady()&&n.supported)n.extension?n.extension.bindVertexArrayOES(n.handleVAO):n.context.bindVertexArray(n.handleVAO);else if(e.isReady())for(var t=n.context,r=0;r<n.buffers.length;++r){var a=n.buffers[r];n.context.bindBuffer(t.ARRAY_BUFFER,a.buffer);for(var o=0;o<a.attributes.length;++o)for(var i=a.attributes[o],u=i.isMatrix?i.size:1,s=0;s<u;++s)t.enableVertexAttribArray(i.index+s),t.vertexAttribPointer(i.index+s,i.size,i.type,i.normalize,i.stride,i.offset+i.stride*s/i.size),i.divisor>0&&(n.instancingExtension?n.instancingExtension.vertexAttribDivisorANGLE(i.index+s,1):t.vertexAttribDivisor(i.index+s,1))}},e.release=function(){if(e.isReady()&&n.supported)n.extension?n.extension.bindVertexArrayOES(null):n.context.bindVertexArray(null);else if(e.isReady())for(var t=n.context,r=0;r<n.buffers.length;++r){var a=n.buffers[r];n.context.bindBuffer(t.ARRAY_BUFFER,a.buffer);for(var o=0;o<a.attributes.length;++o)for(var i=a.attributes[o],u=i.isMatrix?i.size:1,s=0;s<u;++s)t.enableVertexAttribArray(i.index+s),t.vertexAttribPointer(i.index+s,i.size,i.type,i.normalize,i.stride,i.offset+i.stride*s/i.size),i.divisor>0&&(n.instancingExtension?n.instancingExtension.vertexAttribDivisorANGLE(i.index+s,0):t.vertexAttribDivisor(i.index+s,0)),t.disableVertexAttribArray(i.index+s)}},e.shaderProgramChanged=function(){e.release(),n.handleVAO&&(n.extension?n.extension.deleteVertexArrayOES(n.handleVAO):n.context.deleteVertexArray(n.handleVAO)),n.handleVAO=0,n.handleProgram=0},e.releaseGraphicsResources=function(){e.shaderProgramChanged(),n.handleVAO&&(n.extension?n.extension.deleteVertexArrayOES(n.handleVAO):n.context.deleteVertexArray(n.handleVAO)),n.handleVAO=0,n.supported=!0,n.handleProgram=0},e.addAttributeArray=function(n,t,r,a,o,i,u,s){return e.addAttributeArrayWithDivisor(n,t,r,a,o,i,u,s,0,!1)},e.addAttributeArrayWithDivisor=function(t,r,a,o,i,s,l,c,d,f){if(!t)return!1;if(!t.isBound()||0===r.getHandle()||r.getType()!==u.ObjectType.ARRAY_BUFFER)return!1;if(0===n.handleProgram&&(n.handleProgram=t.getHandle()),e.isReady()||e.initialize(),!e.isReady()||n.handleProgram!==t.getHandle())return!1;var m=n.context,p={};if(p.name=a,p.index=m.getAttribLocation(n.handleProgram,a),p.offset=o,p.stride=i,p.type=s,p.size=l,p.normalize=c,p.isMatrix=f,p.divisor=d,-1===p.Index)return!1;if(r.bind(),m.enableVertexAttribArray(p.index),m.vertexAttribPointer(p.index,p.size,p.type,p.normalize,p.stride,p.offset),d>0&&(n.instancingExtension?n.instancingExtension.vertexAttribDivisorANGLE(p.index,1):m.vertexAttribDivisor(p.index,1)),p.buffer=r.getHandle(),!n.supported){for(var v=!1,g=0;g<n.buffers.length;++g){var h=n.buffers[g];if(h.buffer===p.buffer){v=!0;for(var b=!1,y=0;y<h.attributes.length;++y){h.attributes[y].name===a&&(b=!0,h.attributes[y]=p)}b||h.attributes.push(p)}}v||n.buffers.push({buffer:p.buffer,attributes:[p]})}return!0},e.addAttributeMatrixWithDivisor=function(t,r,a,o,i,u,s,l,c){var d=e.addAttributeArrayWithDivisor(t,r,a,o,i,u,s,l,c,!0);if(!d)return d;for(var f=n.context,m=f.getAttribLocation(n.handleProgram,a),p=1;p<s;p++)f.enableVertexAttribArray(m+p),f.vertexAttribPointer(m+p,s,u,l,i,o+i*p/s),c>0&&(n.instancingExtension?n.instancingExtension.vertexAttribDivisorANGLE(m+p,1):f.vertexAttribDivisor(m+p,1));return!0},e.removeAttributeArray=function(t){if(!e.isReady()||0===n.handleProgram)return!1;if(!n.supported)for(var r=0;r<n.buffers.length;++r)for(var a=n.buffers[r],o=0;o<a.attributes.length;++o){var i=a.attributes[o];if(i.name===t)return a.attributes.splice(o,1),a.attributes.length||n.buffers.splice(r,1),!0}return!0},e.setOpenGLRenderWindow=function(t){n.openGLRenderWindow!==t&&(e.releaseGraphicsResources(),n.openGLRenderWindow=t,n.context=null,t&&(n.context=n.openGLRenderWindow.getContext()))}}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,s,t),n.buffers=[],i.default.obj(e,n),i.default.get(e,n,["supported"]),i.default.setGet(e,n,["forceEmulation"]),r(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=a;var o=t(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=t(13),s={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null,openGLRenderWindow:null},l=n.newInstance=i.default.newInstance(a,"vtkOpenGLVertexArrayObject");n.default={newInstance:l,extend:a}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.StructuredType={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};n.default={StructuredType:r}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.ColorMode={DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},a=n.ScalarMode={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5},o=n.GetArray={BY_ID:0,BY_NAME:1};n.default={ColorMode:r,GetArray:o,ScalarMode:a}},function(e,n){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexMC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// picking support\n//VTK::Picking::Dec\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::PrimID::Impl\n\n  //VTK::PositionVC::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::Picking::Impl\n}\n"},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function o(e){return e[0]<=e[1]&&e[2]<=e[3]&&e[4]<=e[5]}function i(e){return[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])]}function u(e,n){return e[2*n+1]-e[2*n]}function s(e){return[u(e,0),u(e,1),u(e,2)]}function l(e){return e.slice(0,2)}function c(e){return e.slice(2,4)}function d(e){return e.slice(4,6)}function f(e){var n=s(e);return n[0]>n[1]?n[0]>n[2]?n[0]:n[2]:n[1]>n[2]?n[1]:n[2]}function m(e){if(o(e)){var n=s(e);return Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2])}return null}function p(e,n){return e<=0&&n>=0||e>=0&&n<=0}function v(e,n){for(var t=0,r=0;r<2;r++)for(var a=2;a<4;a++)for(var o=4;o<6;o++)n[t]=[e[r],e[a],e[o]],t++}function g(e,n){n.classHierarchy.push("vtkBoundingBox"),e.clone=function(){var e=[].concat(n.bounds);return M({bounds:e})},e.equals=function(e){var t=n.bounds,r=e.getBounds();return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]},e.setMinPoint=function(e,t,r){var a=b(n.bounds,6),o=a[0],i=a[1],u=a[2],s=a[3],l=a[4],c=a[5];return n.bounds=[e,e>i?e:i,t,t>s?t:s,r,r>c?r:c],o!==e||u!==t||l!==r},e.setMaxPoint=function(e,t,r){var a=b(n.bounds,6),o=a[0],i=a[1],u=a[2],s=a[3],l=a[4],c=a[5];return n.bounds=[e<o?e:o,e,t<u?t:u,t,r<l?r:l,r],i!==e||s!==t||c!==r},e.addPoint=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.bounds=n.bounds.map(function(e,n){if(n%2==0){var r=n/2;return e<t[r]?e:t[r]}var a=(n-1)/2;return e>t[a]?e:t[a]})},e.addBounds=function(e,t,r,a,o,i){var u=b(n.bounds,6),s=u[0],l=u[1],c=u[2],d=u[3],f=u[4],m=u[5];n.bounds=[Math.min(e,s),Math.max(t,l),Math.min(r,c),Math.max(a,d),Math.min(o,f),Math.max(i,m)]},e.addBox=function(n){e.addBounds.apply(e,a(n.getBounds()))},e.isValid=function(){return o(n.bounds)},e.intersect=function(t){if(!e.isValid()||!t.isValid())return!1;for(var r=[0,0,0,0,0,0],a=t.getBounds(),o=void 0,i=0;i<3;i++)if(o=!1,a[2*i]>=n.bounds[2*i]&&a[2*i]<=n.bounds[2*i+1]?(o=!0,r[2*i]=a[2*i]):n.bounds[2*i]>=a[2*i]&&n.bounds[2*i]<=a[2*i+1]&&(o=!0,r[2*i]=n.bounds[2*i]),a[2*i+1]>=n.bounds[2*i]&&a[2*i+1]<=n.bounds[2*i+1]?(o=!0,r[2*i+1]=t.MaxPnt[i]):n.bounds[2*i+1]>=t.MinPnt[2*i]&&n.bounds[2*i+1]<=t.MaxPnt[2*i+1]&&(o=!0,r[2*i+1]=n.bounds[2*i+1]),!o)return!1;return n.bounds=r,!0},e.intersects=function(t){if(!e.isValid()||!t.isValid())return!1;for(var r=t.getBounds(),a=0;a<3;a++)if(!(r[2*a]>=n.bounds[2*a]&&r[2*a]<=n.bounds[2*a+1]||n.bounds[2*a]>=r[2*a]&&n.bounds[2*a]<=r[2*a+1]||r[2*a+1]>=n.bounds[2*a]&&r[2*a+1]<=n.bounds[2*a+1]||n.bounds[2*a+1]>=t.MinPnt[2*a]&&n.bounds[2*a+1]<=t.MaxPnt[2*a+1]))return!1;return!0},e.intersectPlane=function(e,t){for(var r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],a=[0,0,0,0,0,0,0,0],o=0,i=0;i<2;i++)for(var u=2;u<4;u++)for(var s=4;s<6;s++){var l=[n.bounds[i],n.bounds[u],n.bounds[s]];a[o++]=_.default.evaluate(t,e,l)}for(var c=2;c--&&!(p(a[r[c][0]],a[r[c][4]])&&p(a[r[c][1]],a[r[c][5]])&&p(a[r[c][2]],a[r[c][6]])&&p(a[r[c][3]],a[r[c][7]])););if(c<0)return!1;for(var d=Math.sign(t[c]),f=Math.abs((n.bounds[2*c+1]-n.bounds[2*c])*t[c]),m=d>0?1:0,v=0;v<4;v++)if(0!==f){var g=Math.abs(a[r[c][v]])/f;d>0&&g<m&&(m=g),d<0&&g>m&&(m=g)}var h=(1-m)*n.bounds[2*c]+m*n.bounds[2*c+1];return d>0?n.bounds[2*c]=h:n.bounds[2*c+1]=h,!0},e.containsPoint=function(e,t,r){return!(e<n.bounds[0]||e>n.bounds[1])&&(!(t<n.bounds[2]||t>n.bounds[3])&&!(r<n.bounds[4]||r>n.bounds[5]))},e.getMinPoint=function(){return[n.bounds[0],n.bounds[2],n.bounds[4]]},e.getMaxPoint=function(){return[n.bounds[1],n.bounds[3],n.bounds[5]]},e.getBound=function(e){return n.bound[e]},e.contains=function(n){return!!e.intersects(n)&&(!!e.containsPoint.apply(e,a(n.getMinPoint()))&&(!!e.containsPoint.apply(e,a(n.getMaxPoint()))||0))},e.getCenter=function(){return i(n.bounds)},e.getLength=function(e){return u(n.bounds,e)},e.getLengths=function(){return s(n.bounds)},e.getMaxLength=function(){return f(n.bounds)},e.getDiagonalLength=function(){return m(n.bounds)},e.reset=function(){return e.setBounds([].concat(A))},e.inflate=function(e){n.bounds=n.bounds.map(function(n,t){return t%2==0?n-e:n+e})},e.getCorners=function(){return v(n.bounds,n.corners),n.corners},e.scale=function(t,r,a){if(e.isValid()){var o=[].concat(n.bounds);return t>=0?(o[0]*=t,o[1]*=t):(o[0]=t*n.bounds[1],o[1]=t*n.bounds[0]),r>=0?(o[2]*=r,o[3]*=r):(o[2]=r*n.bounds[3],o[3]=r*n.bounds[2]),a>=0?(o[4]*=a,o[5]*=a):(o[4]=a*n.bounds[5],o[5]=a*n.bounds[4]),n.bounds=o,!0}return!1}}function h(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,C,t),x.default.obj(e,n),x.default.setGet(e,n,["bounds"]),g(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=n.STATIC=void 0;var b=function(){function e(e,n){var t=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n.extend=h;var y=t(0),x=r(y),T=t(112),_=r(T),A=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],w=n.STATIC={isValid:o,getCenter:i,getLength:u,getLengths:s,getMaxLength:f,getDiagonalLength:m,getXRange:l,getYRange:c,getZRange:d,getCorners:v,INIT_BOUNDS:A},C={type:"vtkBoundingBox",bounds:[].concat(A),corners:[]},M=n.newInstance=x.default.newInstance(h,"vtkBoundingBox");n.default=Object.assign({newInstance:M,extend:h},w)},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.stopPropagation(),e.preventDefault(),!1}function o(e,n){function t(t,r){n.currentRenderer=e.findPokedRenderer(t,r)}function r(e){var r=n.canvas,a=r.getBoundingClientRect(),o={x:e.clientX-a.left,y:a.height-e.clientY+a.top,z:0};return t(o.x,o.y),o}function o(e){for(var n={},t=0;t<e.length;t++){var a=e[t];n[a.identifier]=r(a)}return n}function i(e){return{controlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey}}function u(e){var n=i(e),t={key:e.key,keyCode:e.charCode};return Object.assign(t,n),t}function s(t){var r=document.querySelector("body"),a=t?"addEventListener":"removeEventListener",o=t?"removeEventListener":"addEventListener";n.canvas&&n.canvas[o]("mousemove",e.handleMouseMove),r[a]("mouseup",e.handleMouseUp),r[a]("mousemove",e.handleMouseMove),r[a]("touchend",e.handleTouchEnd,!1),r[a]("touchcancel",e.handleTouchEnd,!1),r[a]("touchmove",e.handleTouchMove,!1)}n.classHierarchy.push("vtkRenderWindowInteractor");var l=new Set;e.start=function(){(n.initialized||(e.initialize(),n.initialized))&&e.startEventLoop()},e.setRenderWindow=function(e){b("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},e.setInteractorStyle=function(t){n.interactorStyle!==t&&(null!=n.interactorStyle&&n.interactorStyle.setInteractor(null),n.interactorStyle=t,null!=n.interactorStyle&&n.interactorStyle.getInteractor()!==e&&n.interactorStyle.setInteractor(e))},e.initialize=function(){n.initialized=!0,e.enable(),e.render()},e.enable=function(){return e.setEnabled(!0)},e.disable=function(){return e.setEnabled(!1)},e.startEventLoop=function(){return h("empty event loop")},e.getCurrentRenderer=function(){return n.currentRenderer?n.currentRenderer:(t(0,0),n.currentRenderer)},e.bindEvents=function(t){n.canvas=t,t.addEventListener("contextmenu",a),t.addEventListener("click",a),t.addEventListener("mousewheel",e.handleWheel),t.addEventListener("DOMMouseScroll",e.handleWheel),t.addEventListener("mousemove",e.handleMouseMove),t.addEventListener("mousedown",e.handleMouseDown),document.querySelector("body").addEventListener("keypress",e.handleKeyPress),document.querySelector("body").addEventListener("keyup",e.handleKeyUp),t.addEventListener("touchstart",e.handleTouchStart,!1)},e.unbindEvents=function(){s(!1),n.canvas.removeEventListener("contextmenu",a),n.canvas.removeEventListener("click",a),n.canvas.removeEventListener("mousewheel",e.handleWheel),n.canvas.removeEventListener("DOMMouseScroll",e.handleWheel),n.canvas.removeEventListener("mousemove",e.handleMouseMove),n.canvas.removeEventListener("mousedown",e.handleMouseDown),document.querySelector("body").removeEventListener("keypress",e.handleKeyPress),document.querySelector("body").removeEventListener("keyup",e.handleKeyUp),n.canvas.removeEventListener("touchstart",e.handleTouchStart),n.canvas=null},e.handleKeyPress=function(n){var t=u(n);e.keyPressEvent(t)},e.handleKeyUp=function(n){var t=u(n);e.keyUpEvent(t)},e.handleMouseDown=function(n){s(!0),n.stopPropagation(),n.preventDefault();var t={position:r(n)},a=i(n);switch(Object.assign(t,a),n.which){case 1:e.leftButtonPressEvent(t);break;case 2:e.middleButtonPressEvent(t);break;case 3:e.rightButtonPressEvent(t);break;default:b("Unknown mouse button pressed: "+n.which)}},e.requestAnimation=function(t){return void 0===t?void b("undefined requester, can not start animating"):l.has(t)?void h("requester is already registered for animating"):(l.add(t),void(1===l.size&&(n.lastFrameTime=.1,n.lastFrameStart=Date.now(),n.animationRequest=requestAnimationFrame(e.handleAnimation),e.startAnimationEvent())))},e.isAnimating=function(){return n.vrAnimation||null!==n.animationRequest},e.cancelAnimation=function(t){if(!l.has(t))return void h(t+" did not request an animation");l.delete(t),n.animationRequest&&0===l.size&&(cancelAnimationFrame(n.animationRequest),n.animationRequest=null,e.endAnimationEvent(),e.forceRender())},e.switchToVRAnimation=function(){n.animationRequest&&(cancelAnimationFrame(n.animationRequest),n.animationRequest=null),n.vrAnimation=!0},e.returnFromVRAnimation=function(){n.vrAnimation=!1},e.updateGamepads=function(t){for(var r=navigator.getGamepads(),a=0;a<r.length;++a){var o=r[a];if(o&&o.displayId===t){o.index in n.lastGamepadValues||(n.lastGamepadValues[o.index]={buttons:{}});for(var i=0;i<o.buttons.length;++i)i in n.lastGamepadValues[o.index].buttons||(n.lastGamepadValues[o.index].buttons[i]=!1),n.lastGamepadValues[o.index].buttons[i]!==o.buttons[i].pressed&&(e.button3DEvent({gamepad:o,position:o.pose.position,orientation:o.pose.orientation,pressed:o.buttons[i].pressed,device:"left"===o.hand?v.LeftController:v.RightController,input:y[o.id]&&y[o.id][i]?y[o.id][i]:g.Trigger}),n.lastGamepadValues[o.index].buttons[i]=o.buttons[i].pressed),n.lastGamepadValues[o.index].buttons[i]&&e.move3DEvent({gamepad:o,position:o.pose.position,orientation:o.pose.orientation,device:"left"===o.hand?v.LeftController:v.RightController})}}},e.handleMouseMove=function(t){var a={position:r(t)},o=i(t);Object.assign(a,o),0===n.moveTimeoutID?e.startMouseMoveEvent(a):(e.mouseMoveEvent(a),clearTimeout(n.moveTimeoutID)),n.moveTimeoutID=setTimeout(function(){e.endMouseMoveEvent(),n.moveTimeoutID=0},200)},e.handleAnimation=function(){var t=Date.now();-1===n.FrameTime?n.lastFrameTime=.1:n.lastFrameTime=(t-n.lastFrameStart)/1e3,n.lastFrameTime=Math.max(.01,n.lastFrameTime),n.lastFrameStart=t,e.animationEvent(),e.forceRender(),n.animationRequest=requestAnimationFrame(e.handleAnimation)},e.handleWheel=function(t){t.stopPropagation(),t.preventDefault();var r=0;r=void 0===t.wheelDeltaX?2*-t.detail:t.wheelDeltaY;var a={wheelDelta:Math.max(.01,(r+1e3)/1e3)};0===n.wheelTimeoutID?e.startMouseWheelEvent(a):(e.mouseWheelEvent(a),clearTimeout(n.wheelTimeoutID)),n.wheelTimeoutID=setTimeout(function(){e.endMouseWheelEvent(),n.wheelTimeoutID=0},200)},e.handleMouseUp=function(n){s(!1),n.stopPropagation(),n.preventDefault();var t={position:r(n)},a=i(n);switch(Object.assign(t,a),n.which){case 1:e.leftButtonReleaseEvent(t);break;case 2:e.middleButtonReleaseEvent(t);break;case 3:e.rightButtonReleaseEvent(t);break;default:b("Unknown mouse button released: "+n.which)}},e.handleTouchStart=function(t){if(s(!0),t.stopPropagation(),t.preventDefault(),n.recognizeGestures&&t.touches.length>1){var a=o(t.touches);if(2===t.touches.length){var i=t.touches[0],u={position:r(i),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(u)}e.recognizeGesture("TouchStart",a)}else{var l=t.touches[0],c={position:r(l),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonPressEvent(c)}},e.handleTouchMove=function(t){if(t.stopPropagation(),t.preventDefault(),n.recognizeGestures&&t.touches.length>1){var a=o(t.touches);e.recognizeGesture("TouchMove",a)}else{var i=t.touches[0],u={position:r(i),shiftKey:!1,altKey:!1,controlKey:!1};e.mouseMoveEvent(u)}},e.handleTouchEnd=function(t){if(t.stopPropagation(),t.preventDefault(),n.recognizeGestures)if(0===t.touches.length)if(1===t.changedTouches.length){var a=t.changedTouches[0],i={position:r(a),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(i)}else{var u=o(t.changedTouches);e.recognizeGesture("TouchEnd",u),s(!1)}else if(1===t.touches.length){var l=o(t.changedTouches);e.recognizeGesture("TouchEnd",l);var c=t.touches[0],d={position:r(c),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonPressEvent(d)}else{var f=o(t.touches);e.recognizeGesture("TouchMove",f)}else{var m=t.changedTouches[0],p={position:r(m),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(p),s(!1)}},e.setView=function(t){n.view!==t&&(n.view=t,n.view.getRenderable().setInteractor(e),e.modified())},e.findPokedRenderer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!n.view)return null;for(var r=n.view.getRenderable().getRenderersByReference(),a=null,o=null,i=null,u=r.length;u--;){var s=r[u];n.view.isInViewport(e,t,s)&&s.getInteractive()&&(i=s),null===a&&s.getInteractive()&&(a=s),null===o&&n.view.isInViewport(e,t,s)&&(o=s)}return null===i&&(i=a),null===i&&(i=o),null==i&&(i=r[0]),i},e.forceRender=function(){n.view&&n.enabled&&n.enableRender&&n.view.traverseAllPasses(),e.invokeRenderEvent()},e.render=function(){null===n.animationRequest&&e.forceRender()},x.forEach(function(t){var r=t.charAt(0).toLowerCase()+t.slice(1);e[r+"Event"]=function(r){if(n.enabled){if(!e.getCurrentRenderer())return void b("\n          Can not forward events without a current renderer on the interactor.\n        ");var a={type:t,pokedRenderer:n.currentRenderer};Object.assign(a,r),e["invoke"+t](a)}}}),e.recognizeGesture=function(t,r){if(!(Object.keys(r).length>2)){if(n.startingEventPositions||(n.startingEventPositions={}),"TouchStart"===t)return Object.keys(r).forEach(function(e){n.startingEventPositions[e]=r[e]}),void(n.currentGesture="Start");if("TouchEnd"===t)return"Pinch"===n.currentGesture&&(e.render(),e.endPinchEvent()),"Rotate"===n.currentGesture&&(e.render(),e.endRotateEvent()),"Pan"===n.currentGesture&&(e.render(),e.endPanEvent()),n.currentGesture="Start",void(n.startingEventPositions={});var a=0,o=[],i=[];Object.keys(r).forEach(function(e){o[a]=r[e],i[a]=n.startingEventPositions[e],a++});var u=Math.sqrt((i[0].x-i[1].x)*(i[0].x-i[1].x)+(i[0].y-i[1].y)*(i[0].y-i[1].y)),s=Math.sqrt((o[0].x-o[1].x)*(o[0].x-o[1].x)+(o[0].y-o[1].y)*(o[0].y-o[1].y)),l=c.default.degreesFromRadians(Math.atan2(i[1].y-i[0].y,i[1].x-i[0].x)),d=c.default.degreesFromRadians(Math.atan2(o[1].y-o[0].y,o[1].x-o[0].x)),f=d-l;d=d+180>=360?d-180:d+180,l=l+180>=360?l-180:l+180,Math.abs(d-l)<Math.abs(f)&&(f=d-l);var m=[];if(m[0]=(o[0].x-i[0].x+o[1].x-i[1].x)/2,m[1]=(o[0].y-i[0].y+o[1].y-i[1].y)/2,"TouchMove"===t)if("Start"===n.currentGesture){var p=.01*Math.sqrt(n.canvas.clientWidth*n.canvas.clientWidth+n.canvas.clientHeight*n.canvas.clientHeight);p<15&&(p=15);var v=Math.abs(s-u),g=3.1415926*s*Math.abs(f)/360,h=Math.sqrt(m[0]*m[0]+m[1]*m[1]);if(v>p&&v>g&&v>h){n.currentGesture="Pinch";var b={scale:1,touches:r};e.startPinchEvent(b)}else if(g>p&&g>h){n.currentGesture="Rotate";var y={rotation:0,touches:r};e.startRotateEvent(y)}else if(h>p){n.currentGesture="Pan";var x={translation:[0,0],touches:r};e.startPanEvent(x)}}else{if("Rotate"===n.currentGesture){var T={rotation:f,touches:r};e.rotateEvent(T)}if("Pinch"===n.currentGesture){var _={scale:s/u,touches:r};e.pinchEvent(_)}if("Pan"===n.currentGesture){var A={translation:m,touches:r};e.panEvent(A)}}}}}function i(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,T,t),s.default.obj(e,n),s.default.event(e,n,"RenderEvent"),x.forEach(function(t){return s.default.event(e,n,t)}),s.default.get(e,n,["initialized","canvas","enabled","enableRender","interactorStyle","lastFrameTime","view"]),s.default.setGet(e,n,["lightFollowCamera","enabled","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker"]),o(e,n),e.setInteractorStyle(f.default.newInstance())}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=i;var u=t(0),s=r(u),l=t(1),c=r(l),d=t(114),f=r(d),m=t(40),p=r(m),v=p.default.Device,g=p.default.Input,h=s.default.vtkWarningMacro,b=s.default.vtkErrorMacro,y={"OpenVR Gamepad":[g.TrackPad,g.Trigger,g.Grip,g.ApplicationMenu]},x=["StartAnimation","Animation","EndAnimation","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D"],T={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,canvas:null,view:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{}},_=n.newInstance=s.default.newInstance(i,"vtkRenderWindowInteractor");n.default=Object.assign({newInstance:_,extend:i,handledEvents:x},p.default)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.States={IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025};n.default={States:r}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.Device={Unknown:0,LeftController:1,RightController:2},a=n.Input={Unknown:0,Trigger:1,TrackPad:2,Grip:3,ApplicationMenu:4};n.default={Device:r,Input:a}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkPoints"),e.getNumberOfPoints=e.getNumberOfTuples,e.setNumberOfPoints=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e.getNumberOfPoints()!==t&&(n.size=t*r,n.values=new window[n.dataType](n.size),e.setNumberOfComponents(r),e.modified())},e.setPoint=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];for(var o=e*n.numberOfComponents,i=0;i<n.numberOfComponents;i++)n.values[o+i]=r[i]},e.getPoint=e.getTuple,e.getBounds=function(){if(3===e.getNumberOfComponents()){var t=e.getRange(0);n.bounds[0]=t[0],n.bounds[1]=t[1];var r=e.getRange(1);n.bounds[2]=r[0],n.bounds[3]=r[1];var a=e.getRange(2);return n.bounds[4]=a[0],n.bounds[5]=a[1],n.bounds}if(2!==e.getNumberOfComponents())return d("getBounds called on an array with components of\n        "+e.getNumberOfComponents()),f;var o=e.getRange(0);n.bounds[0]=o[0],n.bounds[1]=o[1];var i=e.getRange(1);return n.bounds[2]=i[0],n.bounds[3]=i[1],n.bounds[4]=0,n.bounds[5]=0,n.bounds},e.computeBounds=e.getBounds}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,m,t),l.default.extend(e,n,t),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(5),l=r(s),c=t(8),d=u.default.vtkErrorMacro,f=[1,-1,1,-1,1,-1],m={empty:!0,numberOfComponents:3,dataType:c.VtkDataTypes.FLOAT,bounds:[1,-1,1,-1,1,-1]},p=n.newInstance=u.default.newInstance(o,"vtkPoints");n.default={newInstance:p,extend:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkActor");var t=Object.assign({},e);e.getActors=function(){return e},e.getIsOpaque=function(){if(n.forceOpaque)return!0;if(n.forceTranslucent)return!1;n.property||e.getProperty();var t=n.property.getOpacity()>=1;return t=t&&(!n.texture||!n.texture.isTranslucent()),t=t&&(!n.mapper||n.mapper.getIsOpaque())},e.hasTranslucentPolygonalGeometry=function(){return null!==n.mapper&&(null===n.property&&e.setProperty(e.makeProperty()),!e.getIsOpaque())},e.makeProperty=f.default.newInstance,e.getProperty=function(){return null===n.property&&(n.property=e.makeProperty()),n.property},e.getBounds=function(){if(null===n.mapper)return n.bounds;var t=n.mapper.getBounds();if(!t||6!==t.length)return t;if(t[0]>t[1])return n.mapperBounds=t.concat(),n.bounds=[1,-1,1,-1,1,-1],n.boundsMTime.modified(),t;if(!n.mapperBounds||t[0]!==n.mapperBounds[0]||t[1]!==n.mapperBounds[1]||t[2]!==n.mapperBounds[2]||t[3]!==n.mapperBounds[3]||t[4]!==n.mapperBounds[4]||t[5]!==n.mapperBounds[5]||e.getMTime()>n.boundsMTime.getMTime()){m("Recomputing bounds..."),n.mapperBounds=t.concat();var r=[i.vec3.fromValues(t[1],t[3],t[5]),i.vec3.fromValues(t[1],t[2],t[5]),i.vec3.fromValues(t[0],t[2],t[5]),i.vec3.fromValues(t[0],t[3],t[5]),i.vec3.fromValues(t[1],t[3],t[4]),i.vec3.fromValues(t[1],t[2],t[4]),i.vec3.fromValues(t[0],t[2],t[4]),i.vec3.fromValues(t[0],t[3],t[4])];e.computeMatrix();var a=i.mat4.create();i.mat4.transpose(a,n.matrix),r.forEach(function(e){return i.vec3.transformMat4(e,e,a)}),n.bounds[0]=n.bounds[2]=n.bounds[4]=Number.MAX_VALUE,n.bounds[1]=n.bounds[3]=n.bounds[5]=-Number.MAX_VALUE,n.bounds=n.bounds.map(function(e,n){return n%2==0?r.reduce(function(e,t){return e>t[n/2]?t[n/2]:e},e):r.reduce(function(e,t){return e<t[(n-1)/2]?t[(n-1)/2]:e},e)}),n.boundsMTime.modified()}return n.bounds},e.getMTime=function(){var e=t.getMTime();if(null!==n.property){var r=n.property.getMTime();e=r>e?r:e}if(null!==n.backfaceProperty){var a=n.backfaceProperty.getMTime();e=a>e?a:e}return e},e.getRedrawMTime=function(){var e=n.mtime;if(null!==n.mapper){var t=n.mapper.getMTime();e=t>e?t:e,null!==n.mapper.getInput()&&(n.mapper.getInputAlgorithm().update(),t=n.mapper.getInput().getMTime(),e=t>e?t:e)}return e},e.getSupportsSelection=function(){return!!n.mapper&&n.mapper.getSupportsSelection()}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,p,t),c.default.extend(e,n,t),n.boundsMTime={},s.default.obj(n.boundsMTime),s.default.set(e,n,["property"]),s.default.setGet(e,n,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(2),u=t(0),s=r(u),l=t(119),c=r(l),d=t(22),f=r(d),m=s.default.vtkDebugMacro,p={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]},v=n.newInstance=s.default.newInstance(o,"vtkActor");n.default={newInstance:v,extend:o}},function(e,n,t){(function(n){e.exports=n.OutlineFilter=t(44)}).call(n,t(14))},function(e,n,t){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=p.default.newInstance();a.setInputConnection(t.getOutputPort());var o=s.default.newInstance();o.setMapper(a),o.getProperty().set(r),x.addActor(o),e[n+"Actor"]=o,e[n+"Mapper"]=a}t(45);var o=t(46),i=n(o),u=t(42),s=n(u),l=t(121),c=n(l),d=t(122),f=n(d),m=t(24),p=n(m),v=t(1),g=n(v),h=t(123),b=n(h),y=i.default.newInstance({background:[0,0,0]}),x=y.getRenderer(),T=y.getRenderWindow();g.default.randomSeed(141592);var _=c.default.newInstance({numberOfPoints:25,radius:.25}),A=f.default.newInstance();A.setInputConnection(_.getOutputPort()),a("pointSource",_,{pointSize:5}),a("outline",A,{lineWidth:5}),x.resetCamera(),T.render(),y.addController(b.default),["numberOfPoints","radius"].forEach(function(e){document.querySelector("."+e).addEventListener("input",function(n){var t=Number(n.target.value);_.set(r({},e,t)),T.render()})}),e.pointSource=_,e.outline=A,e.renderer=x,e.renderWindow=T}).call(n,t(14))},function(e,n,t){"use strict";var r=document.querySelector("head");r&&[16,32,96,160,196].forEach(function(e){var n=document.createElement("link");n.setAttribute("rel","icon"),n.setAttribute("href","http://kitware.github.io/vtk-js/icon/favicon-"+e+"x"+e+".png"),n.setAttribute("sizes",e+"x"+e),n.setAttribute("type","image/png"),r.appendChild(n)})},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function o(e,n){Object.keys(n).forEach(function(t){e.style[t]=n[t]})}function i(e,n){n.rootContainer||(n.rootContainer=document.querySelector("body")),n.container||(n.container=document.createElement("div"),o(n.container,n.containerStyle||b),n.rootContainer.appendChild(n.container)),n.renderWindow=v.default.newInstance(),n.renderer=m.default.newInstance(),n.renderWindow.addRenderer(n.renderer),n.openGLRenderWindow=d.default.newInstance(),n.openGLRenderWindow.setContainer(n.container),n.renderWindow.addView(n.openGLRenderWindow),n.interactor=h.default.newInstance(),n.interactor.setView(n.openGLRenderWindow),n.interactor.initialize(),n.interactor.bindEvents(n.container),e.setBackground=n.renderer.setBackground,e.removeController=function(){var e=n.controlContainer;e&&e.parentNode.removeChild(e)},e.addController=function(e){n.controlContainer=document.createElement("div"),o(n.controlContainer,n.controlPanelStyle||y),n.rootContainer.appendChild(n.controlContainer),n.controlContainer.innerHTML=e,n.rootContainer.addEventListener("keypress",function(e){"c"===String.fromCharCode(e.charCode)&&("none"===n.controlContainer.style.display?n.controlContainer.style.display="block":n.controlContainer.style.display="none")})},e.setBackground.apply(e,a(n.background)),e.addRepresentation=function(e){e.getActors().forEach(function(e){n.renderer.addActor(e)})},e.removeRepresentation=function(e){e.getActors().forEach(function(e){return n.renderer.removeActor(e)})},e.resize=function(){var e=n.container.getBoundingClientRect();n.openGLRenderWindow.setSize(Math.floor(e.width),Math.floor(e.height)),n.resizeCallback&&n.resizeCallback(e),n.renderWindow.render()},e.setResizeCallback=function(t){n.resizeCallback=t,e.resize()},n.listenWindowResize&&window.addEventListener("resize",e.resize),e.resize()}function u(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,x,t),l.default.obj(e,n),l.default.get(e,n,["renderWindow","renderer","openGLRenderWindow","interactor","container","controlContainer"]),i(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=u;var s=t(0),l=r(s),c=t(27),d=r(c),f=t(108),m=r(f),p=t(113),v=r(p),g=t(38),h=r(g);t(41),t(5),t(26),t(42),t(24);var b={margin:"0",padding:"0",position:"absolute",top:"0",left:"0",width:"100vw",height:"100vh",overflow:"hidden"},y={position:"absolute",left:"25px",top:"25px",backgroundColor:"white",borderRadius:"5px",listStyle:"none",padding:"5px 10px",margin:"0",display:"block",border:"solid 1px black",maxWidth:"calc(100vw - 70px)",maxHeight:"calc(100vh - 60px)",overflow:"auto"},x={background:[.32,.34,.43],containerStyle:null,controlPanelStyle:null,listenWindowResize:!0,resizeCallback:null},T=n.newInstance=l.default.newInstance(u);n.default={newInstance:T,extend:u}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkForwardPass"),e.traverse=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!n.deleted){n.currentParent=r,e.setCurrentOperation("buildPass"),t.traverse(e);for(var a=t.getChildren(),o=0;o<a.length;o++){var i=a[o];if(n.opaqueActorCount=0,n.translucentActorCount=0,n.volumeCount=0,e.setCurrentOperation("queryPass"),i.traverse(e),n.opaqueActorCount>0&&n.volumeCount>0||n.depthRequested){var u=t.getSize();null===n.framebuffer&&(n.framebuffer=l.default.newInstance()),n.framebuffer.setOpenGLRenderWindow(t),n.framebuffer.saveCurrentBindingsAndBuffers();var s=n.framebuffer.getSize();null!==s&&s[0]===u[0]&&s[1]===u[1]||(n.framebuffer.create(u[0],u[1]),n.framebuffer.populateFramebuffer()),n.framebuffer.bind(),e.setCurrentOperation("opaqueZBufferPass"),i.traverse(e),n.framebuffer.restorePreviousBindingsAndBuffers()}e.setCurrentOperation("cameraPass"),i.traverse(e),n.opaqueActorCount>0&&(e.setCurrentOperation("opaquePass"),i.traverse(e)),n.translucentActorCount>0&&(e.setCurrentOperation("translucentPass"),i.traverse(e)),n.volumeCount>0&&(e.setCurrentOperation("volumePass"),i.traverse(e))}}},e.getZBufferTexture=function(){return n.framebuffer?n.framebuffer.getColorTexture():null},e.incrementOpaqueActorCount=function(){return n.opaqueActorCount++},e.incrementTranslucentActorCount=function(){return n.translucentActorCount++},e.incrementVolumeCount=function(){return n.volumeCount++}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,f,t),d.default.extend(e,n,t),u.default.get(e,n,["framebuffer"]),u.default.setGet(e,n,["depthRequested"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(20),l=r(s),c=t(28),d=r(c),f={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,framebuffer:null,depthRequested:!1},m=n.newInstance=u.default.newInstance(o,"vtkForwardPass");n.default={newInstance:m,extend:o}},function(e,n,t){"use strict";function r(e){return Array.isArray(e)?e:Array.from(e)}function a(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":s(n))&&"function"!=typeof n?e:n}function u(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":s(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,n){var t=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),d=function e(n,t,r){null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,t);if(void 0===a){var o=Object.getPrototypeOf(n);return null===o?void 0:e(o,t,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},f=t(49),m=function(e){function n(e){o(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t._messageId=1,t._messages=new Map,t._worker=e,t._worker.onmessage=t._onMessage.bind(t),t._id=Math.ceil(1e7*Math.random()),t}return u(n,e),c(n,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return 0===this._messages.size}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments[3];return new Promise(function(o,i){var u=t._messageId++;t._messages.set(u,[o,i,a]),t._worker.postMessage([u,n,e],r||[])})}},{key:"postMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2];return new Promise(function(a,o){var i=n._messageId++;n._messages.set(i,[a,o,r]),n._worker.postMessage([i,e],t||[])})}},{key:"emit",value:function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];this._worker.postMessage({eventName:e,args:t})}},{key:"_onMessage",value:function(e){if(!Array.isArray(e.data)&&e.data.eventName){var t;return(t=d(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"emit",this)).call.apply(t,[this,e.data.eventName].concat(a(e.data.args)))}var o=r(e.data),i=o[0],u=o.slice(1);if(1===i)this._onEvent.apply(this,a(u));else{if(0!==i)throw new Error("Wrong message type '"+i+"'");this._onResult.apply(this,a(u))}}},{key:"_onResult",value:function(e,n,t){var r=this._messages.get(e),a=l(r,2),o=a[0],i=a[1];return this._messages.delete(e),1===n?o(t):i(t)}},{key:"_onEvent",value:function(e,n,t){var r=this._messages.get(e),a=l(r,3),o=a[2];o&&o(n,t)}}]),n}(f);e.exports=m},function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=function(){function e(){r(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return a(e,[{key:"emit",value:function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var a=!0,o=!1,i=void 0;try{for(var u,s=this.__listeners[e][Symbol.iterator]();!(a=(u=s.next()).done);a=!0){u.value.apply(void 0,t)}}catch(e){o=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw i}}return this}},{key:"once",value:function(e,n){var t=this,r=function r(){t.off(e,r),n.apply(void 0,arguments)};return this.on(e,r)}},{key:"on",value:function(e,n){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(n),this}},{key:"off",value:function(e,n){return this.__listeners[e]=n?this.__listeners[e].filter(function(e){return e!==n}):[],this}}]),e}();e.exports=o},function(e,n,t){"use strict";var r=t(51),a=t(52),o=t(53),i=t(54),u=t(55),s=t(56),l=t(57);l.alea=r,l.xor128=a,l.xorwow=o,l.xorshift7=i,l.xor4096=u,l.tychei=s,e.exports=l},function(e,n,t){"use strict";(function(e){var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,o,i){function u(e){var n=this,t=c();n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=t(" "),n.s1=t(" "),n.s2=t(" "),n.s0-=t(e),n.s0<0&&(n.s0+=1),n.s1-=t(e),n.s1<0&&(n.s1+=1),n.s2-=t(e),n.s2<0&&(n.s2+=1),t=null}function s(e,n){return n.c=e.c,n.s0=e.s0,n.s1=e.s1,n.s2=e.s2,n}function l(e,n){var t=new u(e),r=n&&n.state,o=t.next;return o.int32=function(){return 4294967296*t.next()|0},o.double=function(){return o()+1.1102230246251565e-16*(2097152*o()|0)},o.quick=o,r&&("object"==(void 0===r?"undefined":a(r))&&s(r,t),o.state=function(){return s(t,{})}),o}function c(){var e=4022871197;return function(n){n=n.toString();for(var t=0;t<n.length;t++){e+=n.charCodeAt(t);var r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)}}o&&o.exports?o.exports=l:t(4)&&t(10)?void 0!==(r=function(){return l}.call(n,t,n,o))&&(o.exports=r):this.alea=l}(0,"object"==a(e)&&e,t(4))}).call(n,t(9)(e))},function(e,n,t){"use strict";(function(e){var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,o,i){function u(e){var n=this,t="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var e=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^e^e>>>8},e===(0|e)?n.x=e:t+=e;for(var r=0;r<t.length+64;r++)n.x^=0|t.charCodeAt(r),n.next()}function s(e,n){return n.x=e.x,n.y=e.y,n.z=e.z,n.w=e.w,n}function l(e,n){var t=new u(e),r=n&&n.state,o=function(){return(t.next()>>>0)/4294967296};return o.double=function(){do{var e=t.next()>>>11,n=(t.next()>>>0)/4294967296,r=(e+n)/(1<<21)}while(0===r);return r},o.int32=t.next,o.quick=o,r&&("object"==(void 0===r?"undefined":a(r))&&s(r,t),o.state=function(){return s(t,{})}),o}o&&o.exports?o.exports=l:t(4)&&t(10)?void 0!==(r=function(){return l}.call(n,t,n,o))&&(o.exports=r):this.xor128=l}(0,"object"==a(e)&&e,t(4))}).call(n,t(9)(e))},function(e,n,t){"use strict";(function(e){var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,o,i){function u(e){var n=this,t="";n.next=function(){var e=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^e^e<<1)|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,e===(0|e)?n.x=e:t+=e;for(var r=0;r<t.length+64;r++)n.x^=0|t.charCodeAt(r),r==t.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function s(e,n){return n.x=e.x,n.y=e.y,n.z=e.z,n.w=e.w,n.v=e.v,n.d=e.d,n}function l(e,n){var t=new u(e),r=n&&n.state,o=function(){return(t.next()>>>0)/4294967296};return o.double=function(){do{var e=t.next()>>>11,n=(t.next()>>>0)/4294967296,r=(e+n)/(1<<21)}while(0===r);return r},o.int32=t.next,o.quick=o,r&&("object"==(void 0===r?"undefined":a(r))&&s(r,t),o.state=function(){return s(t,{})}),o}o&&o.exports?o.exports=l:t(4)&&t(10)?void 0!==(r=function(){return l}.call(n,t,n,o))&&(o.exports=r):this.xorwow=l}(0,"object"==a(e)&&e,t(4))}).call(n,t(9)(e))},function(e,n,t){"use strict";(function(e){var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,a,o){function i(e){var n=this;n.next=function(){var e,t,r=n.x,a=n.i;return e=r[a],e^=e>>>7,t=e^e<<24,e=r[a+1&7],t^=e^e>>>10,e=r[a+3&7],t^=e^e>>>3,e=r[a+4&7],t^=e^e<<7,e=r[a+7&7],e^=e<<13,t^=e^e<<9,r[a]=t,n.i=a+1&7,t},function(e,n){var t,r=[];if(n===(0|n))r[0]=n;else for(n=""+n,t=0;t<n.length;++t)r[7&t]=r[7&t]<<15^n.charCodeAt(t)+r[t+1&7]<<13;for(;r.length<8;)r.push(0);for(t=0;t<8&&0===r[t];++t);for(8==t?r[7]=-1:r[t],e.x=r,e.i=0,t=256;t>0;--t)e.next()}(n,e)}function u(e,n){return n.x=e.x.slice(),n.i=e.i,n}function s(e,n){null==e&&(e=+new Date);var t=new i(e),r=n&&n.state,a=function(){return(t.next()>>>0)/4294967296};return a.double=function(){do{var e=t.next()>>>11,n=(t.next()>>>0)/4294967296,r=(e+n)/(1<<21)}while(0===r);return r},a.int32=t.next,a.quick=a,r&&(r.x&&u(r,t),a.state=function(){return u(t,{})}),a}a&&a.exports?a.exports=s:t(4)&&t(10)?void 0!==(r=function(){return s}.call(n,t,n,a))&&(a.exports=r):this.xorshift7=s}(0,"object"==a(e)&&e,t(4))}).call(n,t(9)(e))},function(e,n,t){"use strict";(function(e){var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,a,o){function i(e){var n=this;n.next=function(){var e,t,r=n.w,a=n.X,o=n.i;return n.w=r=r+1640531527|0,t=a[o+34&127],e=a[o=o+1&127],t^=t<<13,e^=e<<17,t^=t>>>15,e^=e>>>12,t=a[o]=t^e,n.i=o,t+(r^r>>>16)|0},function(e,n){var t,r,a,o,i,u=[],s=128;for(n===(0|n)?(r=n,n=null):(n+="\0",r=0,s=Math.max(s,n.length)),a=0,o=-32;o<s;++o)n&&(r^=n.charCodeAt((o+32)%n.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,t=u[127&o]^=r+i,a=0==t?a+1:0);for(a>=128&&(u[127&(n&&n.length||0)]=-1),a=127,o=512;o>0;--o)r=u[a+34&127],t=u[a=a+1&127],r^=r<<13,t^=t<<17,r^=r>>>15,t^=t>>>12,u[a]=r^t;e.w=i,e.X=u,e.i=a}(n,e)}function u(e,n){return n.i=e.i,n.w=e.w,n.X=e.X.slice(),n}function s(e,n){null==e&&(e=+new Date);var t=new i(e),r=n&&n.state,a=function(){return(t.next()>>>0)/4294967296};return a.double=function(){do{var e=t.next()>>>11,n=(t.next()>>>0)/4294967296,r=(e+n)/(1<<21)}while(0===r);return r},a.int32=t.next,a.quick=a,r&&(r.X&&u(r,t),a.state=function(){return u(t,{})}),a}a&&a.exports?a.exports=s:t(4)&&t(10)?void 0!==(r=function(){return s}.call(n,t,n,a))&&(a.exports=r):this.xor4096=s}(0,"object"==a(e)&&e,t(4))}).call(n,t(9)(e))},function(e,n,t){"use strict";(function(e){var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,o,i){function u(e){var n=this,t="";n.next=function(){var e=n.b,t=n.c,r=n.d,a=n.a;return e=e<<25^e>>>7^t,t=t-r|0,r=r<<24^r>>>8^a,a=a-e|0,n.b=e=e<<20^e>>>12^t,n.c=t=t-r|0,n.d=r<<16^t>>>16^a,n.a=a-e|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,e===Math.floor(e)?(n.a=e/4294967296|0,n.b=0|e):t+=e;for(var r=0;r<t.length+20;r++)n.b^=0|t.charCodeAt(r),n.next()}function s(e,n){return n.a=e.a,n.b=e.b,n.c=e.c,n.d=e.d,n}function l(e,n){var t=new u(e),r=n&&n.state,o=function(){return(t.next()>>>0)/4294967296};return o.double=function(){do{var e=t.next()>>>11,n=(t.next()>>>0)/4294967296,r=(e+n)/(1<<21)}while(0===r);return r},o.int32=t.next,o.quick=o,r&&("object"==(void 0===r?"undefined":a(r))&&s(r,t),o.state=function(){return s(t,{})}),o}o&&o.exports?o.exports=l:t(4)&&t(10)?void 0!==(r=function(){return l}.call(n,t,n,o))&&(o.exports=r):this.tychei=l}(0,"object"==a(e)&&e,t(4))}).call(n,t(9)(e))},function(e,n,t){"use strict";(function(e){var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o,i){function u(e,n,t){var r=[];n=1==n?{entropy:!0}:n||{};var a=d(c(n.entropy?[e,m(o)]:null==e?f():e,3),r),u=new s(r),p=function(){for(var e=u.g(h),n=y,t=0;e<x;)e=(e+t)*g,n*=g,t=u.g(1);for(;e>=T;)e/=2,n/=2,t>>>=1;return(e+t)/n};return p.int32=function(){return 0|u.g(4)},p.quick=function(){return u.g(4)/4294967296},p.double=p,d(m(u.S),o),(n.pass||t||function(e,n,t,r){return r&&(r.S&&l(r,u),e.state=function(){return l(u,{})}),t?(i[b]=e,n):e})(p,a,"global"in n?n.global:this==i,n.state)}function s(e){var n,t=e.length,r=this,a=0,o=r.i=r.j=0,i=r.S=[];for(t||(e=[t++]);a<g;)i[a]=a++;for(a=0;a<g;a++)i[a]=i[o=_&o+e[a%t]+(n=i[a])],i[o]=n;(r.g=function(e){for(var n,t=0,a=r.i,o=r.j,i=r.S;e--;)n=i[a=_&a+1],t=t*g+i[_&(i[a]=i[o=_&o+n])+(i[o]=n)];return r.i=a,r.j=o,t})(g)}function l(e,n){return n.i=e.i,n.j=e.j,n.S=e.S.slice(),n}function c(e,n){var t,r=[],o=void 0===e?"undefined":a(e);if(n&&"object"==o)for(t in e)try{r.push(c(e[t],n-1))}catch(e){}return r.length?r:"string"==o?e:e+"\0"}function d(e,n){for(var t,r=e+"",a=0;a<r.length;)n[_&a]=_&(t^=19*n[_&a])+r.charCodeAt(a++);return m(n)}function f(){try{var e;return p&&(e=p.randomBytes)?e=e(g):(e=new Uint8Array(g),(v.crypto||v.msCrypto).getRandomValues(e)),m(e)}catch(e){var n=v.navigator,t=n&&n.plugins;return[+new Date,v,t,v.screen,m(o)]}}function m(e){return String.fromCharCode.apply(0,e)}var p,v=this,g=256,h=6,b="random",y=i.pow(g,h),x=i.pow(2,52),T=2*x,_=g-1;if(i["seed"+b]=u,d(i.random(),o),"object"==a(e)&&e.exports){e.exports=u;try{p=t(58)}catch(e){}}else void 0!==(r=function(){return u}.call(n,t,n,e))&&(e.exports=r)}([],Math)}).call(n,t(9)(e))},function(e,n){},function(e,n,t){"use strict";e.exports=function(){return t(60)("/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 8);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = function() {\r\n\tthrow new Error(\"define cannot be used indirect\");\r\n};\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\n/**\n * @class Common utilities\n * @name glMatrix\n */\nvar glMatrix = {};\n\n// Constants\nglMatrix.EPSILON = 0.000001;\nglMatrix.ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nglMatrix.RANDOM = Math.random;\n\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Type} type Array type, such as Float32Array or Array\n */\nglMatrix.setMatrixArrayType = function (type) {\n  GLMAT_ARRAY_TYPE = type;\n};\n\nvar degree = Math.PI / 180;\n\n/**\n* Convert Degree To Radian\n*\n* @param {Number} Angle in Degrees\n*/\nglMatrix.toRadian = function (a) {\n  return a * degree;\n};\n\nmodule.exports = glMatrix;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function (module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function () {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function get() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function get() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n/* WEBPACK VAR INJECTION */}.call(exports, {}))\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nvar glMatrix = __webpack_require__(1);\n\n/**\n * @class 3x3 Matrix\n * @name mat3\n */\nvar mat3 = {};\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\nmat3.create = function () {\n    var out = new glMatrix.ARRAY_TYPE(9);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 1;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 1;\n    return out;\n};\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nmat3.fromMat4 = function (out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[4];\n    out[4] = a[5];\n    out[5] = a[6];\n    out[6] = a[8];\n    out[7] = a[9];\n    out[8] = a[10];\n    return out;\n};\n\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {mat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\nmat3.clone = function (a) {\n    var out = new glMatrix.ARRAY_TYPE(9);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    return out;\n};\n\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nmat3.copy = function (out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    return out;\n};\n\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nmat3.identity = function (out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 1;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 1;\n    return out;\n};\n\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nmat3.transpose = function (out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1],\n            a02 = a[2],\n            a12 = a[5];\n        out[1] = a[3];\n        out[2] = a[6];\n        out[3] = a01;\n        out[5] = a[7];\n        out[6] = a02;\n        out[7] = a12;\n    } else {\n        out[0] = a[0];\n        out[1] = a[3];\n        out[2] = a[6];\n        out[3] = a[1];\n        out[4] = a[4];\n        out[5] = a[7];\n        out[6] = a[2];\n        out[7] = a[5];\n        out[8] = a[8];\n    }\n\n    return out;\n};\n\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nmat3.invert = function (out, a) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a10 = a[3],\n        a11 = a[4],\n        a12 = a[5],\n        a20 = a[6],\n        a21 = a[7],\n        a22 = a[8],\n        b01 = a22 * a11 - a12 * a21,\n        b11 = -a22 * a10 + a12 * a20,\n        b21 = a21 * a10 - a11 * a20,\n\n\n    // Calculate the determinant\n    det = a00 * b01 + a01 * b11 + a02 * b21;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = b01 * det;\n    out[1] = (-a22 * a01 + a02 * a21) * det;\n    out[2] = (a12 * a01 - a02 * a11) * det;\n    out[3] = b11 * det;\n    out[4] = (a22 * a00 - a02 * a20) * det;\n    out[5] = (-a12 * a00 + a02 * a10) * det;\n    out[6] = b21 * det;\n    out[7] = (-a21 * a00 + a01 * a20) * det;\n    out[8] = (a11 * a00 - a01 * a10) * det;\n    return out;\n};\n\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nmat3.adjoint = function (out, a) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a10 = a[3],\n        a11 = a[4],\n        a12 = a[5],\n        a20 = a[6],\n        a21 = a[7],\n        a22 = a[8];\n\n    out[0] = a11 * a22 - a12 * a21;\n    out[1] = a02 * a21 - a01 * a22;\n    out[2] = a01 * a12 - a02 * a11;\n    out[3] = a12 * a20 - a10 * a22;\n    out[4] = a00 * a22 - a02 * a20;\n    out[5] = a02 * a10 - a00 * a12;\n    out[6] = a10 * a21 - a11 * a20;\n    out[7] = a01 * a20 - a00 * a21;\n    out[8] = a00 * a11 - a01 * a10;\n    return out;\n};\n\n/**\n * Calculates the determinant of a mat3\n *\n * @param {mat3} a the source matrix\n * @returns {Number} determinant of a\n */\nmat3.determinant = function (a) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a10 = a[3],\n        a11 = a[4],\n        a12 = a[5],\n        a20 = a[6],\n        a21 = a[7],\n        a22 = a[8];\n\n    return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n};\n\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nmat3.multiply = function (out, a, b) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a10 = a[3],\n        a11 = a[4],\n        a12 = a[5],\n        a20 = a[6],\n        a21 = a[7],\n        a22 = a[8],\n        b00 = b[0],\n        b01 = b[1],\n        b02 = b[2],\n        b10 = b[3],\n        b11 = b[4],\n        b12 = b[5],\n        b20 = b[6],\n        b21 = b[7],\n        b22 = b[8];\n\n    out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n    out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n    out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n\n    out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n    out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n    out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n\n    out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n    out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n    out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n    return out;\n};\n\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\nmat3.mul = mat3.multiply;\n\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to translate\n * @param {vec2} v vector to translate by\n * @returns {mat3} out\n */\nmat3.translate = function (out, a, v) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a10 = a[3],\n        a11 = a[4],\n        a12 = a[5],\n        a20 = a[6],\n        a21 = a[7],\n        a22 = a[8],\n        x = v[0],\n        y = v[1];\n\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n\n    out[3] = a10;\n    out[4] = a11;\n    out[5] = a12;\n\n    out[6] = x * a00 + y * a10 + a20;\n    out[7] = x * a01 + y * a11 + a21;\n    out[8] = x * a02 + y * a12 + a22;\n    return out;\n};\n\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nmat3.rotate = function (out, a, rad) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a10 = a[3],\n        a11 = a[4],\n        a12 = a[5],\n        a20 = a[6],\n        a21 = a[7],\n        a22 = a[8],\n        s = Math.sin(rad),\n        c = Math.cos(rad);\n\n    out[0] = c * a00 + s * a10;\n    out[1] = c * a01 + s * a11;\n    out[2] = c * a02 + s * a12;\n\n    out[3] = c * a10 - s * a00;\n    out[4] = c * a11 - s * a01;\n    out[5] = c * a12 - s * a02;\n\n    out[6] = a20;\n    out[7] = a21;\n    out[8] = a22;\n    return out;\n};\n\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\nmat3.scale = function (out, a, v) {\n    var x = v[0],\n        y = v[1];\n\n    out[0] = x * a[0];\n    out[1] = x * a[1];\n    out[2] = x * a[2];\n\n    out[3] = y * a[3];\n    out[4] = y * a[4];\n    out[5] = y * a[5];\n\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    return out;\n};\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {vec2} v Translation vector\n * @returns {mat3} out\n */\nmat3.fromTranslation = function (out, v) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 1;\n    out[5] = 0;\n    out[6] = v[0];\n    out[7] = v[1];\n    out[8] = 1;\n    return out;\n};\n\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nmat3.fromRotation = function (out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad);\n\n    out[0] = c;\n    out[1] = s;\n    out[2] = 0;\n\n    out[3] = -s;\n    out[4] = c;\n    out[5] = 0;\n\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 1;\n    return out;\n};\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {vec2} v Scaling vector\n * @returns {mat3} out\n */\nmat3.fromScaling = function (out, v) {\n    out[0] = v[0];\n    out[1] = 0;\n    out[2] = 0;\n\n    out[3] = 0;\n    out[4] = v[1];\n    out[5] = 0;\n\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 1;\n    return out;\n};\n\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat2d} a the matrix to copy\n * @returns {mat3} out\n **/\nmat3.fromMat2d = function (out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = 0;\n\n    out[3] = a[2];\n    out[4] = a[3];\n    out[5] = 0;\n\n    out[6] = a[4];\n    out[7] = a[5];\n    out[8] = 1;\n    return out;\n};\n\n/**\n* Calculates a 3x3 matrix from the given quaternion\n*\n* @param {mat3} out mat3 receiving operation result\n* @param {quat} q Quaternion to create matrix from\n*\n* @returns {mat3} out\n*/\nmat3.fromQuat = function (out, q) {\n    var x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n        xx = x * x2,\n        yx = y * x2,\n        yy = y * y2,\n        zx = z * x2,\n        zy = z * y2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[3] = yx - wz;\n    out[6] = zx + wy;\n\n    out[1] = yx + wz;\n    out[4] = 1 - xx - zz;\n    out[7] = zy - wx;\n\n    out[2] = zx - wy;\n    out[5] = zy + wx;\n    out[8] = 1 - xx - yy;\n\n    return out;\n};\n\n/**\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n*\n* @param {mat3} out mat3 receiving operation result\n* @param {mat4} a Mat4 to derive the normal matrix from\n*\n* @returns {mat3} out\n*/\nmat3.normalFromMat4 = function (out, a) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11],\n        a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15],\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n\n    // Calculate the determinant\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n\n    out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n\n    out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n\n    return out;\n};\n\n/**\n * Returns a string representation of a mat3\n *\n * @param {mat3} mat matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nmat3.str = function (a) {\n    return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ')';\n};\n\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {mat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nmat3.frob = function (a) {\n    return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2));\n};\n\nmodule.exports = mat3;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nvar glMatrix = __webpack_require__(1);\n\n/**\n * @class 3 Dimensional Vector\n * @name vec3\n */\nvar vec3 = {};\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nvec3.create = function () {\n    var out = new glMatrix.ARRAY_TYPE(3);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    return out;\n};\n\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {vec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nvec3.clone = function (a) {\n    var out = new glMatrix.ARRAY_TYPE(3);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n};\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nvec3.fromValues = function (x, y, z) {\n    var out = new glMatrix.ARRAY_TYPE(3);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nvec3.copy = function (out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n};\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nvec3.set = function (out, x, y, z) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.add = function (out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    return out;\n};\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.subtract = function (out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nvec3.sub = vec3.subtract;\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.multiply = function (out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nvec3.mul = vec3.multiply;\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.divide = function (out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nvec3.div = vec3.divide;\n\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.min = function (out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    return out;\n};\n\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.max = function (out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    return out;\n};\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nvec3.scale = function (out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    return out;\n};\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nvec3.scaleAndAdd = function (out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    out[2] = a[2] + b[2] * scale;\n    return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} distance between a and b\n */\nvec3.distance = function (a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2];\n    return Math.sqrt(x * x + y * y + z * z);\n};\n\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nvec3.dist = vec3.distance;\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nvec3.squaredDistance = function (a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2];\n    return x * x + y * y + z * z;\n};\n\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nvec3.sqrDist = vec3.squaredDistance;\n\n/**\n * Calculates the length of a vec3\n *\n * @param {vec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nvec3.length = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    return Math.sqrt(x * x + y * y + z * z);\n};\n\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nvec3.len = vec3.length;\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {vec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nvec3.squaredLength = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    return x * x + y * y + z * z;\n};\n\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nvec3.sqrLen = vec3.squaredLength;\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to negate\n * @returns {vec3} out\n */\nvec3.negate = function (out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    return out;\n};\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to invert\n * @returns {vec3} out\n */\nvec3.inverse = function (out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    out[2] = 1.0 / a[2];\n    return out;\n};\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nvec3.normalize = function (out, a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    var len = x * x + y * y + z * z;\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n        out[2] = a[2] * len;\n    }\n    return out;\n};\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nvec3.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n};\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.cross = function (out, a, b) {\n    var ax = a[0],\n        ay = a[1],\n        az = a[2],\n        bx = b[0],\n        by = b[1],\n        bz = b[2];\n\n    out[0] = ay * bz - az * by;\n    out[1] = az * bx - ax * bz;\n    out[2] = ax * by - ay * bx;\n    return out;\n};\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nvec3.lerp = function (out, a, b, t) {\n    var ax = a[0],\n        ay = a[1],\n        az = a[2];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    return out;\n};\n\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {vec3} c the third operand\n * @param {vec3} d the fourth operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nvec3.hermite = function (out, a, b, c, d, t) {\n    var factorTimes2 = t * t,\n        factor1 = factorTimes2 * (2 * t - 3) + 1,\n        factor2 = factorTimes2 * (t - 2) + t,\n        factor3 = factorTimes2 * (t - 1),\n        factor4 = factorTimes2 * (3 - 2 * t);\n\n    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n\n    return out;\n};\n\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {vec3} c the third operand\n * @param {vec3} d the fourth operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nvec3.bezier = function (out, a, b, c, d, t) {\n    var inverseFactor = 1 - t,\n        inverseFactorTimesTwo = inverseFactor * inverseFactor,\n        factorTimes2 = t * t,\n        factor1 = inverseFactorTimesTwo * inverseFactor,\n        factor2 = 3 * t * inverseFactorTimesTwo,\n        factor3 = 3 * factorTimes2 * inverseFactor,\n        factor4 = factorTimes2 * t;\n\n    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n\n    return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\nvec3.random = function (out, scale) {\n    scale = scale || 1.0;\n\n    var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n    var z = glMatrix.RANDOM() * 2.0 - 1.0;\n    var zScale = Math.sqrt(1.0 - z * z) * scale;\n\n    out[0] = Math.cos(r) * zScale;\n    out[1] = Math.sin(r) * zScale;\n    out[2] = z * scale;\n    return out;\n};\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nvec3.transformMat4 = function (out, a, m) {\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        w = m[3] * x + m[7] * y + m[11] * z + m[15];\n    w = w || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n    return out;\n};\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nvec3.transformMat3 = function (out, a, m) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    out[0] = x * m[0] + y * m[3] + z * m[6];\n    out[1] = x * m[1] + y * m[4] + z * m[7];\n    out[2] = x * m[2] + y * m[5] + z * m[8];\n    return out;\n};\n\n/**\n * Transforms the vec3 with a quat\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec3} out\n */\nvec3.transformQuat = function (out, a, q) {\n    // benchmarks: http://jsperf.com/quaternion-transform-vec3-implementations\n\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        qx = q[0],\n        qy = q[1],\n        qz = q[2],\n        qw = q[3],\n\n\n    // calculate quat * vec\n    ix = qw * x + qy * z - qz * y,\n        iy = qw * y + qz * x - qx * z,\n        iz = qw * z + qx * y - qy * x,\n        iw = -qx * x - qy * y - qz * z;\n\n    // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return out;\n};\n\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nvec3.rotateX = function (out, a, b, c) {\n    var p = [],\n        r = [];\n    //Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n\n    //perform rotation\n    r[0] = p[0];\n    r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n    r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c);\n\n    //translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n\n    return out;\n};\n\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nvec3.rotateY = function (out, a, b, c) {\n    var p = [],\n        r = [];\n    //Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n\n    //perform rotation\n    r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n    r[1] = p[1];\n    r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c);\n\n    //translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n\n    return out;\n};\n\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nvec3.rotateZ = function (out, a, b, c) {\n    var p = [],\n        r = [];\n    //Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n\n    //perform rotation\n    r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n    r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n    r[2] = p[2];\n\n    //translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n\n    return out;\n};\n\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvec3.forEach = function () {\n    var vec = vec3.create();\n\n    return function (a, stride, offset, count, fn, arg) {\n        var i, l;\n        if (!stride) {\n            stride = 3;\n        }\n\n        if (!offset) {\n            offset = 0;\n        }\n\n        if (count) {\n            l = Math.min(count * stride + offset, a.length);\n        } else {\n            l = a.length;\n        }\n\n        for (i = offset; i < l; i += stride) {\n            vec[0] = a[i];vec[1] = a[i + 1];vec[2] = a[i + 2];\n            fn(vec, vec, arg);\n            a[i] = vec[0];a[i + 1] = vec[1];a[i + 2] = vec[2];\n        }\n\n        return a;\n    };\n}();\n\n/**\n * Get the angle between two 3D vectors\n * @param {vec3} a The first operand\n * @param {vec3} b The second operand\n * @returns {Number} The angle in radians\n */\nvec3.angle = function (a, b) {\n\n    var tempA = vec3.fromValues(a[0], a[1], a[2]);\n    var tempB = vec3.fromValues(b[0], b[1], b[2]);\n\n    vec3.normalize(tempA, tempA);\n    vec3.normalize(tempB, tempB);\n\n    var cosine = vec3.dot(tempA, tempB);\n\n    if (cosine > 1.0) {\n        return 0;\n    } else {\n        return Math.acos(cosine);\n    }\n};\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec3} vec vector to represent as a string\n * @returns {String} string representation of the vector\n */\nvec3.str = function (a) {\n    return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n};\n\nmodule.exports = vec3;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nvar glMatrix = __webpack_require__(1);\n\n/**\n * @class 4 Dimensional Vector\n * @name vec4\n */\nvar vec4 = {};\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\nvec4.create = function () {\n    var out = new glMatrix.ARRAY_TYPE(4);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    return out;\n};\n\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {vec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\nvec4.clone = function (a) {\n    var out = new glMatrix.ARRAY_TYPE(4);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\nvec4.fromValues = function (x, y, z, w) {\n    var out = new glMatrix.ARRAY_TYPE(4);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n};\n\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the source vector\n * @returns {vec4} out\n */\nvec4.copy = function (out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nvec4.set = function (out, x, y, z, w) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n};\n\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.add = function (out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    return out;\n};\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.subtract = function (out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    return out;\n};\n\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\nvec4.sub = vec4.subtract;\n\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.multiply = function (out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    out[3] = a[3] * b[3];\n    return out;\n};\n\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\nvec4.mul = vec4.multiply;\n\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.divide = function (out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    out[3] = a[3] / b[3];\n    return out;\n};\n\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\nvec4.div = vec4.divide;\n\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.min = function (out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    out[3] = Math.min(a[3], b[3]);\n    return out;\n};\n\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.max = function (out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    out[3] = Math.max(a[3], b[3]);\n    return out;\n};\n\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\nvec4.scale = function (out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    return out;\n};\n\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\nvec4.scaleAndAdd = function (out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    out[2] = a[2] + b[2] * scale;\n    out[3] = a[3] + b[3] * scale;\n    return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} distance between a and b\n */\nvec4.distance = function (a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2],\n        w = b[3] - a[3];\n    return Math.sqrt(x * x + y * y + z * z + w * w);\n};\n\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\nvec4.dist = vec4.distance;\n\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\nvec4.squaredDistance = function (a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2],\n        w = b[3] - a[3];\n    return x * x + y * y + z * z + w * w;\n};\n\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\nvec4.sqrDist = vec4.squaredDistance;\n\n/**\n * Calculates the length of a vec4\n *\n * @param {vec4} a vector to calculate length of\n * @returns {Number} length of a\n */\nvec4.length = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        w = a[3];\n    return Math.sqrt(x * x + y * y + z * z + w * w);\n};\n\n/**\n * Alias for {@link vec4.length}\n * @function\n */\nvec4.len = vec4.length;\n\n/**\n * Calculates the squared length of a vec4\n *\n * @param {vec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nvec4.squaredLength = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        w = a[3];\n    return x * x + y * y + z * z + w * w;\n};\n\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\nvec4.sqrLen = vec4.squaredLength;\n\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to negate\n * @returns {vec4} out\n */\nvec4.negate = function (out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] = -a[3];\n    return out;\n};\n\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to invert\n * @returns {vec4} out\n */\nvec4.inverse = function (out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    out[2] = 1.0 / a[2];\n    out[3] = 1.0 / a[3];\n    return out;\n};\n\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to normalize\n * @returns {vec4} out\n */\nvec4.normalize = function (out, a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        w = a[3];\n    var len = x * x + y * y + z * z + w * w;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n        out[0] = x * len;\n        out[1] = y * len;\n        out[2] = z * len;\n        out[3] = w * len;\n    }\n    return out;\n};\n\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} dot product of a and b\n */\nvec4.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n};\n\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec4} out\n */\nvec4.lerp = function (out, a, b, t) {\n    var ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    out[3] = aw + t * (b[3] - aw);\n    return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\nvec4.random = function (out, scale) {\n    scale = scale || 1.0;\n\n    //TODO: This is a pretty awful way of doing this. Find something better.\n    out[0] = glMatrix.RANDOM();\n    out[1] = glMatrix.RANDOM();\n    out[2] = glMatrix.RANDOM();\n    out[3] = glMatrix.RANDOM();\n    vec4.normalize(out, out);\n    vec4.scale(out, out, scale);\n    return out;\n};\n\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec4} out\n */\nvec4.transformMat4 = function (out, a, m) {\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        w = a[3];\n    out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n    out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n    out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n    out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n    return out;\n};\n\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec4} out\n */\nvec4.transformQuat = function (out, a, q) {\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        qx = q[0],\n        qy = q[1],\n        qz = q[2],\n        qw = q[3],\n\n\n    // calculate quat * vec\n    ix = qw * x + qy * z - qz * y,\n        iy = qw * y + qz * x - qx * z,\n        iz = qw * z + qx * y - qy * x,\n        iw = -qx * x - qy * y - qz * z;\n\n    // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvec4.forEach = function () {\n    var vec = vec4.create();\n\n    return function (a, stride, offset, count, fn, arg) {\n        var i, l;\n        if (!stride) {\n            stride = 4;\n        }\n\n        if (!offset) {\n            offset = 0;\n        }\n\n        if (count) {\n            l = Math.min(count * stride + offset, a.length);\n        } else {\n            l = a.length;\n        }\n\n        for (i = offset; i < l; i += stride) {\n            vec[0] = a[i];vec[1] = a[i + 1];vec[2] = a[i + 2];vec[3] = a[i + 3];\n            fn(vec, vec, arg);\n            a[i] = vec[0];a[i + 1] = vec[1];a[i + 2] = vec[2];a[i + 3] = vec[3];\n        }\n\n        return a;\n    };\n}();\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec4} vec vector to represent as a string\n * @returns {String} string representation of the vector\n */\nvec4.str = function (a) {\n    return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n};\n\nmodule.exports = vec4;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar g;\n\n// This works in non-strict mode\ng = function () {\n\treturn this;\n}();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_gl_matrix__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_gl_matrix___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_gl_matrix__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_webworker_promise_lib_register__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_webworker_promise_lib_register___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_webworker_promise_lib_register__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vtk_js_Sources_Common_Core_Math__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vtk_js_Sources_Common_Core_Math___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_vtk_js_Sources_Common_Core_Math__);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_1_webworker_promise_lib_register___default()(\n  (\n    { width, height, depth, spacing, data, haveWebgl2, depthStart, depthEnd },\n    emit\n  ) => {\n    // have to compute the gradient to get the normal\n    // and magnitude\n    const depthLength = depthEnd - depthStart + 1;\n    const gradients = new Float32Array(width * height * depthLength * 4);\n    const gradientMagnitudes = new Float32Array(width * height * depthLength);\n\n    const sliceSize = width * height;\n    let inPtr = 0;\n    let outPtr = 0;\n    const grad = __WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].create();\n    __WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].set(\n      grad,\n      (data[inPtr + 1] - data[inPtr]) / spacing[0],\n      (data[inPtr + width] - data[inPtr]) / spacing[1],\n      (data[inPtr + sliceSize] - data[inPtr]) / spacing[2]\n    );\n    let minMag = __WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].length(grad);\n    let maxMag = -1.0;\n    for (let z = depthStart; z < depthEnd + 1; ++z) {\n      let zedge = 0;\n      if (z === depth - 1) {\n        zedge = -sliceSize;\n      }\n      for (let y = 0; y < height; ++y) {\n        let yedge = 0;\n        if (y === height - 1) {\n          yedge = -width;\n        }\n        for (let x = 0; x < width; ++x) {\n          let edge = inPtr + zedge + yedge;\n          if (x === width - 1) {\n            edge--;\n          }\n          __WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].set(\n            grad,\n            (data[edge + 1] - data[edge]) / spacing[0],\n            (data[edge + width] - data[edge]) / spacing[1],\n            (data[edge + sliceSize] - data[edge]) / spacing[2]\n          );\n\n          const mag = __WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].length(grad);\n          __WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].normalize(grad, grad);\n          gradients[outPtr++] = grad[0];\n          gradients[outPtr++] = grad[1];\n          gradients[outPtr++] = grad[2];\n          gradients[outPtr++] = mag;\n          gradientMagnitudes[inPtr] = mag;\n          inPtr++;\n        }\n      }\n    }\n    const arrayMinMag = __WEBPACK_IMPORTED_MODULE_2_vtk_js_Sources_Common_Core_Math___default.a.arrayMin(gradientMagnitudes);\n    const arrayMaxMag = __WEBPACK_IMPORTED_MODULE_2_vtk_js_Sources_Common_Core_Math___default.a.arrayMax(gradientMagnitudes);\n    minMag = Math.min(arrayMinMag, minMag);\n    maxMag = Math.max(arrayMaxMag, maxMag);\n\n    const result = {\n      subGradients: gradients,\n      subMinMag: minMag,\n      subMaxMag: maxMag,\n      subDepthStart: depthStart,\n    };\n    return Promise.resolve(\n      new __WEBPACK_IMPORTED_MODULE_1_webworker_promise_lib_register___default.a.TransferableResponse(result, [gradients.buffer])\n    );\n  }\n);\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * @fileoverview gl-matrix - High performance matrix and vector operations\n * @author Brandon Jones\n * @author Colin MacKenzie IV\n * @version 2.3.0\n */\n\n/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n// END HEADER\n\nexports.glMatrix = __webpack_require__(1);\nexports.mat2 = __webpack_require__(10);\nexports.mat2d = __webpack_require__(11);\nexports.mat3 = __webpack_require__(4);\nexports.mat4 = __webpack_require__(12);\nexports.quat = __webpack_require__(13);\nexports.vec2 = __webpack_require__(14);\nexports.vec3 = __webpack_require__(5);\nexports.vec4 = __webpack_require__(6);\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nvar glMatrix = __webpack_require__(1);\n\n/**\n * @class 2x2 Matrix\n * @name mat2\n */\nvar mat2 = {};\n\n/**\n * Creates a new identity mat2\n *\n * @returns {mat2} a new 2x2 matrix\n */\nmat2.create = function () {\n    var out = new glMatrix.ARRAY_TYPE(4);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n};\n\n/**\n * Creates a new mat2 initialized with values from an existing matrix\n *\n * @param {mat2} a matrix to clone\n * @returns {mat2} a new 2x2 matrix\n */\nmat2.clone = function (a) {\n    var out = new glMatrix.ARRAY_TYPE(4);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Copy the values from one mat2 to another\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nmat2.copy = function (out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Set a mat2 to the identity matrix\n *\n * @param {mat2} out the receiving matrix\n * @returns {mat2} out\n */\nmat2.identity = function (out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n};\n\n/**\n * Transpose the values of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nmat2.transpose = function (out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a1 = a[1];\n        out[1] = a[2];\n        out[2] = a1;\n    } else {\n        out[0] = a[0];\n        out[1] = a[2];\n        out[2] = a[1];\n        out[3] = a[3];\n    }\n\n    return out;\n};\n\n/**\n * Inverts a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nmat2.invert = function (out, a) {\n    var a0 = a[0],\n        a1 = a[1],\n        a2 = a[2],\n        a3 = a[3],\n\n\n    // Calculate the determinant\n    det = a0 * a3 - a2 * a1;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = a3 * det;\n    out[1] = -a1 * det;\n    out[2] = -a2 * det;\n    out[3] = a0 * det;\n\n    return out;\n};\n\n/**\n * Calculates the adjugate of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nmat2.adjoint = function (out, a) {\n    // Caching this value is nessecary if out == a\n    var a0 = a[0];\n    out[0] = a[3];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] = a0;\n\n    return out;\n};\n\n/**\n * Calculates the determinant of a mat2\n *\n * @param {mat2} a the source matrix\n * @returns {Number} determinant of a\n */\nmat2.determinant = function (a) {\n    return a[0] * a[3] - a[2] * a[1];\n};\n\n/**\n * Multiplies two mat2's\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the first operand\n * @param {mat2} b the second operand\n * @returns {mat2} out\n */\nmat2.multiply = function (out, a, b) {\n    var a0 = a[0],\n        a1 = a[1],\n        a2 = a[2],\n        a3 = a[3];\n    var b0 = b[0],\n        b1 = b[1],\n        b2 = b[2],\n        b3 = b[3];\n    out[0] = a0 * b0 + a2 * b1;\n    out[1] = a1 * b0 + a3 * b1;\n    out[2] = a0 * b2 + a2 * b3;\n    out[3] = a1 * b2 + a3 * b3;\n    return out;\n};\n\n/**\n * Alias for {@link mat2.multiply}\n * @function\n */\nmat2.mul = mat2.multiply;\n\n/**\n * Rotates a mat2 by the given angle\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2} out\n */\nmat2.rotate = function (out, a, rad) {\n    var a0 = a[0],\n        a1 = a[1],\n        a2 = a[2],\n        a3 = a[3],\n        s = Math.sin(rad),\n        c = Math.cos(rad);\n    out[0] = a0 * c + a2 * s;\n    out[1] = a1 * c + a3 * s;\n    out[2] = a0 * -s + a2 * c;\n    out[3] = a1 * -s + a3 * c;\n    return out;\n};\n\n/**\n * Scales the mat2 by the dimensions in the given vec2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat2} out\n **/\nmat2.scale = function (out, a, v) {\n    var a0 = a[0],\n        a1 = a[1],\n        a2 = a[2],\n        a3 = a[3],\n        v0 = v[0],\n        v1 = v[1];\n    out[0] = a0 * v0;\n    out[1] = a1 * v0;\n    out[2] = a2 * v1;\n    out[3] = a3 * v1;\n    return out;\n};\n\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat2.identity(dest);\n *     mat2.rotate(dest, dest, rad);\n *\n * @param {mat2} out mat2 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2} out\n */\nmat2.fromRotation = function (out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad);\n    out[0] = c;\n    out[1] = s;\n    out[2] = -s;\n    out[3] = c;\n    return out;\n};\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat2.identity(dest);\n *     mat2.scale(dest, dest, vec);\n *\n * @param {mat2} out mat2 receiving operation result\n * @param {vec2} v Scaling vector\n * @returns {mat2} out\n */\nmat2.fromScaling = function (out, v) {\n    out[0] = v[0];\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = v[1];\n    return out;\n};\n\n/**\n * Returns a string representation of a mat2\n *\n * @param {mat2} mat matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nmat2.str = function (a) {\n    return 'mat2(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n};\n\n/**\n * Returns Frobenius norm of a mat2\n *\n * @param {mat2} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nmat2.frob = function (a) {\n    return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2));\n};\n\n/**\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\n * @param {mat2} L the lower triangular matrix \n * @param {mat2} D the diagonal matrix \n * @param {mat2} U the upper triangular matrix \n * @param {mat2} a the input matrix to factorize\n */\n\nmat2.LDU = function (L, D, U, a) {\n    L[2] = a[2] / a[0];\n    U[0] = a[0];\n    U[1] = a[1];\n    U[3] = a[3] - L[2] * U[1];\n    return [L, D, U];\n};\n\nmodule.exports = mat2;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nvar glMatrix = __webpack_require__(1);\n\n/**\n * @class 2x3 Matrix\n * @name mat2d\n * \n * @description \n * A mat2d contains six elements defined as:\n * <pre>\n * [a, c, tx,\n *  b, d, ty]\n * </pre>\n * This is a short form for the 3x3 matrix:\n * <pre>\n * [a, c, tx,\n *  b, d, ty,\n *  0, 0, 1]\n * </pre>\n * The last row is ignored so the array is shorter and operations are faster.\n */\nvar mat2d = {};\n\n/**\n * Creates a new identity mat2d\n *\n * @returns {mat2d} a new 2x3 matrix\n */\nmat2d.create = function () {\n    var out = new glMatrix.ARRAY_TYPE(6);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n};\n\n/**\n * Creates a new mat2d initialized with values from an existing matrix\n *\n * @param {mat2d} a matrix to clone\n * @returns {mat2d} a new 2x3 matrix\n */\nmat2d.clone = function (a) {\n    var out = new glMatrix.ARRAY_TYPE(6);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    return out;\n};\n\n/**\n * Copy the values from one mat2d to another\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the source matrix\n * @returns {mat2d} out\n */\nmat2d.copy = function (out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    return out;\n};\n\n/**\n * Set a mat2d to the identity matrix\n *\n * @param {mat2d} out the receiving matrix\n * @returns {mat2d} out\n */\nmat2d.identity = function (out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n};\n\n/**\n * Inverts a mat2d\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the source matrix\n * @returns {mat2d} out\n */\nmat2d.invert = function (out, a) {\n    var aa = a[0],\n        ab = a[1],\n        ac = a[2],\n        ad = a[3],\n        atx = a[4],\n        aty = a[5];\n\n    var det = aa * ad - ab * ac;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = ad * det;\n    out[1] = -ab * det;\n    out[2] = -ac * det;\n    out[3] = aa * det;\n    out[4] = (ac * aty - ad * atx) * det;\n    out[5] = (ab * atx - aa * aty) * det;\n    return out;\n};\n\n/**\n * Calculates the determinant of a mat2d\n *\n * @param {mat2d} a the source matrix\n * @returns {Number} determinant of a\n */\nmat2d.determinant = function (a) {\n    return a[0] * a[3] - a[1] * a[2];\n};\n\n/**\n * Multiplies two mat2d's\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the first operand\n * @param {mat2d} b the second operand\n * @returns {mat2d} out\n */\nmat2d.multiply = function (out, a, b) {\n    var a0 = a[0],\n        a1 = a[1],\n        a2 = a[2],\n        a3 = a[3],\n        a4 = a[4],\n        a5 = a[5],\n        b0 = b[0],\n        b1 = b[1],\n        b2 = b[2],\n        b3 = b[3],\n        b4 = b[4],\n        b5 = b[5];\n    out[0] = a0 * b0 + a2 * b1;\n    out[1] = a1 * b0 + a3 * b1;\n    out[2] = a0 * b2 + a2 * b3;\n    out[3] = a1 * b2 + a3 * b3;\n    out[4] = a0 * b4 + a2 * b5 + a4;\n    out[5] = a1 * b4 + a3 * b5 + a5;\n    return out;\n};\n\n/**\n * Alias for {@link mat2d.multiply}\n * @function\n */\nmat2d.mul = mat2d.multiply;\n\n/**\n * Rotates a mat2d by the given angle\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2d} out\n */\nmat2d.rotate = function (out, a, rad) {\n    var a0 = a[0],\n        a1 = a[1],\n        a2 = a[2],\n        a3 = a[3],\n        a4 = a[4],\n        a5 = a[5],\n        s = Math.sin(rad),\n        c = Math.cos(rad);\n    out[0] = a0 * c + a2 * s;\n    out[1] = a1 * c + a3 * s;\n    out[2] = a0 * -s + a2 * c;\n    out[3] = a1 * -s + a3 * c;\n    out[4] = a4;\n    out[5] = a5;\n    return out;\n};\n\n/**\n * Scales the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to translate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat2d} out\n **/\nmat2d.scale = function (out, a, v) {\n    var a0 = a[0],\n        a1 = a[1],\n        a2 = a[2],\n        a3 = a[3],\n        a4 = a[4],\n        a5 = a[5],\n        v0 = v[0],\n        v1 = v[1];\n    out[0] = a0 * v0;\n    out[1] = a1 * v0;\n    out[2] = a2 * v1;\n    out[3] = a3 * v1;\n    out[4] = a4;\n    out[5] = a5;\n    return out;\n};\n\n/**\n * Translates the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to translate\n * @param {vec2} v the vec2 to translate the matrix by\n * @returns {mat2d} out\n **/\nmat2d.translate = function (out, a, v) {\n    var a0 = a[0],\n        a1 = a[1],\n        a2 = a[2],\n        a3 = a[3],\n        a4 = a[4],\n        a5 = a[5],\n        v0 = v[0],\n        v1 = v[1];\n    out[0] = a0;\n    out[1] = a1;\n    out[2] = a2;\n    out[3] = a3;\n    out[4] = a0 * v0 + a2 * v1 + a4;\n    out[5] = a1 * v0 + a3 * v1 + a5;\n    return out;\n};\n\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.rotate(dest, dest, rad);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2d} out\n */\nmat2d.fromRotation = function (out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad);\n    out[0] = c;\n    out[1] = s;\n    out[2] = -s;\n    out[3] = c;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n};\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.scale(dest, dest, vec);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {vec2} v Scaling vector\n * @returns {mat2d} out\n */\nmat2d.fromScaling = function (out, v) {\n    out[0] = v[0];\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = v[1];\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n};\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.translate(dest, dest, vec);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {vec2} v Translation vector\n * @returns {mat2d} out\n */\nmat2d.fromTranslation = function (out, v) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = v[0];\n    out[5] = v[1];\n    return out;\n};\n\n/**\n * Returns a string representation of a mat2d\n *\n * @param {mat2d} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nmat2d.str = function (a) {\n    return 'mat2d(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ')';\n};\n\n/**\n * Returns Frobenius norm of a mat2d\n *\n * @param {mat2d} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nmat2d.frob = function (a) {\n    return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + 1);\n};\n\nmodule.exports = mat2d;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nvar glMatrix = __webpack_require__(1);\n\n/**\n * @class 4x4 Matrix\n * @name mat4\n */\nvar mat4 = {};\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nmat4.create = function () {\n    var out = new glMatrix.ARRAY_TYPE(16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {mat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nmat4.clone = function (a) {\n    var out = new glMatrix.ARRAY_TYPE(16);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.copy = function (out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nmat4.identity = function (out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.transpose = function (out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1],\n            a02 = a[2],\n            a03 = a[3],\n            a12 = a[6],\n            a13 = a[7],\n            a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n\n    return out;\n};\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.invert = function (out, a) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11],\n        a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15],\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n\n    // Calculate the determinant\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n};\n\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.adjoint = function (out, a) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11],\n        a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15];\n\n    out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n    out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n    out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n    out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n    out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n    out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n    out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n    out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n    out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n    out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n    out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n    out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n    out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n    out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n    out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n    out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n    return out;\n};\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {mat4} a the source matrix\n * @returns {Number} determinant of a\n */\nmat4.determinant = function (a) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11],\n        a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15],\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32;\n\n    // Calculate the determinant\n    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n};\n\n/**\n * Multiplies two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nmat4.multiply = function (out, a, b) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11],\n        a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    var b0 = b[0],\n        b1 = b[1],\n        b2 = b[2],\n        b3 = b[3];\n    out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n    b0 = b[4];b1 = b[5];b2 = b[6];b3 = b[7];\n    out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n    b0 = b[8];b1 = b[9];b2 = b[10];b3 = b[11];\n    out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n    b0 = b[12];b1 = b[13];b2 = b[14];b3 = b[15];\n    out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    return out;\n};\n\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\nmat4.mul = mat4.multiply;\n\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nmat4.translate = function (out, a, v) {\n    var x = v[0],\n        y = v[1],\n        z = v[2],\n        a00,\n        a01,\n        a02,\n        a03,\n        a10,\n        a11,\n        a12,\n        a13,\n        a20,\n        a21,\n        a22,\n        a23;\n\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n        a00 = a[0];a01 = a[1];a02 = a[2];a03 = a[3];\n        a10 = a[4];a11 = a[5];a12 = a[6];a13 = a[7];\n        a20 = a[8];a21 = a[9];a22 = a[10];a23 = a[11];\n\n        out[0] = a00;out[1] = a01;out[2] = a02;out[3] = a03;\n        out[4] = a10;out[5] = a11;out[6] = a12;out[7] = a13;\n        out[8] = a20;out[9] = a21;out[10] = a22;out[11] = a23;\n\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n\n    return out;\n};\n\n/**\n * Scales the mat4 by the dimensions in the given vec3\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nmat4.scale = function (out, a, v) {\n    var x = v[0],\n        y = v[1],\n        z = v[2];\n\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nmat4.rotate = function (out, a, rad, axis) {\n    var x = axis[0],\n        y = axis[1],\n        z = axis[2],\n        len = Math.sqrt(x * x + y * y + z * z),\n        s,\n        c,\n        t,\n        a00,\n        a01,\n        a02,\n        a03,\n        a10,\n        a11,\n        a12,\n        a13,\n        a20,\n        a21,\n        a22,\n        a23,\n        b00,\n        b01,\n        b02,\n        b10,\n        b11,\n        b12,\n        b20,\n        b21,\n        b22;\n\n    if (Math.abs(len) < glMatrix.EPSILON) {\n        return null;\n    }\n\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n\n    a00 = a[0];a01 = a[1];a02 = a[2];a03 = a[3];\n    a10 = a[4];a11 = a[5];a12 = a[6];a13 = a[7];\n    a20 = a[8];a21 = a[9];a22 = a[10];a23 = a[11];\n\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c;b01 = y * x * t + z * s;b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s;b11 = y * y * t + c;b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s;b21 = y * z * t - x * s;b22 = z * z * t + c;\n\n    // Perform rotation-specific matrix multiplication\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged last row\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.rotateX = function (out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged rows\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[4] = a10 * c + a20 * s;\n    out[5] = a11 * c + a21 * s;\n    out[6] = a12 * c + a22 * s;\n    out[7] = a13 * c + a23 * s;\n    out[8] = a20 * c - a10 * s;\n    out[9] = a21 * c - a11 * s;\n    out[10] = a22 * c - a12 * s;\n    out[11] = a23 * c - a13 * s;\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.rotateY = function (out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged rows\n        out[4] = a[4];\n        out[5] = a[5];\n        out[6] = a[6];\n        out[7] = a[7];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c - a20 * s;\n    out[1] = a01 * c - a21 * s;\n    out[2] = a02 * c - a22 * s;\n    out[3] = a03 * c - a23 * s;\n    out[8] = a00 * s + a20 * c;\n    out[9] = a01 * s + a21 * c;\n    out[10] = a02 * s + a22 * c;\n    out[11] = a03 * s + a23 * c;\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.rotateZ = function (out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged last row\n        out[8] = a[8];\n        out[9] = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c + a10 * s;\n    out[1] = a01 * c + a11 * s;\n    out[2] = a02 * c + a12 * s;\n    out[3] = a03 * c + a13 * s;\n    out[4] = a10 * c - a00 * s;\n    out[5] = a11 * c - a01 * s;\n    out[6] = a12 * c - a02 * s;\n    out[7] = a13 * c - a03 * s;\n    return out;\n};\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nmat4.fromTranslation = function (out, v) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Scaling vector\n * @returns {mat4} out\n */\nmat4.fromScaling = function (out, v) {\n    out[0] = v[0];\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = v[1];\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = v[2];\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nmat4.fromRotation = function (out, rad, axis) {\n    var x = axis[0],\n        y = axis[1],\n        z = axis[2],\n        len = Math.sqrt(x * x + y * y + z * z),\n        s,\n        c,\n        t;\n\n    if (Math.abs(len) < glMatrix.EPSILON) {\n        return null;\n    }\n\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n\n    // Perform rotation-specific matrix multiplication\n    out[0] = x * x * t + c;\n    out[1] = y * x * t + z * s;\n    out[2] = z * x * t - y * s;\n    out[3] = 0;\n    out[4] = x * y * t - z * s;\n    out[5] = y * y * t + c;\n    out[6] = z * y * t + x * s;\n    out[7] = 0;\n    out[8] = x * z * t + y * s;\n    out[9] = y * z * t - x * s;\n    out[10] = z * z * t + c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.fromXRotation = function (out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad);\n\n    // Perform axis-specific matrix multiplication\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = c;\n    out[6] = s;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = -s;\n    out[10] = c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.fromYRotation = function (out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad);\n\n    // Perform axis-specific matrix multiplication\n    out[0] = c;\n    out[1] = 0;\n    out[2] = -s;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = s;\n    out[9] = 0;\n    out[10] = c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.fromZRotation = function (out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad);\n\n    // Perform axis-specific matrix multiplication\n    out[0] = c;\n    out[1] = s;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = -s;\n    out[5] = c;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     var quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nmat4.fromRotationTranslation = function (out, q, v) {\n    // Quaternion math\n    var x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n\n    return out;\n};\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     var quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @param {vec3} s Scaling vector\n * @returns {mat4} out\n */\nmat4.fromRotationTranslationScale = function (out, q, v, s) {\n    // Quaternion math\n    var x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2,\n        sx = s[0],\n        sy = s[1],\n        sz = s[2];\n\n    out[0] = (1 - (yy + zz)) * sx;\n    out[1] = (xy + wz) * sx;\n    out[2] = (xz - wy) * sx;\n    out[3] = 0;\n    out[4] = (xy - wz) * sy;\n    out[5] = (1 - (xx + zz)) * sy;\n    out[6] = (yz + wx) * sy;\n    out[7] = 0;\n    out[8] = (xz + wy) * sz;\n    out[9] = (yz - wx) * sz;\n    out[10] = (1 - (xx + yy)) * sz;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n\n    return out;\n};\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     var quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @param {vec3} s Scaling vector\n * @param {vec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\nmat4.fromRotationTranslationScaleOrigin = function (out, q, v, s, o) {\n    // Quaternion math\n    var x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2,\n        sx = s[0],\n        sy = s[1],\n        sz = s[2],\n        ox = o[0],\n        oy = o[1],\n        oz = o[2];\n\n    out[0] = (1 - (yy + zz)) * sx;\n    out[1] = (xy + wz) * sx;\n    out[2] = (xz - wy) * sx;\n    out[3] = 0;\n    out[4] = (xy - wz) * sy;\n    out[5] = (1 - (xx + zz)) * sy;\n    out[6] = (yz + wx) * sy;\n    out[7] = 0;\n    out[8] = (xz + wy) * sz;\n    out[9] = (yz - wx) * sz;\n    out[10] = (1 - (xx + yy)) * sz;\n    out[11] = 0;\n    out[12] = v[0] + ox - (out[0] * ox + out[4] * oy + out[8] * oz);\n    out[13] = v[1] + oy - (out[1] * ox + out[5] * oy + out[9] * oz);\n    out[14] = v[2] + oz - (out[2] * ox + out[6] * oy + out[10] * oz);\n    out[15] = 1;\n\n    return out;\n};\n\nmat4.fromQuat = function (out, q) {\n    var x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n        xx = x * x2,\n        yx = y * x2,\n        yy = y * y2,\n        zx = z * x2,\n        zy = z * y2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[1] = yx + wz;\n    out[2] = zx - wy;\n    out[3] = 0;\n\n    out[4] = yx - wz;\n    out[5] = 1 - xx - zz;\n    out[6] = zy + wx;\n    out[7] = 0;\n\n    out[8] = zx + wy;\n    out[9] = zy - wx;\n    out[10] = 1 - xx - yy;\n    out[11] = 0;\n\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n\n    return out;\n};\n\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.frustum = function (out, left, right, bottom, top, near, far) {\n    var rl = 1 / (right - left),\n        tb = 1 / (top - bottom),\n        nf = 1 / (near - far);\n    out[0] = near * 2 * rl;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = near * 2 * tb;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = (right + left) * rl;\n    out[9] = (top + bottom) * tb;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = far * near * 2 * nf;\n    out[15] = 0;\n    return out;\n};\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.perspective = function (out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 2 * far * near * nf;\n    out[15] = 0;\n    return out;\n};\n\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.perspectiveFromFieldOfView = function (out, fov, near, far) {\n    var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0),\n        downTan = Math.tan(fov.downDegrees * Math.PI / 180.0),\n        leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0),\n        rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0),\n        xScale = 2.0 / (leftTan + rightTan),\n        yScale = 2.0 / (upTan + downTan);\n\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = (upTan - downTan) * yScale * 0.5;\n    out[10] = far / (near - far);\n    out[11] = -1.0;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = far * near / (near - far);\n    out[15] = 0.0;\n    return out;\n};\n\n/**\n * Generates a orthogonal projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.ortho = function (out, left, right, bottom, top, near, far) {\n    var lr = 1 / (left - right),\n        bt = 1 / (bottom - top),\n        nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} center Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nmat4.lookAt = function (out, eye, center, up) {\n    var x0,\n        x1,\n        x2,\n        y0,\n        y1,\n        y2,\n        z0,\n        z1,\n        z2,\n        len,\n        eyex = eye[0],\n        eyey = eye[1],\n        eyez = eye[2],\n        upx = up[0],\n        upy = up[1],\n        upz = up[2],\n        centerx = center[0],\n        centery = center[1],\n        centerz = center[2];\n\n    if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n        return mat4.identity(out);\n    }\n\n    z0 = eyex - centerx;\n    z1 = eyey - centery;\n    z2 = eyez - centerz;\n\n    len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n\n    x0 = upy * z2 - upz * z1;\n    x1 = upz * z0 - upx * z2;\n    x2 = upx * z1 - upy * z0;\n    len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n    if (!len) {\n        x0 = 0;\n        x1 = 0;\n        x2 = 0;\n    } else {\n        len = 1 / len;\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n\n    y0 = z1 * x2 - z2 * x1;\n    y1 = z2 * x0 - z0 * x2;\n    y2 = z0 * x1 - z1 * x0;\n\n    len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n    if (!len) {\n        y0 = 0;\n        y1 = 0;\n        y2 = 0;\n    } else {\n        len = 1 / len;\n        y0 *= len;\n        y1 *= len;\n        y2 *= len;\n    }\n\n    out[0] = x0;\n    out[1] = y0;\n    out[2] = z0;\n    out[3] = 0;\n    out[4] = x1;\n    out[5] = y1;\n    out[6] = z1;\n    out[7] = 0;\n    out[8] = x2;\n    out[9] = y2;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n    out[15] = 1;\n\n    return out;\n};\n\n/**\n * Returns a string representation of a mat4\n *\n * @param {mat4} mat matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nmat4.str = function (a) {\n    return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n};\n\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {mat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nmat4.frob = function (a) {\n    return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));\n};\n\nmodule.exports = mat4;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nvar glMatrix = __webpack_require__(1);\nvar mat3 = __webpack_require__(4);\nvar vec3 = __webpack_require__(5);\nvar vec4 = __webpack_require__(6);\n\n/**\n * @class Quaternion\n * @name quat\n */\nvar quat = {};\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\nquat.create = function () {\n    var out = new glMatrix.ARRAY_TYPE(4);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n};\n\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {vec3} a the initial vector\n * @param {vec3} b the destination vector\n * @returns {quat} out\n */\nquat.rotationTo = function () {\n    var tmpvec3 = vec3.create();\n    var xUnitVec3 = vec3.fromValues(1, 0, 0);\n    var yUnitVec3 = vec3.fromValues(0, 1, 0);\n\n    return function (out, a, b) {\n        var dot = vec3.dot(a, b);\n        if (dot < -0.999999) {\n            vec3.cross(tmpvec3, xUnitVec3, a);\n            if (vec3.length(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n            vec3.normalize(tmpvec3, tmpvec3);\n            quat.setAxisAngle(out, tmpvec3, Math.PI);\n            return out;\n        } else if (dot > 0.999999) {\n            out[0] = 0;\n            out[1] = 0;\n            out[2] = 0;\n            out[3] = 1;\n            return out;\n        } else {\n            vec3.cross(tmpvec3, a, b);\n            out[0] = tmpvec3[0];\n            out[1] = tmpvec3[1];\n            out[2] = tmpvec3[2];\n            out[3] = 1 + dot;\n            return quat.normalize(out, out);\n        }\n    };\n}();\n\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {vec3} view  the vector representing the viewing direction\n * @param {vec3} right the vector representing the local \"right\" direction\n * @param {vec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\nquat.setAxes = function () {\n    var matr = mat3.create();\n\n    return function (out, view, right, up) {\n        matr[0] = right[0];\n        matr[3] = right[1];\n        matr[6] = right[2];\n\n        matr[1] = up[0];\n        matr[4] = up[1];\n        matr[7] = up[2];\n\n        matr[2] = -view[0];\n        matr[5] = -view[1];\n        matr[8] = -view[2];\n\n        return quat.normalize(out, quat.fromMat3(out, matr));\n    };\n}();\n\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {quat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\nquat.clone = vec4.clone;\n\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\nquat.fromValues = vec4.fromValues;\n\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the source quaternion\n * @returns {quat} out\n * @function\n */\nquat.copy = vec4.copy;\n\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\nquat.set = vec4.set;\n\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\nquat.identity = function (out) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n};\n\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {vec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\nquat.setAxisAngle = function (out, axis, rad) {\n    rad = rad * 0.5;\n    var s = Math.sin(rad);\n    out[0] = s * axis[0];\n    out[1] = s * axis[1];\n    out[2] = s * axis[2];\n    out[3] = Math.cos(rad);\n    return out;\n};\n\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n * @function\n */\nquat.add = vec4.add;\n\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n */\nquat.multiply = function (out, a, b) {\n    var ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3],\n        bx = b[0],\n        by = b[1],\n        bz = b[2],\n        bw = b[3];\n\n    out[0] = ax * bw + aw * bx + ay * bz - az * by;\n    out[1] = ay * bw + aw * by + az * bx - ax * bz;\n    out[2] = az * bw + aw * bz + ax * by - ay * bx;\n    out[3] = aw * bw - ax * bx - ay * by - az * bz;\n    return out;\n};\n\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\nquat.mul = quat.multiply;\n\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {quat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\nquat.scale = vec4.scale;\n\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nquat.rotateX = function (out, a, rad) {\n    rad *= 0.5;\n\n    var ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3],\n        bx = Math.sin(rad),\n        bw = Math.cos(rad);\n\n    out[0] = ax * bw + aw * bx;\n    out[1] = ay * bw + az * bx;\n    out[2] = az * bw - ay * bx;\n    out[3] = aw * bw - ax * bx;\n    return out;\n};\n\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nquat.rotateY = function (out, a, rad) {\n    rad *= 0.5;\n\n    var ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3],\n        by = Math.sin(rad),\n        bw = Math.cos(rad);\n\n    out[0] = ax * bw - az * by;\n    out[1] = ay * bw + aw * by;\n    out[2] = az * bw + ax * by;\n    out[3] = aw * bw - ay * by;\n    return out;\n};\n\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nquat.rotateZ = function (out, a, rad) {\n    rad *= 0.5;\n\n    var ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3],\n        bz = Math.sin(rad),\n        bw = Math.cos(rad);\n\n    out[0] = ax * bw + ay * bz;\n    out[1] = ay * bw - ax * bz;\n    out[2] = az * bw + aw * bz;\n    out[3] = aw * bw - az * bz;\n    return out;\n};\n\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate W component of\n * @returns {quat} out\n */\nquat.calculateW = function (out, a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n    return out;\n};\n\n/**\n * Calculates the dot product of two quat's\n *\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\nquat.dot = vec4.dot;\n\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n * @function\n */\nquat.lerp = vec4.lerp;\n\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n */\nquat.slerp = function (out, a, b, t) {\n    // benchmarks:\n    //    http://jsperf.com/quaternion-slerp-implementations\n\n    var ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3],\n        bx = b[0],\n        by = b[1],\n        bz = b[2],\n        bw = b[3];\n\n    var omega, cosom, sinom, scale0, scale1;\n\n    // calc cosine\n    cosom = ax * bx + ay * by + az * bz + aw * bw;\n    // adjust signs (if necessary)\n    if (cosom < 0.0) {\n        cosom = -cosom;\n        bx = -bx;\n        by = -by;\n        bz = -bz;\n        bw = -bw;\n    }\n    // calculate coefficients\n    if (1.0 - cosom > 0.000001) {\n        // standard case (slerp)\n        omega = Math.acos(cosom);\n        sinom = Math.sin(omega);\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\n        scale1 = Math.sin(t * omega) / sinom;\n    } else {\n        // \"from\" and \"to\" quaternions are very close \n        //  ... so we can do a linear interpolation\n        scale0 = 1.0 - t;\n        scale1 = t;\n    }\n    // calculate final values\n    out[0] = scale0 * ax + scale1 * bx;\n    out[1] = scale0 * ay + scale1 * by;\n    out[2] = scale0 * az + scale1 * bz;\n    out[3] = scale0 * aw + scale1 * bw;\n\n    return out;\n};\n\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {quat} c the third operand\n * @param {quat} d the fourth operand\n * @param {Number} t interpolation amount\n * @returns {quat} out\n */\nquat.sqlerp = function () {\n    var temp1 = quat.create();\n    var temp2 = quat.create();\n\n    return function (out, a, b, c, d, t) {\n        quat.slerp(temp1, a, d, t);\n        quat.slerp(temp2, b, c, t);\n        quat.slerp(out, temp1, temp2, 2 * t * (1 - t));\n\n        return out;\n    };\n}();\n\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate inverse of\n * @returns {quat} out\n */\nquat.invert = function (out, a) {\n    var a0 = a[0],\n        a1 = a[1],\n        a2 = a[2],\n        a3 = a[3],\n        dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3,\n        invDot = dot ? 1.0 / dot : 0;\n\n    // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n    out[0] = -a0 * invDot;\n    out[1] = -a1 * invDot;\n    out[2] = -a2 * invDot;\n    out[3] = a3 * invDot;\n    return out;\n};\n\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate conjugate of\n * @returns {quat} out\n */\nquat.conjugate = function (out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Calculates the length of a quat\n *\n * @param {quat} a vector to calculate length of\n * @returns {Number} length of a\n * @function\n */\nquat.length = vec4.length;\n\n/**\n * Alias for {@link quat.length}\n * @function\n */\nquat.len = quat.length;\n\n/**\n * Calculates the squared length of a quat\n *\n * @param {quat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\nquat.squaredLength = vec4.squaredLength;\n\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\nquat.sqrLen = quat.squaredLength;\n\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\nquat.normalize = vec4.normalize;\n\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {mat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\nquat.fromMat3 = function (out, m) {\n    // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n    // article \"Quaternion Calculus and Fast Animation\".\n    var fTrace = m[0] + m[4] + m[8];\n    var fRoot;\n\n    if (fTrace > 0.0) {\n        // |w| > 1/2, may as well choose w > 1/2\n        fRoot = Math.sqrt(fTrace + 1.0); // 2w\n        out[3] = 0.5 * fRoot;\n        fRoot = 0.5 / fRoot; // 1/(4w)\n        out[0] = (m[5] - m[7]) * fRoot;\n        out[1] = (m[6] - m[2]) * fRoot;\n        out[2] = (m[1] - m[3]) * fRoot;\n    } else {\n        // |w| <= 1/2\n        var i = 0;\n        if (m[4] > m[0]) i = 1;\n        if (m[8] > m[i * 3 + i]) i = 2;\n        var j = (i + 1) % 3;\n        var k = (i + 2) % 3;\n\n        fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n        out[i] = 0.5 * fRoot;\n        fRoot = 0.5 / fRoot;\n        out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n        out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n        out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n    }\n\n    return out;\n};\n\n/**\n * Returns a string representation of a quatenion\n *\n * @param {quat} vec vector to represent as a string\n * @returns {String} string representation of the vector\n */\nquat.str = function (a) {\n    return 'quat(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n};\n\nmodule.exports = quat;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nvar glMatrix = __webpack_require__(1);\n\n/**\n * @class 2 Dimensional Vector\n * @name vec2\n */\nvar vec2 = {};\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\nvec2.create = function () {\n    var out = new glMatrix.ARRAY_TYPE(2);\n    out[0] = 0;\n    out[1] = 0;\n    return out;\n};\n\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {vec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\nvec2.clone = function (a) {\n    var out = new glMatrix.ARRAY_TYPE(2);\n    out[0] = a[0];\n    out[1] = a[1];\n    return out;\n};\n\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\nvec2.fromValues = function (x, y) {\n    var out = new glMatrix.ARRAY_TYPE(2);\n    out[0] = x;\n    out[1] = y;\n    return out;\n};\n\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the source vector\n * @returns {vec2} out\n */\nvec2.copy = function (out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    return out;\n};\n\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\nvec2.set = function (out, x, y) {\n    out[0] = x;\n    out[1] = y;\n    return out;\n};\n\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.add = function (out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    return out;\n};\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.subtract = function (out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    return out;\n};\n\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\nvec2.sub = vec2.subtract;\n\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.multiply = function (out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    return out;\n};\n\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\nvec2.mul = vec2.multiply;\n\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.divide = function (out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    return out;\n};\n\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\nvec2.div = vec2.divide;\n\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.min = function (out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    return out;\n};\n\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.max = function (out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    return out;\n};\n\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\nvec2.scale = function (out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    return out;\n};\n\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\nvec2.scaleAndAdd = function (out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} distance between a and b\n */\nvec2.distance = function (a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1];\n    return Math.sqrt(x * x + y * y);\n};\n\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\nvec2.dist = vec2.distance;\n\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\nvec2.squaredDistance = function (a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1];\n    return x * x + y * y;\n};\n\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\nvec2.sqrDist = vec2.squaredDistance;\n\n/**\n * Calculates the length of a vec2\n *\n * @param {vec2} a vector to calculate length of\n * @returns {Number} length of a\n */\nvec2.length = function (a) {\n    var x = a[0],\n        y = a[1];\n    return Math.sqrt(x * x + y * y);\n};\n\n/**\n * Alias for {@link vec2.length}\n * @function\n */\nvec2.len = vec2.length;\n\n/**\n * Calculates the squared length of a vec2\n *\n * @param {vec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nvec2.squaredLength = function (a) {\n    var x = a[0],\n        y = a[1];\n    return x * x + y * y;\n};\n\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\nvec2.sqrLen = vec2.squaredLength;\n\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to negate\n * @returns {vec2} out\n */\nvec2.negate = function (out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    return out;\n};\n\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to invert\n * @returns {vec2} out\n */\nvec2.inverse = function (out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    return out;\n};\n\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to normalize\n * @returns {vec2} out\n */\nvec2.normalize = function (out, a) {\n    var x = a[0],\n        y = a[1];\n    var len = x * x + y * y;\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n    }\n    return out;\n};\n\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} dot product of a and b\n */\nvec2.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1];\n};\n\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec3} out\n */\nvec2.cross = function (out, a, b) {\n    var z = a[0] * b[1] - a[1] * b[0];\n    out[0] = out[1] = 0;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec2} out\n */\nvec2.lerp = function (out, a, b, t) {\n    var ax = a[0],\n        ay = a[1];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\nvec2.random = function (out, scale) {\n    scale = scale || 1.0;\n    var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n    out[0] = Math.cos(r) * scale;\n    out[1] = Math.sin(r) * scale;\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat2 = function (out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[2] * y;\n    out[1] = m[1] * x + m[3] * y;\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2d} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat2d = function (out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat3} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat3 = function (out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[3] * y + m[6];\n    out[1] = m[1] * x + m[4] * y + m[7];\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat4 = function (out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[4] * y + m[12];\n    out[1] = m[1] * x + m[5] * y + m[13];\n    return out;\n};\n\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvec2.forEach = function () {\n    var vec = vec2.create();\n\n    return function (a, stride, offset, count, fn, arg) {\n        var i, l;\n        if (!stride) {\n            stride = 2;\n        }\n\n        if (!offset) {\n            offset = 0;\n        }\n\n        if (count) {\n            l = Math.min(count * stride + offset, a.length);\n        } else {\n            l = a.length;\n        }\n\n        for (i = offset; i < l; i += stride) {\n            vec[0] = a[i];vec[1] = a[i + 1];\n            fn(vec, vec, arg);\n            a[i] = vec[0];a[i + 1] = vec[1];\n        }\n\n        return a;\n    };\n}();\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec2} vec vector to represent as a string\n * @returns {String} string representation of the vector\n */\nvec2.str = function (a) {\n    return 'vec2(' + a[0] + ', ' + a[1] + ')';\n};\n\nmodule.exports = vec2;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof2 = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n  };\n}();\n\nvar _get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;var desc = Object.getOwnPropertyDescriptor(object, property);if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;if (getter === undefined) {\n      return undefined;\n    }return getter.call(receiver);\n  }\n};\n\nvar _typeof = typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof2(obj);\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof2(obj);\n};\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }return call && ((typeof call === \"undefined\" ? \"undefined\" : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : _typeof2(superClass)));\n  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });\n  } else {\n    obj[key] = value;\n  }return obj;\n}\n\nvar TinyEmitter = __webpack_require__(16);\n\nvar MESSAGE_RESULT = 0;\nvar MESSAGE_EVENT = 1;\n\nvar RESULT_ERROR = 0;\nvar RESULT_SUCCESS = 1;\n\nvar DEFAULT_HANDLER = 'main';\n\nvar isPromise = function isPromise(o) {\n  return (typeof o === 'undefined' ? 'undefined' : _typeof(o)) === 'object' && typeof o.then === 'function' && typeof o.catch === 'function';\n};\n\nfunction RegisterPromise(fn) {\n  var handlers = _defineProperty({}, DEFAULT_HANDLER, fn);\n  var sendPostMessage = self.postMessage.bind(self);\n\n  var server = new (function (_TinyEmitter) {\n    _inherits(WorkerRegister, _TinyEmitter);\n\n    function WorkerRegister() {\n      _classCallCheck(this, WorkerRegister);\n\n      return _possibleConstructorReturn(this, (WorkerRegister.__proto__ || Object.getPrototypeOf(WorkerRegister)).apply(this, arguments));\n    }\n\n    _createClass(WorkerRegister, [{\n      key: 'emit',\n      value: function emit(eventName) {\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        sendPostMessage({ eventName: eventName, args: args });\n        return this;\n      }\n    }, {\n      key: 'emitLocally',\n      value: function emitLocally(eventName) {\n        var _get2;\n\n        for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        (_get2 = _get(WorkerRegister.prototype.__proto__ || Object.getPrototypeOf(WorkerRegister.prototype), 'emit', this)).call.apply(_get2, [this, eventName].concat(args));\n      }\n    }, {\n      key: 'operation',\n      value: function operation(name, handler) {\n        handlers[name] = handler;\n        return this;\n      }\n    }]);\n\n    return WorkerRegister;\n  }(TinyEmitter))();\n\n  var run = function run(messageId, payload, handlerName) {\n\n    var onSuccess = function onSuccess(result) {\n      if (result && result instanceof TransferableResponse) {\n        sendResult(messageId, RESULT_SUCCESS, result.payload, result.transferable);\n      } else {\n        sendResult(messageId, RESULT_SUCCESS, result);\n      }\n    };\n\n    var onError = function onError(e) {\n      sendResult(messageId, RESULT_ERROR, {\n        message: e.message,\n        stack: e.stack\n      });\n    };\n\n    try {\n      var result = runFn(messageId, payload, handlerName);\n      if (isPromise(result)) {\n        result.then(onSuccess).catch(onError);\n      } else {\n        onSuccess(result);\n      }\n    } catch (e) {\n      onError(e);\n    }\n  };\n\n  var runFn = function runFn(messageId, payload, handlerName) {\n    var handler = handlers[handlerName || DEFAULT_HANDLER];\n    if (!handler) throw new Error('Not found handler for this request');\n\n    return handler(payload, sendEvent.bind(null, messageId));\n  };\n\n  var sendResult = function sendResult(messageId, success, payload) {\n    var transferable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n    sendPostMessage([MESSAGE_RESULT, messageId, success, payload], transferable);\n  };\n\n  var sendEvent = function sendEvent(messageId, eventName, payload) {\n    if (!eventName) throw new Error('eventName is required');\n\n    if (typeof eventName !== 'string') throw new Error('eventName should be string');\n\n    sendPostMessage([MESSAGE_EVENT, messageId, eventName, payload]);\n  };\n\n  self.addEventListener('message', function (_ref) {\n    var data = _ref.data;\n\n    if (Array.isArray(data)) {\n      run.apply(undefined, _toConsumableArray(data));\n    } else if (data && data.eventName) {\n      server.emitLocally.apply(server, [data.eventName].concat(_toConsumableArray(data.args)));\n    }\n  });\n\n  return server;\n}\n\nvar TransferableResponse = function TransferableResponse(payload, transferable) {\n  _classCallCheck(this, TransferableResponse);\n\n  this.payload = payload;\n  this.transferable = transferable;\n};\n\nmodule.exports = RegisterPromise;\nmodule.exports.TransferableResponse = TransferableResponse;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar TinyEmitter = function () {\n  function TinyEmitter() {\n    _classCallCheck(this, TinyEmitter);\n\n    Object.defineProperty(this, '__listeners', {\n      value: {},\n      enumerable: false,\n      writable: false\n    });\n  }\n\n  _createClass(TinyEmitter, [{\n    key: 'emit',\n    value: function emit(eventName) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.__listeners[eventName][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var handler = _step.value;\n\n          handler.apply(undefined, args);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: 'once',\n    value: function once(eventName, handler) {\n      var _this = this;\n\n      var once = function once() {\n        _this.off(eventName, once);\n        handler.apply(undefined, arguments);\n      };\n\n      return this.on(eventName, once);\n    }\n  }, {\n    key: 'on',\n    value: function on(eventName, handler) {\n      if (!this.__listeners[eventName]) this.__listeners[eventName] = [];\n\n      this.__listeners[eventName].push(handler);\n\n      return this;\n    }\n  }, {\n    key: 'off',\n    value: function off(eventName, handler) {\n      if (handler) this.__listeners[eventName] = this.__listeners[eventName].filter(function (h) {\n        return h !== handler;\n      });else this.__listeners[eventName] = [];\n\n      return this;\n    }\n  }]);\n\n  return TinyEmitter;\n}();\n\nmodule.exports = TinyEmitter;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _seedrandom = __webpack_require__(18);\n\nvar _seedrandom2 = _interopRequireDefault(_seedrandom);\n\nvar _macro = __webpack_require__(27);\n\nvar _macro2 = _interopRequireDefault(_macro);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar vtkErrorMacro = _macro2.default.vtkErrorMacro,\n    vtkWarningMacro = _macro2.default.vtkWarningMacro;\n\n// ----------------------------------------------------------------------------\n/* eslint-disable camelcase                                                  */\n/* eslint-disable no-cond-assign                                             */\n/* eslint-disable no-bitwise                                                 */\n/* eslint-disable no-multi-assign                                            */\n// ----------------------------------------------------------------------------\n\nvar randomSeedValue = 0;\nvar VTK_MAX_ROTATIONS = 20;\nvar VTK_SMALL_NUMBER = 1.0e-12;\n\nfunction notImplemented(method) {\n  return function () {\n    return vtkErrorMacro('vtkMath::' + method + ' - NOT IMPLEMENTED');\n  };\n}\n\nfunction vtkSwapVectors3(v1, v2) {\n  for (var i = 0; i < 3; i++) {\n    var tmp = v1[i];\n    v1[i] = v2[i];\n    v2[i] = tmp;\n  }\n}\n\nfunction createArray() {\n  var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 3;\n\n  var array = [];\n  while (array.length < size) {\n    array.push(0);\n  }\n  return array;\n}\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nvar Pi = function Pi() {\n  return Math.PI;\n};\nvar radiansFromDegrees = function radiansFromDegrees(deg) {\n  return deg / 180 * Math.PI;\n};\nvar degreesFromRadians = function degreesFromRadians(rad) {\n  return rad * 180 / Math.PI;\n};\nvar round = Math.round,\n    floor = Math.floor,\n    ceil = Math.ceil,\n    min = Math.min,\n    max = Math.max;\n\n\nfunction arrayMin(arr) {\n  var minValue = Infinity;\n  for (var i = 0, len = arr.length; i < len; ++i) {\n    if (arr[i] < minValue) {\n      minValue = arr[i];\n    }\n  }\n\n  return minValue;\n}\n\nfunction arrayMax(arr) {\n  var maxValue = -Infinity;\n  for (var i = 0, len = arr.length; i < len; ++i) {\n    if (maxValue < arr[i]) {\n      maxValue = arr[i];\n    }\n  }\n\n  return maxValue;\n}\n\nvar ceilLog2 = notImplemented('ceilLog2');\nvar factorial = notImplemented('factorial');\n\nfunction nearestPowerOfTwo(xi) {\n  var v = 1;\n  while (v < xi) {\n    v *= 2;\n  }\n  return v;\n}\n\nfunction isPowerOfTwo(x) {\n  return x === nearestPowerOfTwo(x);\n}\n\nfunction binomial(m, n) {\n  var r = 1;\n  for (var i = 1; i <= n; ++i) {\n    r *= (m - i + 1) / i;\n  }\n  return Math.floor(r);\n}\n\nfunction beginCombination(m, n) {\n  if (m < n) {\n    return 0;\n  }\n\n  var r = createArray(n);\n  for (var i = 0; i < n; ++i) {\n    r[i] = i;\n  }\n  return r;\n}\n\nfunction nextCombination(m, n, r) {\n  var status = 0;\n  for (var i = n - 1; i >= 0; --i) {\n    if (r[i] < m - n + i) {\n      var j = r[i] + 1;\n      while (i < n) {\n        r[i++] = j++;\n      }\n      status = 1;\n      break;\n    }\n  }\n  return status;\n}\n\nvar randomSeed = function randomSeed(seed) {\n  (0, _seedrandom2.default)('' + seed, { global: true });\n  randomSeedValue = seed;\n};\n\nvar getSeed = function getSeed() {\n  return randomSeedValue;\n};\n\nfunction random() {\n  var minValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var maxValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n  var delta = maxValue - minValue;\n  return minValue + delta * Math.random();\n}\n\nvar gaussian = notImplemented('gaussian');\n\n// Vect3 operations\nfunction add(a, b, out) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n}\n\nfunction subtract(a, b, out) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n}\n\nfunction multiplyScalar(vec, scalar) {\n  vec[0] *= scalar;\n  vec[1] *= scalar;\n  vec[2] *= scalar;\n}\n\nfunction multiplyScalar2D(vec, scalar) {\n  vec[0] *= scalar;\n  vec[1] *= scalar;\n}\n\nfunction dot(x, y) {\n  return x[0] * y[0] + x[1] * y[1] + x[2] * y[2];\n}\n\nfunction outer(x, y, out_3x3) {\n  for (var i = 0; i < 3; i++) {\n    for (var j = 0; j < 3; j++) {\n      out_3x3[i][j] = x[i] * y[j];\n    }\n  }\n}\n\nfunction cross(x, y, out) {\n  var Zx = x[1] * y[2] - x[2] * y[1];\n  var Zy = x[2] * y[0] - x[0] * y[2];\n  var Zz = x[0] * y[1] - x[1] * y[0];\n  out[0] = Zx;\n  out[1] = Zy;\n  out[2] = Zz;\n}\n\nfunction norm(x) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n\n  switch (n) {\n    case 1:\n      return Math.abs(x);\n    case 2:\n      return Math.sqrt(x[0] * x[0] + x[1] * x[1]);\n    case 3:\n      return Math.sqrt(x[0] * x[0] + x[1] * x[1] + x[2] * x[2]);\n    default:\n      {\n        var sum = 0;\n        for (var i = 0; i < n; i++) {\n          sum += x[i] * x[i];\n        }\n        return Math.sqrt(sum);\n      }\n  }\n}\n\nfunction normalize(x) {\n  var den = norm(x);\n  if (den !== 0.0) {\n    x[0] /= den;\n    x[1] /= den;\n    x[2] /= den;\n  }\n  return den;\n}\n\nfunction perpendiculars(x, y, z, theta) {\n  var x2 = x[0] * x[0];\n  var y2 = x[1] * x[1];\n  var z2 = x[2] * x[2];\n  var r = Math.sqrt(x2 + y2 + z2);\n\n  var dx = void 0;\n  var dy = void 0;\n  var dz = void 0;\n\n  // transpose the vector to avoid divide-by-zero error\n  if (x2 > y2 && x2 > z2) {\n    dx = 0;\n    dy = 1;\n    dz = 2;\n  } else if (y2 > z2) {\n    dx = 1;\n    dy = 2;\n    dz = 0;\n  } else {\n    dx = 2;\n    dy = 0;\n    dz = 1;\n  }\n\n  var a = x[dx] / r;\n  var b = x[dy] / r;\n  var c = x[dz] / r;\n  var tmp = Math.sqrt(a * a + c * c);\n\n  if (theta !== 0) {\n    var sintheta = Math.sin(theta);\n    var costheta = Math.cos(theta);\n\n    if (y) {\n      y[dx] = (c * costheta - a * b * sintheta) / tmp;\n      y[dy] = sintheta * tmp;\n      y[dz] = (-(a * costheta) - b * c * sintheta) / tmp;\n    }\n\n    if (z) {\n      z[dx] = (-(c * sintheta) - a * b * costheta) / tmp;\n      z[dy] = costheta * tmp;\n      z[dz] = (a * sintheta - b * c * costheta) / tmp;\n    }\n  } else {\n    if (y) {\n      y[dx] = c / tmp;\n      y[dy] = 0;\n      y[dz] = -a / tmp;\n    }\n\n    if (z) {\n      z[dx] = -a * b / tmp;\n      z[dy] = tmp;\n      z[dz] = -b * c / tmp;\n    }\n  }\n}\n\nfunction projectVector(a, b, projection) {\n  var bSquared = dot(b, b);\n\n  if (bSquared === 0) {\n    projection[0] = 0;\n    projection[1] = 0;\n    projection[2] = 0;\n    return false;\n  }\n\n  var scale = dot(a, b) / bSquared;\n\n  for (var i = 0; i < 3; i++) {\n    projection[i] = b[i];\n  }\n  multiplyScalar(projection, scale);\n\n  return true;\n}\n\nfunction dot2D(x, y) {\n  return x[0] * y[0] + x[1] * y[1];\n}\n\nfunction projectVector2D(a, b, projection) {\n  var bSquared = dot2D(b, b);\n\n  if (bSquared === 0) {\n    projection[0] = 0;\n    projection[1] = 0;\n    return false;\n  }\n\n  var scale = dot2D(a, b) / bSquared;\n\n  for (var i = 0; i < 2; i++) {\n    projection[i] = b[i];\n  }\n  multiplyScalar2D(projection, scale);\n\n  return true;\n}\n\nfunction distance2BetweenPoints(x, y) {\n  return (x[0] - y[0]) * (x[0] - y[0]) + (x[1] - y[1]) * (x[1] - y[1]) + (x[2] - y[2]) * (x[2] - y[2]);\n}\n\nfunction angleBetweenVectors(v1, v2) {\n  var crossVect = [0, 0, 0];\n  cross(v1, v2, crossVect);\n  return Math.atan2(norm(crossVect), dot(v1, v2));\n}\n\nfunction gaussianAmplitude(mean, variance, position) {\n  var distanceFromMean = Math.abs(mean - position);\n  return 1 / Math.sqrt(2 * Math.PI * variance) * Math.exp(-Math.pow(distanceFromMean, 2) / (2 * variance));\n}\n\nfunction gaussianWeight(mean, variance, position) {\n  var distanceFromMean = Math.abs(mean - position);\n  return Math.exp(-Math.pow(distanceFromMean, 2) / (2 * variance));\n}\n\nfunction outer2D(x, y, out_2x2) {\n  for (var i = 0; i < 2; i++) {\n    for (var j = 0; j < 2; j++) {\n      out_2x2[i][j] = x[i] * y[j];\n    }\n  }\n}\n\nfunction norm2D(x2D) {\n  return Math.sqrt(x2D[0] * x2D[0] + x2D[1] * x2D[1]);\n}\n\nfunction normalize2D(x) {\n  var den = norm2D(x);\n  if (den !== 0.0) {\n    x[0] /= den;\n    x[1] /= den;\n  }\n  return den;\n}\n\nfunction determinant2x2() {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  if (args.length === 2) {\n    return args[0][0] * args[1][1] - args[1][0] * args[0][1];\n  }\n  if (args.length === 4) {\n    return args[0] * args[3] - args[1] * args[2];\n  }\n  return Number.NaN;\n}\n\nfunction LUFactor3x3(mat_3x3, index_3) {\n  var maxI = void 0;\n  var tmp = void 0;\n  var largest = void 0;\n  var scale = [0, 0, 0];\n\n  // Loop over rows to get implicit scaling information\n  for (var i = 0; i < 3; i++) {\n    largest = Math.abs(mat_3x3[i][0]);\n    if ((tmp = Math.abs(mat_3x3[i][1])) > largest) {\n      largest = tmp;\n    }\n    if ((tmp = Math.abs(mat_3x3[i][2])) > largest) {\n      largest = tmp;\n    }\n    scale[i] = 1 / largest;\n  }\n\n  // Loop over all columns using Crout's method\n\n  // first column\n  largest = scale[0] * Math.abs(mat_3x3[0][0]);\n  maxI = 0;\n  if ((tmp = scale[1] * Math.abs(mat_3x3[1][0])) >= largest) {\n    largest = tmp;\n    maxI = 1;\n  }\n  if ((tmp = scale[2] * Math.abs(mat_3x3[2][0])) >= largest) {\n    maxI = 2;\n  }\n  if (maxI !== 0) {\n    vtkSwapVectors3(mat_3x3[maxI], mat_3x3[0]);\n    scale[maxI] = scale[0];\n  }\n  index_3[0] = maxI;\n\n  mat_3x3[1][0] /= mat_3x3[0][0];\n  mat_3x3[2][0] /= mat_3x3[0][0];\n\n  // second column\n  mat_3x3[1][1] -= mat_3x3[1][0] * mat_3x3[0][1];\n  mat_3x3[2][1] -= mat_3x3[2][0] * mat_3x3[0][1];\n  largest = scale[1] * Math.abs(mat_3x3[1][1]);\n  maxI = 1;\n  if ((tmp = scale[2] * Math.abs(mat_3x3[2][1])) >= largest) {\n    maxI = 2;\n    vtkSwapVectors3(mat_3x3[2], mat_3x3[1]);\n    scale[2] = scale[1];\n  }\n  index_3[1] = maxI;\n  mat_3x3[2][1] /= mat_3x3[1][1];\n\n  // third column\n  mat_3x3[1][2] -= mat_3x3[1][0] * mat_3x3[0][2];\n  mat_3x3[2][2] -= mat_3x3[2][0] * mat_3x3[0][2] + mat_3x3[2][1] * mat_3x3[1][2];\n  index_3[2] = 2;\n}\n\nfunction LUSolve3x3(mat_3x3, index_3, x_3) {\n  // forward substitution\n  var sum = x_3[index_3[0]];\n  x_3[index_3[0]] = x_3[0];\n  x_3[0] = sum;\n\n  sum = x_3[index_3[1]];\n  x_3[index_3[1]] = x_3[1];\n  x_3[1] = sum - mat_3x3[1][0] * x_3[0];\n\n  sum = x_3[index_3[2]];\n  x_3[index_3[2]] = x_3[2];\n  x_3[2] = sum - mat_3x3[2][0] * x_3[0] - mat_3x3[2][1] * x_3[1];\n\n  // back substitution\n  x_3[2] /= mat_3x3[2][2];\n  x_3[1] = (x_3[1] - mat_3x3[1][2] * x_3[2]) / mat_3x3[1][1];\n  x_3[0] = (x_3[0] - mat_3x3[0][1] * x_3[1] - mat_3x3[0][2] * x_3[2]) / mat_3x3[0][0];\n}\n\nfunction linearSolve3x3(mat_3x3, x_3, y_3) {\n  var a1 = mat_3x3[0][0];\n  var b1 = mat_3x3[0][1];\n  var c1 = mat_3x3[0][2];\n  var a2 = mat_3x3[1][0];\n  var b2 = mat_3x3[1][1];\n  var c2 = mat_3x3[1][2];\n  var a3 = mat_3x3[2][0];\n  var b3 = mat_3x3[2][1];\n  var c3 = mat_3x3[2][2];\n\n  // Compute the adjoint\n  var d1 = +determinant2x2(b2, b3, c2, c3);\n  var d2 = -determinant2x2(a2, a3, c2, c3);\n  var d3 = +determinant2x2(a2, a3, b2, b3);\n\n  var e1 = -determinant2x2(b1, b3, c1, c3);\n  var e2 = +determinant2x2(a1, a3, c1, c3);\n  var e3 = -determinant2x2(a1, a3, b1, b3);\n\n  var f1 = +determinant2x2(b1, b2, c1, c2);\n  var f2 = -determinant2x2(a1, a2, c1, c2);\n  var f3 = +determinant2x2(a1, a2, b1, b2);\n\n  // Compute the determinant\n  var det = a1 * d1 + b1 * d2 + c1 * d3;\n\n  // Multiply by the adjoint\n  var v1 = d1 * x_3[0] + e1 * x_3[1] + f1 * x_3[2];\n  var v2 = d2 * x_3[0] + e2 * x_3[1] + f2 * x_3[2];\n  var v3 = d3 * x_3[0] + e3 * x_3[1] + f3 * x_3[2];\n\n  // Divide by the determinant\n  y_3[0] = v1 / det;\n  y_3[1] = v2 / det;\n  y_3[2] = v3 / det;\n}\n\nfunction multiply3x3_vect3(mat_3x3, in_3, out_3) {\n  var x = mat_3x3[0][0] * in_3[0] + mat_3x3[0][1] * in_3[1] + mat_3x3[0][2] * in_3[2];\n  var y = mat_3x3[1][0] * in_3[0] + mat_3x3[1][1] * in_3[1] + mat_3x3[1][2] * in_3[2];\n  var z = mat_3x3[2][0] * in_3[0] + mat_3x3[2][1] * in_3[1] + mat_3x3[2][2] * in_3[2];\n\n  out_3[0] = x;\n  out_3[1] = y;\n  out_3[2] = z;\n}\n\nfunction multiply3x3_mat3(a_3x3, b_3x3, out_3x3) {\n  var tmp = [[0, 0, 0], [0, 0, 0], [0, 0, 0]];\n\n  for (var i = 0; i < 3; i++) {\n    tmp[0][i] = a_3x3[0][0] * b_3x3[0][i] + a_3x3[0][1] * b_3x3[1][i] + a_3x3[0][2] * b_3x3[2][i];\n    tmp[1][i] = a_3x3[1][0] * b_3x3[0][i] + a_3x3[1][1] * b_3x3[1][i] + a_3x3[1][2] * b_3x3[2][i];\n    tmp[2][i] = a_3x3[2][0] * b_3x3[0][i] + a_3x3[2][1] * b_3x3[1][i] + a_3x3[2][2] * b_3x3[2][i];\n  }\n\n  for (var j = 0; j < 3; j++) {\n    out_3x3[j][0] = tmp[j][0];\n    out_3x3[j][1] = tmp[j][1];\n    out_3x3[j][2] = tmp[j][2];\n  }\n}\n\nfunction multiplyMatrix(a, b, rowA, colA, rowB, colB, out_rowXcol) {\n  // we need colA == rowB\n  if (colA !== rowB) {\n    vtkErrorMacro('Number of columns of A must match number of rows of B.');\n  }\n\n  // output matrix is rowA*colB\n  // output row\n  for (var i = 0; i < rowA; i++) {\n    // output col\n    for (var j = 0; j < colB; j++) {\n      out_rowXcol[i][j] = 0;\n      // sum for this point\n      for (var k = 0; k < colA; k++) {\n        out_rowXcol[i][j] += a[i][k] * b[k][j];\n      }\n    }\n  }\n}\n\nfunction transpose3x3(in_3x3, outT_3x3) {\n  var tmp = void 0;\n  tmp = in_3x3[1][0];\n  outT_3x3[1][0] = in_3x3[0][1];\n  outT_3x3[0][1] = tmp;\n  tmp = in_3x3[2][0];\n  outT_3x3[2][0] = in_3x3[0][2];\n  outT_3x3[0][2] = tmp;\n  tmp = in_3x3[2][1];\n  outT_3x3[2][1] = in_3x3[1][2];\n  outT_3x3[1][2] = tmp;\n\n  outT_3x3[0][0] = in_3x3[0][0];\n  outT_3x3[1][1] = in_3x3[1][1];\n  outT_3x3[2][2] = in_3x3[2][2];\n}\n\nfunction invert3x3(in_3x3, outI_3x3) {\n  var a1 = in_3x3[0][0];\n  var b1 = in_3x3[0][1];\n  var c1 = in_3x3[0][2];\n  var a2 = in_3x3[1][0];\n  var b2 = in_3x3[1][1];\n  var c2 = in_3x3[1][2];\n  var a3 = in_3x3[2][0];\n  var b3 = in_3x3[2][1];\n  var c3 = in_3x3[2][2];\n\n  // Compute the adjoint\n  var d1 = +determinant2x2(b2, b3, c2, c3);\n  var d2 = -determinant2x2(a2, a3, c2, c3);\n  var d3 = +determinant2x2(a2, a3, b2, b3);\n\n  var e1 = -determinant2x2(b1, b3, c1, c3);\n  var e2 = +determinant2x2(a1, a3, c1, c3);\n  var e3 = -determinant2x2(a1, a3, b1, b3);\n\n  var f1 = +determinant2x2(b1, b2, c1, c2);\n  var f2 = -determinant2x2(a1, a2, c1, c2);\n  var f3 = +determinant2x2(a1, a2, b1, b2);\n\n  // Divide by the determinant\n  var det = a1 * d1 + b1 * d2 + c1 * d3;\n\n  outI_3x3[0][0] = d1 / det;\n  outI_3x3[1][0] = d2 / det;\n  outI_3x3[2][0] = d3 / det;\n\n  outI_3x3[0][1] = e1 / det;\n  outI_3x3[1][1] = e2 / det;\n  outI_3x3[2][1] = e3 / det;\n\n  outI_3x3[0][2] = f1 / det;\n  outI_3x3[1][2] = f2 / det;\n  outI_3x3[2][2] = f3 / det;\n}\n\nfunction identity3x3(mat_3x3) {\n  for (var i = 0; i < 3; i++) {\n    mat_3x3[i][0] = mat_3x3[i][1] = mat_3x3[i][2] = 0;\n    mat_3x3[i][i] = 1;\n  }\n}\n\nfunction determinant3x3(mat_3x3) {\n  return mat_3x3[0][0] * mat_3x3[1][1] * mat_3x3[2][2] + mat_3x3[1][0] * mat_3x3[2][1] * mat_3x3[0][2] + mat_3x3[2][0] * mat_3x3[0][1] * mat_3x3[1][2] - mat_3x3[0][0] * mat_3x3[2][1] * mat_3x3[1][2] - mat_3x3[1][0] * mat_3x3[0][1] * mat_3x3[2][2] - mat_3x3[2][0] * mat_3x3[1][1] * mat_3x3[0][2];\n}\n\nfunction quaternionToMatrix3x3(quat_4, mat_3x3) {\n  var ww = quat_4[0] * quat_4[0];\n  var wx = quat_4[0] * quat_4[1];\n  var wy = quat_4[0] * quat_4[2];\n  var wz = quat_4[0] * quat_4[3];\n\n  var xx = quat_4[1] * quat_4[1];\n  var yy = quat_4[2] * quat_4[2];\n  var zz = quat_4[3] * quat_4[3];\n\n  var xy = quat_4[1] * quat_4[2];\n  var xz = quat_4[1] * quat_4[3];\n  var yz = quat_4[2] * quat_4[3];\n\n  var rr = xx + yy + zz;\n  // normalization factor, just in case quaternion was not normalized\n  var f = 1 / (ww + rr);\n  var s = (ww - rr) * f;\n  f *= 2;\n\n  mat_3x3[0][0] = xx * f + s;\n  mat_3x3[1][0] = (xy + wz) * f;\n  mat_3x3[2][0] = (xz - wy) * f;\n\n  mat_3x3[0][1] = (xy - wz) * f;\n  mat_3x3[1][1] = yy * f + s;\n  mat_3x3[2][1] = (yz + wx) * f;\n\n  mat_3x3[0][2] = (xz + wy) * f;\n  mat_3x3[1][2] = (yz - wx) * f;\n  mat_3x3[2][2] = zz * f + s;\n}\n\nfunction areMatricesEqual(matA, matB) {\n  if (!matA.length === matB.length) {\n    return false;\n  }\n\n  function isEqual(element, index) {\n    return element === matB[index];\n  }\n  return matA.every(isEqual);\n}\n\nfunction jacobiN(a, n, w, v) {\n  var i = void 0;\n  var j = void 0;\n  var k = void 0;\n  var iq = void 0;\n  var ip = void 0;\n  var numPos = void 0;\n  var tresh = void 0;\n  var theta = void 0;\n  var t = void 0;\n  var tau = void 0;\n  var sm = void 0;\n  var s = void 0;\n  var h = void 0;\n  var g = void 0;\n  var c = void 0;\n  var tmp = void 0;\n  var b = createArray(n);\n  var z = createArray(n);\n\n  var vtkROTATE = function vtkROTATE(aa, ii, jj, kk, ll) {\n    g = aa[ii][jj];\n    h = aa[kk][ll];\n    aa[ii][jj] = g - s * (h + g * tau);\n    aa[kk][ll] = h + s * (g - h * tau);\n  };\n\n  // initialize\n  for (ip = 0; ip < n; ip++) {\n    for (iq = 0; iq < n; iq++) {\n      v[ip][iq] = 0.0;\n    }\n    v[ip][ip] = 1.0;\n  }\n  for (ip = 0; ip < n; ip++) {\n    b[ip] = w[ip] = a[ip][ip];\n    z[ip] = 0.0;\n  }\n\n  // begin rotation sequence\n  for (i = 0; i < VTK_MAX_ROTATIONS; i++) {\n    sm = 0.0;\n    for (ip = 0; ip < n - 1; ip++) {\n      for (iq = ip + 1; iq < n; iq++) {\n        sm += Math.abs(a[ip][iq]);\n      }\n    }\n    if (sm === 0.0) {\n      break;\n    }\n\n    // first 3 sweeps\n    if (i < 3) {\n      tresh = 0.2 * sm / (n * n);\n    } else {\n      tresh = 0.0;\n    }\n\n    for (ip = 0; ip < n - 1; ip++) {\n      for (iq = ip + 1; iq < n; iq++) {\n        g = 100.0 * Math.abs(a[ip][iq]);\n\n        // after 4 sweeps\n        if (i > 3 && Math.abs(w[ip]) + g === Math.abs(w[ip]) && Math.abs(w[iq]) + g === Math.abs(w[iq])) {\n          a[ip][iq] = 0.0;\n        } else if (Math.abs(a[ip][iq]) > tresh) {\n          h = w[iq] - w[ip];\n          if (Math.abs(h) + g === Math.abs(h)) {\n            t = a[ip][iq] / h;\n          } else {\n            theta = 0.5 * h / a[ip][iq];\n            t = 1.0 / (Math.abs(theta) + Math.sqrt(1.0 + theta * theta));\n            if (theta < 0.0) {\n              t = -t;\n            }\n          }\n          c = 1.0 / Math.sqrt(1 + t * t);\n          s = t * c;\n          tau = s / (1.0 + c);\n          h = t * a[ip][iq];\n          z[ip] -= h;\n          z[iq] += h;\n          w[ip] -= h;\n          w[iq] += h;\n          a[ip][iq] = 0.0;\n\n          // ip already shifted left by 1 unit\n          for (j = 0; j <= ip - 1; j++) {\n            vtkROTATE(a, j, ip, j, iq);\n          }\n          // ip and iq already shifted left by 1 unit\n          for (j = ip + 1; j <= iq - 1; j++) {\n            vtkROTATE(a, ip, j, j, iq);\n          }\n          // iq already shifted left by 1 unit\n          for (j = iq + 1; j < n; j++) {\n            vtkROTATE(a, ip, j, iq, j);\n          }\n          for (j = 0; j < n; j++) {\n            vtkROTATE(v, j, ip, j, iq);\n          }\n        }\n      }\n    }\n\n    for (ip = 0; ip < n; ip++) {\n      b[ip] += z[ip];\n      w[ip] = b[ip];\n      z[ip] = 0.0;\n    }\n  }\n\n  // this is NEVER called\n  if (i >= VTK_MAX_ROTATIONS) {\n    vtkWarningMacro('vtkMath::Jacobi: Error extracting eigenfunctions');\n    return 0;\n  }\n\n  // sort eigenfunctions: these changes do not affect accuracy\n  for (j = 0; j < n - 1; j++) {\n    // boundary incorrect\n    k = j;\n    tmp = w[k];\n    for (i = j + 1; i < n; i++) {\n      // boundary incorrect, shifted already\n      if (w[i] >= tmp) {\n        // why exchange if same?\n        k = i;\n        tmp = w[k];\n      }\n    }\n    if (k !== j) {\n      w[k] = w[j];\n      w[j] = tmp;\n      for (i = 0; i < n; i++) {\n        tmp = v[i][j];\n        v[i][j] = v[i][k];\n        v[i][k] = tmp;\n      }\n    }\n  }\n  // ensure eigenvector consistency (i.e., Jacobi can compute vectors that\n  // are negative of one another (.707,.707,0) and (-.707,-.707,0). This can\n  // reek havoc in hyperstreamline/other stuff. We will select the most\n  // positive eigenvector.\n  var ceil_half_n = (n >> 1) + (n & 1);\n  for (j = 0; j < n; j++) {\n    for (numPos = 0, i = 0; i < n; i++) {\n      if (v[i][j] >= 0.0) {\n        numPos++;\n      }\n    }\n    //    if ( numPos < ceil(double(n)/double(2.0)) )\n    if (numPos < ceil_half_n) {\n      for (i = 0; i < n; i++) {\n        v[i][j] *= -1.0;\n      }\n    }\n  }\n  return 1;\n}\n\nfunction matrix3x3ToQuaternion(mat_3x3, quat_4) {\n  var tmp = [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]];\n\n  // on-diagonal elements\n  tmp[0][0] = mat_3x3[0][0] + mat_3x3[1][1] + mat_3x3[2][2];\n  tmp[1][1] = mat_3x3[0][0] - mat_3x3[1][1] - mat_3x3[2][2];\n  tmp[2][2] = -mat_3x3[0][0] + mat_3x3[1][1] - mat_3x3[2][2];\n  tmp[3][3] = -mat_3x3[0][0] - mat_3x3[1][1] + mat_3x3[2][2];\n\n  // off-diagonal elements\n  tmp[0][1] = tmp[1][0] = mat_3x3[2][1] - mat_3x3[1][2];\n  tmp[0][2] = tmp[2][0] = mat_3x3[0][2] - mat_3x3[2][0];\n  tmp[0][3] = tmp[3][0] = mat_3x3[1][0] - mat_3x3[0][1];\n\n  tmp[1][2] = tmp[2][1] = mat_3x3[1][0] + mat_3x3[0][1];\n  tmp[1][3] = tmp[3][1] = mat_3x3[0][2] + mat_3x3[2][0];\n  tmp[2][3] = tmp[3][2] = mat_3x3[2][1] + mat_3x3[1][2];\n\n  var eigenvectors = [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]];\n  var eigenvalues = [0, 0, 0, 0];\n\n  // convert into format that JacobiN can use,\n  // then use Jacobi to find eigenvalues and eigenvectors\n  var NTemp = [0, 0, 0, 0];\n  var eigenvectorsTemp = [0, 0, 0, 0];\n  for (var i = 0; i < 4; i++) {\n    NTemp[i] = tmp[i];\n    eigenvectorsTemp[i] = eigenvectors[i];\n  }\n  jacobiN(NTemp, 4, eigenvalues, eigenvectorsTemp);\n\n  // the first eigenvector is the one we want\n  quat_4[0] = eigenvectors[0][0];\n  quat_4[1] = eigenvectors[1][0];\n  quat_4[2] = eigenvectors[2][0];\n  quat_4[3] = eigenvectors[3][0];\n}\n\nfunction multiplyQuaternion(quat_1, quat_2, quat_out) {\n  var ww = quat_1[0] * quat_2[0];\n  var wx = quat_1[0] * quat_2[1];\n  var wy = quat_1[0] * quat_2[2];\n  var wz = quat_1[0] * quat_2[3];\n\n  var xw = quat_1[1] * quat_2[0];\n  var xx = quat_1[1] * quat_2[1];\n  var xy = quat_1[1] * quat_2[2];\n  var xz = quat_1[1] * quat_2[3];\n\n  var yw = quat_1[2] * quat_2[0];\n  var yx = quat_1[2] * quat_2[1];\n  var yy = quat_1[2] * quat_2[2];\n  var yz = quat_1[2] * quat_2[3];\n\n  var zw = quat_1[3] * quat_2[0];\n  var zx = quat_1[3] * quat_2[1];\n  var zy = quat_1[3] * quat_2[2];\n  var zz = quat_1[3] * quat_2[3];\n\n  quat_out[0] = ww - xx - yy - zz;\n  quat_out[1] = wx + xw + yz - zy;\n  quat_out[2] = wy - xz + yw + zx;\n  quat_out[3] = wz + xy - yx + zw;\n}\n\nfunction orthogonalize3x3(a_3x3, out_3x3) {\n  // copy the matrix\n  for (var i = 0; i < 3; i++) {\n    out_3x3[0][i] = a_3x3[0][i];\n    out_3x3[1][i] = a_3x3[1][i];\n    out_3x3[2][i] = a_3x3[2][i];\n  }\n\n  // Pivot the matrix to improve accuracy\n  var scale = createArray(3);\n  var index = createArray(3);\n  var largest = void 0;\n\n  // Loop over rows to get implicit scaling information\n  for (var _i = 0; _i < 3; _i++) {\n    var _x5 = Math.abs(out_3x3[_i][0]);\n    var _x6 = Math.abs(out_3x3[_i][1]);\n    var _x7 = Math.abs(out_3x3[_i][2]);\n    largest = _x6 > _x5 ? _x6 : _x5;\n    largest = _x7 > largest ? _x7 : largest;\n    scale[_i] = 1;\n    if (largest !== 0) {\n      scale[_i] /= largest;\n    }\n  }\n\n  // first column\n  var x1 = Math.abs(out_3x3[0][0]) * scale[0];\n  var x2 = Math.abs(out_3x3[1][0]) * scale[1];\n  var x3 = Math.abs(out_3x3[2][0]) * scale[2];\n  index[0] = 0;\n  largest = x1;\n  if (x2 >= largest) {\n    largest = x2;\n    index[0] = 1;\n  }\n  if (x3 >= largest) {\n    index[0] = 2;\n  }\n  if (index[0] !== 0) {\n    vtkSwapVectors3(out_3x3[index[0]], out_3x3[0]);\n    scale[index[0]] = scale[0];\n  }\n\n  // second column\n  var y2 = Math.abs(out_3x3[1][1]) * scale[1];\n  var y3 = Math.abs(out_3x3[2][1]) * scale[2];\n  index[1] = 1;\n  largest = y2;\n  if (y3 >= largest) {\n    index[1] = 2;\n    vtkSwapVectors3(out_3x3[2], out_3x3[1]);\n  }\n\n  // third column\n  index[2] = 2;\n\n  // A quaternion can only describe a pure rotation, not\n  // a rotation with a flip, therefore the flip must be\n  // removed before the matrix is converted to a quaternion.\n  var flip = 0;\n  if (determinant3x3(out_3x3) < 0) {\n    flip = 1;\n    for (var _i2 = 0; _i2 < 3; _i2++) {\n      out_3x3[0][_i2] = -out_3x3[0][_i2];\n      out_3x3[1][_i2] = -out_3x3[1][_i2];\n      out_3x3[2][_i2] = -out_3x3[2][_i2];\n    }\n  }\n\n  // Do orthogonalization using a quaternion intermediate\n  // (this, essentially, does the orthogonalization via\n  // diagonalization of an appropriately constructed symmetric\n  // 4x4 matrix rather than by doing SVD of the 3x3 matrix)\n  var quat = createArray(4);\n  matrix3x3ToQuaternion(out_3x3, quat);\n  quaternionToMatrix3x3(quat, out_3x3);\n\n  // Put the flip back into the orthogonalized matrix.\n  if (flip) {\n    for (var _i3 = 0; _i3 < 3; _i3++) {\n      out_3x3[0][_i3] = -out_3x3[0][_i3];\n      out_3x3[1][_i3] = -out_3x3[1][_i3];\n      out_3x3[2][_i3] = -out_3x3[2][_i3];\n    }\n  }\n\n  // Undo the pivoting\n  if (index[1] !== 1) {\n    vtkSwapVectors3(out_3x3[index[1]], out_3x3[1]);\n  }\n  if (index[0] !== 0) {\n    vtkSwapVectors3(out_3x3[index[0]], out_3x3[0]);\n  }\n}\n\nfunction diagonalize3x3(a_3x3, w_3, v_3x3) {\n  var i = void 0;\n  var j = void 0;\n  var k = void 0;\n  var maxI = void 0;\n  var tmp = void 0;\n  var maxVal = void 0;\n\n  // do the matrix[3][3] to **matrix conversion for Jacobi\n  var C = [createArray(3), createArray(3), createArray(3)];\n  var ATemp = createArray(3);\n  var VTemp = createArray(3);\n  for (i = 0; i < 3; i++) {\n    C[i][0] = a_3x3[i][0];\n    C[i][1] = a_3x3[i][1];\n    C[i][2] = a_3x3[i][2];\n    ATemp[i] = C[i];\n    VTemp[i] = v_3x3[i];\n  }\n\n  // diagonalize using Jacobi\n  jacobiN(ATemp, 3, w_3, VTemp);\n\n  // if all the eigenvalues are the same, return identity matrix\n  if (w_3[0] === w_3[1] && w_3[0] === w_3[2]) {\n    identity3x3(v_3x3);\n    return;\n  }\n\n  // transpose temporarily, it makes it easier to sort the eigenvectors\n  transpose3x3(v_3x3, v_3x3);\n\n  // if two eigenvalues are the same, re-orthogonalize to optimally line\n  // up the eigenvectors with the x, y, and z axes\n  for (i = 0; i < 3; i++) {\n    // two eigenvalues are the same\n    if (w_3[(i + 1) % 3] === w_3[(i + 2) % 3]) {\n      // find maximum element of the independent eigenvector\n      maxVal = Math.abs(v_3x3[i][0]);\n      maxI = 0;\n      for (j = 1; j < 3; j++) {\n        if (maxVal < (tmp = Math.abs(v_3x3[i][j]))) {\n          maxVal = tmp;\n          maxI = j;\n        }\n      }\n      // swap the eigenvector into its proper position\n      if (maxI !== i) {\n        tmp = w_3[maxI];\n        w_3[maxI] = w_3[i];\n        w_3[i] = tmp;\n        vtkSwapVectors3(v_3x3[i], v_3x3[maxI]);\n      }\n      // maximum element of eigenvector should be positive\n      if (v_3x3[maxI][maxI] < 0) {\n        v_3x3[maxI][0] = -v_3x3[maxI][0];\n        v_3x3[maxI][1] = -v_3x3[maxI][1];\n        v_3x3[maxI][2] = -v_3x3[maxI][2];\n      }\n\n      // re-orthogonalize the other two eigenvectors\n      j = (maxI + 1) % 3;\n      k = (maxI + 2) % 3;\n\n      v_3x3[j][0] = 0.0;\n      v_3x3[j][1] = 0.0;\n      v_3x3[j][2] = 0.0;\n      v_3x3[j][j] = 1.0;\n      cross(v_3x3[maxI], v_3x3[j], v_3x3[k]);\n      normalize(v_3x3[k]);\n      cross(v_3x3[k], v_3x3[maxI], v_3x3[j]);\n\n      // transpose vectors back to columns\n      transpose3x3(v_3x3, v_3x3);\n      return;\n    }\n  }\n\n  // the three eigenvalues are different, just sort the eigenvectors\n  // to align them with the x, y, and z axes\n\n  // find the vector with the largest x element, make that vector\n  // the first vector\n  maxVal = Math.abs(v_3x3[0][0]);\n  maxI = 0;\n  for (i = 1; i < 3; i++) {\n    if (maxVal < (tmp = Math.abs(v_3x3[i][0]))) {\n      maxVal = tmp;\n      maxI = i;\n    }\n  }\n  // swap eigenvalue and eigenvector\n  if (maxI !== 0) {\n    tmp = w_3[maxI];\n    w_3[maxI] = w_3[0];\n    w_3[0] = tmp;\n    vtkSwapVectors3(v_3x3[maxI], v_3x3[0]);\n  }\n  // do the same for the y element\n  if (Math.abs(v_3x3[1][1]) < Math.abs(v_3x3[2][1])) {\n    tmp = w_3[2];\n    w_3[2] = w_3[1];\n    w_3[1] = tmp;\n    vtkSwapVectors3(v_3x3[2], v_3x3[1]);\n  }\n\n  // ensure that the sign of the eigenvectors is correct\n  for (i = 0; i < 2; i++) {\n    if (v_3x3[i][i] < 0) {\n      v_3x3[i][0] = -v_3x3[i][0];\n      v_3x3[i][1] = -v_3x3[i][1];\n      v_3x3[i][2] = -v_3x3[i][2];\n    }\n  }\n  // set sign of final eigenvector to ensure that determinant is positive\n  if (determinant3x3(v_3x3) < 0) {\n    v_3x3[2][0] = -v_3x3[2][0];\n    v_3x3[2][1] = -v_3x3[2][1];\n    v_3x3[2][2] = -v_3x3[2][2];\n  }\n\n  // transpose the eigenvectors back again\n  transpose3x3(v_3x3, v_3x3);\n}\n\nfunction singularValueDecomposition3x3(a_3x3, u_3x3, w_3, vT_3x3) {\n  var i = void 0;\n  var B = [createArray(3), createArray(3), createArray(3)];\n\n  // copy so that A can be used for U or VT without risk\n  for (i = 0; i < 3; i++) {\n    B[0][i] = a_3x3[0][i];\n    B[1][i] = a_3x3[1][i];\n    B[2][i] = a_3x3[2][i];\n  }\n\n  // temporarily flip if determinant is negative\n  var d = determinant3x3(B);\n  if (d < 0) {\n    for (i = 0; i < 3; i++) {\n      B[0][i] = -B[0][i];\n      B[1][i] = -B[1][i];\n      B[2][i] = -B[2][i];\n    }\n  }\n\n  // orthogonalize, diagonalize, etc.\n  orthogonalize3x3(B, u_3x3);\n  transpose3x3(B, B);\n  multiply3x3_mat3(B, u_3x3, vT_3x3);\n  diagonalize3x3(vT_3x3, w_3, vT_3x3);\n  multiply3x3_mat3(u_3x3, vT_3x3, u_3x3);\n  transpose3x3(vT_3x3, vT_3x3);\n\n  // re-create the flip\n  if (d < 0) {\n    w_3[0] = -w_3[0];\n    w_3[1] = -w_3[1];\n    w_3[2] = -w_3[2];\n  }\n}\n\nfunction luFactorLinearSystem(A, index, size) {\n  var i = void 0;\n  var j = void 0;\n  var k = void 0;\n  var largest = void 0;\n  var maxI = 0;\n  var sum = void 0;\n  var temp1 = void 0;\n  var temp2 = void 0;\n  var scale = createArray(size);\n\n  //\n  // Loop over rows to get implicit scaling information\n  //\n  for (i = 0; i < size; i++) {\n    for (largest = 0.0, j = 0; j < size; j++) {\n      if ((temp2 = Math.abs(A[i][j])) > largest) {\n        largest = temp2;\n      }\n    }\n\n    if (largest === 0.0) {\n      vtkWarningMacro('Unable to factor linear system');\n      return 0;\n    }\n    scale[i] = 1.0 / largest;\n  }\n  //\n  // Loop over all columns using Crout's method\n  //\n  for (j = 0; j < size; j++) {\n    for (i = 0; i < j; i++) {\n      sum = A[i][j];\n      for (k = 0; k < i; k++) {\n        sum -= A[i][k] * A[k][j];\n      }\n      A[i][j] = sum;\n    }\n    //\n    // Begin search for largest pivot element\n    //\n    for (largest = 0.0, i = j; i < size; i++) {\n      sum = A[i][j];\n      for (k = 0; k < j; k++) {\n        sum -= A[i][k] * A[k][j];\n      }\n      A[i][j] = sum;\n\n      if ((temp1 = scale[i] * Math.abs(sum)) >= largest) {\n        largest = temp1;\n        maxI = i;\n      }\n    }\n    //\n    // Check for row interchange\n    //\n    if (j !== maxI) {\n      for (k = 0; k < size; k++) {\n        temp1 = A[maxI][k];\n        A[maxI][k] = A[j][k];\n        A[j][k] = temp1;\n      }\n      scale[maxI] = scale[j];\n    }\n    //\n    // Divide by pivot element and perform elimination\n    //\n    index[j] = maxI;\n\n    if (Math.abs(A[j][j]) <= VTK_SMALL_NUMBER) {\n      vtkWarningMacro('Unable to factor linear system');\n      return 0;\n    }\n\n    if (j !== size - 1) {\n      temp1 = 1.0 / A[j][j];\n      for (i = j + 1; i < size; i++) {\n        A[i][j] *= temp1;\n      }\n    }\n  }\n  return 1;\n}\n\nfunction luSolveLinearSystem(A, index, x, size) {\n  var i = void 0;\n  var j = void 0;\n  var ii = void 0;\n  var idx = void 0;\n  var sum = void 0;\n  //\n  // Proceed with forward and backsubstitution for L and U\n  // matrices.  First, forward substitution.\n  //\n  for (ii = -1, i = 0; i < size; i++) {\n    idx = index[i];\n    sum = x[idx];\n    x[idx] = x[i];\n\n    if (ii >= 0) {\n      for (j = ii; j <= i - 1; j++) {\n        sum -= A[i][j] * x[j];\n      }\n    } else if (sum !== 0.0) {\n      ii = i;\n    }\n\n    x[i] = sum;\n  }\n  //\n  // Now, back substitution\n  //\n  for (i = size - 1; i >= 0; i--) {\n    sum = x[i];\n    for (j = i + 1; j < size; j++) {\n      sum -= A[i][j] * x[j];\n    }\n    x[i] = sum / A[i][i];\n  }\n}\n\nfunction solveLinearSystem(A, x, size) {\n  // if we solving something simple, just solve it\n  if (size === 2) {\n    var y = createArray(2);\n    var det = determinant2x2(A[0][0], A[0][1], A[1][0], A[1][1]);\n\n    if (det === 0.0) {\n      // Unable to solve linear system\n      return 0;\n    }\n\n    y[0] = (A[1][1] * x[0] - A[0][1] * x[1]) / det;\n    y[1] = (-(A[1][0] * x[0]) + A[0][0] * x[1]) / det;\n\n    x[0] = y[0];\n    x[1] = y[1];\n    return 1;\n  } else if (size === 1) {\n    if (A[0][0] === 0.0) {\n      // Unable to solve linear system\n      return 0;\n    }\n\n    x[0] /= A[0][0];\n    return 1;\n  }\n\n  //\n  // System of equations is not trivial, use Crout's method\n  //\n\n  // Check on allocation of working vectors\n  var index = createArray(size);\n\n  // Factor and solve matrix\n  if (luFactorLinearSystem(A, index, size) === 0) {\n    return 0;\n  }\n  luSolveLinearSystem(A, index, x, size);\n\n  return 1;\n}\n\nfunction invertMatrix(A, AI, size) {\n  var index = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var column = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n\n  var tmp1Size = index || createArray(size);\n  var tmp2Size = column || createArray(size);\n\n  // Factor matrix; then begin solving for inverse one column at a time.\n  // Note: tmp1Size returned value is used later, tmp2Size is just working\n  // memory whose values are not used in LUSolveLinearSystem\n  if (luFactorLinearSystem(A, tmp1Size, size, tmp2Size) === 0) {\n    return 0;\n  }\n\n  for (var j = 0; j < size; j++) {\n    for (var i = 0; i < size; i++) {\n      tmp2Size[i] = 0.0;\n    }\n    tmp2Size[j] = 1.0;\n\n    luSolveLinearSystem(A, tmp1Size, tmp2Size, size);\n\n    for (var _i4 = 0; _i4 < size; _i4++) {\n      AI[_i4][j] = tmp2Size[_i4];\n    }\n  }\n\n  return 1;\n}\n\nfunction estimateMatrixCondition(A, size) {\n  var minValue = +Number.MAX_VALUE;\n  var maxValue = -Number.MAX_VALUE;\n\n  // find the maximum value\n  for (var i = 0; i < size; i++) {\n    for (var j = i; j < size; j++) {\n      if (Math.abs(A[i][j]) > max) {\n        maxValue = Math.abs(A[i][j]);\n      }\n    }\n  }\n\n  // find the minimum diagonal value\n  for (var _i5 = 0; _i5 < size; _i5++) {\n    if (Math.abs(A[_i5][_i5]) < min) {\n      minValue = Math.abs(A[_i5][_i5]);\n    }\n  }\n\n  if (minValue === 0.0) {\n    return Number.MAX_VALUE;\n  }\n  return maxValue / minValue;\n}\n\nfunction jacobi(a_3x3, w, v) {\n  return jacobiN(a_3x3, 3, w, v);\n}\n\nfunction solveHomogeneousLeastSquares(numberOfSamples, xt, xOrder, mt) {\n  // check dimensional consistency\n  if (numberOfSamples < xOrder) {\n    vtkWarningMacro('Insufficient number of samples. Underdetermined.');\n    return 0;\n  }\n\n  var i = void 0;\n  var j = void 0;\n  var k = void 0;\n\n  // set up intermediate variables\n  // Allocate matrix to hold X times transpose of X\n  var XXt = createArray(xOrder); // size x by x\n  // Allocate the array of eigenvalues and eigenvectors\n  var eigenvals = createArray(xOrder);\n  var eigenvecs = createArray(xOrder);\n\n  // Clear the upper triangular region (and btw, allocate the eigenvecs as well)\n  for (i = 0; i < xOrder; i++) {\n    eigenvecs[i] = createArray(xOrder);\n    XXt[i] = createArray(xOrder);\n    for (j = 0; j < xOrder; j++) {\n      XXt[i][j] = 0.0;\n    }\n  }\n\n  // Calculate XXt upper half only, due to symmetry\n  for (k = 0; k < numberOfSamples; k++) {\n    for (i = 0; i < xOrder; i++) {\n      for (j = i; j < xOrder; j++) {\n        XXt[i][j] += xt[k][i] * xt[k][j];\n      }\n    }\n  }\n\n  // now fill in the lower half of the XXt matrix\n  for (i = 0; i < xOrder; i++) {\n    for (j = 0; j < i; j++) {\n      XXt[i][j] = XXt[j][i];\n    }\n  }\n\n  // Compute the eigenvectors and eigenvalues\n  jacobiN(XXt, xOrder, eigenvals, eigenvecs);\n\n  // Smallest eigenval is at the end of the list (xOrder-1), and solution is\n  // corresponding eigenvec.\n  for (i = 0; i < xOrder; i++) {\n    mt[i][0] = eigenvecs[i][xOrder - 1];\n  }\n\n  return 1;\n}\n\nfunction solveLeastSquares(numberOfSamples, xt, xOrder, yt, yOrder, mt) {\n  var checkHomogeneous = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;\n\n  // check dimensional consistency\n  if (numberOfSamples < xOrder || numberOfSamples < yOrder) {\n    vtkWarningMacro('Insufficient number of samples. Underdetermined.');\n    return 0;\n  }\n\n  var homogenFlags = createArray(yOrder);\n  var allHomogeneous = 1;\n  var hmt = void 0;\n  var homogRC = 0;\n  var i = void 0;\n  var j = void 0;\n  var k = void 0;\n  var someHomogeneous = 0;\n\n  // Ok, first init some flags check and see if all the systems are homogeneous\n  if (checkHomogeneous) {\n    // If Y' is zero, it's a homogeneous system and can't be solved via\n    // the pseudoinverse method. Detect this case, warn the user, and\n    // invoke SolveHomogeneousLeastSquares instead. Note that it doesn't\n    // really make much sense for yOrder to be greater than one in this case,\n    // since that's just yOrder occurrences of a 0 vector on the RHS, but\n    // we allow it anyway. N\n\n    // Initialize homogeneous flags on a per-right-hand-side basis\n    for (j = 0; j < yOrder; j++) {\n      homogenFlags[j] = 1;\n    }\n    for (i = 0; i < numberOfSamples; i++) {\n      for (j = 0; j < yOrder; j++) {\n        if (Math.abs(yt[i][j]) > VTK_SMALL_NUMBER) {\n          allHomogeneous = 0;\n          homogenFlags[j] = 0;\n        }\n      }\n    }\n\n    // If we've got one system, and it's homogeneous, do it and bail out quickly.\n    if (allHomogeneous && yOrder === 1) {\n      vtkWarningMacro('Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()');\n      return solveHomogeneousLeastSquares(numberOfSamples, xt, xOrder, mt);\n    }\n\n    // Ok, we've got more than one system of equations.\n    // Figure out if we need to calculate the homogeneous equation solution for\n    // any of them.\n    if (allHomogeneous) {\n      someHomogeneous = 1;\n    } else {\n      for (j = 0; j < yOrder; j++) {\n        if (homogenFlags[j]) {\n          someHomogeneous = 1;\n        }\n      }\n    }\n  }\n\n  // If necessary, solve the homogeneous problem\n  if (someHomogeneous) {\n    // hmt is the homogeneous equation version of mt, the general solution.\n    hmt = createArray(xOrder);\n    for (j = 0; j < xOrder; j++) {\n      // Only allocate 1 here, not yOrder, because here we're going to solve\n      // just the one homogeneous equation subset of the entire problem\n      hmt[j] = [0];\n    }\n\n    // Ok, solve the homogeneous problem\n    homogRC = solveHomogeneousLeastSquares(numberOfSamples, xt, xOrder, hmt);\n  }\n\n  // set up intermediate variables\n  var XXt = createArray(xOrder); // size x by x\n  var XXtI = createArray(xOrder); // size x by x\n  var XYt = createArray(xOrder); // size x by y\n  for (i = 0; i < xOrder; i++) {\n    XXt[i] = createArray(xOrder);\n    XXtI[i] = createArray(xOrder);\n\n    for (j = 0; j < xOrder; j++) {\n      XXt[i][j] = 0.0;\n      XXtI[i][j] = 0.0;\n    }\n\n    XYt[i] = createArray(yOrder);\n    for (j = 0; j < yOrder; j++) {\n      XYt[i][j] = 0.0;\n    }\n  }\n\n  // first find the pseudoinverse matrix\n  for (k = 0; k < numberOfSamples; k++) {\n    for (i = 0; i < xOrder; i++) {\n      // first calculate the XXt matrix, only do the upper half (symmetrical)\n      for (j = i; j < xOrder; j++) {\n        XXt[i][j] += xt[k][i] * xt[k][j];\n      }\n\n      // now calculate the XYt matrix\n      for (j = 0; j < yOrder; j++) {\n        XYt[i][j] += xt[k][i] * yt[k][j];\n      }\n    }\n  }\n\n  // now fill in the lower half of the XXt matrix\n  for (i = 0; i < xOrder; i++) {\n    for (j = 0; j < i; j++) {\n      XXt[i][j] = XXt[j][i];\n    }\n  }\n\n  var successFlag = invertMatrix(XXt, XXtI, xOrder);\n\n  // next get the inverse of XXt\n  if (successFlag) {\n    for (i = 0; i < xOrder; i++) {\n      for (j = 0; j < yOrder; j++) {\n        mt[i][j] = 0.0;\n        for (k = 0; k < xOrder; k++) {\n          mt[i][j] += XXtI[i][k] * XYt[k][j];\n        }\n      }\n    }\n  }\n\n  // Fix up any of the solutions that correspond to the homogeneous equation\n  // problem.\n  if (someHomogeneous) {\n    for (j = 0; j < yOrder; j++) {\n      if (homogenFlags[j]) {\n        // Fix this one\n        for (i = 0; i < xOrder; i++) {\n          mt[i][j] = hmt[i][0];\n        }\n      }\n    }\n  }\n\n  if (someHomogeneous) {\n    return homogRC && successFlag;\n  }\n\n  return successFlag;\n}\n\nfunction hex2float(hexStr) {\n  var outFloatArray = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0.5, 1];\n\n  switch (hexStr.length) {\n    case 3:\n      // abc => #aabbcc\n      outFloatArray[0] = parseInt(hexStr[0], 16) * 17 / 255;\n      outFloatArray[1] = parseInt(hexStr[1], 16) * 17 / 255;\n      outFloatArray[2] = parseInt(hexStr[2], 16) * 17 / 255;\n      return outFloatArray;\n    case 4:\n      // #abc => #aabbcc\n      outFloatArray[0] = parseInt(hexStr[1], 16) * 17 / 255;\n      outFloatArray[1] = parseInt(hexStr[2], 16) * 17 / 255;\n      outFloatArray[2] = parseInt(hexStr[3], 16) * 17 / 255;\n      return outFloatArray;\n    case 6:\n      // ab01df => #ab01df\n      outFloatArray[0] = parseInt(hexStr.substr(0, 2), 16) / 255;\n      outFloatArray[1] = parseInt(hexStr.substr(2, 2), 16) / 255;\n      outFloatArray[2] = parseInt(hexStr.substr(4, 2), 16) / 255;\n      return outFloatArray;\n    case 7:\n      // #ab01df\n      outFloatArray[0] = parseInt(hexStr.substr(1, 2), 16) / 255;\n      outFloatArray[1] = parseInt(hexStr.substr(3, 2), 16) / 255;\n      outFloatArray[2] = parseInt(hexStr.substr(5, 2), 16) / 255;\n      return outFloatArray;\n    case 9:\n      // #ab01df00\n      outFloatArray[0] = parseInt(hexStr.substr(1, 2), 16) / 255;\n      outFloatArray[1] = parseInt(hexStr.substr(3, 2), 16) / 255;\n      outFloatArray[2] = parseInt(hexStr.substr(5, 2), 16) / 255;\n      outFloatArray[3] = parseInt(hexStr.substr(7, 2), 16) / 255;\n      return outFloatArray;\n    default:\n      return outFloatArray;\n  }\n}\n\nfunction rgb2hsv(rgb, hsv) {\n  var h = void 0;\n  var s = void 0;\n\n  var _rgb = _slicedToArray(rgb, 3),\n      r = _rgb[0],\n      g = _rgb[1],\n      b = _rgb[2];\n\n  var onethird = 1.0 / 3.0;\n  var onesixth = 1.0 / 6.0;\n  var twothird = 2.0 / 3.0;\n\n  var cmax = r;\n  var cmin = r;\n\n  if (g > cmax) {\n    cmax = g;\n  } else if (g < cmin) {\n    cmin = g;\n  }\n  if (b > cmax) {\n    cmax = b;\n  } else if (b < cmin) {\n    cmin = b;\n  }\n  var v = cmax;\n\n  if (v > 0.0) {\n    s = (cmax - cmin) / cmax;\n  } else {\n    s = 0.0;\n  }\n  if (s > 0) {\n    if (r === cmax) {\n      h = onesixth * (g - b) / (cmax - cmin);\n    } else if (g === cmax) {\n      h = onethird + onesixth * (b - r) / (cmax - cmin);\n    } else {\n      h = twothird + onesixth * (r - g) / (cmax - cmin);\n    }\n    if (h < 0.0) {\n      h += 1.0;\n    }\n  } else {\n    h = 0.0;\n  }\n\n  // Set the values back to the array\n  hsv[0] = h;\n  hsv[1] = s;\n  hsv[2] = v;\n}\n\nfunction hsv2rgb(hsv, rgb) {\n  var _hsv = _slicedToArray(hsv, 3),\n      h = _hsv[0],\n      s = _hsv[1],\n      v = _hsv[2];\n\n  var onethird = 1.0 / 3.0;\n  var onesixth = 1.0 / 6.0;\n  var twothird = 2.0 / 3.0;\n  var fivesixth = 5.0 / 6.0;\n  var r = void 0;\n  var g = void 0;\n  var b = void 0;\n\n  // compute RGB from HSV\n  if (h > onesixth && h <= onethird) {\n    // green/red\n    g = 1.0;\n    r = (onethird - h) / onesixth;\n    b = 0.0;\n  } else if (h > onethird && h <= 0.5) {\n    // green/blue\n    g = 1.0;\n    b = (h - onethird) / onesixth;\n    r = 0.0;\n  } else if (h > 0.5 && h <= twothird) {\n    // blue/green\n    b = 1.0;\n    g = (twothird - h) / onesixth;\n    r = 0.0;\n  } else if (h > twothird && h <= fivesixth) {\n    // blue/red\n    b = 1.0;\n    r = (h - twothird) / onesixth;\n    g = 0.0;\n  } else if (h > fivesixth && h <= 1.0) {\n    // red/blue\n    r = 1.0;\n    b = (1.0 - h) / onesixth;\n    g = 0.0;\n  } else {\n    // red/green\n    r = 1.0;\n    g = h / onesixth;\n    b = 0.0;\n  }\n\n  // add Saturation to the equation.\n  r = s * r + (1.0 - s);\n  g = s * g + (1.0 - s);\n  b = s * b + (1.0 - s);\n\n  r *= v;\n  g *= v;\n  b *= v;\n\n  // Assign back to the array\n  rgb[0] = r;\n  rgb[1] = g;\n  rgb[2] = b;\n}\n\nfunction lab2xyz(lab, xyz) {\n  // LAB to XYZ\n  var _lab = _slicedToArray(lab, 3),\n      L = _lab[0],\n      a = _lab[1],\n      b = _lab[2];\n\n  var var_Y = (L + 16) / 116;\n  var var_X = a / 500 + var_Y;\n  var var_Z = var_Y - b / 200;\n\n  if (Math.pow(var_Y, 3) > 0.008856) {\n    var_Y = Math.pow(var_Y, 3);\n  } else {\n    var_Y = (var_Y - 16.0 / 116.0) / 7.787;\n  }\n\n  if (Math.pow(var_X, 3) > 0.008856) {\n    var_X = Math.pow(var_X, 3);\n  } else {\n    var_X = (var_X - 16.0 / 116.0) / 7.787;\n  }\n\n  if (Math.pow(var_Z, 3) > 0.008856) {\n    var_Z = Math.pow(var_Z, 3);\n  } else {\n    var_Z = (var_Z - 16.0 / 116.0) / 7.787;\n  }\n  var ref_X = 0.9505;\n  var ref_Y = 1.0;\n  var ref_Z = 1.089;\n  xyz[0] = ref_X * var_X; // ref_X = 0.9505  Observer= 2 deg Illuminant= D65\n  xyz[1] = ref_Y * var_Y; // ref_Y = 1.000\n  xyz[2] = ref_Z * var_Z; // ref_Z = 1.089\n}\n\nfunction xyz2lab(xyz, lab) {\n  var _xyz = _slicedToArray(xyz, 3),\n      x = _xyz[0],\n      y = _xyz[1],\n      z = _xyz[2];\n\n  var ref_X = 0.9505;\n  var ref_Y = 1.0;\n  var ref_Z = 1.089;\n  var var_X = x / ref_X; // ref_X = 0.9505  Observer= 2 deg, Illuminant= D65\n  var var_Y = y / ref_Y; // ref_Y = 1.000\n  var var_Z = z / ref_Z; // ref_Z = 1.089\n\n  if (var_X > 0.008856) {\n    var_X = Math.pow(var_X, 1.0 / 3.0);\n  } else var_X = 7.787 * var_X + 16.0 / 116.0;\n  if (var_Y > 0.008856) {\n    var_Y = Math.pow(var_Y, 1.0 / 3.0);\n  } else var_Y = 7.787 * var_Y + 16.0 / 116.0;\n  if (var_Z > 0.008856) {\n    var_Z = Math.pow(var_Z, 1.0 / 3.0);\n  } else var_Z = 7.787 * var_Z + 16.0 / 116.0;\n\n  lab[0] = 116 * var_Y - 16;\n  lab[1] = 500 * (var_X - var_Y);\n  lab[2] = 200 * (var_Y - var_Z);\n}\n\nfunction xyz2rgb(xyz, rgb) {\n  var _xyz2 = _slicedToArray(xyz, 3),\n      x = _xyz2[0],\n      y = _xyz2[1],\n      z = _xyz2[2];\n\n  var r = x * 3.2406 + y * -1.5372 + z * -0.4986;\n  var g = x * -0.9689 + y * 1.8758 + z * 0.0415;\n  var b = x * 0.0557 + y * -0.204 + z * 1.057;\n\n  // The following performs a \"gamma correction\" specified by the sRGB color\n  // space.  sRGB is defined by a canonical definition of a display monitor and\n  // has been standardized by the International Electrotechnical Commission (IEC\n  // 61966-2-1).  The nonlinearity of the correction is designed to make the\n  // colors more perceptually uniform.  This color space has been adopted by\n  // several applications including Adobe Photoshop and Microsoft Windows color\n  // management.  OpenGL is agnostic on its RGB color space, but it is reasonable\n  // to assume it is close to this one.\n  if (r > 0.0031308) r = 1.055 * Math.pow(r, 1 / 2.4) - 0.055;else r *= 12.92;\n  if (g > 0.0031308) g = 1.055 * Math.pow(g, 1 / 2.4) - 0.055;else g *= 12.92;\n  if (b > 0.0031308) b = 1.055 * Math.pow(b, 1 / 2.4) - 0.055;else b *= 12.92;\n\n  // Clip colors. ideally we would do something that is perceptually closest\n  // (since we can see colors outside of the display gamut), but this seems to\n  // work well enough.\n  var maxVal = r;\n  if (maxVal < g) maxVal = g;\n  if (maxVal < b) maxVal = b;\n  if (maxVal > 1.0) {\n    r /= maxVal;\n    g /= maxVal;\n    b /= maxVal;\n  }\n  if (r < 0) r = 0;\n  if (g < 0) g = 0;\n  if (b < 0) b = 0;\n\n  // Push values back to array\n  rgb[0] = r;\n  rgb[1] = g;\n  rgb[2] = b;\n}\n\nfunction rgb2xyz(rgb, xyz) {\n  var _rgb2 = _slicedToArray(rgb, 3),\n      r = _rgb2[0],\n      g = _rgb2[1],\n      b = _rgb2[2];\n  // The following performs a \"gamma correction\" specified by the sRGB color\n  // space.  sRGB is defined by a canonical definition of a display monitor and\n  // has been standardized by the International Electrotechnical Commission (IEC\n  // 61966-2-1).  The nonlinearity of the correction is designed to make the\n  // colors more perceptually uniform.  This color space has been adopted by\n  // several applications including Adobe Photoshop and Microsoft Windows color\n  // management.  OpenGL is agnostic on its RGB color space, but it is reasonable\n  // to assume it is close to this one.\n\n\n  if (r > 0.04045) r = Math.pow((r + 0.055) / 1.055, 2.4);else r /= 12.92;\n  if (g > 0.04045) g = Math.pow((g + 0.055) / 1.055, 2.4);else g /= 12.92;\n  if (b > 0.04045) b = Math.pow((b + 0.055) / 1.055, 2.4);else b /= 12.92;\n\n  // Observer. = 2 deg, Illuminant = D65\n  xyz[0] = r * 0.4124 + g * 0.3576 + b * 0.1805;\n  xyz[1] = r * 0.2126 + g * 0.7152 + b * 0.0722;\n  xyz[2] = r * 0.0193 + g * 0.1192 + b * 0.9505;\n}\n\nfunction rgb2lab(rgb, lab) {\n  var xyz = [0, 0, 0];\n  rgb2xyz(rgb, xyz);\n  xyz2lab(xyz, lab);\n}\n\nfunction lab2rgb(lab, rgb) {\n  var xyz = [0, 0, 0];\n  lab2xyz(lab, xyz);\n  xyz2rgb(xyz, rgb);\n}\n\nfunction uninitializeBounds(bounds) {\n  bounds[0] = 1.0;\n  bounds[1] = -1.0;\n  bounds[2] = 1.0;\n  bounds[3] = -1.0;\n  bounds[4] = 1.0;\n  bounds[5] = -1.0;\n}\n\nfunction areBoundsInitialized(bounds) {\n  return !(bounds[1] - bounds[0] < 0.0);\n}\n\nfunction clampValue(value, minValue, maxValue) {\n  if (value < minValue) {\n    return minValue;\n  }\n  if (value > maxValue) {\n    return maxValue;\n  }\n  return value;\n}\n\nfunction clampAndNormalizeValue(value, range) {\n  var result = 0;\n  if (range[0] !== range[1]) {\n    // clamp\n    if (value < range[0]) {\n      result = range[0];\n    } else if (value > range[1]) {\n      result = range[1];\n    } else {\n      result = value;\n    }\n    // normalize\n    result = (result - range[0]) / (range[1] - range[0]);\n  }\n\n  return result;\n}\n\nvar getScalarTypeFittingRange = notImplemented('GetScalarTypeFittingRange');\nvar getAdjustedScalarRange = notImplemented('GetAdjustedScalarRange');\n\nfunction extentIsWithinOtherExtent(extent1, extent2) {\n  if (!extent1 || !extent2) {\n    return 0;\n  }\n\n  for (var i = 0; i < 6; i += 2) {\n    if (extent1[i] < extent2[i] || extent1[i] > extent2[i + 1] || extent1[i + 1] < extent2[i] || extent1[i + 1] > extent2[i + 1]) {\n      return 0;\n    }\n  }\n\n  return 1;\n}\n\nfunction boundsIsWithinOtherBounds(bounds1_6, bounds2_6, delta_3) {\n  if (!bounds1_6 || !bounds2_6) {\n    return 0;\n  }\n  for (var i = 0; i < 6; i += 2) {\n    if (bounds1_6[i] + delta_3[i / 2] < bounds2_6[i] || bounds1_6[i] - delta_3[i / 2] > bounds2_6[i + 1] || bounds1_6[i + 1] + delta_3[i / 2] < bounds2_6[i] || bounds1_6[i + 1] - delta_3[i / 2] > bounds2_6[i + 1]) {\n      return 0;\n    }\n  }\n  return 1;\n}\n\nfunction pointIsWithinBounds(point_3, bounds_6, delta_3) {\n  if (!point_3 || !bounds_6 || !delta_3) {\n    return 0;\n  }\n  for (var i = 0; i < 3; i++) {\n    if (point_3[i] + delta_3[i] < bounds_6[2 * i] || point_3[i] - delta_3[i] > bounds_6[2 * i + 1]) {\n      return 0;\n    }\n  }\n  return 1;\n}\n\nfunction solve3PointCircle(p1, p2, p3, center) {\n  var v21 = createArray(3);\n  var v32 = createArray(3);\n  var v13 = createArray(3);\n  var v12 = createArray(3);\n  var v23 = createArray(3);\n  var v31 = createArray(3);\n\n  for (var i = 0; i < 3; ++i) {\n    v21[i] = p1[i] - p2[i];\n    v32[i] = p2[i] - p3[i];\n    v13[i] = p3[i] - p1[i];\n    v12[i] = -v21[i];\n    v23[i] = -v32[i];\n    v31[i] = -v13[i];\n  }\n\n  var norm12 = norm(v12);\n  var norm23 = norm(v23);\n  var norm13 = norm(v13);\n\n  var crossv21v32 = createArray(3);\n  cross(v21, v32, crossv21v32);\n  var normCross = norm(crossv21v32);\n\n  var radius = norm12 * norm23 * norm13 / (2 * normCross);\n\n  var normCross22 = 2 * normCross * normCross;\n  var alpha = norm23 * norm23 * dot(v21, v31) / normCross22;\n  var beta = norm13 * norm13 * dot(v12, v32) / normCross22;\n  var gamma = norm12 * norm12 * dot(v13, v23) / normCross22;\n\n  for (var _i6 = 0; _i6 < 3; ++_i6) {\n    center[_i6] = alpha * p1[_i6] + beta * p2[_i6] + gamma * p3[_i6];\n  }\n  return radius;\n}\n\nvar inf = Infinity;\nvar negInf = -Infinity;\n\nvar isInf = function isInf(value) {\n  return !Number.isFinite(value);\n};\nvar isFinite = Number.isFinite,\n    isNaN = Number.isNaN;\n\n// JavaScript - add-on ----------------------\n\nfunction createUninitializedBounds() {\n  return [].concat([Number.MAX_VALUE, -Number.MAX_VALUE, // X\n  Number.MAX_VALUE, -Number.MAX_VALUE, // Y\n  Number.MAX_VALUE, -Number.MAX_VALUE] // Z\n  );\n}\n\n// ----------------------------------------------------------------------------\n// Only Static API\n// ----------------------------------------------------------------------------\n\nexports.default = {\n  Pi: Pi,\n  radiansFromDegrees: radiansFromDegrees,\n  degreesFromRadians: degreesFromRadians,\n  round: round,\n  floor: floor,\n  ceil: ceil,\n  ceilLog2: ceilLog2,\n  min: min,\n  max: max,\n  arrayMin: arrayMin,\n  arrayMax: arrayMax,\n  isPowerOfTwo: isPowerOfTwo,\n  nearestPowerOfTwo: nearestPowerOfTwo,\n  factorial: factorial,\n  binomial: binomial,\n  beginCombination: beginCombination,\n  nextCombination: nextCombination,\n  randomSeed: randomSeed,\n  getSeed: getSeed,\n  random: random,\n  gaussian: gaussian,\n  add: add,\n  subtract: subtract,\n  multiplyScalar: multiplyScalar,\n  multiplyScalar2D: multiplyScalar2D,\n  dot: dot,\n  outer: outer,\n  cross: cross,\n  norm: norm,\n  normalize: normalize,\n  perpendiculars: perpendiculars,\n  projectVector: projectVector,\n  projectVector2D: projectVector2D,\n  distance2BetweenPoints: distance2BetweenPoints,\n  angleBetweenVectors: angleBetweenVectors,\n  gaussianAmplitude: gaussianAmplitude,\n  gaussianWeight: gaussianWeight,\n  dot2D: dot2D,\n  outer2D: outer2D,\n  norm2D: norm2D,\n  normalize2D: normalize2D,\n  determinant2x2: determinant2x2,\n  LUFactor3x3: LUFactor3x3,\n  LUSolve3x3: LUSolve3x3,\n  linearSolve3x3: linearSolve3x3,\n  multiply3x3_vect3: multiply3x3_vect3,\n  multiply3x3_mat3: multiply3x3_mat3,\n  multiplyMatrix: multiplyMatrix,\n  transpose3x3: transpose3x3,\n  invert3x3: invert3x3,\n  identity3x3: identity3x3,\n  determinant3x3: determinant3x3,\n  quaternionToMatrix3x3: quaternionToMatrix3x3,\n  areMatricesEqual: areMatricesEqual,\n  matrix3x3ToQuaternion: matrix3x3ToQuaternion,\n  multiplyQuaternion: multiplyQuaternion,\n  orthogonalize3x3: orthogonalize3x3,\n  diagonalize3x3: diagonalize3x3,\n  singularValueDecomposition3x3: singularValueDecomposition3x3,\n  solveLinearSystem: solveLinearSystem,\n  invertMatrix: invertMatrix,\n  luFactorLinearSystem: luFactorLinearSystem,\n  luSolveLinearSystem: luSolveLinearSystem,\n  estimateMatrixCondition: estimateMatrixCondition,\n  jacobi: jacobi,\n  jacobiN: jacobiN,\n  solveHomogeneousLeastSquares: solveHomogeneousLeastSquares,\n  solveLeastSquares: solveLeastSquares,\n  hex2float: hex2float,\n  rgb2hsv: rgb2hsv,\n  hsv2rgb: hsv2rgb,\n  lab2xyz: lab2xyz,\n  xyz2lab: xyz2lab,\n  xyz2rgb: xyz2rgb,\n  rgb2xyz: rgb2xyz,\n  rgb2lab: rgb2lab,\n  lab2rgb: lab2rgb,\n  uninitializeBounds: uninitializeBounds,\n  areBoundsInitialized: areBoundsInitialized,\n  clampValue: clampValue,\n  clampAndNormalizeValue: clampAndNormalizeValue,\n  getScalarTypeFittingRange: getScalarTypeFittingRange,\n  getAdjustedScalarRange: getAdjustedScalarRange,\n  extentIsWithinOtherExtent: extentIsWithinOtherExtent,\n  boundsIsWithinOtherBounds: boundsIsWithinOtherBounds,\n  pointIsWithinBounds: pointIsWithinBounds,\n  solve3PointCircle: solve3PointCircle,\n  inf: inf,\n  negInf: negInf,\n  isInf: isInf,\n  isNan: isNaN,\n  isNaN: isNaN,\n  isFinite: isFinite,\n\n  // JS add-on\n  createUninitializedBounds: createUninitializedBounds\n};\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\n// alea, a 53-bit multiply-with-carry generator by Johannes Baage.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\nvar alea = __webpack_require__(19);\n\n// xor128, a pure xor-shift generator by George Marsaglia.\n// Period: 2^128-1.\n// Reported to fail: MatrixRank and LinearComp.\nvar xor128 = __webpack_require__(20);\n\n// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n// Period: 2^192-2^32\n// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\nvar xorwow = __webpack_require__(21);\n\n// xorshift7, by Franois Panneton and Pierre L'ecuyer, takes\n// a different approach: it adds robustness by allowing more shifts\n// than Marsaglia's original three.  It is a 7-shift generator\n// with 256 bits, that passes BigCrush with no systmatic failures.\n// Period 2^256-1.\n// No systematic BigCrush failures reported.\nvar xorshift7 = __webpack_require__(22);\n\n// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n// very long period that also adds a Weyl generator. It also passes\n// BigCrush with no systematic failures.  Its long period may\n// be useful if you have many generators and need to avoid\n// collisions.\n// Period: 2^4128-2^32.\n// No systematic BigCrush failures reported.\nvar xor4096 = __webpack_require__(23);\n\n// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n// number generator derived from ChaCha, a modern stream cipher.\n// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n// Period: ~2^127\n// No systematic BigCrush failures reported.\nvar tychei = __webpack_require__(24);\n\n// The original ARC4-based prng included in this library.\n// Period: ~2^1600\nvar sr = __webpack_require__(25);\n\nsr.alea = alea;\nsr.xor128 = xor128;\nsr.xorwow = xorwow;\nsr.xorshift7 = xorshift7;\nsr.xor4096 = xor4096;\nsr.tychei = tychei;\n\nmodule.exports = sr;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_RESULT__;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n// A port of an algorithm by Johannes Baage <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n\n// Copyright (C) 2010 by Johannes Baage <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// \n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n// \n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n(function (global, module, define) {\n\n  function Alea(seed) {\n    var me = this,\n        mash = Mash();\n\n    me.next = function () {\n      var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n      me.s0 = me.s1;\n      me.s1 = me.s2;\n      return me.s2 = t - (me.c = t | 0);\n    };\n\n    // Apply the seeding algorithm from Baagoe.\n    me.c = 1;\n    me.s0 = mash(' ');\n    me.s1 = mash(' ');\n    me.s2 = mash(' ');\n    me.s0 -= mash(seed);\n    if (me.s0 < 0) {\n      me.s0 += 1;\n    }\n    me.s1 -= mash(seed);\n    if (me.s1 < 0) {\n      me.s1 += 1;\n    }\n    me.s2 -= mash(seed);\n    if (me.s2 < 0) {\n      me.s2 += 1;\n    }\n    mash = null;\n  }\n\n  function copy(f, t) {\n    t.c = f.c;\n    t.s0 = f.s0;\n    t.s1 = f.s1;\n    t.s2 = f.s2;\n    return t;\n  }\n\n  function impl(seed, opts) {\n    var xg = new Alea(seed),\n        state = opts && opts.state,\n        prng = xg.next;\n    prng.int32 = function () {\n      return xg.next() * 0x100000000 | 0;\n    };\n    prng.double = function () {\n      return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n    };\n    prng.quick = prng;\n    if (state) {\n      if ((typeof state === 'undefined' ? 'undefined' : _typeof(state)) == 'object') copy(state, xg);\n      prng.state = function () {\n        return copy(xg, {});\n      };\n    }\n    return prng;\n  }\n\n  function Mash() {\n    var n = 0xefc8249d;\n\n    var mash = function mash(data) {\n      data = data.toString();\n      for (var i = 0; i < data.length; i++) {\n        n += data.charCodeAt(i);\n        var h = 0.02519603282416938 * n;\n        n = h >>> 0;\n        h -= n;\n        h *= n;\n        n = h >>> 0;\n        h -= n;\n        n += h * 0x100000000; // 2^32\n      }\n      return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n    };\n\n    return mash;\n  }\n\n  if (module && module.exports) {\n    module.exports = impl;\n  } else if (__webpack_require__(0) && __webpack_require__(3)) {\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n      return impl;\n    }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {\n    this.alea = impl;\n  }\n})(undefined, ( false ? 'undefined' : _typeof(module)) == 'object' && module, // present in node.js\n__webpack_require__(0) // present with an AMD loader\n);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_RESULT__;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function (global, module, define) {\n\n  function XorGen(seed) {\n    var me = this,\n        strseed = '';\n\n    me.x = 0;\n    me.y = 0;\n    me.z = 0;\n    me.w = 0;\n\n    // Set up generator function.\n    me.next = function () {\n      var t = me.x ^ me.x << 11;\n      me.x = me.y;\n      me.y = me.z;\n      me.z = me.w;\n      return me.w ^= me.w >>> 19 ^ t ^ t >>> 8;\n    };\n\n    if (seed === (seed | 0)) {\n      // Integer seed.\n      me.x = seed;\n    } else {\n      // String seed.\n      strseed += seed;\n    }\n\n    // Mix in string seed, then discard an initial batch of 64 values.\n    for (var k = 0; k < strseed.length + 64; k++) {\n      me.x ^= strseed.charCodeAt(k) | 0;\n      me.next();\n    }\n  }\n\n  function copy(f, t) {\n    t.x = f.x;\n    t.y = f.y;\n    t.z = f.z;\n    t.w = f.w;\n    return t;\n  }\n\n  function impl(seed, opts) {\n    var xg = new XorGen(seed),\n        state = opts && opts.state,\n        prng = function prng() {\n      return (xg.next() >>> 0) / 0x100000000;\n    };\n    prng.double = function () {\n      do {\n        var top = xg.next() >>> 11,\n            bot = (xg.next() >>> 0) / 0x100000000,\n            result = (top + bot) / (1 << 21);\n      } while (result === 0);\n      return result;\n    };\n    prng.int32 = xg.next;\n    prng.quick = prng;\n    if (state) {\n      if ((typeof state === 'undefined' ? 'undefined' : _typeof(state)) == 'object') copy(state, xg);\n      prng.state = function () {\n        return copy(xg, {});\n      };\n    }\n    return prng;\n  }\n\n  if (module && module.exports) {\n    module.exports = impl;\n  } else if (__webpack_require__(0) && __webpack_require__(3)) {\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n      return impl;\n    }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {\n    this.xor128 = impl;\n  }\n})(undefined, ( false ? 'undefined' : _typeof(module)) == 'object' && module, // present in node.js\n__webpack_require__(0) // present with an AMD loader\n);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_RESULT__;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function (global, module, define) {\n\n  function XorGen(seed) {\n    var me = this,\n        strseed = '';\n\n    // Set up generator function.\n    me.next = function () {\n      var t = me.x ^ me.x >>> 2;\n      me.x = me.y;me.y = me.z;me.z = me.w;me.w = me.v;\n      return (me.d = me.d + 362437 | 0) + (me.v = me.v ^ me.v << 4 ^ (t ^ t << 1)) | 0;\n    };\n\n    me.x = 0;\n    me.y = 0;\n    me.z = 0;\n    me.w = 0;\n    me.v = 0;\n\n    if (seed === (seed | 0)) {\n      // Integer seed.\n      me.x = seed;\n    } else {\n      // String seed.\n      strseed += seed;\n    }\n\n    // Mix in string seed, then discard an initial batch of 64 values.\n    for (var k = 0; k < strseed.length + 64; k++) {\n      me.x ^= strseed.charCodeAt(k) | 0;\n      if (k == strseed.length) {\n        me.d = me.x << 10 ^ me.x >>> 4;\n      }\n      me.next();\n    }\n  }\n\n  function copy(f, t) {\n    t.x = f.x;\n    t.y = f.y;\n    t.z = f.z;\n    t.w = f.w;\n    t.v = f.v;\n    t.d = f.d;\n    return t;\n  }\n\n  function impl(seed, opts) {\n    var xg = new XorGen(seed),\n        state = opts && opts.state,\n        prng = function prng() {\n      return (xg.next() >>> 0) / 0x100000000;\n    };\n    prng.double = function () {\n      do {\n        var top = xg.next() >>> 11,\n            bot = (xg.next() >>> 0) / 0x100000000,\n            result = (top + bot) / (1 << 21);\n      } while (result === 0);\n      return result;\n    };\n    prng.int32 = xg.next;\n    prng.quick = prng;\n    if (state) {\n      if ((typeof state === 'undefined' ? 'undefined' : _typeof(state)) == 'object') copy(state, xg);\n      prng.state = function () {\n        return copy(xg, {});\n      };\n    }\n    return prng;\n  }\n\n  if (module && module.exports) {\n    module.exports = impl;\n  } else if (__webpack_require__(0) && __webpack_require__(3)) {\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n      return impl;\n    }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {\n    this.xorwow = impl;\n  }\n})(undefined, ( false ? 'undefined' : _typeof(module)) == 'object' && module, // present in node.js\n__webpack_require__(0) // present with an AMD loader\n);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_RESULT__;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n// A Javascript implementaion of the \"xorshift7\" algorithm by\n// Franois Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\n(function (global, module, define) {\n\n  function XorGen(seed) {\n    var me = this;\n\n    // Set up generator function.\n    me.next = function () {\n      // Update xor generator.\n      var X = me.x,\n          i = me.i,\n          t,\n          v,\n          w;\n      t = X[i];t ^= t >>> 7;v = t ^ t << 24;\n      t = X[i + 1 & 7];v ^= t ^ t >>> 10;\n      t = X[i + 3 & 7];v ^= t ^ t >>> 3;\n      t = X[i + 4 & 7];v ^= t ^ t << 7;\n      t = X[i + 7 & 7];t = t ^ t << 13;v ^= t ^ t << 9;\n      X[i] = v;\n      me.i = i + 1 & 7;\n      return v;\n    };\n\n    function init(me, seed) {\n      var j,\n          w,\n          X = [];\n\n      if (seed === (seed | 0)) {\n        // Seed state array using a 32-bit integer.\n        w = X[0] = seed;\n      } else {\n        // Seed state using a string.\n        seed = '' + seed;\n        for (j = 0; j < seed.length; ++j) {\n          X[j & 7] = X[j & 7] << 15 ^ seed.charCodeAt(j) + X[j + 1 & 7] << 13;\n        }\n      }\n      // Enforce an array length of 8, not all zeroes.\n      while (X.length < 8) {\n        X.push(0);\n      }for (j = 0; j < 8 && X[j] === 0; ++j) {}\n      if (j == 8) w = X[7] = -1;else w = X[j];\n\n      me.x = X;\n      me.i = 0;\n\n      // Discard an initial 256 values.\n      for (j = 256; j > 0; --j) {\n        me.next();\n      }\n    }\n\n    init(me, seed);\n  }\n\n  function copy(f, t) {\n    t.x = f.x.slice();\n    t.i = f.i;\n    return t;\n  }\n\n  function impl(seed, opts) {\n    if (seed == null) seed = +new Date();\n    var xg = new XorGen(seed),\n        state = opts && opts.state,\n        prng = function prng() {\n      return (xg.next() >>> 0) / 0x100000000;\n    };\n    prng.double = function () {\n      do {\n        var top = xg.next() >>> 11,\n            bot = (xg.next() >>> 0) / 0x100000000,\n            result = (top + bot) / (1 << 21);\n      } while (result === 0);\n      return result;\n    };\n    prng.int32 = xg.next;\n    prng.quick = prng;\n    if (state) {\n      if (state.x) copy(state, xg);\n      prng.state = function () {\n        return copy(xg, {});\n      };\n    }\n    return prng;\n  }\n\n  if (module && module.exports) {\n    module.exports = impl;\n  } else if (__webpack_require__(0) && __webpack_require__(3)) {\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n      return impl;\n    }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {\n    this.xorshift7 = impl;\n  }\n})(undefined, ( false ? 'undefined' : _typeof(module)) == 'object' && module, // present in node.js\n__webpack_require__(0) // present with an AMD loader\n);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_RESULT__;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n\n(function (global, module, define) {\n\n  function XorGen(seed) {\n    var me = this;\n\n    // Set up generator function.\n    me.next = function () {\n      var w = me.w,\n          X = me.X,\n          i = me.i,\n          t,\n          v;\n      // Update Weyl generator.\n      me.w = w = w + 0x61c88647 | 0;\n      // Update xor generator.\n      v = X[i + 34 & 127];\n      t = X[i = i + 1 & 127];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      // Update Xor generator array state.\n      v = X[i] = v ^ t;\n      me.i = i;\n      // Result is the combination.\n      return v + (w ^ w >>> 16) | 0;\n    };\n\n    function init(me, seed) {\n      var t,\n          v,\n          i,\n          j,\n          w,\n          X = [],\n          limit = 128;\n      if (seed === (seed | 0)) {\n        // Numeric seeds initialize v, which is used to generates X.\n        v = seed;\n        seed = null;\n      } else {\n        // String seeds are mixed into v and X one character at a time.\n        seed = seed + '\\0';\n        v = 0;\n        limit = Math.max(limit, seed.length);\n      }\n      // Initialize circular array and weyl value.\n      for (i = 0, j = -32; j < limit; ++j) {\n        // Put the unicode characters into the array, and shuffle them.\n        if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n        // After 32 shuffles, take v as the starting w value.\n        if (j === 0) w = v;\n        v ^= v << 10;\n        v ^= v >>> 15;\n        v ^= v << 4;\n        v ^= v >>> 13;\n        if (j >= 0) {\n          w = w + 0x61c88647 | 0; // Weyl.\n          t = X[j & 127] ^= v + w; // Combine xor and weyl to init array.\n          i = 0 == t ? i + 1 : 0; // Count zeroes.\n        }\n      }\n      // We have detected all zeroes; make the key nonzero.\n      if (i >= 128) {\n        X[(seed && seed.length || 0) & 127] = -1;\n      }\n      // Run the generator 512 times to further mix the state before using it.\n      // Factoring this as a function slows the main generator, so it is just\n      // unrolled here.  The weyl generator is not advanced while warming up.\n      i = 127;\n      for (j = 4 * 128; j > 0; --j) {\n        v = X[i + 34 & 127];\n        t = X[i = i + 1 & 127];\n        v ^= v << 13;\n        t ^= t << 17;\n        v ^= v >>> 15;\n        t ^= t >>> 12;\n        X[i] = v ^ t;\n      }\n      // Storing state as object members is faster than using closure variables.\n      me.w = w;\n      me.X = X;\n      me.i = i;\n    }\n\n    init(me, seed);\n  }\n\n  function copy(f, t) {\n    t.i = f.i;\n    t.w = f.w;\n    t.X = f.X.slice();\n    return t;\n  };\n\n  function impl(seed, opts) {\n    if (seed == null) seed = +new Date();\n    var xg = new XorGen(seed),\n        state = opts && opts.state,\n        prng = function prng() {\n      return (xg.next() >>> 0) / 0x100000000;\n    };\n    prng.double = function () {\n      do {\n        var top = xg.next() >>> 11,\n            bot = (xg.next() >>> 0) / 0x100000000,\n            result = (top + bot) / (1 << 21);\n      } while (result === 0);\n      return result;\n    };\n    prng.int32 = xg.next;\n    prng.quick = prng;\n    if (state) {\n      if (state.X) copy(state, xg);\n      prng.state = function () {\n        return copy(xg, {});\n      };\n    }\n    return prng;\n  }\n\n  if (module && module.exports) {\n    module.exports = impl;\n  } else if (__webpack_require__(0) && __webpack_require__(3)) {\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n      return impl;\n    }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {\n    this.xor4096 = impl;\n  }\n})(undefined, // window object or global\n( false ? 'undefined' : _typeof(module)) == 'object' && module, // present in node.js\n__webpack_require__(0) // present with an AMD loader\n);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_RESULT__;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\n(function (global, module, define) {\n\n  function XorGen(seed) {\n    var me = this,\n        strseed = '';\n\n    // Set up generator function.\n    me.next = function () {\n      var b = me.b,\n          c = me.c,\n          d = me.d,\n          a = me.a;\n      b = b << 25 ^ b >>> 7 ^ c;\n      c = c - d | 0;\n      d = d << 24 ^ d >>> 8 ^ a;\n      a = a - b | 0;\n      me.b = b = b << 20 ^ b >>> 12 ^ c;\n      me.c = c = c - d | 0;\n      me.d = d << 16 ^ c >>> 16 ^ a;\n      return me.a = a - b | 0;\n    };\n\n    /* The following is non-inverted tyche, which has better internal\n     * bit diffusion, but which is about 25% slower than tyche-i in JS.\n    me.next = function() {\n      var a = me.a, b = me.b, c = me.c, d = me.d;\n      a = (me.a + me.b | 0) >>> 0;\n      d = me.d ^ a; d = d << 16 ^ d >>> 16;\n      c = me.c + d | 0;\n      b = me.b ^ c; b = b << 12 ^ d >>> 20;\n      me.a = a = a + b | 0;\n      d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n      me.c = c = c + d | 0;\n      b = b ^ c;\n      return me.b = (b << 7 ^ b >>> 25);\n    }\n    */\n\n    me.a = 0;\n    me.b = 0;\n    me.c = 2654435769 | 0;\n    me.d = 1367130551;\n\n    if (seed === Math.floor(seed)) {\n      // Integer seed.\n      me.a = seed / 0x100000000 | 0;\n      me.b = seed | 0;\n    } else {\n      // String seed.\n      strseed += seed;\n    }\n\n    // Mix in string seed, then discard an initial batch of 64 values.\n    for (var k = 0; k < strseed.length + 20; k++) {\n      me.b ^= strseed.charCodeAt(k) | 0;\n      me.next();\n    }\n  }\n\n  function copy(f, t) {\n    t.a = f.a;\n    t.b = f.b;\n    t.c = f.c;\n    t.d = f.d;\n    return t;\n  };\n\n  function impl(seed, opts) {\n    var xg = new XorGen(seed),\n        state = opts && opts.state,\n        prng = function prng() {\n      return (xg.next() >>> 0) / 0x100000000;\n    };\n    prng.double = function () {\n      do {\n        var top = xg.next() >>> 11,\n            bot = (xg.next() >>> 0) / 0x100000000,\n            result = (top + bot) / (1 << 21);\n      } while (result === 0);\n      return result;\n    };\n    prng.int32 = xg.next;\n    prng.quick = prng;\n    if (state) {\n      if ((typeof state === 'undefined' ? 'undefined' : _typeof(state)) == 'object') copy(state, xg);\n      prng.state = function () {\n        return copy(xg, {});\n      };\n    }\n    return prng;\n  }\n\n  if (module && module.exports) {\n    module.exports = impl;\n  } else if (__webpack_require__(0) && __webpack_require__(3)) {\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n      return impl;\n    }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {\n    this.tychei = impl;\n  }\n})(undefined, ( false ? 'undefined' : _typeof(module)) == 'object' && module, // present in node.js\n__webpack_require__(0) // present with an AMD loader\n);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_RESULT__;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/*\nCopyright 2014 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n(function (pool, math) {\n  //\n  // The following constants are related to IEEE 754 limits.\n  //\n  var global = this,\n      width = 256,\n      // each RC4 output is 0 <= x < 256\n  chunks = 6,\n      // at least six RC4 outputs for each double\n  digits = 52,\n      // there are 52 significant digits in a double\n  rngname = 'random',\n      // rngname: name for Math.random and Math.seedrandom\n  startdenom = math.pow(width, chunks),\n      significance = math.pow(2, digits),\n      overflow = significance * 2,\n      mask = width - 1,\n      nodecrypto; // node.js crypto module, initialized at the bottom.\n\n  //\n  // seedrandom()\n  // This is the seedrandom function described above.\n  //\n  function seedrandom(seed, options, callback) {\n    var key = [];\n    options = options == true ? { entropy: true } : options || {};\n\n    // Flatten the seed string or build one from local entropy if needed.\n    var shortseed = mixkey(flatten(options.entropy ? [seed, tostring(pool)] : seed == null ? autoseed() : seed, 3), key);\n\n    // Use the seed to initialize an ARC4 generator.\n    var arc4 = new ARC4(key);\n\n    // This function returns a random double in [0, 1) that contains\n    // randomness in every bit of the mantissa of the IEEE 754 value.\n    var prng = function prng() {\n      var n = arc4.g(chunks),\n          // Start with a numerator n < 2 ^ 48\n      d = startdenom,\n          //   and denominator d = 2 ^ 48.\n      x = 0; //   and no 'extra last byte'.\n      while (n < significance) {\n        // Fill up all significant digits by\n        n = (n + x) * width; //   shifting numerator and\n        d *= width; //   denominator and generating a\n        x = arc4.g(1); //   new least-significant-byte.\n      }\n      while (n >= overflow) {\n        // To avoid rounding up, before adding\n        n /= 2; //   last byte, shift everything\n        d /= 2; //   right using integer math until\n        x >>>= 1; //   we have exactly the desired bits.\n      }\n      return (n + x) / d; // Form the number within [0, 1).\n    };\n\n    prng.int32 = function () {\n      return arc4.g(4) | 0;\n    };\n    prng.quick = function () {\n      return arc4.g(4) / 0x100000000;\n    };\n    prng.double = prng;\n\n    // Mix the randomness into accumulated entropy.\n    mixkey(tostring(arc4.S), pool);\n\n    // Calling convention: what to return as a function of prng, seed, is_math.\n    return (options.pass || callback || function (prng, seed, is_math_call, state) {\n      if (state) {\n        // Load the arc4 state from the given state if it has an S array.\n        if (state.S) {\n          copy(state, arc4);\n        }\n        // Only provide the .state method if requested via options.state.\n        prng.state = function () {\n          return copy(arc4, {});\n        };\n      }\n\n      // If called as a method of Math (Math.seedrandom()), mutate\n      // Math.random because that is how seedrandom.js has worked since v1.0.\n      if (is_math_call) {\n        math[rngname] = prng;return seed;\n      }\n\n      // Otherwise, it is a newer calling convention, so return the\n      // prng directly.\n      else return prng;\n    })(prng, shortseed, 'global' in options ? options.global : this == math, options.state);\n  }\n  math['seed' + rngname] = seedrandom;\n\n  //\n  // ARC4\n  //\n  // An ARC4 implementation.  The constructor takes a key in the form of\n  // an array of at most (width) integers that should be 0 <= x < (width).\n  //\n  // The g(count) method returns a pseudorandom integer that concatenates\n  // the next (count) outputs from ARC4.  Its return value is a number x\n  // that is in the range 0 <= x < (width ^ count).\n  //\n  function ARC4(key) {\n    var t,\n        keylen = key.length,\n        me = this,\n        i = 0,\n        j = me.i = me.j = 0,\n        s = me.S = [];\n\n    // The empty key [] is treated as [0].\n    if (!keylen) {\n      key = [keylen++];\n    }\n\n    // Set up S using the standard key scheduling algorithm.\n    while (i < width) {\n      s[i] = i++;\n    }\n    for (i = 0; i < width; i++) {\n      s[i] = s[j = mask & j + key[i % keylen] + (t = s[i])];\n      s[j] = t;\n    }\n\n    // The \"g\" method returns the next (count) outputs as one number.\n    (me.g = function (count) {\n      // Using instance members instead of closure state nearly doubles speed.\n      var t,\n          r = 0,\n          i = me.i,\n          j = me.j,\n          s = me.S;\n      while (count--) {\n        t = s[i = mask & i + 1];\n        r = r * width + s[mask & (s[i] = s[j = mask & j + t]) + (s[j] = t)];\n      }\n      me.i = i;me.j = j;\n      return r;\n      // For robust unpredictability, the function call below automatically\n      // discards an initial batch of values.  This is called RC4-drop[256].\n      // See http://google.com/search?q=rsa+fluhrer+response&btnI\n    })(width);\n  }\n\n  //\n  // copy()\n  // Copies internal state of ARC4 to or from a plain object.\n  //\n  function copy(f, t) {\n    t.i = f.i;\n    t.j = f.j;\n    t.S = f.S.slice();\n    return t;\n  };\n\n  //\n  // flatten()\n  // Converts an object tree to nested arrays of strings.\n  //\n  function flatten(obj, depth) {\n    var result = [],\n        typ = typeof obj === 'undefined' ? 'undefined' : _typeof(obj),\n        prop;\n    if (depth && typ == 'object') {\n      for (prop in obj) {\n        try {\n          result.push(flatten(obj[prop], depth - 1));\n        } catch (e) {}\n      }\n    }\n    return result.length ? result : typ == 'string' ? obj : obj + '\\0';\n  }\n\n  //\n  // mixkey()\n  // Mixes a string seed into a key that is an array of integers, and\n  // returns a shortened string seed that is equivalent to the result key.\n  //\n  function mixkey(seed, key) {\n    var stringseed = seed + '',\n        smear,\n        j = 0;\n    while (j < stringseed.length) {\n      key[mask & j] = mask & (smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++);\n    }\n    return tostring(key);\n  }\n\n  //\n  // autoseed()\n  // Returns an object for autoseeding, using window.crypto and Node crypto\n  // module if available.\n  //\n  function autoseed() {\n    try {\n      var out;\n      if (nodecrypto && (out = nodecrypto.randomBytes)) {\n        // The use of 'out' to remember randomBytes makes tight minified code.\n        out = out(width);\n      } else {\n        out = new Uint8Array(width);\n        (global.crypto || global.msCrypto).getRandomValues(out);\n      }\n      return tostring(out);\n    } catch (e) {\n      var browser = global.navigator,\n          plugins = browser && browser.plugins;\n      return [+new Date(), global, plugins, global.screen, tostring(pool)];\n    }\n  }\n\n  //\n  // tostring()\n  // Converts an array of charcodes to a string\n  //\n  function tostring(a) {\n    return String.fromCharCode.apply(0, a);\n  }\n\n  //\n  // When seedrandom.js is loaded, we immediately mix a few bits\n  // from the built-in RNG into the entropy pool.  Because we do\n  // not want to interfere with deterministic PRNG state later,\n  // seedrandom will not call math.random on its own again after\n  // initialization.\n  //\n  mixkey(math.random(), pool);\n\n  //\n  // Nodejs and AMD support: export the implementation as a module using\n  // either convention.\n  //\n  if (( false ? 'undefined' : _typeof(module)) == 'object' && module.exports) {\n    module.exports = seedrandom;\n    // When in node.js, try using crypto package for autoseeding.\n    try {\n      nodecrypto = __webpack_require__(26);\n    } catch (ex) {}\n  } else if (true) {\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n      return seedrandom;\n    }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  }\n\n  // End anonymous scope, and pass initial values.\n})([], // pool: entropy pool starts empty\nMath // math: package containing random, pow, and seedrandom\n);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EVENT_ABORT = exports.VOID = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.setLoggerFunction = setLoggerFunction;\nexports.vtkLogMacro = vtkLogMacro;\nexports.vtkInfoMacro = vtkInfoMacro;\nexports.vtkDebugMacro = vtkDebugMacro;\nexports.vtkErrorMacro = vtkErrorMacro;\nexports.vtkWarningMacro = vtkWarningMacro;\nexports.capitalize = capitalize;\nexports.obj = obj;\nexports.get = get;\nexports.set = set;\nexports.setGet = setGet;\nexports.getArray = getArray;\nexports.setArray = setArray;\nexports.setGetArray = setGetArray;\nexports.algo = algo;\nexports.event = event;\nexports.newInstance = newInstance;\nexports.chain = chain;\nexports.isVtkObject = isVtkObject;\nexports.traverseInstanceTree = traverseInstanceTree;\nexports.debounce = debounce;\nexports.throttle = throttle;\nexports.keystore = keystore;\nexports.proxy = proxy;\nexports.proxyPropertyMapping = proxyPropertyMapping;\nexports.proxyPropertyState = proxyPropertyState;\n\nvar _vtk = __webpack_require__(28);\n\nvar _vtk2 = _interopRequireDefault(_vtk);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar globalMTime = 0;\n\nvar VOID = exports.VOID = Symbol('void');\n\nfunction getCurrentGlobalMTime() {\n  return globalMTime;\n}\n\n// ----------------------------------------------------------------------------\n// Logging function calls\n// ----------------------------------------------------------------------------\n/* eslint-disable no-prototype-builtins                                      */\n\nvar fakeConsole = {};\n\nfunction noOp() {}\n\nvar consoleMethods = ['log', 'debug', 'info', 'warn', 'error', 'time', 'timeEnd', 'group', 'groupEnd'];\nconsoleMethods.forEach(function (methodName) {\n  fakeConsole[methodName] = noOp;\n});\n\nglobal.console = console.hasOwnProperty('log') ? console : fakeConsole;\n\nvar loggerFunctions = {\n  debug: noOp, // Don't print debug by default\n  error: global.console.error || noOp,\n  info: global.console.info || noOp,\n  log: global.console.log || noOp,\n  warn: global.console.warn || noOp\n};\n\nfunction setLoggerFunction(name, fn) {\n  if (loggerFunctions[name]) {\n    loggerFunctions[name] = fn || noOp;\n  }\n}\n\nfunction vtkLogMacro() {\n  loggerFunctions.log.apply(loggerFunctions, arguments);\n}\n\nfunction vtkInfoMacro() {\n  loggerFunctions.info.apply(loggerFunctions, arguments);\n}\n\nfunction vtkDebugMacro() {\n  loggerFunctions.debug.apply(loggerFunctions, arguments);\n}\n\nfunction vtkErrorMacro() {\n  loggerFunctions.error.apply(loggerFunctions, arguments);\n}\n\nfunction vtkWarningMacro() {\n  loggerFunctions.warn.apply(loggerFunctions, arguments);\n}\n\n// ----------------------------------------------------------------------------\n// capitilze provided string\n// ----------------------------------------------------------------------------\n\nfunction capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n// ----------------------------------------------------------------------------\n// Array helper\n// ----------------------------------------------------------------------------\n\nfunction safeArrays(model) {\n  Object.keys(model).forEach(function (key) {\n    if (Array.isArray(model[key])) {\n      model[key] = [].concat(model[key]);\n    }\n  });\n}\n\n// ----------------------------------------------------------------------------\n\nfunction enumToString(e, value) {\n  return Object.keys(e).find(function (key) {\n    return e[key] === value;\n  });\n}\n\nfunction getStateArrayMapFunc(item) {\n  if (item.isA) {\n    return item.getState();\n  }\n  return item;\n}\n\n// ----------------------------------------------------------------------------\n// vtkObject: modified(), onModified(callback), delete()\n// ----------------------------------------------------------------------------\n\nfunction obj() {\n  var publicAPI = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var model = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  // Ensure each instance as a unique ref of array\n  safeArrays(model);\n\n  var callbacks = [];\n  model.mtime = Number.isInteger(model.mtime) ? model.mtime : ++globalMTime;\n  model.classHierarchy = ['vtkObject'];\n\n  function off(index) {\n    callbacks[index] = null;\n  }\n\n  function on(index) {\n    function unsubscribe() {\n      off(index);\n    }\n    return Object.freeze({\n      unsubscribe: unsubscribe\n    });\n  }\n\n  publicAPI.isDeleted = function () {\n    return !!model.deleted;\n  };\n\n  publicAPI.modified = function (otherMTime) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n\n    if (otherMTime && otherMTime < model.mtime) {\n      return;\n    }\n\n    model.mtime = ++globalMTime;\n    callbacks.forEach(function (callback) {\n      return callback && callback(publicAPI);\n    });\n  };\n\n  publicAPI.onModified = function (callback) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return null;\n    }\n\n    var index = callbacks.length;\n    callbacks.push(callback);\n    return on(index);\n  };\n\n  publicAPI.getMTime = function () {\n    return model.mtime;\n  };\n\n  publicAPI.isA = function (className) {\n    var count = model.classHierarchy.length;\n    // we go backwards as that is more likely for\n    // early termination\n    while (count--) {\n      if (model.classHierarchy[count] === className) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  publicAPI.getClassName = function () {\n    var depth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    return model.classHierarchy[model.classHierarchy.length - 1 - depth];\n  };\n\n  publicAPI.set = function () {\n    var map = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var noWarning = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var noFunction = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    var ret = false;\n    Object.keys(map).forEach(function (name) {\n      var fn = noFunction ? null : publicAPI['set' + capitalize(name)];\n      if (fn && Array.isArray(map[name])) {\n        ret = fn.apply(undefined, _toConsumableArray(map[name])) || ret;\n      } else if (fn) {\n        ret = fn(map[name]) || ret;\n      } else {\n        // Set data on model directly\n        if (['mtime'].indexOf(name) === -1 && !noWarning) {\n          vtkWarningMacro('Warning: Set value to model directly ' + name + ', ' + map[name]);\n        }\n        model[name] = map[name];\n        ret = true;\n      }\n    });\n    return ret;\n  };\n\n  publicAPI.get = function () {\n    for (var _len = arguments.length, list = Array(_len), _key = 0; _key < _len; _key++) {\n      list[_key] = arguments[_key];\n    }\n\n    if (!list.length) {\n      return model;\n    }\n    var subset = {};\n    list.forEach(function (name) {\n      subset[name] = model[name];\n    });\n    return subset;\n  };\n\n  publicAPI.getReferenceByName = function (val) {\n    return model[val];\n  };\n\n  publicAPI.delete = function () {\n    Object.keys(model).forEach(function (field) {\n      return delete model[field];\n    });\n    callbacks.forEach(function (el, index) {\n      return off(index);\n    });\n\n    // Flag the instance being deleted\n    model.deleted = true;\n  };\n\n  // Add serialization support\n  publicAPI.getState = function () {\n    var jsonArchive = Object.assign({}, model, {\n      vtkClass: publicAPI.getClassName()\n    });\n\n    // Convert every vtkObject to its serializable form\n    Object.keys(jsonArchive).forEach(function (keyName) {\n      if (jsonArchive[keyName] === null || jsonArchive[keyName] === undefined) {\n        delete jsonArchive[keyName];\n      } else if (jsonArchive[keyName].isA) {\n        jsonArchive[keyName] = jsonArchive[keyName].getState();\n      } else if (Array.isArray(jsonArchive[keyName])) {\n        jsonArchive[keyName] = jsonArchive[keyName].map(getStateArrayMapFunc);\n      }\n    });\n\n    // Sort resulting object by key name\n    var sortedObj = {};\n    Object.keys(jsonArchive).sort().forEach(function (name) {\n      sortedObj[name] = jsonArchive[name];\n    });\n\n    // Remove mtime\n    if (sortedObj.mtime) {\n      delete sortedObj.mtime;\n    }\n\n    return sortedObj;\n  };\n\n  // Add shallowCopy(otherInstance) support\n  publicAPI.shallowCopy = function (other) {\n    var debug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (other.getClassName() !== publicAPI.getClassName()) {\n      throw new Error('Cannot ShallowCopy ' + other.getClassName() + ' into ' + publicAPI.getClassName());\n    }\n    var otherModel = other.get();\n\n    var keyList = Object.keys(model).sort();\n    var otherKeyList = Object.keys(otherModel).sort();\n\n    otherKeyList.forEach(function (key) {\n      var keyIdx = keyList.indexOf(key);\n      if (keyIdx === -1) {\n        if (debug) {\n          vtkDebugMacro('add ' + key + ' in shallowCopy');\n        }\n      } else {\n        keyList.splice(keyIdx, 1);\n      }\n      model[key] = otherModel[key];\n    });\n    if (keyList.length && debug) {\n      vtkDebugMacro('Untouched keys: ' + keyList.join(', '));\n    }\n\n    publicAPI.modified();\n  };\n}\n\n// ----------------------------------------------------------------------------\n// getXXX: add getters\n// ----------------------------------------------------------------------------\n\nfunction get(publicAPI, model, fieldNames) {\n  fieldNames.forEach(function (field) {\n    if ((typeof field === 'undefined' ? 'undefined' : _typeof(field)) === 'object') {\n      publicAPI['get' + capitalize(field.name)] = function () {\n        return model[field.name];\n      };\n    } else {\n      publicAPI['get' + capitalize(field)] = function () {\n        return model[field];\n      };\n    }\n  });\n}\n\n// ----------------------------------------------------------------------------\n// setXXX: add setters\n// ----------------------------------------------------------------------------\n\nvar objectSetterMap = {\n  enum: function _enum(publicAPI, model, field) {\n    return function (value) {\n      if (typeof value === 'string') {\n        if (field.enum[value] !== undefined) {\n          if (model[field.name] !== field.enum[value]) {\n            model[field.name] = field.enum[value];\n            publicAPI.modified();\n            return true;\n          }\n          return false;\n        }\n        vtkErrorMacro('Set Enum with invalid argument ' + field + ', ' + value);\n        throw new RangeError('Set Enum with invalid string argument');\n      }\n      if (typeof value === 'number') {\n        if (model[field.name] !== value) {\n          if (Object.keys(field.enum).map(function (key) {\n            return field.enum[key];\n          }).indexOf(value) !== -1) {\n            model[field.name] = value;\n            publicAPI.modified();\n            return true;\n          }\n          vtkErrorMacro('Set Enum outside numeric range ' + field + ', ' + value);\n          throw new RangeError('Set Enum outside numeric range');\n        }\n        return false;\n      }\n      vtkErrorMacro('Set Enum with invalid argument (String/Number) ' + field + ', ' + value);\n      throw new TypeError('Set Enum with invalid argument (String/Number)');\n    };\n  }\n};\n\nfunction findSetter(field) {\n  if ((typeof field === 'undefined' ? 'undefined' : _typeof(field)) === 'object') {\n    var fn = objectSetterMap[field.type];\n    if (fn) {\n      return function (publicAPI, model) {\n        return fn(publicAPI, model, field);\n      };\n    }\n\n    vtkErrorMacro('No setter for field ' + field);\n    throw new TypeError('No setter for field');\n  }\n  return function getSetter(publicAPI, model) {\n    return function setter(value) {\n      if (model.deleted) {\n        vtkErrorMacro('instance deleted - cannot call any method');\n        return false;\n      }\n\n      if (model[field] !== value) {\n        model[field] = value;\n        publicAPI.modified();\n        return true;\n      }\n      return false;\n    };\n  };\n}\n\nfunction set(publicAPI, model, fields) {\n  fields.forEach(function (field) {\n    if ((typeof field === 'undefined' ? 'undefined' : _typeof(field)) === 'object') {\n      publicAPI['set' + capitalize(field.name)] = findSetter(field)(publicAPI, model);\n    } else {\n      publicAPI['set' + capitalize(field)] = findSetter(field)(publicAPI, model);\n    }\n  });\n}\n\n// ----------------------------------------------------------------------------\n// set/get XXX: add both setters and getters\n// ----------------------------------------------------------------------------\n\nfunction setGet(publicAPI, model, fieldNames) {\n  get(publicAPI, model, fieldNames);\n  set(publicAPI, model, fieldNames);\n}\n\n// ----------------------------------------------------------------------------\n// getXXX: add getters for object of type array with copy to be safe\n// getXXXByReference: add getters for object of type array without copy\n// ----------------------------------------------------------------------------\n\nfunction getArray(publicAPI, model, fieldNames) {\n  fieldNames.forEach(function (field) {\n    publicAPI['get' + capitalize(field)] = function () {\n      return [].concat(model[field]);\n    };\n    publicAPI['get' + capitalize(field) + 'ByReference'] = function () {\n      return model[field];\n    };\n  });\n}\n\n// ----------------------------------------------------------------------------\n// setXXX: add setter for object of type array\n// if 'defaultVal' is supplied, shorter arrays will be padded to 'size' with 'defaultVal'\n// set...From: fast path to copy the content of an array to the current one without call to modified.\n// ----------------------------------------------------------------------------\n\nfunction setArray(publicAPI, model, fieldNames, size) {\n  var defaultVal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : undefined;\n\n  fieldNames.forEach(function (field) {\n    publicAPI['set' + capitalize(field)] = function () {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      if (model.deleted) {\n        vtkErrorMacro('instance deleted - cannot call any method');\n        return false;\n      }\n\n      var array = args;\n      // allow an array passed as a single arg.\n      if (array.length === 1 && Array.isArray(array[0])) {\n        /* eslint-disable prefer-destructuring */\n        array = array[0];\n        /* eslint-enable prefer-destructuring */\n      }\n\n      if (array.length !== size) {\n        if (array.length < size && defaultVal !== undefined) {\n          array = [].concat(array);\n          while (array.length < size) {\n            array.push(defaultVal);\n          }\n        } else {\n          throw new RangeError('Invalid number of values for array setter');\n        }\n      }\n      var changeDetected = false;\n      model[field].forEach(function (item, index) {\n        if (item !== array[index]) {\n          if (changeDetected) {\n            return;\n          }\n          changeDetected = true;\n        }\n      });\n\n      if (changeDetected || model[field].length !== array.length) {\n        model[field] = [].concat(array);\n        publicAPI.modified();\n      }\n      return true;\n    };\n\n    publicAPI['set' + capitalize(field) + 'From'] = function (otherArray) {\n      var target = model[field];\n      otherArray.forEach(function (v, i) {\n        target[i] = v;\n      });\n    };\n  });\n}\n\n// ----------------------------------------------------------------------------\n// set/get XXX: add setter and getter for object of type array\n// ----------------------------------------------------------------------------\n\nfunction setGetArray(publicAPI, model, fieldNames, size) {\n  var defaultVal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : undefined;\n\n  getArray(publicAPI, model, fieldNames);\n  setArray(publicAPI, model, fieldNames, size, defaultVal);\n}\n\n// ----------------------------------------------------------------------------\n// vtkAlgorithm: setInputData(), setInputConnection(), getOutputData(), getOutputPort()\n// ----------------------------------------------------------------------------\n\nfunction algo(publicAPI, model, numberOfInputs, numberOfOutputs) {\n  if (model.inputData) {\n    model.inputData = model.inputData.map(_vtk2.default);\n  } else {\n    model.inputData = [];\n  }\n\n  if (model.inputConnection) {\n    model.inputConnection = model.inputConnection.map(_vtk2.default);\n  } else {\n    model.inputConnection = [];\n  }\n\n  if (model.output) {\n    model.output = model.output.map(_vtk2.default);\n  } else {\n    model.output = [];\n  }\n\n  if (model.inputArrayToProcess) {\n    model.inputArrayToProcess = model.inputArrayToProcess.map(_vtk2.default);\n  } else {\n    model.inputArrayToProcess = [];\n  }\n\n  // Cache the argument for later manipulation\n  model.numberOfInputs = numberOfInputs;\n\n  // Methods\n  function setInputData(dataset) {\n    var port = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    if (port >= model.numberOfInputs) {\n      var msg = 'algorithm ' + publicAPI.getClassName() + ' only has ';\n      msg += '' + model.numberOfInputs;\n      msg += ' input ports. To add more input ports, use addInputData()';\n      vtkErrorMacro(msg);\n      return;\n    }\n    if (model.inputData[port] !== dataset || model.inputConnection[port]) {\n      model.inputData[port] = dataset;\n      model.inputConnection[port] = null;\n      if (publicAPI.modified) {\n        publicAPI.modified();\n      }\n    }\n  }\n\n  function getInputData() {\n    var port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    if (model.inputConnection[port]) {\n      model.inputData[port] = model.inputConnection[port]();\n    }\n    return model.inputData[port];\n  }\n\n  function setInputConnection(outputPort) {\n    var port = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    if (port >= model.numberOfInputs) {\n      var msg = 'algorithm ' + publicAPI.getClassName() + ' only has ';\n      msg += '' + model.numberOfInputs;\n      msg += ' input ports. To add more input ports, use addInputConnection()';\n      vtkErrorMacro(msg);\n      return;\n    }\n    model.inputData[port] = null;\n    model.inputConnection[port] = outputPort;\n  }\n\n  function getInputConnection() {\n    var port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    return model.inputConnection[port];\n  }\n\n  function addInputConnection(outputPort) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    model.numberOfInputs++;\n    setInputConnection(outputPort, model.numberOfInputs - 1);\n  }\n\n  function addInputData(dataset) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    model.numberOfInputs++;\n    setInputData(dataset, model.numberOfInputs - 1);\n  }\n\n  function getOutputData() {\n    var port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return null;\n    }\n    if (publicAPI.shouldUpdate()) {\n      publicAPI.update();\n    }\n    return model.output[port];\n  }\n\n  publicAPI.shouldUpdate = function () {\n    var localMTime = model.mtime;\n    var count = numberOfOutputs;\n    var minOutputMTime = Infinity;\n    while (count--) {\n      if (!model.output[count]) {\n        return true;\n      }\n      var mt = model.output[count].getMTime();\n      if (mt < localMTime) {\n        return true;\n      }\n      if (mt < minOutputMTime) {\n        minOutputMTime = mt;\n      }\n    }\n\n    count = model.numberOfInputs;\n    while (count--) {\n      if (model.inputConnection[count] && model.inputConnection[count].filter.shouldUpdate()) {\n        return true;\n      }\n    }\n\n    count = model.numberOfInputs;\n    while (count--) {\n      if (publicAPI.getInputData(count) && publicAPI.getInputData(count).getMTime() > minOutputMTime) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  function getOutputPort() {\n    var port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    var outputPortAccess = function outputPortAccess() {\n      return getOutputData(port);\n    };\n    // Add reference to filter\n    outputPortAccess.filter = publicAPI;\n    return outputPortAccess;\n  }\n\n  // Handle input if needed\n  if (model.numberOfInputs) {\n    // Reserve inputs\n    var count = model.numberOfInputs;\n    while (count--) {\n      model.inputData.push(null);\n      model.inputConnection.push(null);\n    }\n\n    // Expose public methods\n    publicAPI.setInputData = setInputData;\n    publicAPI.setInputConnection = setInputConnection;\n    publicAPI.addInputData = addInputData;\n    publicAPI.addInputConnection = addInputConnection;\n    publicAPI.getInputData = getInputData;\n    publicAPI.getInputConnection = getInputConnection;\n  }\n\n  if (numberOfOutputs) {\n    publicAPI.getOutputData = getOutputData;\n    publicAPI.getOutputPort = getOutputPort;\n  }\n\n  publicAPI.update = function () {\n    var ins = [];\n    if (model.numberOfInputs) {\n      var _count = 0;\n      while (_count < model.numberOfInputs) {\n        ins[_count] = publicAPI.getInputData(_count);\n        _count++;\n      }\n    }\n    if (publicAPI.shouldUpdate() && publicAPI.requestData) {\n      publicAPI.requestData(ins, model.output);\n    }\n  };\n\n  publicAPI.getNumberOfInputPorts = function () {\n    return model.numberOfInputs;\n  };\n  publicAPI.getNumberOfOutputPorts = function () {\n    return numberOfOutputs;\n  };\n\n  publicAPI.getInputArrayToProcess = function (inputPort) {\n    var arrayDesc = model.inputArrayToProcess[inputPort];\n    var ds = model.inputData[inputPort];\n    if (arrayDesc && ds) {\n      return ds['get' + arrayDesc.fieldAssociation]().getArray(arrayDesc.arrayName);\n    }\n    return null;\n  };\n  publicAPI.setInputArrayToProcess = function (inputPort, arrayName, fieldAssociation) {\n    var attributeType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'Scalars';\n\n    while (model.inputArrayToProcess.length < inputPort) {\n      model.inputArrayToProcess.push(null);\n    }\n    model.inputArrayToProcess[inputPort] = {\n      arrayName: arrayName,\n      fieldAssociation: fieldAssociation,\n      attributeType: attributeType\n    };\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Event handling: onXXX(callback), invokeXXX(args...)\n// ----------------------------------------------------------------------------\n\nvar EVENT_ABORT = exports.EVENT_ABORT = Symbol('Event abort');\n\nfunction event(publicAPI, model, eventName) {\n  var callbacks = [];\n  var previousDelete = publicAPI.delete;\n  var curCallbackID = 1;\n\n  function off(callbackID) {\n    for (var i = 0; i < callbacks.length; ++i) {\n      var _callbacks$i = _slicedToArray(callbacks[i], 1),\n          cbID = _callbacks$i[0];\n\n      if (cbID === callbackID) {\n        callbacks.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  function on(callbackID) {\n    function unsubscribe() {\n      off(callbackID);\n    }\n    return Object.freeze({\n      unsubscribe: unsubscribe\n    });\n  }\n\n  function invoke() {\n    var _arguments = arguments;\n\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    /* eslint-disable prefer-rest-params */\n    // Go through a copy of the callbacks array in case new callbacks\n    // get prepended within previous callbacks\n    var currentCallbacks = callbacks.slice();\n\n    var _loop = function _loop(index) {\n      var _currentCallbacks$ind = _slicedToArray(currentCallbacks[index], 3),\n          cb = _currentCallbacks$ind[1],\n          priority = _currentCallbacks$ind[2];\n\n      if (priority < 0) {\n        setTimeout(function () {\n          return cb.apply(publicAPI, _arguments);\n        }, 1 - priority);\n      } else if (cb) {\n        // Abort only if the callback explicitly returns false\n        var continueNext = cb.apply(publicAPI, _arguments);\n        if (continueNext === EVENT_ABORT) {\n          return 'break';\n        }\n      }\n    };\n\n    for (var index = 0; index < currentCallbacks.length; ++index) {\n      var _ret = _loop(index);\n\n      if (_ret === 'break') break;\n    }\n    /* eslint-enable prefer-rest-params */\n  }\n\n  publicAPI['invoke' + capitalize(eventName)] = invoke;\n\n  publicAPI['on' + capitalize(eventName)] = function (callback) {\n    var priority = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0;\n\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return null;\n    }\n\n    var callbackID = curCallbackID++;\n    callbacks.push([callbackID, callback, priority]);\n    callbacks.sort(function (cb1, cb2) {\n      return cb2[2] - cb1[2];\n    });\n    return on(callbackID);\n  };\n\n  publicAPI.delete = function () {\n    previousDelete();\n    callbacks.forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 1),\n          cbID = _ref2[0];\n\n      return off(cbID);\n    });\n  };\n}\n\n// ----------------------------------------------------------------------------\n// newInstance\n// ----------------------------------------------------------------------------\n\nfunction newInstance(extend, className) {\n  var constructor = function constructor() {\n    var initialValues = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var model = {};\n    var publicAPI = {};\n    extend(publicAPI, model, initialValues);\n    return Object.freeze(publicAPI);\n  };\n\n  // Register constructor to factory\n  if (className) {\n    _vtk2.default.register(className, constructor);\n  }\n\n  return constructor;\n}\n\n// ----------------------------------------------------------------------------\n// Chain function calls\n// ----------------------------------------------------------------------------\n\nfunction chain() {\n  for (var _len3 = arguments.length, fn = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    fn[_key3] = arguments[_key3];\n  }\n\n  return function () {\n    for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return fn.filter(function (i) {\n      return !!i;\n    }).forEach(function (i) {\n      return i.apply(undefined, args);\n    });\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Some utility methods for vtk objects\n// ----------------------------------------------------------------------------\n\nfunction isVtkObject(instance) {\n  return instance && instance.isA && instance.isA('vtkObject');\n}\n\nfunction traverseInstanceTree(instance, extractFunction) {\n  var accumulator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var visitedInstances = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n  if (isVtkObject(instance)) {\n    if (visitedInstances.indexOf(instance) >= 0) {\n      // avoid cycles\n      return accumulator;\n    }\n\n    visitedInstances.push(instance);\n    var result = extractFunction(instance);\n    if (result !== undefined) {\n      accumulator.push(result);\n    }\n\n    // Now go through this instance's model\n    var model = instance.get();\n    Object.keys(model).forEach(function (key) {\n      var modelObj = model[key];\n      if (Array.isArray(modelObj)) {\n        modelObj.forEach(function (subObj) {\n          traverseInstanceTree(subObj, extractFunction, accumulator, visitedInstances);\n        });\n      } else {\n        traverseInstanceTree(modelObj, extractFunction, accumulator, visitedInstances);\n      }\n    });\n  }\n\n  return accumulator;\n}\n\n// ----------------------------------------------------------------------------\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n\nfunction debounce(func, wait, immediate) {\n  var _this = this;\n\n  var timeout = void 0;\n  return function () {\n    for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    var context = _this;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Creates a throttled function that only invokes `func` at most once per\n// every `wait` milliseconds.\n\nfunction throttle(callback, delay) {\n  var isThrottled = false;\n  var argsToUse = null;\n\n  function next() {\n    isThrottled = false;\n    if (argsToUse !== null) {\n      wrapper.apply(undefined, _toConsumableArray(argsToUse)); // eslint-disable-line\n      argsToUse = null;\n    }\n  }\n\n  function wrapper() {\n    for (var _len6 = arguments.length, args = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n\n    if (isThrottled) {\n      argsToUse = args;\n      return;\n    }\n    isThrottled = true;\n    callback.apply(undefined, args);\n    setTimeout(next, delay);\n  }\n\n  return wrapper;\n}\n\n// ----------------------------------------------------------------------------\n// keystore(publicAPI, model, initialKeystore)\n//\n//    - initialKeystore: Initial keystore. This can be either a Map or an\n//      object.\n//\n// Generated API\n//  setKey(key, value) : mixed (returns value)\n//  getKey(key) : mixed\n//  getAllKeys() : [mixed]\n//  deleteKey(key) : Boolean\n// ----------------------------------------------------------------------------\n\nfunction keystore(publicAPI, model) {\n  var initialKeystore = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  model.keystore = Object.assign(model.keystore || {}, initialKeystore);\n\n  publicAPI.setKey = function (key, value) {\n    model.keystore[key] = value;\n  };\n  publicAPI.getKey = function (key, value) {\n    return model.keystore[key];\n  };\n  publicAPI.getAllKeys = function (key, value) {\n    return Object.keys(model.keystore);\n  };\n  publicAPI.deleteKey = function (key, value) {\n    return delete model.keystore[key];\n  };\n  publicAPI.clearKeystore = function () {\n    return publicAPI.getAllKeys().forEach(function (key) {\n      return delete model.keystore[key];\n    });\n  };\n}\n\n// ----------------------------------------------------------------------------\n// proxy(publicAPI, model, sectionName, propertyUI)\n//\n//    - sectionName: Name of the section for UI\n//    - propertyUI: List of props with their UI description\n//\n// Generated API\n//  getProxyId() : String\n//  listProxyProperties() : [string]\n//  updateProxyProperty(name, prop)\n//  getProxySection() => List of properties for UI generation\n// ----------------------------------------------------------------------------\nvar nextProxyId = 1;\nvar ROOT_GROUP_NAME = '__root__';\n\nfunction proxy(publicAPI, model) {\n  // Proxies are keystores\n  keystore(publicAPI, model);\n\n  var parentDelete = publicAPI.delete;\n\n  // getProxyId\n  model.proxyId = '' + nextProxyId++;\n\n  // ui handling\n  model.ui = JSON.parse(JSON.stringify(model.ui || [])); // deep copy\n  get(publicAPI, model, ['proxyId', 'proxyGroup', 'proxyName']);\n  setGet(publicAPI, model, ['proxyManager']);\n\n  // group properties\n  var propertyMap = {};\n  var groupChildrenNames = {};\n\n  function registerProperties(descriptionList, currentGroupName) {\n    if (!groupChildrenNames[currentGroupName]) {\n      groupChildrenNames[currentGroupName] = [];\n    }\n    var childrenNames = groupChildrenNames[currentGroupName];\n\n    for (var i = 0; i < descriptionList.length; i++) {\n      childrenNames.push(descriptionList[i].name);\n      propertyMap[descriptionList[i].name] = descriptionList[i];\n      if (descriptionList[i].children && descriptionList[i].children.length) {\n        registerProperties(descriptionList[i].children, descriptionList[i].name);\n      }\n    }\n  }\n  registerProperties(model.ui, ROOT_GROUP_NAME);\n\n  publicAPI.updateUI = function (ui) {\n    model.ui = JSON.parse(JSON.stringify(ui || [])); // deep copy\n    Object.keys(propertyMap).forEach(function (k) {\n      return delete propertyMap[k];\n    });\n    Object.keys(groupChildrenNames).forEach(function (k) {\n      return delete groupChildrenNames[k];\n    });\n    registerProperties(model.ui, ROOT_GROUP_NAME);\n    publicAPI.modified();\n  };\n\n  function listProxyProperties() {\n    var gName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ROOT_GROUP_NAME;\n\n    return groupChildrenNames[gName];\n  }\n\n  publicAPI.updateProxyProperty = function (propertyName, propUI) {\n    var prop = propertyMap[propertyName];\n    if (prop) {\n      Object.assign(prop, propUI);\n    }\n  };\n\n  publicAPI.activate = function () {\n    if (model.proxyManager) {\n      var setActiveMethod = 'setActive' + capitalize(publicAPI.getProxyGroup().slice(0, -1));\n      if (model.proxyManager[setActiveMethod]) {\n        model.proxyManager[setActiveMethod](publicAPI);\n      }\n    }\n  };\n\n  // property link\n  model.propertyLinkSubscribers = [];\n  publicAPI.registerPropertyLinkForGC = function (otherLink) {\n    model.propertyLinkSubscribers.push(otherLink);\n  };\n\n  publicAPI.gcPropertyLinks = function () {\n    while (model.propertyLinkSubscribers.length) {\n      model.propertyLinkSubscribers.pop().unbind(publicAPI);\n    }\n  };\n\n  model.propertyLinkMap = {};\n  publicAPI.getPropertyLink = function (id) {\n    if (model.propertyLinkMap[id]) {\n      return model.propertyLinkMap[id];\n    }\n    var value = null;\n    var links = [];\n    var count = 0;\n    var updateInProgress = false;\n\n    function update(source) {\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (updateInProgress) {\n        return null;\n      }\n\n      var needUpdate = [];\n      var sourceLink = null;\n      count = links.length;\n      while (count--) {\n        var link = links[count];\n        if (link.instance === source) {\n          sourceLink = link;\n        } else {\n          needUpdate.push(link);\n        }\n      }\n\n      var newValue = sourceLink.instance['get' + capitalize(sourceLink.propertyName)]();\n      if (newValue !== value || force) {\n        value = newValue;\n        updateInProgress = true;\n        while (needUpdate.length) {\n          var linkToUpdate = needUpdate.pop();\n          linkToUpdate.instance.set(_defineProperty({}, linkToUpdate.propertyName, value));\n        }\n        updateInProgress = false;\n      }\n      return newValue;\n    }\n\n    function unbind(instance, propertyName) {\n      var indexToDelete = [];\n      count = links.length;\n      while (count--) {\n        var link = links[count];\n        if (link.instance === instance && (link.propertyName === propertyName || propertyName === undefined)) {\n          link.subscription.unsubscribe();\n          indexToDelete.push(count);\n        }\n      }\n      while (indexToDelete.length) {\n        links.splice(indexToDelete.pop(), 1);\n      }\n    }\n\n    function bind(instance, propertyName) {\n      var updateMe = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var subscription = instance.onModified(update);\n      var other = links[0];\n      links.push({\n        instance: instance,\n        propertyName: propertyName,\n        subscription: subscription\n      });\n      if (updateMe && other) {\n        update(other.instance, true);\n      }\n      return {\n        unsubscribe: function unsubscribe() {\n          return unbind(instance, propertyName);\n        }\n      };\n    }\n\n    function unsubscribe() {\n      while (links.length) {\n        links.pop().subscription.unsubscribe();\n      }\n    }\n\n    var linkHandler = {\n      bind: bind,\n      unbind: unbind,\n      unsubscribe: unsubscribe\n    };\n    model.propertyLinkMap[id] = linkHandler;\n    return linkHandler;\n  };\n\n  // extract values\n  function getProperties() {\n    var groupName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ROOT_GROUP_NAME;\n\n    var values = [];\n    var id = model.proxyId;\n    var propertyNames = listProxyProperties(groupName) || [];\n    for (var i = 0; i < propertyNames.length; i++) {\n      var name = propertyNames[i];\n      var method = publicAPI['get' + capitalize(name)];\n      var value = method ? method() : undefined;\n      var prop = {\n        id: id,\n        name: name,\n        value: value\n      };\n      var children = getProperties(name);\n      if (children.length) {\n        prop.children = children;\n      }\n      values.push(prop);\n    }\n    return values;\n  }\n\n  publicAPI.listPropertyNames = function () {\n    return getProperties().map(function (p) {\n      return p.name;\n    });\n  };\n\n  publicAPI.getPropertyByName = function (name) {\n    return getProperties().find(function (p) {\n      return p.name === name;\n    });\n  };\n\n  // ui section\n  publicAPI.getProxySection = function () {\n    return {\n      id: model.proxyId,\n      name: model.proxyGroup,\n      ui: model.ui,\n      properties: getProperties()\n    };\n  };\n\n  // free resources\n  publicAPI.delete = function () {\n    var list = Object.keys(model.propertyLinkMap);\n    var count = list.length;\n    while (count--) {\n      model.propertyLinkMap[list[count]].unsubscribe();\n    }\n    count = model.propertyLinkSubscribers.length;\n    while (count--) {\n      model.propertyLinkSubscribers[count].unbind(publicAPI);\n    }\n    parentDelete();\n  };\n}\n\n// ----------------------------------------------------------------------------\n// proxyPropertyMapping(publicAPI, model, map)\n//\n//   map = {\n//      opacity: { modelKey: 'property', property: 'opacity' },\n//   }\n//\n// Generated API:\n//  Elevate set/get methods from internal object stored in the model to current one\n// ----------------------------------------------------------------------------\n\nfunction proxyPropertyMapping(publicAPI, model, map) {\n  var parentDelete = publicAPI.delete;\n  var subscriptions = [];\n\n  var propertyNames = Object.keys(map);\n  var count = propertyNames.length;\n  while (count--) {\n    var propertyName = propertyNames[count];\n    var _map$propertyName = map[propertyName],\n        modelKey = _map$propertyName.modelKey,\n        property = _map$propertyName.property;\n\n    var methodSrc = capitalize(property);\n    var methodDst = capitalize(propertyName);\n    publicAPI['get' + methodDst] = model[modelKey]['get' + methodSrc];\n    publicAPI['set' + methodDst] = model[modelKey]['set' + methodSrc];\n    subscriptions.push(model[modelKey].onModified(publicAPI.modified));\n  }\n\n  publicAPI.delete = function () {\n    while (subscriptions.length) {\n      subscriptions.pop().unsubscribe();\n    }\n    parentDelete();\n  };\n}\n\n// ----------------------------------------------------------------------------\n// proxyPropertyState(publicAPI, model, state, defaults)\n//\n//   state = {\n//     representation: {\n//       'Surface with edges': { property: { edgeVisibility: true, representation: 2 } },\n//       Surface: { property: { edgeVisibility: false, representation: 2 } },\n//       Wireframe: { property: { edgeVisibility: false, representation: 1 } },\n//       Points: { property: { edgeVisibility: false, representation: 0 } },\n//     },\n//   }\n//\n//   defaults = {\n//      representation: 'Surface',\n//   }\n//\n// Generated API\n//   get / set Representation ( string ) => push state to various internal objects\n// ----------------------------------------------------------------------------\n\nfunction proxyPropertyState(publicAPI, model) {\n  var state = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var defaults = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  model.this = publicAPI;\n\n  function applyState(map) {\n    var modelKeys = Object.keys(map);\n    var count = modelKeys.length;\n    while (count--) {\n      var modelKey = modelKeys[count];\n      model[modelKey].set(map[modelKey]);\n    }\n  }\n\n  var modelKeys = Object.keys(defaults);\n  var count = modelKeys.length;\n\n  var _loop2 = function _loop2() {\n    // Add default\n    var key = modelKeys[count];\n    model[key] = defaults[key];\n\n    // Add set method\n    var mapping = state[key];\n    publicAPI['set' + capitalize(key)] = function (value) {\n      if (value !== model[key]) {\n        model[key] = value;\n        var propValues = mapping[value];\n        applyState(propValues);\n        publicAPI.modified();\n      }\n    };\n  };\n\n  while (count--) {\n    _loop2();\n  }\n\n  // Add getter\n  if (modelKeys.length) {\n    get(publicAPI, model, modelKeys);\n  }\n}\n\n// ----------------------------------------------------------------------------\n// Default export\n// ----------------------------------------------------------------------------\n\nexports.default = {\n  EVENT_ABORT: EVENT_ABORT,\n  VOID: VOID,\n  algo: algo,\n  capitalize: capitalize,\n  chain: chain,\n  enumToString: enumToString,\n  event: event,\n  get: get,\n  getArray: getArray,\n  getCurrentGlobalMTime: getCurrentGlobalMTime,\n  getStateArrayMapFunc: getStateArrayMapFunc,\n  isVtkObject: isVtkObject,\n  keystore: keystore,\n  newInstance: newInstance,\n  obj: obj,\n  safeArrays: safeArrays,\n  set: set,\n  setArray: setArray,\n  setGet: setGet,\n  setGetArray: setGetArray,\n  setLoggerFunction: setLoggerFunction,\n  traverseInstanceTree: traverseInstanceTree,\n  vtkDebugMacro: vtkDebugMacro,\n  vtkErrorMacro: vtkErrorMacro,\n  vtkInfoMacro: vtkInfoMacro,\n  vtkLogMacro: vtkLogMacro,\n  vtkWarningMacro: vtkWarningMacro,\n  debounce: debounce,\n  throttle: throttle,\n  proxy: proxy,\n  proxyPropertyMapping: proxyPropertyMapping,\n  proxyPropertyState: proxyPropertyState\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(7)))\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = vtk;\nvar factoryMapping = {\n  vtkObject: function vtkObject() {\n    return null;\n  }\n};\n\nfunction vtk(obj) {\n  if (obj === null || obj === undefined) {\n    return obj;\n  }\n  if (obj.isA) {\n    return obj;\n  }\n  if (!obj.vtkClass) {\n    if (global.console && global.console.error) {\n      global.console.error('Invalid VTK object');\n    }\n    return null;\n  }\n  var constructor = factoryMapping[obj.vtkClass];\n  if (!constructor) {\n    if (global.console && global.console.error) {\n      global.console.error('No vtk class found for Object of type ' + obj.vtkClass);\n    }\n    return null;\n  }\n\n  // Shallow copy object\n  var model = Object.assign({}, obj);\n\n  // Convert into vtkObject any nested key\n  Object.keys(model).forEach(function (keyName) {\n    if (model[keyName] && _typeof(model[keyName]) === 'object' && model[keyName].vtkClass) {\n      model[keyName] = vtk(model[keyName]);\n    }\n  });\n\n  // Return the root\n  var newInst = constructor(model);\n  if (newInst && newInst.modified) {\n    newInst.modified();\n  }\n  return newInst;\n}\n\nfunction register(vtkClassName, constructor) {\n  factoryMapping[vtkClassName] = constructor;\n}\n\n// Nest register method under the vtk function\nvtk.register = register;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(7)))\n\n/***/ })\n/******/ ]);",null)}},function(e,n,t){"use strict";var r=window.URL||window.webkitURL;e.exports=function(e,n){try{try{var t;try{var a=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;t=new a,t.append(e),t=t.getBlob()}catch(n){t=new Blob([e])}return new Worker(r.createObjectURL(t))}catch(n){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!n)throw Error("Inline worker is not supported");return new Worker(n)}}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLViewNodeFactory")}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,U,t),d.default.extend(e,n,t),a(e,n),e.registerOverride("vtkActor",m.default.newInstance),e.registerOverride("vtkActor2D",v.default.newInstance),e.registerOverride("vtkCamera",h.default.newInstance),e.registerOverride("vtkGlyph3DMapper",y.default.newInstance),e.registerOverride("vtkImageMapper",T.default.newInstance),e.registerOverride("vtkImageSlice",A.default.newInstance),e.registerOverride("vtkMapper",O.default.newInstance),e.registerOverride("vtkPixelSpaceCallbackMapper",C.default.newInstance),e.registerOverride("vtkRenderWindow",S.default.newInstance),e.registerOverride("vtkRenderer",E.default.newInstance),e.registerOverride("vtkSphereMapper",N.default.newInstance),e.registerOverride("vtkStickMapper",V.default.newInstance),e.registerOverride("vtkTexture",L.default.newInstance),e.registerOverride("vtkVolume",z.default.newInstance),e.registerOverride("vtkVolumeMapper",B.default.newInstance),e.registerOverride("vtkWidgetRepresentation",l.default.newInstance)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(62),l=r(s),c=t(63),d=r(c),f=t(64),m=r(f),p=t(70),v=r(p),g=t(71),h=r(g),b=t(72),y=r(b),x=t(90),T=r(x),_=t(92),A=r(_),w=t(93),C=r(w),M=t(18),O=r(M),I=t(27),S=r(I),P=t(94),E=r(P),R=t(95),N=r(R),D=t(97),V=r(D),k=t(12),L=r(k),F=t(99),z=r(F),j=t(100),B=r(j),U={},q=n.newInstance=u.default.newInstance(o,"vtkOpenGLViewNodeFactory");n.default={newInstance:q,extend:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkGenericWidgetRepresentation")}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,c,t),l.default.extend(e,n,t),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(3),l=r(s),c={},d=n.newInstance=u.default.newInstance(o);n.default={newInstance:d,extend:o}},function(e,n,t){"use strict";function r(e,n){n.overrides={},n.classHierarchy.push("vtkViewNodeFactory"),e.createNode=function(t){if(t.isDeleted())return null;for(var r=0,a=t.getClassName(r++),o=!1,i=Object.keys(n.overrides);a&&!o;)-1!==i.indexOf(a)?o=!0:a=t.getClassName(r++);if(!o)return null;var u=n.overrides[a]();return u.setMyFactory(e),u},e.registerOverride=function(e,t){n.overrides[e]=t}}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,u,t),i.default.obj(e,n),r(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=a;var o=t(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u={},s=n.newInstance=i.default.newInstance(a,"vtkViewNodeFactory");n.default={newInstance:s,extend:a}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLActor"),e.buildPass=function(t){if(t){n.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),n.context=n.openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNodes(n.renderable.getTextures()),e.addMissingNode(n.renderable.getMapper()),e.removeUnusedNodes(),n.ogltextures=null,n.activeTextures=null;for(var r=0;r<n.children.length;r++){var a=n.children[r];a.isA("vtkOpenGLTexture")?(n.ogltextures||(n.ogltextures=[]),n.ogltextures.push(a)):n.oglmapper=a}}},e.traverseOpaqueZBufferPass=function(n){e.traverseOpaquePass(n)},e.traverseOpaquePass=function(t){n.renderable&&n.renderable.getVisibility()&&n.renderable.getIsOpaque()&&(e.apply(t,!0),n.oglmapper.traverse(t),e.apply(t,!1))},e.traverseTranslucentPass=function(t){n.renderable&&n.renderable.getVisibility()&&!n.renderable.getIsOpaque()&&(e.apply(t,!0),n.oglmapper.traverse(t),e.apply(t,!1))},e.activateTextures=function(){if(n.ogltextures){n.activeTextures=[];for(var e=0;e<n.ogltextures.length;e++){var t=n.ogltextures[e];t.render(),t.getHandle()&&n.activeTextures.push(t)}}},e.queryPass=function(e,t){if(e){if(!n.renderable||!n.renderable.getVisibility())return;n.renderable.getIsOpaque()?t.incrementOpaqueActorCount():t.incrementTranslucentActorCount()}},e.opaqueZBufferPass=function(n,t){return e.opaquePass(n,t)},e.opaquePass=function(t,r){if(t)n.openGLRenderWindow.enableDepthMask(),e.activateTextures();else if(n.activeTextures)for(var a=0;a<n.activeTextures.length;a++)n.activeTextures[a].deactivate()},e.translucentPass=function(t,r){if(t)n.openGLRenderWindow.disableDepthMask(),e.activateTextures();else if(n.activeTextures)for(var a=0;a<n.activeTextures.length;a++)n.activeTextures[a].deactivate()},e.getKeyMatrices=function(){return n.renderable.getMTime()>n.keyMatrixTime.getMTime()&&(n.renderable.computeMatrix(),i.mat4.copy(n.keyMatrices.mcwc,n.renderable.getMatrix()),i.mat4.transpose(n.keyMatrices.mcwc,n.keyMatrices.mcwc),n.renderable.getIsIdentity()?i.mat3.identity(n.keyMatrices.normalMatrix):(i.mat3.fromMat4(n.keyMatrices.normalMatrix,n.keyMatrices.mcwc),i.mat3.invert(n.keyMatrices.normalMatrix,n.keyMatrices.normalMatrix)),n.keyMatrixTime.modified()),n.keyMatrices}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,d,t),c.default.extend(e,n,t),n.keyMatrixTime={},s.default.obj(n.keyMatrixTime,{mtime:0}),n.keyMatrices={normalMatrix:i.mat3.create(),mcwc:i.mat4.create()},s.default.setGet(e,n,["context"]),s.default.get(e,n,["activeTextures"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(2),u=t(0),s=r(u),l=t(3),c=r(l),d={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null},f=n.newInstance=s.default.newInstance(o);n.default={newInstance:f,extend:o}},function(e,n,t){"use strict";var r=t(6),a={};a.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},a.clone=function(e){var n=new r.ARRAY_TYPE(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},a.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},a.transpose=function(e,n){if(e===n){var t=n[1];e[1]=n[2],e[2]=t}else e[0]=n[0],e[1]=n[2],e[2]=n[1],e[3]=n[3];return e},a.invert=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=t*o-a*r;return i?(i=1/i,e[0]=o*i,e[1]=-r*i,e[2]=-a*i,e[3]=t*i,e):null},a.adjoint=function(e,n){var t=n[0];return e[0]=n[3],e[1]=-n[1],e[2]=-n[2],e[3]=t,e},a.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},a.multiply=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=t[0],s=t[1],l=t[2],c=t[3];return e[0]=r*u+o*s,e[1]=a*u+i*s,e[2]=r*l+o*c,e[3]=a*l+i*c,e},a.mul=a.multiply,a.rotate=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(t),s=Math.cos(t);return e[0]=r*s+o*u,e[1]=a*s+i*u,e[2]=r*-u+o*s,e[3]=a*-u+i*s,e},a.scale=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=t[0],s=t[1];return e[0]=r*u,e[1]=a*u,e[2]=o*s,e[3]=i*s,e},a.fromRotation=function(e,n){var t=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=t,e[2]=-t,e[3]=r,e},a.fromScaling=function(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=n[1],e},a.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},a.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},a.LDU=function(e,n,t,r){return e[2]=r[2]/r[0],t[0]=r[0],t[1]=r[1],t[3]=r[3]-e[2]*t[1],[e,n,t]},e.exports=a},function(e,n,t){"use strict";var r=t(6),a={};a.create=function(){var e=new r.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},a.clone=function(e){var n=new r.ARRAY_TYPE(6);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n},a.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},a.invert=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=t*o-r*a;return s?(s=1/s,e[0]=o*s,e[1]=-r*s,e[2]=-a*s,e[3]=t*s,e[4]=(a*u-o*i)*s,e[5]=(r*i-t*u)*s,e):null},a.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},a.multiply=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=t[0],c=t[1],d=t[2],f=t[3],m=t[4],p=t[5];return e[0]=r*l+o*c,e[1]=a*l+i*c,e[2]=r*d+o*f,e[3]=a*d+i*f,e[4]=r*m+o*p+u,e[5]=a*m+i*p+s,e},a.mul=a.multiply,a.rotate=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=Math.sin(t),c=Math.cos(t);return e[0]=r*c+o*l,e[1]=a*c+i*l,e[2]=r*-l+o*c,e[3]=a*-l+i*c,e[4]=u,e[5]=s,e},a.scale=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=t[0],c=t[1];return e[0]=r*l,e[1]=a*l,e[2]=o*c,e[3]=i*c,e[4]=u,e[5]=s,e},a.translate=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=t[0],c=t[1];return e[0]=r,e[1]=a,e[2]=o,e[3]=i,e[4]=r*l+o*c+u,e[5]=a*l+i*c+s,e},a.fromRotation=function(e,n){var t=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=t,e[2]=-t,e[3]=r,e[4]=0,e[5]=0,e},a.fromScaling=function(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=n[1],e[4]=0,e[5]=0,e},a.fromTranslation=function(e,n){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=n[0],e[5]=n[1],e},a.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},a.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},e.exports=a},function(e,n,t){"use strict";var r=t(6),a={};a.create=function(){var e=new r.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.clone=function(e){var n=new r.ARRAY_TYPE(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},a.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.transpose=function(e,n){if(e===n){var t=n[1],r=n[2],a=n[3],o=n[6],i=n[7],u=n[11];e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=t,e[6]=n[9],e[7]=n[13],e[8]=r,e[9]=o,e[11]=n[14],e[12]=a,e[13]=i,e[14]=u}else e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=n[1],e[5]=n[5],e[6]=n[9],e[7]=n[13],e[8]=n[2],e[9]=n[6],e[10]=n[10],e[11]=n[14],e[12]=n[3],e[13]=n[7],e[14]=n[11],e[15]=n[15];return e},a.invert=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],l=n[7],c=n[8],d=n[9],f=n[10],m=n[11],p=n[12],v=n[13],g=n[14],h=n[15],b=t*u-r*i,y=t*s-a*i,x=t*l-o*i,T=r*s-a*u,_=r*l-o*u,A=a*l-o*s,w=c*v-d*p,C=c*g-f*p,M=c*h-m*p,O=d*g-f*v,I=d*h-m*v,S=f*h-m*g,P=b*S-y*I+x*O+T*M-_*C+A*w;return P?(P=1/P,e[0]=(u*S-s*I+l*O)*P,e[1]=(a*I-r*S-o*O)*P,e[2]=(v*A-g*_+h*T)*P,e[3]=(f*_-d*A-m*T)*P,e[4]=(s*M-i*S-l*C)*P,e[5]=(t*S-a*M+o*C)*P,e[6]=(g*x-p*A-h*y)*P,e[7]=(c*A-f*x+m*y)*P,e[8]=(i*I-u*M+l*w)*P,e[9]=(r*M-t*I-o*w)*P,e[10]=(p*_-v*x+h*b)*P,e[11]=(d*x-c*_-m*b)*P,e[12]=(u*C-i*O-s*w)*P,e[13]=(t*O-r*C+a*w)*P,e[14]=(v*y-p*T-g*b)*P,e[15]=(c*T-d*y+f*b)*P,e):null},a.adjoint=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],l=n[7],c=n[8],d=n[9],f=n[10],m=n[11],p=n[12],v=n[13],g=n[14],h=n[15];return e[0]=u*(f*h-m*g)-d*(s*h-l*g)+v*(s*m-l*f),e[1]=-(r*(f*h-m*g)-d*(a*h-o*g)+v*(a*m-o*f)),e[2]=r*(s*h-l*g)-u*(a*h-o*g)+v*(a*l-o*s),e[3]=-(r*(s*m-l*f)-u*(a*m-o*f)+d*(a*l-o*s)),e[4]=-(i*(f*h-m*g)-c*(s*h-l*g)+p*(s*m-l*f)),e[5]=t*(f*h-m*g)-c*(a*h-o*g)+p*(a*m-o*f),e[6]=-(t*(s*h-l*g)-i*(a*h-o*g)+p*(a*l-o*s)),e[7]=t*(s*m-l*f)-i*(a*m-o*f)+c*(a*l-o*s),e[8]=i*(d*h-m*v)-c*(u*h-l*v)+p*(u*m-l*d),e[9]=-(t*(d*h-m*v)-c*(r*h-o*v)+p*(r*m-o*d)),e[10]=t*(u*h-l*v)-i*(r*h-o*v)+p*(r*l-o*u),e[11]=-(t*(u*m-l*d)-i*(r*m-o*d)+c*(r*l-o*u)),e[12]=-(i*(d*g-f*v)-c*(u*g-s*v)+p*(u*f-s*d)),e[13]=t*(d*g-f*v)-c*(r*g-a*v)+p*(r*f-a*d),e[14]=-(t*(u*g-s*v)-i*(r*g-a*v)+p*(r*s-a*u)),e[15]=t*(u*f-s*d)-i*(r*f-a*d)+c*(r*s-a*u),e},a.determinant=function(e){var n=e[0],t=e[1],r=e[2],a=e[3],o=e[4],i=e[5],u=e[6],s=e[7],l=e[8],c=e[9],d=e[10],f=e[11],m=e[12],p=e[13],v=e[14],g=e[15];return(n*i-t*o)*(d*g-f*v)-(n*u-r*o)*(c*g-f*p)+(n*s-a*o)*(c*v-d*p)+(t*u-r*i)*(l*g-f*m)-(t*s-a*i)*(l*v-d*m)+(r*s-a*u)*(l*p-c*m)},a.multiply=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=n[6],c=n[7],d=n[8],f=n[9],m=n[10],p=n[11],v=n[12],g=n[13],h=n[14],b=n[15],y=t[0],x=t[1],T=t[2],_=t[3];return e[0]=y*r+x*u+T*d+_*v,e[1]=y*a+x*s+T*f+_*g,e[2]=y*o+x*l+T*m+_*h,e[3]=y*i+x*c+T*p+_*b,y=t[4],x=t[5],T=t[6],_=t[7],e[4]=y*r+x*u+T*d+_*v,e[5]=y*a+x*s+T*f+_*g,e[6]=y*o+x*l+T*m+_*h,e[7]=y*i+x*c+T*p+_*b,y=t[8],x=t[9],T=t[10],_=t[11],e[8]=y*r+x*u+T*d+_*v,e[9]=y*a+x*s+T*f+_*g,e[10]=y*o+x*l+T*m+_*h,e[11]=y*i+x*c+T*p+_*b,y=t[12],x=t[13],T=t[14],_=t[15],e[12]=y*r+x*u+T*d+_*v,e[13]=y*a+x*s+T*f+_*g,e[14]=y*o+x*l+T*m+_*h,e[15]=y*i+x*c+T*p+_*b,e},a.mul=a.multiply,a.translate=function(e,n,t){var r,a,o,i,u,s,l,c,d,f,m,p,v=t[0],g=t[1],h=t[2];return n===e?(e[12]=n[0]*v+n[4]*g+n[8]*h+n[12],e[13]=n[1]*v+n[5]*g+n[9]*h+n[13],e[14]=n[2]*v+n[6]*g+n[10]*h+n[14],e[15]=n[3]*v+n[7]*g+n[11]*h+n[15]):(r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],l=n[6],c=n[7],d=n[8],f=n[9],m=n[10],p=n[11],e[0]=r,e[1]=a,e[2]=o,e[3]=i,e[4]=u,e[5]=s,e[6]=l,e[7]=c,e[8]=d,e[9]=f,e[10]=m,e[11]=p,e[12]=r*v+u*g+d*h+n[12],e[13]=a*v+s*g+f*h+n[13],e[14]=o*v+l*g+m*h+n[14],e[15]=i*v+c*g+p*h+n[15]),e},a.scale=function(e,n,t){var r=t[0],a=t[1],o=t[2];return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e[4]=n[4]*a,e[5]=n[5]*a,e[6]=n[6]*a,e[7]=n[7]*a,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=n[11]*o,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},a.rotate=function(e,n,t,a){var o,i,u,s,l,c,d,f,m,p,v,g,h,b,y,x,T,_,A,w,C,M,O,I,S=a[0],P=a[1],E=a[2],R=Math.sqrt(S*S+P*P+E*E);return Math.abs(R)<r.EPSILON?null:(R=1/R,S*=R,P*=R,E*=R,o=Math.sin(t),i=Math.cos(t),u=1-i,s=n[0],l=n[1],c=n[2],d=n[3],f=n[4],m=n[5],p=n[6],v=n[7],g=n[8],h=n[9],b=n[10],y=n[11],x=S*S*u+i,T=P*S*u+E*o,_=E*S*u-P*o,A=S*P*u-E*o,w=P*P*u+i,C=E*P*u+S*o,M=S*E*u+P*o,O=P*E*u-S*o,I=E*E*u+i,e[0]=s*x+f*T+g*_,e[1]=l*x+m*T+h*_,e[2]=c*x+p*T+b*_,e[3]=d*x+v*T+y*_,e[4]=s*A+f*w+g*C,e[5]=l*A+m*w+h*C,e[6]=c*A+p*w+b*C,e[7]=d*A+v*w+y*C,e[8]=s*M+f*O+g*I,e[9]=l*M+m*O+h*I,e[10]=c*M+p*O+b*I,e[11]=d*M+v*O+y*I,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},a.rotateX=function(e,n,t){var r=Math.sin(t),a=Math.cos(t),o=n[4],i=n[5],u=n[6],s=n[7],l=n[8],c=n[9],d=n[10],f=n[11];return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[4]=o*a+l*r,e[5]=i*a+c*r,e[6]=u*a+d*r,e[7]=s*a+f*r,e[8]=l*a-o*r,e[9]=c*a-i*r,e[10]=d*a-u*r,e[11]=f*a-s*r,e},a.rotateY=function(e,n,t){var r=Math.sin(t),a=Math.cos(t),o=n[0],i=n[1],u=n[2],s=n[3],l=n[8],c=n[9],d=n[10],f=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=o*a-l*r,e[1]=i*a-c*r,e[2]=u*a-d*r,e[3]=s*a-f*r,e[8]=o*r+l*a,e[9]=i*r+c*a,e[10]=u*r+d*a,e[11]=s*r+f*a,e},a.rotateZ=function(e,n,t){var r=Math.sin(t),a=Math.cos(t),o=n[0],i=n[1],u=n[2],s=n[3],l=n[4],c=n[5],d=n[6],f=n[7];return n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=o*a+l*r,e[1]=i*a+c*r,e[2]=u*a+d*r,e[3]=s*a+f*r,e[4]=l*a-o*r,e[5]=c*a-i*r,e[6]=d*a-u*r,e[7]=f*a-s*r,e},a.fromTranslation=function(e,n){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},a.fromScaling=function(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=n[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.fromRotation=function(e,n,t){var a,o,i,u=t[0],s=t[1],l=t[2],c=Math.sqrt(u*u+s*s+l*l);return Math.abs(c)<r.EPSILON?null:(c=1/c,u*=c,s*=c,l*=c,a=Math.sin(n),o=Math.cos(n),i=1-o,e[0]=u*u*i+o,e[1]=s*u*i+l*a,e[2]=l*u*i-s*a,e[3]=0,e[4]=u*s*i-l*a,e[5]=s*s*i+o,e[6]=l*s*i+u*a,e[7]=0,e[8]=u*l*i+s*a,e[9]=s*l*i-u*a,e[10]=l*l*i+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},a.fromXRotation=function(e,n){var t=Math.sin(n),r=Math.cos(n);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=t,e[7]=0,e[8]=0,e[9]=-t,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.fromYRotation=function(e,n){var t=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=0,e[2]=-t,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=t,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.fromZRotation=function(e,n){var t=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=t,e[2]=0,e[3]=0,e[4]=-t,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.fromRotationTranslation=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=r+r,s=a+a,l=o+o,c=r*u,d=r*s,f=r*l,m=a*s,p=a*l,v=o*l,g=i*u,h=i*s,b=i*l;return e[0]=1-(m+v),e[1]=d+b,e[2]=f-h,e[3]=0,e[4]=d-b,e[5]=1-(c+v),e[6]=p+g,e[7]=0,e[8]=f+h,e[9]=p-g,e[10]=1-(c+m),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},a.fromRotationTranslationScale=function(e,n,t,r){var a=n[0],o=n[1],i=n[2],u=n[3],s=a+a,l=o+o,c=i+i,d=a*s,f=a*l,m=a*c,p=o*l,v=o*c,g=i*c,h=u*s,b=u*l,y=u*c,x=r[0],T=r[1],_=r[2];return e[0]=(1-(p+g))*x,e[1]=(f+y)*x,e[2]=(m-b)*x,e[3]=0,e[4]=(f-y)*T,e[5]=(1-(d+g))*T,e[6]=(v+h)*T,e[7]=0,e[8]=(m+b)*_,e[9]=(v-h)*_,e[10]=(1-(d+p))*_,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},a.fromRotationTranslationScaleOrigin=function(e,n,t,r,a){var o=n[0],i=n[1],u=n[2],s=n[3],l=o+o,c=i+i,d=u+u,f=o*l,m=o*c,p=o*d,v=i*c,g=i*d,h=u*d,b=s*l,y=s*c,x=s*d,T=r[0],_=r[1],A=r[2],w=a[0],C=a[1],M=a[2];return e[0]=(1-(v+h))*T,e[1]=(m+x)*T,e[2]=(p-y)*T,e[3]=0,e[4]=(m-x)*_,e[5]=(1-(f+h))*_,e[6]=(g+b)*_,e[7]=0,e[8]=(p+y)*A,e[9]=(g-b)*A,e[10]=(1-(f+v))*A,e[11]=0,e[12]=t[0]+w-(e[0]*w+e[4]*C+e[8]*M),e[13]=t[1]+C-(e[1]*w+e[5]*C+e[9]*M),e[14]=t[2]+M-(e[2]*w+e[6]*C+e[10]*M),e[15]=1,e},a.fromQuat=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=t+t,u=r+r,s=a+a,l=t*i,c=r*i,d=r*u,f=a*i,m=a*u,p=a*s,v=o*i,g=o*u,h=o*s;return e[0]=1-d-p,e[1]=c+h,e[2]=f-g,e[3]=0,e[4]=c-h,e[5]=1-l-p,e[6]=m+v,e[7]=0,e[8]=f+g,e[9]=m-v,e[10]=1-l-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.frustum=function(e,n,t,r,a,o,i){var u=1/(t-n),s=1/(a-r),l=1/(o-i);return e[0]=2*o*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*s,e[6]=0,e[7]=0,e[8]=(t+n)*u,e[9]=(a+r)*s,e[10]=(i+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*o*2*l,e[15]=0,e},a.perspective=function(e,n,t,r,a){var o=1/Math.tan(n/2),i=1/(r-a);return e[0]=o/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+r)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*r*i,e[15]=0,e},a.perspectiveFromFieldOfView=function(e,n,t,r){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),s=2/(i+u),l=2/(a+o);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(i-u)*s*.5,e[9]=(a-o)*l*.5,e[10]=r/(t-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*t/(t-r),e[15]=0,e},a.ortho=function(e,n,t,r,a,o,i){var u=1/(n-t),s=1/(r-a),l=1/(o-i);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(n+t)*u,e[13]=(a+r)*s,e[14]=(i+o)*l,e[15]=1,e},a.lookAt=function(e,n,t,o){var i,u,s,l,c,d,f,m,p,v,g=n[0],h=n[1],b=n[2],y=o[0],x=o[1],T=o[2],_=t[0],A=t[1],w=t[2];return Math.abs(g-_)<r.EPSILON&&Math.abs(h-A)<r.EPSILON&&Math.abs(b-w)<r.EPSILON?a.identity(e):(f=g-_,m=h-A,p=b-w,v=1/Math.sqrt(f*f+m*m+p*p),f*=v,m*=v,p*=v,i=x*p-T*m,u=T*f-y*p,s=y*m-x*f,v=Math.sqrt(i*i+u*u+s*s),v?(v=1/v,i*=v,u*=v,s*=v):(i=0,u=0,s=0),l=m*s-p*u,c=p*i-f*s,d=f*u-m*i,v=Math.sqrt(l*l+c*c+d*d),v?(v=1/v,l*=v,c*=v,d*=v):(l=0,c=0,d=0),e[0]=i,e[1]=l,e[2]=f,e[3]=0,e[4]=u,e[5]=c,e[6]=m,e[7]=0,e[8]=s,e[9]=d,e[10]=p,e[11]=0,e[12]=-(i*g+u*h+s*b),e[13]=-(l*g+c*h+d*b),e[14]=-(f*g+m*h+p*b),e[15]=1,e)},a.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},a.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},e.exports=a},function(e,n,t){"use strict";var r=t(6),a=t(29),o=t(30),i=t(31),u={};u.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.rotationTo=function(){var e=o.create(),n=o.fromValues(1,0,0),t=o.fromValues(0,1,0);return function(r,a,i){var s=o.dot(a,i);return s<-.999999?(o.cross(e,n,a),o.length(e)<1e-6&&o.cross(e,t,a),o.normalize(e,e),u.setAxisAngle(r,e,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(e,a,i),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+s,u.normalize(r,r))}}(),u.setAxes=function(){var e=a.create();return function(n,t,r,a){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=a[0],e[4]=a[1],e[7]=a[2],e[2]=-t[0],e[5]=-t[1],e[8]=-t[2],u.normalize(n,u.fromMat3(n,e))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.setAxisAngle=function(e,n,t){t*=.5;var r=Math.sin(t);return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=Math.cos(t),e},u.add=i.add,u.multiply=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=t[0],s=t[1],l=t[2],c=t[3];return e[0]=r*c+i*u+a*l-o*s,e[1]=a*c+i*s+o*u-r*l,e[2]=o*c+i*l+r*s-a*u,e[3]=i*c-r*u-a*s-o*l,e},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(e,n,t){t*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(t),s=Math.cos(t);return e[0]=r*s+i*u,e[1]=a*s+o*u,e[2]=o*s-a*u,e[3]=i*s-r*u,e},u.rotateY=function(e,n,t){t*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(t),s=Math.cos(t);return e[0]=r*s-o*u,e[1]=a*s+i*u,e[2]=o*s+r*u,e[3]=i*s-a*u,e},u.rotateZ=function(e,n,t){t*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(t),s=Math.cos(t);return e[0]=r*s+a*u,e[1]=a*s-r*u,e[2]=o*s+i*u,e[3]=i*s-o*u,e},u.calculateW=function(e,n){var t=n[0],r=n[1],a=n[2];return e[0]=t,e[1]=r,e[2]=a,e[3]=Math.sqrt(Math.abs(1-t*t-r*r-a*a)),e},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(e,n,t,r){var a,o,i,u,s,l=n[0],c=n[1],d=n[2],f=n[3],m=t[0],p=t[1],v=t[2],g=t[3];return o=l*m+c*p+d*v+f*g,o<0&&(o=-o,m=-m,p=-p,v=-v,g=-g),1-o>1e-6?(a=Math.acos(o),i=Math.sin(a),u=Math.sin((1-r)*a)/i,s=Math.sin(r*a)/i):(u=1-r,s=r),e[0]=u*l+s*m,e[1]=u*c+s*p,e[2]=u*d+s*v,e[3]=u*f+s*g,e},u.sqlerp=function(){var e=u.create(),n=u.create();return function(t,r,a,o,i,s){return u.slerp(e,r,i,s),u.slerp(n,a,o,s),u.slerp(t,e,n,2*s*(1-s)),t}}(),u.invert=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=t*t+r*r+a*a+o*o,u=i?1/i:0;return e[0]=-t*u,e[1]=-r*u,e[2]=-a*u,e[3]=o*u,e},u.conjugate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=n[3],e},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(e,n){var t,r=n[0]+n[4]+n[8];if(r>0)t=Math.sqrt(r+1),e[3]=.5*t,t=.5/t,e[0]=(n[5]-n[7])*t,e[1]=(n[6]-n[2])*t,e[2]=(n[1]-n[3])*t;else{var a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;t=Math.sqrt(n[3*a+a]-n[3*o+o]-n[3*i+i]+1),e[a]=.5*t,t=.5/t,e[3]=(n[3*o+i]-n[3*i+o])*t,e[o]=(n[3*o+a]+n[3*a+o])*t,e[i]=(n[3*i+a]+n[3*a+i])*t}return e},u.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},e.exports=u},function(e,n,t){"use strict";var r=t(6),a={};a.create=function(){var e=new r.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},a.clone=function(e){var n=new r.ARRAY_TYPE(2);return n[0]=e[0],n[1]=e[1],n},a.fromValues=function(e,n){var t=new r.ARRAY_TYPE(2);return t[0]=e,t[1]=n,t},a.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e},a.set=function(e,n,t){return e[0]=n,e[1]=t,e},a.add=function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e},a.subtract=function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e},a.sub=a.subtract,a.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e},a.mul=a.multiply,a.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e},a.div=a.divide,a.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e},a.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e},a.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e},a.scaleAndAdd=function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e},a.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1];return Math.sqrt(t*t+r*r)},a.dist=a.distance,a.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1];return t*t+r*r},a.sqrDist=a.squaredDistance,a.length=function(e){var n=e[0],t=e[1];return Math.sqrt(n*n+t*t)},a.len=a.length,a.squaredLength=function(e){var n=e[0],t=e[1];return n*n+t*t},a.sqrLen=a.squaredLength,a.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e},a.inverse=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e},a.normalize=function(e,n){var t=n[0],r=n[1],a=t*t+r*r;return a>0&&(a=1/Math.sqrt(a),e[0]=n[0]*a,e[1]=n[1]*a),e},a.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]},a.cross=function(e,n,t){var r=n[0]*t[1]-n[1]*t[0];return e[0]=e[1]=0,e[2]=r,e},a.lerp=function(e,n,t,r){var a=n[0],o=n[1];return e[0]=a+r*(t[0]-a),e[1]=o+r*(t[1]-o),e},a.random=function(e,n){n=n||1;var t=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(t)*n,e[1]=Math.sin(t)*n,e},a.transformMat2=function(e,n,t){var r=n[0],a=n[1];return e[0]=t[0]*r+t[2]*a,e[1]=t[1]*r+t[3]*a,e},a.transformMat2d=function(e,n,t){var r=n[0],a=n[1];return e[0]=t[0]*r+t[2]*a+t[4],e[1]=t[1]*r+t[3]*a+t[5],e},a.transformMat3=function(e,n,t){var r=n[0],a=n[1];return e[0]=t[0]*r+t[3]*a+t[6],e[1]=t[1]*r+t[4]*a+t[7],e},a.transformMat4=function(e,n,t){var r=n[0],a=n[1];return e[0]=t[0]*r+t[4]*a+t[12],e[1]=t[1]*r+t[5]*a+t[13],e},a.forEach=function(){var e=a.create();return function(n,t,r,a,o,i){var u,s;for(t||(t=2),r||(r=0),s=a?Math.min(a*t+r,n.length):n.length,u=r;u<s;u+=t)e[0]=n[u],e[1]=n[u+1],o(e,e,i),n[u]=e[0],n[u+1]=e[1];return n}}(),a.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},e.exports=a},function(e,n,t){"use strict";function r(e,n){n.classHierarchy.push("vtkOpenGLActor2D"),e.buildPass=function(t){if(t){if(!n.renderable)return;e.prepareNodes(),e.addMissingNodes(n.renderable.getTextures()),e.addMissingNode(n.renderable.getMapper()),e.removeUnusedNodes()}},e.traverseOpaquePass=function(t){n.renderable&&n.renderable.getVisibility()&&n.renderable.getIsOpaque()&&(e.apply(t,!0),n.children.forEach(function(e){e.isA("vtkOpenGLTexture")||e.traverse(t)}),e.apply(t,!1))},e.traverseTranslucentPass=function(t){n.renderable&&n.renderable.getVisibility()&&!n.renderable.getIsOpaque()&&(e.apply(t,!0),n.children.forEach(function(e){e.isA("vtkOpenGLTexture")||e.traverse(t)}),e.apply(t,!1))},e.activateTextures=function(){n.activeTextures=[],n.children.forEach(function(e){e.isA("vtkOpenGLTexture")&&(e.render(),e.getHandle()&&n.activeTextures.push(e))})},e.opaquePass=function(t,r){t?(n.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),n.context.depthMask(!0),e.activateTextures()):n.activeTextures.forEach(function(e){e.deactivate()})},e.translucentPass=function(t,r){t?(n.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),n.context.depthMask(!1),e.activateTextures()):(n.activeTextures.forEach(function(e){e.deactivate()}),n.context.depthMask(!0))}}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,l,t),s.default.extend(e,n,t),i.setGet(e,n,["context"]),i.get(e,n,["activeTextures"]),r(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=a;var o=t(0),i=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(o),u=t(3),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l={context:null,activeTextures:[]},c=n.newInstance=i.newInstance(a);n.default={newInstance:c,extend:a}},function(e,n,t){"use strict";function r(e,n){n.classHierarchy.push("vtkOpenGLCamera"),e.buildPass=function(t){t&&(n.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),n.openGLRenderWindow=n.openGLRenderer.getParent(),n.context=n.openGLRenderWindow.getContext())},e.opaquePass=function(e){if(e){var t=n.openGLRenderer.getTiledSizeAndOrigin();n.context.viewport(t.lowerLeftU,t.lowerLeftV,t.usize,t.vsize),n.context.scissor(t.lowerLeftU,t.lowerLeftV,t.usize,t.vsize)}},e.translucentPass=e.opaquePass,e.opaqueZBufferPass=e.opaquePass,e.volumePass=e.opaquePass,e.getKeyMatrices=function(t){if(t!==n.lastRenderer||n.openGLRenderWindow.getMTime()>n.keyMatrixTime.getMTime()||e.getMTime()>n.keyMatrixTime.getMTime()||t.getMTime()>n.keyMatrixTime.getMTime()){o.mat4.copy(n.keyMatrices.wcvc,n.renderable.getViewMatrix()),o.mat3.fromMat4(n.keyMatrices.normalMatrix,n.keyMatrices.wcvc),o.mat3.invert(n.keyMatrices.normalMatrix,n.keyMatrices.normalMatrix),o.mat4.transpose(n.keyMatrices.wcvc,n.keyMatrices.wcvc);var r=n.openGLRenderer.getAspectRatio();o.mat4.copy(n.keyMatrices.vcdc,n.renderable.getProjectionMatrix(r,-1,1)),o.mat4.transpose(n.keyMatrices.vcdc,n.keyMatrices.vcdc),o.mat4.multiply(n.keyMatrices.wcdc,n.keyMatrices.vcdc,n.keyMatrices.wcvc),n.keyMatrixTime.modified(),n.lastRenderer=t}return n.keyMatrices}}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,c,t),l.default.extend(e,n,t),n.keyMatrixTime={},u.obj(n.keyMatrixTime),n.keyMatrices={normalMatrix:o.mat3.create(),vcdc:o.mat4.create(),wcvc:o.mat4.create(),wcdc:o.mat4.create()},u.setGet(e,n,["context","keyMatrixTime"]),r(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=a;var o=t(2),i=t(0),u=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(i),s=t(3),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null},d=n.newInstance=u.newInstance(a);n.default={newInstance:d,extend:a}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLGlyph3DMapper");var t=Object.assign({},e);e.renderPiece=function(t,r){if(e.invokeEvent(A),n.renderable.getStatic()||n.renderable.update(),n.currentInput=n.renderable.getInputData(1),e.invokeEvent(w),null===n.currentInput)return void y("No input!");if(n.currentInput.getPoints&&n.currentInput.getPoints().getNumberOfValues()){var a=n.context;n.openGLRenderWindow.getWebgl2()?(n.hardwareSupport=!0,n.extension=null):n.extension||(n.extension=n.context.getExtension("ANGLE_instanced_arrays"),n.hardwareSupport=!!n.extension);var o=r.getProperty().getBackfaceCulling(),i=r.getProperty().getFrontfaceCulling();o||i?i?(n.openGLRenderWindow.enableCullFace(),a.cullFace(a.FRONT)):(n.openGLRenderWindow.enableCullFace(),a.cullFace(a.BACK)):n.openGLRenderWindow.disableCullFace(),e.renderPieceStart(t,r),e.renderPieceDraw(t,r),e.renderPieceFinish(t,r)}},e.multiply4x4WithOffset=function(e,n,t,r){var a=n[0],o=n[1],i=n[2],u=n[3],s=n[4],l=n[5],c=n[6],d=n[7],f=n[8],m=n[9],p=n[10],v=n[11],g=n[12],h=n[13],b=n[14],y=n[15],x=t[r],T=t[r+1],_=t[r+2],A=t[r+3];e[0]=x*a+T*s+_*f+A*g,e[1]=x*o+T*l+_*m+A*h,e[2]=x*i+T*c+_*p+A*b,e[3]=x*u+T*d+_*v+A*y,x=t[r+4],T=t[r+5],_=t[r+6],A=t[r+7],e[4]=x*a+T*s+_*f+A*g,e[5]=x*o+T*l+_*m+A*h,e[6]=x*i+T*c+_*p+A*b,e[7]=x*u+T*d+_*v+A*y,x=t[r+8],T=t[r+9],_=t[r+10],A=t[r+11],e[8]=x*a+T*s+_*f+A*g,e[9]=x*o+T*l+_*m+A*h,e[10]=x*i+T*c+_*p+A*b,e[11]=x*u+T*d+_*v+A*y,x=t[r+12],T=t[r+13],_=t[r+14],A=t[r+15],e[12]=x*a+T*s+_*f+A*g,e[13]=x*o+T*l+_*m+A*h,e[14]=x*i+T*c+_*p+A*b,e[15]=x*u+T*d+_*v+A*y},e.replaceShaderNormal=function(e,r,a){if(n.hardwareSupport){if(n.lastBoundBO.getReferenceByName("lastLightComplexity")>0){var o=e.Vertex;n.lastBoundBO.getCABO().getNormalOffset()&&(o=b.default.substitute(o,"//VTK::Normal::Dec",["attribute vec3 normalMC;","attribute mat3 gNormal;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,o=b.default.substitute(o,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * gNormal * normalMC;"]).result),e.Vertex=o}}t.replaceShaderNormal(e,r,a)},e.replaceShaderColor=function(e,r,a){if(n.hardwareSupport&&n.renderable.getColorArray()){var o=e.Vertex,i=e.Geometry,u=e.Fragment,s=n.lastBoundBO.getReferenceByName("lastLightComplexity"),l=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity"];s&&(l=l.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));var c=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];s&&(c=c.concat(["  vec3 specularColor;","  float specularPower;"])),c=c.concat(["  opacity = opacityUniform;"]),s&&(c=c.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),n.drawingEdges||(l=l.concat(["varying vec4 vertexColorVSOutput;"]),o=b.default.substitute(o,"//VTK::Color::Dec",["attribute vec4 gColor;","varying vec4 vertexColorVSOutput;"]).result,o=b.default.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput = gColor;"]).result,i=b.default.substitute(i,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,i=b.default.substitute(i,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,c=c.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])),u=b.default.substitute(u,"//VTK::Color::Impl",c).result,u=b.default.substitute(u,"//VTK::Color::Dec",l).result,e.Vertex=o,e.Geometry=i,e.Fragment=u}t.replaceShaderColor(e,r,a)},e.replaceShaderPositionVC=function(e,r,a){if(n.hardwareSupport){var o=e.Vertex;n.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(o=b.default.substitute(o,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","vertexVCVSOutput = MCVCMatrix * gVertexMC;","  gl_Position = MCDCMatrix * gVertexMC;"]).result,o=b.default.substitute(o,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCDCMatrix;","uniform mat4 MCVCMatrix;"]).result):(o=b.default.substitute(o,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCDCMatrix;"]).result,o=b.default.substitute(o,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","  gl_Position = MCDCMatrix * gVertexMC;"]).result),e.Vertex=o}t.replaceShaderPositionVC(e,r,a)},e.replaceShaderPicking=function(e,t,r){if(n.openGLRenderer.getSelector()){var a=e.Fragment;switch(n.openGLRenderer.getSelector().getCurrentPass()){case _.ID_LOW24:break;case _.COMPOSITE_INDEX_PASS:if(n.hardwareSupport){var o=e.Vertex;o=b.default.substitute(o,"//VTK::Picking::Dec",["attribute vec3 mapperIndexVS;","varying vec3 mapperIndexVSOutput;"]).result,o=b.default.substitute(o,"//VTK::Picking::Impl","  mapperIndexVSOutput = mapperIndexVS;").result,e.Vertex=o,a=b.default.substitute(a,"//VTK::Picking::Dec","varying vec3 mapperIndexVSOutput;").result,a=b.default.substitute(a,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(mapperIndexVSOutput,1.0);").result}else a=b.default.substitute(a,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,a=b.default.substitute(a,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(mapperIndex,1.0);").result;break;default:a=b.default.substitute(a,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,a=b.default.substitute(a,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(mapperIndex,1.0);").result}e.Fragment=a}},e.updateGlyphShaderParameters=function(t,r,a,o,i,u,s,l){var c=a.getProgram();if(t){var d=n.normalMatrix,f=u,m=9*s,p=n.tmpMat3,v=d[0],g=d[1],h=d[2],b=d[3],y=d[4],x=d[5],T=d[6],_=d[7],A=d[8],w=f[m],C=f[m+1],M=f[m+2],O=f[m+3],I=f[m+4],S=f[m+5],P=f[m+6],E=f[m+7],R=f[m+8];p[0]=w*v+C*b+M*T,p[1]=w*g+C*y+M*_,p[2]=w*h+C*x+M*A,p[3]=O*v+I*b+S*T,p[4]=O*g+I*y+S*_,p[5]=O*h+I*x+S*A,p[6]=P*v+E*b+R*T,p[7]=P*g+E*y+R*_,p[8]=P*h+E*x+R*A,c.setUniformMatrix3x3("normalMatrix",n.tmpMat3)}if(e.multiply4x4WithOffset(n.tmpMat4,n.mcdcMatrix,i,16*s),c.setUniformMatrix("MCDCMatrix",n.tmpMat4),r&&(e.multiply4x4WithOffset(n.tmpMat4,n.mcvcMatrix,i,16*s),c.setUniformMatrix("MCVCMatrix",n.tmpMat4)),o){var N=o.getData();n.tmpColor[0]=N[4*s]/255,n.tmpColor[1]=N[4*s+1]/255,n.tmpColor[2]=N[4*s+2]/255,c.setUniform3fArray("ambientColorUniform",n.tmpColor),c.setUniform3fArray("diffuseColorUniform",n.tmpColor)}l&&c.setUniform3fArray("mapperIndex",l.getPropColorValue())},e.renderPieceDraw=function(t,r){var a=r.getProperty().getRepresentation(),o=n.context,u=r.getProperty().getEdgeVisibility()&&a===x.SURFACE,s=n.openGLCamera.getKeyMatrices(t),l=n.openGLActor.getKeyMatrices();i.mat3.multiply(n.normalMatrix,s.normalMatrix,l.normalMatrix),i.mat4.multiply(n.mcdcMatrix,s.wcdc,l.mcwc),i.mat4.multiply(n.mcvcMatrix,s.wcvc,l.mcwc);var c=n.renderable.getMatrixArray(),d=n.renderable.getNormalArray(),f=n.renderable.getColorArray(),m=c.length/16,p=!1;n.openGLRenderer.getSelector()&&n.openGLRenderer.getSelector().getCurrentPass()===_.COMPOSITE_INDEX_PASS&&(p=!0);for(var v=n.primTypes.Start;v<n.primTypes.End;v++){var g=n.primitives[v].getCABO();if(g.getElementCount()){n.drawingEdges=u&&(v===n.primTypes.TrisEdges||v===n.primTypes.TriStripsEdges),e.updateShaders(n.primitives[v],t,r);var h=n.primitives[v].getProgram(),b=e.getOpenGLMode(a,v),y=h.isUniformUsed("normalMatrix"),T=h.isUniformUsed("MCVCMatrix");if(n.hardwareSupport)n.extension?n.extension.drawArraysInstancedANGLE(b,0,g.getElementCount(),m):o.drawArraysInstanced(b,0,g.getElementCount(),m);else for(var A=0;A<m;++A)p&&n.openGLRenderer.getSelector().renderCompositeIndex(A),e.updateGlyphShaderParameters(y,T,n.primitives[v],f,c,d,A,p?n.openGLRenderer.getSelector():null),o.drawArrays(b,0,g.getElementCount())}}},e.setMapperShaderParameters=function(e,r,a){if(e.getCABO().getElementCount()&&(n.glyphBOBuildTime.getMTime()>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime()))return e.getProgram().isAttributeUsed("gMatrix")?e.getVAO().addAttributeMatrixWithDivisor(e.getProgram(),n.matrixBuffer,"gMatrix",0,64,n.context.FLOAT,4,!1,1)||y("Error setting gMatrix in shader VAO."):e.getVAO().removeAttributeArray("gMatrix"),e.getProgram().isAttributeUsed("gNormal")?e.getVAO().addAttributeMatrixWithDivisor(e.getProgram(),n.normalBuffer,"gNormal",0,36,n.context.FLOAT,3,!1,1)||y("Error setting gNormal in shader VAO."):e.getVAO().removeAttributeArray("gNormal"),e.getProgram().isAttributeUsed("gColor")?e.getVAO().addAttributeArrayWithDivisor(e.getProgram(),n.colorBuffer,"gColor",0,4,n.context.UNSIGNED_BYTE,4,!0,1,!1)||y("Error setting gColor in shader VAO."):e.getVAO().removeAttributeArray("gColor"),e.getProgram().isAttributeUsed("mapperIndexVS")?e.getVAO().addAttributeArrayWithDivisor(e.getProgram(),n.pickBuffer,"mapperIndexVS",0,4,n.context.UNSIGNED_BYTE,4,!0,1,!1)||y("Error setting mapperIndexVS in shader VAO."):e.getVAO().removeAttributeArray("mapperIndexVS"),t.setMapperShaderParameters(e,r,a),void e.getAttributeUpdateTime().modified();t.setMapperShaderParameters(e,r,a)},e.getNeedToRebuildBufferObjects=function(e,r){return n.renderable.buildArrays(),n.VBOBuildTime.getMTime()<n.renderable.getBuildTime().getMTime()||t.getNeedToRebuildBufferObjects(e,r)},e.buildBufferObjects=function(e,r){if(n.hardwareSupport){var a=n.renderable.getMatrixArray(),o=n.renderable.getNormalArray(),i=n.renderable.getColorArray();if(n.matrixBuffer||(n.matrixBuffer=c.default.newInstance(),n.matrixBuffer.setOpenGLRenderWindow(n.openGLRenderWindow),n.normalBuffer=c.default.newInstance(),n.normalBuffer.setOpenGLRenderWindow(n.openGLRenderWindow),n.colorBuffer=c.default.newInstance(),n.colorBuffer.setOpenGLRenderWindow(n.openGLRenderWindow),n.pickBuffer=c.default.newInstance(),n.pickBuffer.setOpenGLRenderWindow(n.openGLRenderWindow)),n.renderable.getBuildTime().getMTime()>n.glyphBOBuildTime.getMTime()){n.matrixBuffer.upload(a,T.ARRAY_BUFFER),n.normalBuffer.upload(o,T.ARRAY_BUFFER),i?n.colorBuffer.upload(i.getData(),T.ARRAY_BUFFER):n.colorBuffer.releaseGraphicsResources();for(var u=a.length/16,s=new Uint8Array(4*u),l=0;l<u;++l){var d=l+1,f=4*l;s[f]=d%256,d-=s[f],d/=256,s[f+1]=d%256,d-=s[f+1],d/=256,s[f+2]=d%256,s[f+3]=255}n.pickBuffer.upload(s,T.ARRAY_BUFFER),n.glyphBOBuildTime.modified()}}return t.buildBufferObjects(e,r)}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,C,t),g.default.extend(e,n,t),n.tmpMat3=i.mat3.create(),n.normalMatrix=i.mat3.create(),n.mcdcMatrix=i.mat4.create(),n.mcvcMatrix=i.mat4.create(),n.tmpColor=[],n.glyphBOBuildTime={},s.default.obj(n.glyphBOBuildTime,{mtime:0}),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(2),u=t(0),s=r(u),l=t(16),c=r(l),d=t(32),f=r(d),m=t(22),p=r(m),v=t(18),g=r(v),h=t(7),b=r(h),y=s.default.vtkErrorMacro,x=p.default.Representation,T=c.default.ObjectType,_=f.default.PassTypes,A={type:"StartEvent"},w={type:"EndEvent"},C={normalMatrix:null,mcdcMatrix:null,mcwcMatrix:null},M=n.newInstance=s.default.newInstance(o,"vtkOpenGLGlyph3DMapper");n.default={newInstance:M,extend:o}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.PassTypes={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,MAX_KNOWN_PASS:2};n.default={PassTypes:r}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkSelectionNode"),e.getBounds=function(){return n.points.getBounds()}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,c,t),u.default.obj(e,n),n.properties={},u.default.setGet(e,n,["contentType","fieldType","properties","selectionList"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(75),l=r(s),c={contentType:-1,fieldType:-1,properties:null,selectionList:[]},d=n.newInstance=u.default.newInstance(o,"vtkSelectionNode");n.default=Object.assign({newInstance:d,extend:o},l.default)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.SelectionContent={GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},a=n.SelectionField={CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5};n.default={SelectionContent:r,SelectionField:a}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){function t(e){var n=r.find(function(n){return p[n.toUpperCase()]===e||"number"!=typeof e&&n.toLowerCase()===e.toLowerCase()});return void 0===n&&(n=null),n}var r=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];n.classHierarchy.push("vtkDataSetAttributes"),e.checkNumberOfComponents=function(e){return!0},e.setAttribute=function(r,a){var o=t(a);if(r&&"PEDIGREEIDS"===o.toUpperCase()&&!r.isA("vtkDataArray"))return g("Cannot set attribute "+o+". The attribute must be a vtkDataArray."),-1;if(r&&!e.checkNumberOfComponents(r,o))return g("Cannot set attribute "+o+". Incorrect number of components."),-1;var i=n["active"+o];if(i>=0&&i<n.arrays.length){if(n.arrays[i]===r)return i;e.removeArrayByIndex(i)}return r?(i=e.addArray(r),n["active"+o]=i):n["active"+o]=-1,e.modified(),n["active"+o]},e.setActiveAttributeByName=function(n,t){return e.setActiveAttributeByIndex(e.getArrayWithIndex(n).index,t)},e.setActiveAttributeByIndex=function(r,a){var o=t(a);if(r>=0&&r<n.arrays.length){if("PEDIGREEIDS"!==o.toUpperCase()){var i=e.getArrayByIndex(r);if(!i.isA("vtkDataArray"))return g("Cannot set attribute "+o+". Only vtkDataArray subclasses can be set as active attributes."),-1;if(!e.checkNumberOfComponents(i,o))return g("Cannot set attribute "+o+". Incorrect number of components."),-1}return n["active"+o]=r,e.modified(),r}return-1===r&&(n["active"+o]=r,e.modified()),-1},e.getActiveAttribute=function(n){var r=t(n);return e["get"+r]()},e.removeAllArrays=function(){n.arrays=[],r.forEach(function(e){n["active"+e]=-1})},e.removeArray=function(e){n.arrays=n.arrays.filter(function(t,a){return e!==t.data.getName()||(r.forEach(function(e){a===n["active"+e]&&(n["active"+e]=-1)}),!1)})},e.removeArrayByIndex=function(e){n.arrays=n.arrays.filter(function(n,t){return t!==e}),r.forEach(function(t){e===n["active"+t]&&(n["active"+t]=-1)})},r.forEach(function(t){var r="active"+t;e["get"+t]=function(){return e.getArrayByIndex(n[r])},e["set"+t]=function(n){return e.setAttribute(n,t)},e["setActive"+t]=function(n){return e.setActiveAttributeByIndex(e.getArrayWithIndex(n).index,t)},e["copy"+t+"Off"]=function(){e.initialize();var r=t.toUpperCase();n.copyAttributeFlags[v.PASSDATA][p[r]]=!1}}),e.initialize=u.default.chain(e.initialize,function(){n.copyAttributeFlags=[],Object.keys(v).filter(function(e){return"ALLCOPY"!==e}).forEach(function(e){n.copyAttributeFlags[v[e]]=Object.keys(p).filter(function(e){return"NUM_ATTRIBUTES"!==e}).reduce(function(e,n){return e[p[n]]=!0,e},[])}),n.copyAttributeFlags[v.COPYTUPLE][p.GLOBALIDS]=!1,n.copyAttributeFlags[v.INTERPOLATE][p.GLOBALIDS]=!1,n.copyAttributeFlags[v.COPYTUPLE][p.PEDIGREEIDS]=!1}),n.dataArrays&&Object.keys(n.dataArrays).length&&Object.keys(n.dataArrays).forEach(function(t){n.dataArrays[t].ref||"vtkDataArray"!==n.dataArrays[t].type||e.addArray(m.default.newInstance(n.dataArrays[t]))})}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,h,t),l.default.extend(e,n,t),u.default.setGet(e,n,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),n.arrays||(n.arrays={}),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(77),l=r(s),c=t(78),d=r(c),f=t(5),m=r(f),p=d.default.AttributeTypes,v=d.default.AttributeCopyOperations,g=u.default.vtkWarningMacro,h={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1},b=n.newInstance=u.default.newInstance(o,"vtkDataSetAttributes");n.default=Object.assign({newInstance:b,extend:o},d.default)},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkFieldData");var t=e.getState;n.arrays&&(n.arrays=n.arrays.map(function(e){return{data:(0,u.default)(e.data)}})),e.initialize=function(){e.initializeFields(),e.copyAllOn(),e.clearFieldFlags()},e.initializeFields=function(){n.arrays=[],n.copyFieldFlags={},e.modified()},e.copyStructure=function(t){e.initializeFields(),n.copyFieldFlags=t.getCopyFieldFlags().map(function(e){return e}),n.arrays=t.arrays().map(function(e){return{array:e}})},e.getNumberOfArrays=function(){return n.arrays.length},e.getNumberOfActiveArrays=function(){return n.arrays.length},e.addArray=function(e){return n.arrays=[].concat(n.arrays,{data:e}),n.arrays.length-1},e.removeAllArrays=function(){n.arrays=[]},e.removeArray=function(e){n.arrays=n.arrays.filter(function(n){return e!==n.data.getName()})},e.removeArrayByIndex=function(e){n.arrays=n.arrays.filter(function(n,t){return t!==e})},e.getArrays=function(){return n.arrays.map(function(e){return e.data})},e.getArray=function(n){return"number"==typeof n?e.getArrayByIndex(n):e.getArrayByName(n)},e.getArrayByName=function(e){return n.arrays.reduce(function(n,t,r){return t.data.getName()===e?t.data:n},null)},e.getArrayWithIndex=function(e){return n.arrays.reduce(function(n,t,r){return t.data&&t.data.getName()===e?{array:t.data,index:r}:n},{array:null,index:-1})},e.getArrayByIndex=function(e){return e>=0&&e<n.arrays.length?n.arrays[e].data:null},e.hasArray=function(n){return e.getArrayWithIndex(n).index>=0},e.getArrayName=function(e){var t=n.arrays[e];return t?t.data.getName():""},e.getCopyFieldFlags=function(){return n.copyFieldFlags},e.getFlag=function(e){return n.copyFieldFlags[e]},e.passData=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;t.getArrays().forEach(function(t){var o=e.getFlag(t.getName());if(!1!==o&&(!n.doCopyAllOff||!0===o)&&t){var i=e.getArrayByName(t.getName());if(i){if(t.getNumberOfComponents()===i.getNumberOfComponents())if(r>-1&&r<t.getNumberOfTuples()){var u=a>-1?a:r;i.setTuple(u,t.getTuple(r))}else for(var s=0;s<t.getNumberOfTuples();++s)i.setTuple(s,t.getTuple(s))}else if(r<0||r>t.getNumberOfTuples())e.addArray(t);else{var l=t.getNumberOfComponents(),c=t.getNumberOfValues(),f=a>-1?a:r;c<f*l&&(c=(f+1)*l),i=d.default.newInstance({name:t.getName(),dataType:t.getDataType(),numberOfComponents:t.getNumberOfComponents(),size:c}),i.setTuple(f,t.getTuple(r)),e.addArray(i)}}})},e.copyFieldOn=function(e){n.copyFieldFlags[e]=!0},e.copyFieldOff=function(e){n.copyFieldFlags[e]=!1},e.copyAllOn=function(){n.doCopyAllOn&&!n.doCopyAllOff||(n.doCopyAllOn=!0,n.doCopyAllOff=!1,e.modified())},e.copyAllOff=function(){!n.doCopyAllOn&&n.doCopyAllOff||(n.doCopyAllOn=!1,n.doCopyAllOff=!0,e.modified())},e.clearFieldFlags=function(){n.copyFieldFlags={}},e.deepCopy=function(e){n.arrays=e.getArrays().map(function(e){var n=e.newClone();return n.deepCopy(e),{data:n}})},e.copyFlags=function(e){return e.getCopyFieldFlags().map(function(e){return e})},e.reset=function(){return n.arrays.forEach(function(e){return e.data.reset()})},e.getMTime=function(){return n.arrays.reduce(function(e,n){return n.data.getMTime()>e?n.data.getMTime():e},n.mtime)},e.getNumberOfComponents=function(){return n.arrays.reduce(function(e,n){return e+n.data.getNumberOfComponents()},0)},e.getNumberOfTuples=function(){return n.arrays.length>0?n.arrays[0].getNumberOfTuples():0},e.getState=function(){var e=t();return e.arrays=n.arrays.map(function(e){return{data:e.data.getState()}}),e}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,f,t),l.default.obj(e,n),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(11),u=r(i),s=t(0),l=r(s),c=t(5),d=r(c),f={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1},m=n.newInstance=l.default.newInstance(o,"vtkFieldData");n.default={newInstance:m,extend:o}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.AttributeTypes={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},a=n.AttributeLimitTypes={MAX:0,EXACT:1,NOLIMIT:2},o=n.CellGhostTypes={DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},i=n.PointGhostTypes={DUPLICATEPOINT:1,HIDDENPOINT:2},u=n.AttributeCopyOperations={COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},s=n.ghostArrayName="vtkGhostType",l=n.DesiredOutputPrecision={DEFAULT:0,SINGLE:1,DOUBLE:2};n.default={AttributeCopyOperations:u,AttributeLimitTypes:a,AttributeTypes:r,CellGhostTypes:o,DesiredOutputPrecision:l,PointGhostTypes:i,ghostArrayName:s}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.FieldDataTypes={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},a=n.FieldAssociations={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};n.default={FieldDataTypes:r,FieldAssociations:a}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),e.setType(c.ObjectType.ARRAY_BUFFER),e.createVBO=function(t,r,a,o){if(!t.getData()||!t.getData().length)return n.elementCount=0,0;n.blockSize=3,n.vertexOffset=0,n.normalOffset=0,n.tCoordOffset=0,n.tCoordComponents=0,n.colorComponents=0,n.colorOffset=0;var i=o.points.getData(),u=null,s=null,m=null,p=o.colors?o.colors.getNumberOfComponents():0,v=o.tcoords?o.tcoords.getNumberOfComponents():0;o.normals&&(n.normalOffset=4*n.blockSize,n.blockSize+=3,u=o.normals.getData()),o.tcoords&&(n.tCoordOffset=4*n.blockSize,n.tCoordComponents=v,n.blockSize+=v,s=o.tcoords.getData()),o.colors?(n.colorComponents=o.colors.getNumberOfComponents(),n.colorOffset=0,m=o.colors.getData(),n.colorBO||(n.colorBO=l.default.newInstance()),n.colorBO.setOpenGLRenderWindow(n.openGLRenderWindow)):n.colorBO=null,n.stride=4*n.blockSize;var g=0,h=0,b=0,y=0,x=0,T=void 0,_={anythingToPoints:function(e,n,t){for(var r=0;r<e;++r)T(n[t+r])},linesToWireframe:function(e,n,t){for(var r=0;r<e-1;++r)T(n[t+r]),T(n[t+r+1])},polysToWireframe:function(e,n,t){for(var r=0;r<e;++r)T(n[t+r]),T(n[t+(r+1)%e])},stripsToWireframe:function(e,n,t){for(var r=0;r<e-1;++r)T(n[t+r]),T(n[t+r+1]);for(var a=0;a<e-2;a++)T(n[t+a]),T(n[t+a+2])},polysToSurface:function(e,n,t){if(e<3)f("skipping degenerate triangle");else for(var r=0;r<e-2;r++)T(n[t+0]),T(n[t+r+1]),T(n[t+r+2])},stripsToSurface:function(e,n,t){for(var r=0;r<e-2;r++)T(n[t+r]),T(n[t+r+1+r%2]),T(n[t+r+1+(r+1)%2])}},A={anythingToPoints:function(e,n){return e},linesToWireframe:function(e,n){return 2*(e-1)},polysToWireframe:function(e,n){return 2*e},stripsToWireframe:function(e,n){return 4*e-6},polysToSurface:function(e,n){return e<3?0:3*(e-2)},stripsToSurface:function(e,n,t){return 3*(e-2)}},w=null,C=null;a===d.Representation.POINTS||"verts"===r?(w=_.anythingToPoints,C=A.anythingToPoints):a===d.Representation.WIREFRAME||"lines"===r?(w=_[r+"ToWireframe"],C=A[r+"ToWireframe"]):(w=_[r+"ToSurface"],C=A[r+"ToSurface"]);for(var M=t.getData(),O=M.length,I=0,S=0;S<O;)I+=C(M[S],M),S+=M[S]+1;var P=null,E=new Float32Array(I*n.blockSize);m&&(P=new Uint8Array(4*I));var R=0,N=0;T=function(e){if(g=3*e,E[R++]=i[g++],E[R++]=i[g++],E[R++]=i[g++],null!==u&&(h=o.haveCellNormals?3*(x+o.cellOffset):3*e,E[R++]=u[h++],E[R++]=u[h++],E[R++]=u[h++]),null!==s){b=e*v;for(var n=0;n<v;++n)E[R++]=s[b++]}null!==m&&(y=o.haveCellScalars?(x+o.cellOffset)*p:e*p,P[N++]=m[y++],P[N++]=m[y++],P[N++]=m[y++],P[N++]=4===p?m[y++]:255)};for(var D=0;D<O;)w(M[D],M,D+1),D+=M[D]+1,x++;return n.elementCount=I,e.upload(E,c.ObjectType.ARRAY_BUFFER),n.colorBO&&(n.colorBOStride=4,n.colorBO.upload(P,c.ObjectType.ARRAY_BUFFER)),x},e.setCoordShiftAndScaleMethod=function(e){m("coordinate shift and scale not yet implemented")},e.setCoordShift=function(e){m("coordinate shift and scale not yet implemented")},e.setCoordScale=function(e){m("coordinate shift and scale not yet implemented")}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,p,t),l.default.extend(e,n,t),u.default.setGet(e,n,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(16),l=r(s),c=t(13),d=t(17),f=u.default.vtkDebugMacro,m=u.default.vtkErrorMacro,p={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null},v=n.newInstance=u.default.newInstance(o);n.default={newInstance:v,extend:o}},function(e,n,t){"use strict";function r(e,n){n.classHierarchy.push("vtkShader"),e.compile=function(){var e=n.context.VERTEX_SHADER;if(!n.source||!n.source.length||"Unknown"===n.shaderType)return!1;switch(0!==n.handle&&(n.context.deleteShader(n.handle),n.handle=0),n.shaderType){case"Fragment":e=n.context.FRAGMENT_SHADER;break;case"Vertex":default:e=n.context.VERTEX_SHADER}if(n.handle=n.context.createShader(e),n.context.shaderSource(n.handle,n.source),n.context.compileShader(n.handle),!n.context.getShaderParameter(n.handle,n.context.COMPILE_STATUS)){var t=n.context.getShaderInfoLog(n.handle);return u("Error compiling shader '"+n.source+"': "+t),n.context.deleteShader(n.handle),n.handle=0,!1}return!0},e.cleanup=function(){"Unknown"!==n.shaderType&&0!==n.handle&&(n.context.deleteShader(n.handle),n.handle=0,n.dirty=!0)}}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,s,t),i.default.obj(e,n),i.default.setGet(e,n,["shaderType","source","error","handle","context"]),r(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=a;var o=t(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=i.default.vtkErrorMacro,s={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null},l=n.newInstance=i.default.newInstance(a,"vtkShader");n.default={newInstance:l,extend:a}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){e.getBounds=function(){return 0},e.getBounds=function(t){e.getBounds();for(var r=0;r<6;r++)t[r]=n.bounds[r]},e.getCenter=function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];e.getBounds();for(var o=0;o<3;o++)n.center[o]=(n.bounds[2*o+1]+n.bounds[2*o])/2;return Array.isArray(r[0])&&(r[0]=n.center.splice(0)),n.center},e.getLength=function(){var t=0,r=0;e.getBounds();for(var a=0;a<3;a++)t=n.bounds[2*a+1]-n.bounds[2*a],r+=t*t;return Math.sqrt(r)},e.getClippingPlaneInDataCoords=function(e,t,r){var a=n.clippingPlanes,o=e;if(a){var i=a.length;if(t>=0&&t<i){var s=a[t],l=s.getNormal(),c=s.getOrigin(),d=l[0],f=l[1],m=l[2],p=-(d*c[0]+f*c[1]+m*c[2]);return r[0]=d*o[0]+f*o[4]+m*o[8]+p*o[12],r[1]=d*o[1]+f*o[5]+m*o[9]+p*o[13],r[2]=d*o[2]+f*o[6]+m*o[10]+p*o[14],void(r[3]=d*o[3]+f*o[7]+m*o[11]+p*o[15])}}u.default.vtkErrorMacro("Clipping plane index "+t+" is out of range.")}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,f,t),l.default.extend(e,n,t),n.bounds||d.default.uninitializeBounds(n.bounds),n.center||(n.center=[0,0,0]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.extend=o;var i=t(0),u=r(i),s=t(83),l=r(s),c=t(1),d=r(c),f={bounds:[1,-1,1,-1,1,-1],center:[0,0,0]};n.default={extend:o}},function(e,n,t){"use strict";function r(e,n){e.update=function(){e.getInputData()},e.addClippingPlane=function(e){"vtkPlane"===e.getClassName()&&n.clippingPlanes.push(e)},e.getNumberOfClippingPlanes=function(){return n.clippingPlanes.length},e.removeAllClippingPlanes=function(){n.clippingPlanes.length=0},e.removeClippingPlane=function(e){e<0||e>=6||n.clippingPlanes.splice(e,1)},e.getClippingPlanes=function(){return n.clippingPlanes},e.setClippingPlanes=function(n){if(n)if(Array.isArray(n))for(var t=n.length,r=0;r<t&&r<6;r++)e.addClippingPlane(n[r]);else e.addClippingPlane(n)}}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,u,t),i.default.obj(e,n),i.default.algo(e,n,1,0),n.clippingPlanes||(n.clippingPlanes=[]),r(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.extend=a;var o=t(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u={clippingPlanes:[]};n.default={extend:a}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkImageData"),e.setExtent=function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];if(n.deleted)return void p("instance deleted - cannot call any method");if(r&&6===r.length){var o=!1;n.extent.forEach(function(e,n){if(e!==r[n]){if(o)return;o=!0}}),o&&(n.extent=[].concat(r),n.dataDescription=d.default.getDataDescriptionFromExtent(n.extent),e.modified())}},e.setDimensions=function(){var t=void 0,r=void 0,a=void 0;if(n.deleted)return void p("instance deleted - cannot call any method");if(1===arguments.length){var o=arguments.length<=0?void 0:arguments[0];t=o[0],r=o[1],a=o[2]}else{if(3!==arguments.length)return void p("Bad dimension specification");t=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2]}e.setExtent(0,t-1,0,r-1,0,a-1)},e.getDimensions=function(){return[n.extent[1]-n.extent[0]+1,n.extent[3]-n.extent[2]+1,n.extent[5]-n.extent[4]+1]},e.getNumberOfCells=function(){for(var n=e.getDimensions(),t=1,r=0;r<3;r++){if(0===n[r])return 0;n[r]>1&&(t*=n[r]-1)}return t},e.getNumberOfPoints=function(){var n=e.getDimensions();return n[0]*n[1]*n[2]},e.getPoint=function(t){var r=e.getDimensions(),a=m.vec3.fromValues(0,0,0),o=[0,0,0];if(0===r[0]||0===r[1]||0===r[2])return p("Requesting a point from an empty image."),null;switch(n.dataDescription){case f.StructuredType.EMPTY:return null;case f.StructuredType.SINGLE_POINT:break;case f.StructuredType.X_LINE:a[0]=t;break;case f.StructuredType.Y_LINE:a[1]=t;break;case f.StructuredType.Z_LINE:a[2]=t;break;case f.StructuredType.XY_PLANE:a[0]=t%r[0],a[1]=t/r[0];break;case f.StructuredType.YZ_PLANE:a[1]=t%r[1],a[2]=t/r[1];break;case f.StructuredType.XZ_PLANE:a[0]=t%r[0],a[2]=t/r[0];break;case f.StructuredType.XYZ_GRID:a[0]=t%r[0],a[1]=t/r[0]%r[1],a[2]=t/(r[0]*r[1]);break;default:p("Invalid dataDescription")}var i=m.vec3.create();return e.indexToWorldVec3(a,i),m.vec3.copy(o,i),o},e.getBounds=function(){return e.extentToBounds(n.extent)},e.extentToBounds=function(n){var t=[n[0],n[2],n[4],n[1],n[2],n[4],n[0],n[3],n[4],n[1],n[3],n[4],n[0],n[2],n[5],n[1],n[2],n[5],n[0],n[3],n[5],n[1],n[3],n[5]],r=m.vec3.fromValues(t[0],t[1],t[2]),a=m.vec3.create();e.indexToWorldVec3(r,a);for(var o=[a[0],a[0],a[1],a[1],a[2],a[2]],i=3;i<24;i+=3)m.vec3.set(r,t[i],t[i+1],t[i+2]),e.indexToWorldVec3(r,a),a[0]<o[0]&&(o[0]=a[0]),a[1]<o[2]&&(o[2]=a[1]),a[2]<o[4]&&(o[4]=a[2]),a[0]>o[1]&&(o[1]=a[0]),a[1]>o[3]&&(o[3]=a[1]),a[2]>o[5]&&(o[5]=a[2]);return o},e.computeTransforms=function(){var e=m.quat.create();m.quat.fromMat3(e,n.direction);var t=m.vec3.fromValues(n.origin[0],n.origin[1],n.origin[2]),r=m.vec3.fromValues(n.spacing[0],n.spacing[1],n.spacing[2]);m.mat4.fromRotationTranslationScale(n.indexToWorld,e,t,r),m.mat4.invert(n.worldToIndex,n.indexToWorld)},e.setDirection=function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];if(n.deleted)return p("instance deleted - cannot call any method"),!1;var o=r;if(1===o.length&&Array.isArray(o[0])&&(o=o[0]),9!==o.length)throw new RangeError("Invalid number of values for array setter");var i=!1;if(n.direction.forEach(function(e,n){if(e!==o[n]){if(i)return;i=!0}}),i){for(var u=0;u<9;++u)n.direction[u]=o[u];e.modified()}return!0},e.indexToWorldVec3=function(e,t){m.vec3.transformMat4(t,e,n.indexToWorld)},e.indexToWorld=function(e,t){var r=m.vec3.fromValues(e[0],e[1],e[2]),a=m.vec3.create();m.vec3.transformMat4(a,r,n.indexToWorld),m.vec3.copy(t,a)},e.worldToIndexVec3=function(e,t){m.vec3.transformMat4(t,e,n.worldToIndex)},e.worldToIndex=function(e,t){var r=m.vec3.fromValues(e[0],e[1],e[2]),a=m.vec3.create();m.vec3.transformMat4(a,r,n.worldToIndex),m.vec3.copy(t,a)},e.onModified(e.computeTransforms),e.computeTransforms()}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(n,v,t),l.default.extend(e,n,t),n.direction){if(Array.isArray(n.direction)){var r=n.direction.slice(0);n.direction=m.mat3.create();for(var o=0;o<9;++o)n.direction[o]=r[o]}}else n.direction=m.mat3.create();n.indexToWorld=m.mat4.create(),n.worldToIndex=m.mat4.create(),u.default.get(e,n,["direction","indexToWorld","worldToIndex"]),u.default.setGetArray(e,n,["origin","spacing"],3),u.default.getArray(e,n,["extent"],6),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(21),l=r(s),c=t(85),d=r(c),f=t(34),m=t(2),p=u.default.vtkErrorMacro,v={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:f.StructuredType.EMPTY},g=n.newInstance=u.default.newInstance(o,"vtkImageData");n.default={newInstance:g,extend:o}},function(e,n,t){"use strict";function r(e){for(var n=0,t=0;t<3;++t)e[2*t]<e[2*t+1]&&n++;return e[0]>e[1]||e[2]>e[3]||e[4]>e[5]?i.EMPTY:3===n?i.XYZ_GRID:2===n?e[0]===e[1]?i.YZ_PLANE:e[2]===e[3]?i.XZ_PLANE:i.XY_PLANE:1===n?e[0]<e[1]?i.X_LINE:e[2]<e[3]?i.Y_LINE:i.Z_LINE:i.SINGLE_POINT}Object.defineProperty(n,"__esModule",{value:!0}),n.getDataDescriptionFromExtent=r;var a=t(34),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=o.default.StructuredType;n.default=Object.assign({getDataDescriptionFromExtent:r},o.default)},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkLookupTable"),e.isOpaque=function(){if(n.opaqueFlagBuildTime.getMTime()<e.getMTime()){var t=!0;n.nanColor[3]<1&&(t=0),n.useBelowRangeColor&&n.belowRangeColor[3]<1&&(t=0),n.useAboveRangeColor&&n.aboveRangeColor[3]<1&&(t=0);for(var r=3;r<n.table.length&&t;r+=4)n.table[r]<255&&(t=!1);n.opaqueFlag=t,n.opaqueFlagBuildTime.modified()}return n.opaqueFlag},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return n.table.length},e.linearIndexLookup=function(e,n){var t=0;return e<n.range[0]?t=n.maxIndex+m+1.5:e>n.range[1]?t=n.maxIndex+p+1.5:(t=(e+n.shift)*n.scale,t=t<n.maxIndex?t:n.maxIndex),Math.floor(t)},e.linearLookup=function(n,t,r){var a=0;return a=l.default.isNan(n)?Math.floor(r.maxIndex+1.5+v):e.linearIndexLookup(n,r),[t[4*a],t[4*a+1],t[4*a+2],t[4*a+3]]},e.indexedLookupFunction=function(n,t,r){var a=e.getAnnotatedValueIndexInternal(n);return[t[4*a],t[4*a+1],t[4*a+2],t[4*a+3]]},e.lookupShiftAndScale=function(e,n){n.shift=-e[0],n.scale=Number.MAX_VALUE,e[1]>e[0]&&(n.scale=(n.maxIndex+1)/(e[1]-e[0]))},e.mapScalarsThroughTable=function(t,r,a,o){var i=e.linearLookup;n.indexedLookup&&(i=e.indexedLookupFunction);var u=e.getMappingRange(),s={maxIndex:e.getNumberOfColors()-1,range:u,shift:0,scale:0};e.lookupShiftAndScale(u,s);var l=e.getAlpha(),c=t.getNumberOfTuples(),d=t.getNumberOfComponents(),m=r.getData(),p=t.getData();if(l>=1){if(a===f.ScalarMappingTarget.RGBA)for(var v=0;v<c;v++){var g=i(p[v*d+o],n.table,s);m[4*v]=g[0],m[4*v+1]=g[1],m[4*v+2]=g[2],m[4*v+3]=g[3]}}else if(a===f.ScalarMappingTarget.RGBA)for(var h=0;h<c;h++){var b=i(p[h*d+o],n.table,s);m[4*h]=b[0],m[4*h+1]=b[1],m[4*h+2]=b[2],m[4*h+3]=Math.floor(b[3]*l+.5)}},e.forceBuild=function(){var t=0,r=0,a=0,o=0,i=n.numberOfColors-1;i&&(t=(n.hueRange[1]-n.hueRange[0])/i,r=(n.saturationRange[1]-n.saturationRange[0])/i,a=(n.valueRange[1]-n.valueRange[0])/i,o=(n.alphaRange[1]-n.alphaRange[0])/i);for(var u=[],s=[],c=0;c<=i;c++)u[0]=n.hueRange[0]+c*t,u[1]=n.saturationRange[0]+c*r,u[2]=n.valueRange[0]+c*a,l.default.hsv2rgb(u,s),s[3]=n.alphaRange[0]+c*o,n.table[4*c]=255*s[0]+.5,n.table[4*c+1]=255*s[1]+.5,n.table[4*c+2]=255*s[2]+.5,n.table[4*c+3]=255*s[3]+.5;e.buildSpecialColors(),n.buildTime.modified()},e.buildSpecialColors=function(){var e=n.numberOfColors,t=n.table,r=4*(n.numberOfColors+m);n.useBelowRangeColor||0===e?(t[r]=255*n.belowRangeColor[0]+.5,t[r+1]=255*n.belowRangeColor[1]+.5,t[r+2]=255*n.belowRangeColor[2]+.5,t[r+3]=255*n.belowRangeColor[3]+.5):(t[r]=t[0],t[r+1]=t[1],t[r+2]=t[2],t[r+3]=t[3]),r=4*(n.numberOfColors+p),n.useAboveRangeColor||0===e?(t[r]=255*n.aboveRangeColor[0]+.5,t[r+1]=255*n.aboveRangeColor[1]+.5,t[r+2]=255*n.aboveRangeColor[2]+.5,t[r+3]=255*n.aboveRangeColor[3]+.5):(t[r]=t[4*(e-1)+0],t[r+1]=t[4*(e-1)+1],t[r+2]=t[4*(e-1)+2],t[r+3]=t[4*(e-1)+3]),r=4*(n.numberOfColors+v),t[r]=255*n.nanColor[0]+.5,t[r+1]=255*n.nanColor[1]+.5,t[r+2]=255*n.nanColor[2]+.5,t[r+3]=255*n.nanColor[3]+.5},e.build=function(){(n.table.length<1||e.getMTime()>n.buildTime.getMTime())&&e.forceBuild()}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,g,t),d.default.extend(e,n,t),n.table||(n.table=[]),n.buildTime={},u.default.obj(n.buildTime),n.opaqueFlagBuildTime={},u.default.obj(n.opaqueFlagBuildTime,{mtime:0}),u.default.get(e,n,["buildTime"]),u.default.setGet(e,n,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),u.default.setArray(e,n,["alphaRange","hueRange","saturationRange","valueRange"],2),u.default.setArray(e,n,["nanColor","belowRangeColor","aboveRangeColor"],4),u.default.getArray(e,n,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(1),l=r(s),c=t(87),d=r(c),f=t(25),m=0,p=1,v=2,g={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1},h=n.newInstance=u.default.newInstance(o,"vtkLookupTable");n.default=Object.assign({newInstance:h,extend:o})},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return e}function o(e){return Math.floor(255*e+.5)}function i(e,n){n.classHierarchy.push("vtkScalarsToColors"),e.setVectorModeToMagnitude=function(){return e.setVectorMode(h.MAGNITUDE)},e.setVectorModeToComponent=function(){return e.setVectorMode(h.COMPONENT)},e.setVectorModeToRGBColors=function(){return e.setVectorMode(h.RGBCOLORS)},e.build=function(){},e.isOpaque=function(){return!0},e.setAnnotations=function(t,r){if(!(t&&!r||!t&&r)){if(t&&r&&t.getNumberOfTuples()!==r.getNumberOfTuples())return void x("Values and annotations do not have the same number of tuples so ignoring");if(n.annotationArray=[],r&&t)for(var a=r.getNumberOfTuples(),o=0;o<a;o++)n.annotationArray.push({value:t[o],annotation:r[o]});e.updateAnnotatedValueMap(),e.modified()}},e.setAnnotation=function(t,r){var a=e.checkForAnnotatedValue(t),o=!1;return a>=0?n.annotationArray[a].annotation!==r&&(n.annotationArray[a].annotation=r,o=!0):(n.annotationArray.push({value:t,annotation:r}),a=n.annotationArray.length-1,o=!0),o&&(e.updateAnnotatedValueMap(),e.modified()),a},e.getNumberOfAnnotatedValues=function(){return n.annotationArray.length},e.getAnnotatedValue=function(e){return e<0||e>=n.annotationArray.length?null:n.annotationArray[e].value},e.getAnnotation=function(e){return void 0===n.annotationArray[e]?null:n.annotationArray[e].annotation},e.getAnnotatedValueIndex=function(t){return n.annotationArray.length?e.checkForAnnotatedValue(t):-1},e.removeAnnotation=function(t){var r=e.checkForAnnotatedValue(t),a=r>=0;return a&&(n.annotationArray.splice(r,1),e.updateAnnotatedValueMap(),e.modified()),a},e.resetAnnotations=function(){n.annotationArray=[],n.annotatedValueMap=[],e.modified()},e.getAnnotationColor=function(t,r){if(n.indexedLookup){var a=e.getAnnotatedValueIndex(t);e.getIndexedColor(a,r)}else e.getColor(parseFloat(t),r),r[3]=1},e.checkForAnnotatedValue=function(n){return e.getAnnotatedValueIndexInternal(n)},e.getAnnotatedValueIndexInternal=function(e){if(void 0!==n.annotatedValueMap[e]){var t=n.annotationArray.length;return n.annotatedValueMap[e]%t}return-1},e.getIndexedColor=function(e,n){n[0]=0,n[1]=0,n[2]=0,n[3]=0},e.updateAnnotatedValueMap=function(){n.annotatedValueMap=[];for(var e=n.annotationArray.length,t=0;t<e;++t)n.annotatedValueMap[n.annotationArray[t].value]=t},e.mapScalars=function(n,t,r){var a=n.getNumberOfComponents(),o=null;if(t===y.DEFAULT&&n.getDataType()===b.UNSIGNED_CHAR||t===y.DIRECT_SCALARS&&n)o=e.convertToRGBA(n,a,n.getNumberOfTuples());else{var i={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:b.UNSIGNED_CHAR},u=new window[i.dataType](4*n.getNumberOfTuples());i.values=u,i.size=u.length,o=d.default.newInstance(i);var s=r;s<0&&a>1?e.mapVectorsThroughTable(n,o,g.RGBA,-1,-1):(s<0&&(s=0),s>=a&&(s=a-1),e.mapScalarsThroughTable(n,o,g.RGBA,s))}return o},e.mapVectorsToMagnitude=function(e,n,t){for(var r=e.getNumberOfTuples(),a=e.getNumberOfComponents(),o=n.getData(),i=e.getData(),u=0;u<r;u++){for(var s=0,l=0;l<t;l++)s+=i[u*a+l];o[u]=Math.sqrt(s)}},e.mapVectorsThroughTable=function(n,t,r,a,o){var i=e.getVectorMode(),u=o,s=a,l=n.getNumberOfComponents();i===h.COMPONENT?(-1===s&&(s=e.getVectorComponent()),s<0&&(s=0),s>=l&&(s=l-1)):(-1===u&&(u=e.getVectorSize()),u<=0?(s=0,u=l):(s<0&&(s=0),s>=l&&(s=l-1),s+u>l&&(u=l-s)),i!==h.MAGNITUDE||1!==l&&1!==u||(i=h.COMPONENT));var c=0;switch(s>0&&(c=s),i){case h.COMPONENT:e.mapScalarsThroughTable(n,t,r,c);break;default:case h.MAGNITUDE:var f=d.default.newInstance({numberOfComponents:1,values:new Float32Array(n.getNumberOfTuples())});e.mapVectorsToMagnitude(n,f,u),e.mapScalarsThroughTable(f,t,r,0);break;case h.RGBCOLORS:}},e.luminanceToRGBA=function(e,n,t,r){for(var a=r(t),o=n.getData(),i=e.getData(),u=o.length,s=0,l=0;l<u;l+=1){var c=r(o[l]);i[4*s]=c,i[4*s+1]=c,i[4*s+2]=c,i[4*s+3]=a,s++}},e.luminanceAlphaToRGBA=function(e,n,t,r){for(var a=n.getData(),o=e.getData(),i=a.length,u=0,s=0;s<i;s+=2){var l=r(a[s]);o[u]=l,o[u+1]=l,o[u+2]=l,o[u+3]=r(a[s+1])*t,u+=4}},e.rGBToRGBA=function(e,n,t,r){for(var a=o(t),i=n.getData(),u=e.getData(),s=i.length,l=0,c=0;c<s;c+=3)u[4*l]=r(i[c]),u[4*l+1]=r(i[c+1]),u[4*l+2]=r(i[c+2]),u[4*l+3]=a,l++},e.rGBAToRGBA=function(e,n,t,r){for(var a=n.getData(),o=e.getData(),i=a.length,u=0,s=0;s<i;s+=4)o[4*u]=r(a[s]),o[4*u+1]=r(a[s+1]),o[4*u+2]=r(a[s+2]),e[4*u+3]=r(a[s+3])*t,u++},e.convertToRGBA=function(t,r,i){var u=n.alpha;if(4===r&&u>=1&&t.getDataType()===b.UNSIGNED_CHAR)return t;var s=d.default.newInstance({numberOfComponents:4,empty:!0,size:4*i,dataType:b.UNSIGNED_CHAR});if(i<=0)return s;u=u>0?u:0,u=u<1?u:1;var l=a;switch(t.getDataType()!==b.FLOAT&&t.getDataType()!==b.DOUBLE||(l=o),r){case 1:e.luminanceToRGBA(s,t,u,l);break;case 2:e.luminanceAlphaToRGBA(s,t,l);break;case 3:e.rGBToRGBA(s,t,u,l);break;case 4:e.rGBAToRGBA(s,t,u,l);break;default:return x("Cannot convert colors"),null}return s},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return 16777216},e.setRange=function(n,t){return e.setMappingRange(n,t)},e.getRange=function(n,t){return e.getMappingRange()}}function u(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,T,t),l.default.obj(e,n),n.mappingRange=[0,255],n.annotationArray=[],n.annotatedValueMap=[],l.default.setGet(e,n,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),l.default.setArray(e,n,["mappingRange"],2),l.default.getArray(e,n,["mappingRange"]),i(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=u;var s=t(0),l=r(s),c=t(5),d=r(c),f=t(25),m=r(f),p=t(35),v=r(p),g=m.default.ScalarMappingTarget,h=m.default.VectorMode,b=d.default.VtkDataTypes,y=v.default.ColorMode,x=l.default.vtkErrorMacro,T={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:h.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1},_=n.newInstance=l.default.newInstance(u,"vtkScalarsToColors");n.default=Object.assign({newInstance:_,extend:u},m.default)},function(e,n,t){"use strict";function r(e,n,t){t.forEach(function(t){e["get"+t.method]=function(){return n[t.key]},e["set"+t.method]=function(e,r){n[t.key]={factor:e,unit:r}}})}Object.defineProperty(n,"__esModule",{value:!0}),n.addCoincidentTopologyMethods=r;var a=n.CATEGORIES=["Polygon","Line","Point"];n.default={addCoincidentTopologyMethods:r,CATEGORIES:a}},function(e,n,t){"use strict";function r(){return d}function a(e){d=e}function o(){return f}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;f=e}function u(){i(0)}function s(){i(0)}function l(){i(1)}function c(){return m[f]}Object.defineProperty(n,"__esModule",{value:!0}),n.getResolveCoincidentTopologyPolygonOffsetFaces=r,n.setResolveCoincidentTopologyPolygonOffsetFaces=a,n.getResolveCoincidentTopology=o,n.setResolveCoincidentTopology=i,n.setResolveCoincidentTopologyToDefault=u,n.setResolveCoincidentTopologyToOff=s,n.setResolveCoincidentTopologyToPolygonOffset=l,n.getResolveCoincidentTopologyAsString=c;var d=1,f=0,m=n.RESOLVE_COINCIDENT_TOPOLOGY_MODE=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];n.default={getResolveCoincidentTopologyAsString:c,getResolveCoincidentTopologyPolygonOffsetFaces:r,setResolveCoincidentTopology:i,setResolveCoincidentTopologyPolygonOffsetFaces:a,setResolveCoincidentTopologyToDefault:u,setResolveCoincidentTopologyToOff:s,setResolveCoincidentTopologyToPolygonOffset:l}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLImageMapper"),e.buildPass=function(t){if(t){n.openGLImageSlice=e.getFirstAncestorOfType("vtkOpenGLImageSlice"),n.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),n.openGLRenderWindow=n.openGLRenderer.getParent(),n.context=n.openGLRenderWindow.getContext(),n.tris.setOpenGLRenderWindow(n.openGLRenderWindow),n.openGLTexture.setOpenGLRenderWindow(n.openGLRenderWindow),n.colorTexture.setOpenGLRenderWindow(n.openGLRenderWindow);var r=n.openGLRenderer.getRenderable();n.openGLCamera=n.openGLRenderer.getViewNodeFor(r.getActiveCamera()),n.renderable.getSliceAtFocalPoint()&&n.renderable.setSliceFromCamera(r.getActiveCamera())}},e.translucentPass=function(n){n&&e.render()},e.opaqueZBufferPass=function(t){t&&(n.haveSeenDepthRequest=!0,n.renderDepth=!0,e.render(),n.renderDepth=!1)},e.opaquePass=function(n){n&&e.render()},e.render=function(){var t=n.openGLImageSlice.getRenderable(),r=n.openGLRenderer.getRenderable();e.renderPiece(r,t)},e.buildShaders=function(n,t,r){e.getShaderTemplate(n,t,r),e.replaceShaderValues(n,t,r)},e.getShaderTemplate=function(e,n,t){e.Vertex=O.default,e.Fragment=S.default,e.Geometry=""},e.replaceShaderValues=function(e,t,r){var a=e.Vertex,o=e.Fragment;a=T.default.substitute(a,"//VTK::Camera::Dec",["uniform mat4 MCDCMatrix;"]).result,a=T.default.substitute(a,"//VTK::PositionVC::Impl",["  gl_Position = MCDCMatrix * vertexMC;"]).result,a=T.default.substitute(a,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;var i=n.openGLTexture.getComponents();switch(a=T.default.substitute(a,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,o=T.default.substitute(o,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform float shift;","uniform float scale;","uniform sampler2D texture1;","uniform sampler2D colorTexture1;"]).result,i){case 1:o=T.default.substitute(o,"//VTK::TCoord::Impl",["float intensity = texture2D(texture1, tcoordVCVSOutput).r*scale + shift;","gl_FragData[0] = texture2D(colorTexture1, vec2(intensity, 0.5));"]).result;break;case 2:o=T.default.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*scale + shift;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)), scale*tcolor.g + shift);"]).result;break;default:o=T.default.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = scale*texture2D(texture1, tcoordVCVSOutput.st) + shift;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"]).result}n.haveSeenDepthRequest&&(o=T.default.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=T.default.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=a,e.Fragment=o},e.getNeedToRebuildShaders=function(e,t,r){var a=n.openGLTexture.getComponents();return(n.lastHaveSeenDepthRequest!==n.haveSeenDepthRequest||0===e.getProgram()||n.lastTextureComponents!==a)&&(n.lastHaveSeenDepthRequest=n.haveSeenDepthRequest,n.lastTextureComponents=a,!0)},e.updateShaders=function(t,r,a){if(n.lastBoundBO=t,e.getNeedToRebuildShaders(t,r,a)){var o={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(o,r,a);var i=n.openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);i!==t.getProgram()&&(t.setProgram(i),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else n.openGLRenderWindow.getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),e.setMapperShaderParameters(t,r,a),e.setCameraShaderParameters(t,r,a),e.setPropertyShaderParameters(t,r,a)},e.setMapperShaderParameters=function(e,t,r){e.getCABO().getElementCount()&&(n.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&(e.getProgram().isAttributeUsed("vertexMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"vertexMC",e.getCABO().getVertexOffset(),e.getCABO().getStride(),n.context.FLOAT,3,n.context.FALSE)||P("Error setting vertexMC in shader VAO.")),e.getProgram().isAttributeUsed("tcoordMC")&&e.getCABO().getTCoordOffset()&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"tcoordMC",e.getCABO().getTCoordOffset(),e.getCABO().getStride(),n.context.FLOAT,e.getCABO().getTCoordComponents(),n.context.FALSE)||P("Error setting tcoordMC in shader VAO.")),e.getAttributeUpdateTime().modified());var a=n.openGLTexture.getTextureUnit();e.getProgram().setUniformi("texture1",a);var o=r.getProperty().getColorWindow(),i=r.getProperty().getColorLevel(),u=r.getProperty().getRGBTransferFunction();if(u){var s=u.getRange();o=s[1]-s[0],i=.5*(s[1]+s[0])}var l=n.openGLTexture.getShiftAndScale(),c=l.scale/o,d=(l.shift-i)/o+.5;n.haveSeenDepthRequest&&e.getProgram().setUniformi("depthRequest",n.renderDepth?1:0),e.getProgram().setUniformf("shift",d),e.getProgram().setUniformf("scale",c);var f=n.colorTexture.getTextureUnit();e.getProgram().setUniformi("colorTexture1",f)},e.setCameraShaderParameters=function(e,t,r){var a=e.getProgram(),o=n.openGLImageSlice.getKeyMatrices(),u=n.currentInput,s=u.getIndexToWorld();i.mat4.multiply(n.imagemat,o.mcwc,s);var l=n.openGLCamera.getKeyMatrices(t);i.mat4.multiply(n.imagemat,l.wcdc,n.imagemat),a.setUniformMatrix("MCDCMatrix",n.imagemat)},e.setPropertyShaderParameters=function(e,n,t){var r=e.getProgram(),a=t.getProperty(),o=a.getOpacity();r.setUniformf("opacityUniform",o)},e.renderPieceStart=function(t,r){e.updateBufferObjects(t,r),n.lastBoundBO=null},e.renderPieceDraw=function(t,r){var a=n.context;n.openGLTexture.activate(),n.colorTexture.activate(),n.tris.getCABO().getElementCount()&&(e.updateShaders(n.tris,t,r),a.drawArrays(a.TRIANGLES,0,n.tris.getCABO().getElementCount()),n.tris.getVAO().release()),n.openGLTexture.deactivate(),n.colorTexture.deactivate()},e.renderPieceFinish=function(e,n){},e.renderPiece=function(t,r){if(e.invokeEvent({type:"StartEvent"}),n.renderable.update(),n.currentInput=n.renderable.getInputData(),e.invokeEvent({type:"EndEvent"}),null===n.currentInput)return void P("No input!");e.renderPieceStart(t,r),e.renderPieceDraw(t,r),e.renderPieceFinish(t,r)},e.computeBounds=function(t,r){if(!e.getInput())return void h.default.uninitializeBounds(n.bounds);n.bounds=e.getInput().getBounds()},e.updateBufferObjects=function(n,t){e.getNeedToRebuildBufferObjects(n,t)&&e.buildBufferObjects(n,t)},e.getNeedToRebuildBufferObjects=function(t,r){return n.VBOBuildTime.getMTime()<e.getMTime()||n.VBOBuildTime.getMTime()<r.getMTime()||n.VBOBuildTime.getMTime()<n.renderable.getMTime()||n.VBOBuildTime.getMTime()<r.getProperty().getMTime()||n.VBOBuildTime.getMTime()<n.currentInput.getMTime()},e.buildBufferObjects=function(t,r){var a=n.currentInput;if(null!==a){var o=new Uint8Array(3072),i=r.getProperty().getRGBTransferFunction();if(i){var u=""+i.getMTime();if(n.colorTextureString!==u){var s=i.getRange(),l=new Float32Array(3072);i.getTable(s[0],s[1],1024,l,1);for(var c=0;c<3072;++c)o[c]=255*l[c];n.colorTextureString=u,n.colorTexture.setMinificationFilter(C.Filter.LINEAR),n.colorTexture.setMagnificationFilter(C.Filter.LINEAR),n.colorTexture.create2DFromRaw(1024,1,3,m.VtkDataTypes.UNSIGNED_CHAR,o)}}else{if("0"!==n.colorTextureString){for(var d=0;d<3072;++d)o[d]=255*d/3069,o[d+1]=255*d/3069,o[d+2]=255*d/3069;n.colorTextureString="0",n.colorTexture.setMinificationFilter(C.Filter.LINEAR),n.colorTexture.setMagnificationFilter(C.Filter.LINEAR),n.colorTexture.create2DFromRaw(1024,1,3,m.VtkDataTypes.UNSIGNED_CHAR,o)}}var p=n.renderable.getClosestIJKAxis(),v=p.ijkMode,g=n.renderable.getSlice();v!==n.renderable.getSlicingMode()&&(g=n.renderable.getSliceAtPosition(g));var h=a.getExtent(),b=void 0;v===E.I&&(b=g-h[0]),v===E.J&&(b=g-h[2]),v!==E.K&&v!==E.NONE||(b=g-h[4]);var y=g+"A"+a.getMTime()+"A"+a.getPointData().getScalars().getMTime()+"B"+e.getMTime()+"C"+n.renderable.getSlicingMode();if(n.VBOBuildString!==y){var x=a.getDimensions();4===a.getPointData().getScalars().getNumberOfComponents()?(n.openGLTexture.setGenerateMipmap(!0),n.openGLTexture.setMinificationFilter(C.Filter.LINEAR_MIPMAP_LINEAR)):n.openGLTexture.setMinificationFilter(C.Filter.LINEAR),n.openGLTexture.setMagnificationFilter(C.Filter.LINEAR),n.openGLTexture.setWrapS(C.Wrap.CLAMP_TO_EDGE),n.openGLTexture.setWrapT(C.Wrap.CLAMP_TO_EDGE);for(var T=a.getPointData().getScalars().getNumberOfComponents(),_=x[0]*x[1]*T,A=new Float32Array(12),M=new Float32Array(8),O=0;O<4;O++)M[2*O]=O%2?1:0,M[2*O+1]=O>1?1:0;var I=a.getPointData().getScalars().getData(),S=null;if(v===E.I){S=[];for(var R=0;R<x[2];R++)for(var N=0;N<x[1];N++)S.push(I[b+N*x[0]+R*x[0]*x[1]]);x[0]=x[1],x[1]=x[2],A[0]=g,A[1]=h[2],A[2]=h[4],A[3]=g,A[4]=h[3],A[5]=h[4],A[6]=g,A[7]=h[2],A[8]=h[5],A[9]=g,A[10]=h[3],A[11]=h[5]}else if(v===E.J){S=[];for(var D=0;D<x[2];D++)for(var V=0;V<x[0];V++)S.push(I[V+b*x[0]+D*x[0]*x[1]]);x[1]=x[2],A[0]=h[0],A[1]=g,A[2]=h[4],A[3]=h[1],A[4]=g,A[5]=h[4],A[6]=h[0],A[7]=g,A[8]=h[5],A[9]=h[1],A[10]=g,A[11]=h[5]}else v===E.K||v===E.NONE?(S=I.subarray(b*_,(b+1)*_),A[0]=h[0],A[1]=h[2],A[2]=g,A[3]=h[1],A[4]=h[2],A[5]=g,A[6]=h[0],A[7]=h[3],A[8]=g,A[9]=h[1],A[10]=h[3],A[11]=g):P("Reformat slicing not yet supported.");n.openGLTexture.create2DFromRaw(x[0],x[1],T,a.getPointData().getScalars().getDataType(),S),n.openGLTexture.activate(),n.openGLTexture.sendParameters(),n.openGLTexture.deactivate();var k=f.default.newInstance({numberOfComponents:3,values:A});k.setName("points");var L=f.default.newInstance({numberOfComponents:2,values:M});L.setName("tcoords");var F=new Uint16Array(8);F[0]=3,F[1]=0,F[2]=1,F[3]=3,F[4]=3,F[5]=0,F[6]=3,F[7]=2;var z=f.default.newInstance({numberOfComponents:1,values:F});n.tris.getCABO().createVBO(z,"polys",w.Representation.SURFACE,{points:k,tcoords:L,cellOffset:0}),n.VBOBuildTime.modified(),n.VBOBuildString=y}}}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,R,t),A.default.extend(e,n,t),n.tris=v.default.newInstance(),n.openGLTexture=y.default.newInstance(),n.colorTexture=y.default.newInstance(),n.imagemat=i.mat4.create(),c.default.setGet(e,n,[]),n.VBOBuildTime={},c.default.obj(n.VBOBuildTime),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(2),u=t(91),s=r(u),l=t(0),c=r(l),d=t(5),f=r(d),m=t(8),p=t(23),v=r(p),g=t(1),h=r(g),b=t(12),y=r(b),x=t(7),T=r(x),_=t(3),A=r(_),w=t(17),C=t(15),M=t(36),O=r(M),I=t(19),S=r(I),P=c.default.vtkErrorMacro,E=s.default.SlicingMode,R={VBOBuildTime:0,VBOBuildString:null,openGLTexture:null,tris:null,imagemat:null,colorTexture:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0},N=n.newInstance=c.default.newInstance(o,"vtkOpenGLImageMapper");n.default={newInstance:N,extend:o}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.SlicingMode={NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5};n.default={SlicingMode:r}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLImageSlice"),e.buildPass=function(t){if(n.renderable&&n.renderable.getVisibility()&&t){if(!n.renderable)return;e.prepareNodes(),e.addMissingNode(n.renderable.getMapper()),e.removeUnusedNodes()}},e.traverseOpaqueZBufferPass=function(n){e.traverseOpaquePass(n)},e.traverseOpaquePass=function(t){n.renderable&&n.renderable.getVisibility()&&n.renderable.getIsOpaque()&&(e.apply(t,!0),n.children.forEach(function(e){e.traverse(t)}),e.apply(t,!1))},e.traverseTranslucentPass=function(t){n.renderable&&n.renderable.getVisibility()&&!n.renderable.getIsOpaque()&&(e.apply(t,!0),n.children.forEach(function(e){e.traverse(t)}),e.apply(t,!1))},e.queryPass=function(e,t){if(e){if(!n.renderable||!n.renderable.getVisibility())return;n.renderable.getIsOpaque()?t.incrementOpaqueActorCount():t.incrementTranslucentActorCount()}},e.opaqueZBufferPass=function(n,t){return e.opaquePass(n,t)},e.opaquePass=function(t,r){t&&(n.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),n.context.depthMask(!0))},e.translucentPass=function(t,r){t?(n.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),n.context.depthMask(!1)):n.context.depthMask(!0)},e.getKeyMatrices=function(){return n.renderable.getMTime()>n.keyMatrixTime.getMTime()&&(i.mat4.copy(n.keyMatrices.mcwc,n.renderable.getMatrix()),i.mat4.transpose(n.keyMatrices.mcwc,n.keyMatrices.mcwc),n.keyMatrixTime.modified()),n.keyMatrices}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,d,t),c.default.extend(e,n,t),n.keyMatrixTime={},s.default.obj(n.keyMatrixTime,{mtime:0}),n.keyMatrices={mcwc:i.mat4.create()},s.default.setGet(e,n,["context"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(2),u=t(0),s=r(u),l=t(3),c=r(l),d={context:null,keyMatrixTime:null,keyMatrices:null},f=n.newInstance=s.default.newInstance(o,"vtkOpenGLImageSlice");n.default={newInstance:f,extend:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),e.opaquePass=function(t,r){n.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),n.openGLRenderWindow=n.openGLRenderer.getParent();var a=n.openGLRenderer.getAspectRatio(),o=n.openGLRenderer?n.openGLRenderer.getRenderable().getActiveCamera():null,i=n.openGLRenderer.getTiledSizeAndOrigin(),u=null;if(n.renderable.getUseZValues()){var s=r.getZBufferTexture(),l=Math.floor(s.getWidth()),d=Math.floor(s.getHeight()),f=n.openGLRenderWindow.getContext();s.bind();var m=r.getFramebuffer();m?m.saveCurrentBindingsAndBuffers():c("No framebuffer to save/restore");var p=f.createFramebuffer();f.bindFramebuffer(f.FRAMEBUFFER,p),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,s.getHandle(),0),f.checkFramebufferStatus(f.FRAMEBUFFER)===f.FRAMEBUFFER_COMPLETE&&(u=new Uint8Array(l*d*4),f.viewport(0,0,l,d),f.readPixels(0,0,l,d,f.RGBA,f.UNSIGNED_BYTE,u)),m&&m.restorePreviousBindingsAndBuffers(),f.deleteFramebuffer(p)}n.renderable.invokeCallback(n.renderable.getInputData(),o,a,i,u)},e.queryPass=function(e,t){e&&(n.renderable.getUseZValues(),t.setDepthRequested(!0))}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,d,t),l.default.extend(e,n,t),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(3),l=r(s),c=u.default.vtkDebugMacro,d={},f=n.newInstance=u.default.newInstance(o,"vtkOpenGLPixelSpaceCallbackMapper");n.default={newInstance:f,extend:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLRenderer"),e.buildPass=function(t){if(t){if(!n.renderable)return;n.renderable.isActiveCameraCreated()||n.renderable.resetCamera(),e.updateLights(),e.prepareNodes(),e.addMissingNode(n.renderable.getActiveCamera()),e.addMissingNodes(n.renderable.getViewPropsWithNestedProps()),e.removeUnusedNodes()}},e.updateLights=function(){for(var e=0,t=n.renderable.getLightsByReference(),r=0;r<t.length;++r)t[r].getSwitch()>0&&e++;return e||(f("No lights are on, creating one."),n.renderable.createLight()),e},e.opaqueZBufferPass=function(t){if(t){var r=0,a=n.context;n.renderable.getTransparent()||(n.context.clearColor(1,0,0,1),r|=a.COLOR_BUFFER_BIT),n.renderable.getPreserveDepthBuffer()||(a.clearDepth(1),r|=a.DEPTH_BUFFER_BIT,a.depthMask(!0));var o=e.getTiledSizeAndOrigin();a.enable(a.SCISSOR_TEST),a.scissor(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),a.viewport(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),a.colorMask(!0,!0,!0,!0),a.clear(r),a.enable(a.DEPTH_TEST)}},e.cameraPass=function(n){n&&e.clear()},e.getAspectRatio=function(){var e=n.parent.getSizeByReference(),t=n.renderable.getViewportByReference();return e[0]*(t[2]-t[0])/((t[3]-t[1])*e[1])},e.getTiledSizeAndOrigin=function(){var e=n.renderable.getViewportByReference(),t=[0,0,1,1],r=d.default.clampValue(e[0]-t[0],0,1),a=d.default.clampValue(e[1]-t[1],0,1),o=n.parent.normalizedDisplayToDisplay(r,a),i=Math.round(o[0]),u=Math.round(o[1]),s=d.default.clampValue(e[2]-t[0],0,1),l=d.default.clampValue(e[3]-t[1],0,1);s>t[2]-t[0]&&(s=t[2]-t[0]),l>t[3]-t[1]&&(l=t[3]-t[1]);var c=n.parent.normalizedDisplayToDisplay(s,l),f=Math.round(c[0])-i,m=Math.round(c[1])-u;return f<0&&(f=0),m<0&&(m=0),{usize:f,vsize:m,lowerLeftU:i,lowerLeftV:u}},e.clear=function(){var t=0,r=n.context;if(!n.renderable.getTransparent()){var a=n.renderable.getBackgroundByReference();n.context.clearColor(a[0],a[1],a[2],a[3]),t|=r.COLOR_BUFFER_BIT}n.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),t|=r.DEPTH_BUFFER_BIT,r.depthMask(!0)),r.colorMask(!0,!0,!0,!0);var o=e.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),r.viewport(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),r.clear(t),r.enable(r.DEPTH_TEST)},e.releaseGraphicsResources=function(){null!==n.selector&&n.selector.releaseGraphicsResources()},e.setOpenGLRenderWindow=function(t){n.openGLRenderWindow!==t&&(e.releaseGraphicsResources(),n.openGLRenderWindow=t,n.context=null,t&&(n.context=n.openGLRenderWindow.getContext()))}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,m,t),l.default.extend(e,n,t),u.default.get(e,n,["shaderCache"]),u.default.setGet(e,n,["selector"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(3),l=r(s),c=t(1),d=r(c),f=u.default.vtkDebugMacro,m={context:null,openGLRenderWindow:null,selector:null},p=n.newInstance=u.default.newInstance(o,"vtkOpenGLRenderer");n.default={newInstance:p,extend:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLSphereMapper");var t=Object.assign({},e);e.getShaderTemplate=function(e,n,t){e.Vertex=y.default,e.Fragment=T.default,e.Geometry=""},e.replaceShaderValues=function(e,r,a){var o=e.Vertex,i=e.Fragment;o=v.default.substitute(o,"//VTK::Camera::Dec",["uniform mat4 VCDCMatrix;\n","uniform mat4 MCVCMatrix;"]).result,i=v.default.substitute(i,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,i=v.default.substitute(i,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;\n"]).result;var u=["uniform float invertedDepth;\n","uniform int cameraParallel;\n","varying float radiusVCVSOutput;\n","varying vec3 centerVCVSOutput;\n","uniform mat4 VCDCMatrix;\n"];i=v.default.substitute(i,"//VTK::Normal::Dec",u).result;var s="";n.context.getExtension("EXT_frag_depth")&&(s="gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;\n"),i=v.default.substitute(i,"//VTK::Depth::Impl",["  vec3 EyePos;\n","  vec3 EyeDir;\n","  if (cameraParallel != 0) {\n","    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);\n","    EyeDir = vec3(0.0,0.0,-1.0); }\n","  else {\n","    EyeDir = vertexVC.xyz;\n","    EyePos = vec3(0.0,0.0,0.0);\n","    float lengthED = length(EyeDir);\n","    EyeDir = normalize(EyeDir);\n","    if (lengthED > radiusVCVSOutput*3.0) {\n","      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }\n","    }\n","  EyePos = EyePos - centerVCVSOutput;\n","  EyePos = EyePos/radiusVCVSOutput;\n","  float b = 2.0*dot(EyePos,EyeDir);\n","  float c = dot(EyePos,EyePos) - 1.0;\n","  float d = b*b - 4.0*c;\n","  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);\n","  if (d < 0.0) { discard; }\n","  else {\n","    float t = (-b - invertedDepth*sqrt(d))*0.5;\n","    normalVCVSOutput = invertedDepth*normalize(EyePos + t*EyeDir);\n","    vertexVC.xyz = normalVCVSOutput*radiusVCVSOutput + centerVCVSOutput;\n","    }\n","  vec4 pos = VCDCMatrix * vertexVC;\n",s]).result,i=v.default.substitute(i,"//VTK::Normal::Impl","").result,n.haveSeenDepthRequest&&(i=v.default.substitute(i,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=o,e.Fragment=i,t.replaceShaderValues(e,r,a)},e.setMapperShaderParameters=function(e,r,a){e.getCABO().getElementCount()&&(n.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&e.getProgram().isAttributeUsed("offsetMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"offsetMC",12,e.getCABO().getStride(),n.context.FLOAT,2,!1)||_("Error setting 'offsetMC' in shader VAO.")),e.getProgram().isUniformUsed("invertedDepth")&&e.getProgram().setUniformf("invertedDepth",n.invert?-1:1),t.setMapperShaderParameters(e,r,a)},e.setCameraShaderParameters=function(e,t,r){var a=e.getProgram(),o=t.getActiveCamera(),u=n.openGLCamera.getKeyMatrices(t);if(a.isUniformUsed("VCDCMatrix")&&a.setUniformMatrix("VCDCMatrix",u.vcdc),a.isUniformUsed("MCVCMatrix"))if(r.getIsIdentity())a.setUniformMatrix("MCVCMatrix",u.wcvc);else{var s=n.openGLActor.getKeyMatrices(),l=i.mat4.create();i.mat4.multiply(l,u.wcvc,s.mcwc),a.setUniformMatrix("MCVCMatrix",l)}a.isUniformUsed("cameraParallel")&&e.getProgram().setUniformi("cameraParallel",o.getParallelProjection())},e.getOpenGLMode=function(e,t){return n.context.TRIANGLES},e.buildBufferObjects=function(e,t){var r=n.currentInput;if(null!==r){n.renderable.mapScalars(r,1);var a=n.renderable.getColorMapColors(),o=n.primitives[n.primTypes.Tris].getCABO(),i=r.getPointData(),s=r.getPoints(),l=s.getNumberOfPoints(),c=s.getData(),f=null;null!=n.renderable.getScaleArray()&&i.hasArray(n.renderable.getScaleArray())&&(f=i.getArray(n.renderable.getScaleArray()).getData());var p=null,v=0,g=null;a?(v=a.getNumberOfComponents(),o.setColorOffset(0),o.setColorBOStride(4),p=a.getData(),g=new Uint8Array(3*l*4),o.getColorBO()||o.setColorBO(d.default.newInstance()),o.getColorBO().setOpenGLRenderWindow(n.openGLRenderWindow)):o.getColorBO()&&o.setColorBO(null),o.setColorComponents(v);var h=new Float32Array(5*l*3);o.setStride(20);for(var b=Math.cos(m.default.radiansFromDegrees(30)),y=0,x=0,T=0,_=0,A=0;A<l;++A){var w=n.renderable.getRadius();f&&(w=f[A]),y=3*A,h[T++]=c[y++],h[T++]=c[y++],h[T++]=c[y++],h[T++]=-2*w*b,h[T++]=-w,p&&(x=A*v,g[_++]=p[x],g[_++]=p[x+1],g[_++]=p[x+2],g[_++]=p[x+3]),y=3*A,h[T++]=c[y++],h[T++]=c[y++],h[T++]=c[y++],h[T++]=2*w*b,h[T++]=-w,p&&(g[_++]=p[x],g[_++]=p[x+1],g[_++]=p[x+2],g[_++]=p[x+3]),y=3*A,h[T++]=c[y++],h[T++]=c[y++],h[T++]=c[y++],h[T++]=0,h[T++]=2*w,p&&(g[_++]=p[x],g[_++]=p[x+1],g[_++]=p[x+2],g[_++]=p[x+3])}o.setElementCount(T/5),o.upload(h,u.ObjectType.ARRAY_BUFFER),a&&o.getColorBO().upload(g,u.ObjectType.ARRAY_BUFFER),n.VBOBuildTime.modified()}}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,A,t),h.default.extend(e,n,t),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(2),u=t(13),s=t(0),l=r(s),c=t(16),d=r(c),f=t(1),m=r(f),p=t(7),v=r(p),g=t(18),h=r(g),b=t(96),y=r(b),x=t(19),T=r(x),_=l.default.vtkErrorMacro,A={},w=n.newInstance=l.default.newInstance(o,"vtkOpenGLSphereMapper");n.default={newInstance:w,extend:o}},function(e,n){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkSphereMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// this shader implements imposters in OpenGL for Spheres\n\nattribute vec4 vertexMC;\nattribute vec2 offsetMC;\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\nuniform mat3 normalMatrix; // transform model coordinate directions to view coordinates\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvarying vec4 vertexVCVSOutput;\nvarying float radiusVCVSOutput;\nvarying vec3 centerVCVSOutput;\n\nuniform int cameraParallel;\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  // compute the projected vertex position\n  vertexVCVSOutput = MCVCMatrix * vertexMC;\n  centerVCVSOutput = vertexVCVSOutput.xyz;\n  radiusVCVSOutput = length(offsetMC)*0.5;\n\n  // make the triangle face the camera\n  if (cameraParallel == 0)\n    {\n    vec3 dir = normalize(-vertexVCVSOutput.xyz);\n    vec3 base2 = normalize(cross(dir,vec3(1.0,0.0,0.0)));\n    vec3 base1 = cross(base2,dir);\n    vertexVCVSOutput.xyz = vertexVCVSOutput.xyz + offsetMC.x*base1 + offsetMC.y*base2;\n    }\n  else\n    {\n    // add in the offset\n    vertexVCVSOutput.xy = vertexVCVSOutput.xy + offsetMC;\n    }\n\n  gl_Position = VCDCMatrix * vertexVCVSOutput;\n}\n"},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLStickMapper");var t=Object.assign({},e);e.getShaderTemplate=function(e,n,t){e.Vertex=m.default,e.Fragment=v.default,e.Geometry=""},e.replaceShaderValues=function(e,r,a){var o=e.Vertex,i=e.Fragment;o=h.default.substitute(o,"//VTK::Camera::Dec",["uniform mat4 VCDCMatrix;\n","uniform mat4 MCVCMatrix;"]).result,i=h.default.substitute(i,"//VTK::PositionVC::Dec","varying vec4 vertexVCVSOutput;").result,i=h.default.substitute(i,"//VTK::PositionVC::Impl","  vec4 vertexVC = vertexVCVSOutput;\n").result;var u=["uniform int cameraParallel;\n","varying float radiusVCVSOutput;\n","varying vec3 orientVCVSOutput;\n","varying float lengthVCVSOutput;\n","varying vec3 centerVCVSOutput;\n","uniform mat4 VCDCMatrix;\n"];i=h.default.substitute(i,"//VTK::Normal::Dec",u).result;var s="";n.context.getExtension("EXT_frag_depth")&&(s="  gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;\n"),i=h.default.substitute(i,"//VTK::Depth::Impl",["  vec3 EyePos;\n","  vec3 EyeDir;\n","  if (cameraParallel != 0) {\n","    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);\n","    EyeDir = vec3(0.0,0.0,-1.0); }\n","  else {\n","    EyeDir = vertexVC.xyz;\n","    EyePos = vec3(0.0,0.0,0.0);\n","    float lengthED = length(EyeDir);\n","    EyeDir = normalize(EyeDir);\n","    if (lengthED > radiusVCVSOutput*3.0) {\n","      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }\n","    }\n","  EyePos = EyePos - centerVCVSOutput;\n","  vec3 base1;\n","  if (abs(orientVCVSOutput.z) < 0.99) {\n","    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,0.0,1.0))); }\n","  else {\n","    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,1.0,0.0))); }\n","  vec3 base2 = cross(orientVCVSOutput,base1);\n","  EyePos = vec3(dot(EyePos,base1),dot(EyePos,base2),dot(EyePos,orientVCVSOutput));\n","  EyeDir = vec3(dot(EyeDir,base1),dot(EyeDir,base2),dot(EyeDir,orientVCVSOutput));\n","  EyePos = EyePos/radiusVCVSOutput;\n","  float a = EyeDir.x*EyeDir.x + EyeDir.y*EyeDir.y;\n","  float b = 2.0*(EyePos.x*EyeDir.x + EyePos.y*EyeDir.y);\n","  float c = EyePos.x*EyePos.x + EyePos.y*EyePos.y - 1.0;\n","  float d = b*b - 4.0*a*c;\n","  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);\n","  if (d < 0.0) { discard; }\n","  else {\n","    float t =  (-b - sqrt(d))/(2.0*a);\n","    float tz = EyePos.z + t*EyeDir.z;\n","    vec3 iPoint = EyePos + t*EyeDir;\n","    if (abs(iPoint.z)*radiusVCVSOutput > lengthVCVSOutput*0.5) {\n","      float t2 = (-b + sqrt(d))/(2.0*a);\n","      float tz2 = EyePos.z + t2*EyeDir.z;\n","      if (tz2*radiusVCVSOutput > lengthVCVSOutput*0.5 || tz*radiusVCVSOutput < -0.5*lengthVCVSOutput) { discard; }\n","      else {\n","        normalVCVSOutput = orientVCVSOutput;\n","        float t3 = (lengthVCVSOutput*0.5/radiusVCVSOutput - EyePos.z)/EyeDir.z;\n","        iPoint = EyePos + t3*EyeDir;\n","        vertexVC.xyz = radiusVCVSOutput*(iPoint.x*base1 + iPoint.y*base2 + iPoint.z*orientVCVSOutput) + centerVCVSOutput;\n","        }\n","      }\n","    else {\n","      normalVCVSOutput = iPoint.x*base1 + iPoint.y*base2;\n","      vertexVC.xyz = radiusVCVSOutput*(normalVCVSOutput + iPoint.z*orientVCVSOutput) + centerVCVSOutput;\n","      }\n","    }\n","  vec4 pos = VCDCMatrix * vertexVC;\n",s]).result,i=h.default.substitute(i,"//VTK::Normal::Impl","").result;r.getSelector();s="",n.haveSeenDepthRequest&&(i=h.default.substitute(i,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=o,e.Fragment=i,t.replaceShaderValues(e,r,a)},e.setMapperShaderParameters=function(e,r,a){if(e.getCABO().getElementCount()&&(n.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())){r.getSelector();e.getProgram().isAttributeUsed("orientMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"orientMC",12,e.getCABO().getStride(),n.context.FLOAT,3,!1)||x("Error setting 'orientMC' in shader VAO.")),e.getProgram().isAttributeUsed("offsetMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO().getColorBO(),"offsetMC",0,e.getCABO().getColorBOStride(),n.context.UNSIGNED_BYTE,3,!0)||x("Error setting 'offsetMC' in shader VAO.")),e.getProgram().isAttributeUsed("radiusMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"radiusMC",24,e.getCABO().getStride(),n.context.FLOAT,1,!1)||x("Error setting 'radiusMC' in shader VAO.")),e.getVAO().removeAttributeArray("selectionId")}t.setMapperShaderParameters(e,r,a)},e.setCameraShaderParameters=function(e,t,r){var a=e.getProgram(),o=t.getActiveCamera(),u=n.openGLCamera.getKeyMatrices(t);if(a.isUniformUsed("VCDCMatrix")&&a.setUniformMatrix("VCDCMatrix",u.vcdc),r.getIsIdentity())a.isUniformUsed("MCVCMatrix")&&a.setUniformMatrix("MCVCMatrix",u.wcvc),a.isUniformUsed("normalMatrix")&&a.setUniformMatrix3x3("normalMatrix",u.normalMatrix);else{var s=n.openGLActor.getKeyMatrices(),l=i.mat4.create();if(a.isUniformUsed("MCVCMatrix")&&(i.mat4.multiply(l,u.wcvc,s.mcwc),a.setUniformMatrix("MCVCMatrix",l)),a.isUniformUsed("normalMatrix")){var c=i.mat3.create();i.mat3.multiply(c,u.normalMatrix,s.normalMatrix),a.setUniformMatrix3x3("normalMatrix",c)}}a.isUniformUsed("cameraParallel")&&e.getProgram().setUniformi("cameraParallel",o.getParallelProjection())},e.getOpenGLMode=function(e,t){return n.context.TRIANGLES},e.buildBufferObjects=function(e,t){var r=n.currentInput;if(null!==r){n.renderable.mapScalars(r,1);var a=n.renderable.getColorMapColors(),o=n.primitives[n.primTypes.Tris].getCABO(),i=r.getPointData(),s=r.getPoints(),l=s.getNumberOfPoints(),c=s.getData(),f=3;f+=4;var m=null,p=0;o.setColorBOStride(4),o.getColorBO()||o.setColorBO(d.default.newInstance()),o.getColorBO().setOpenGLRenderWindow(n.openGLRenderWindow),a&&(p=a.getNumberOfComponents(),o.setColorOffset(4),m=a.getData(),o.setColorBOStride(8)),o.setColorComponents(p),o.setStride(4*f);var v=new Float32Array(f*l*12),g=new Uint8Array(12*l*(m?8:4)),h=null,b=null;null!=n.renderable.getScaleArray()&&i.hasArray(n.renderable.getScaleArray())&&(h=i.getArray(n.renderable.getScaleArray()).getData()),null!=n.renderable.getOrientationArray()&&i.hasArray(n.renderable.getOrientationArray())?b=i.getArray(n.renderable.getOrientationArray()).getData():x(["Error setting orientationArray.\n","You have to specify the stick orientation"]);for(var y=[0,1,3,0,3,2,2,3,5,2,5,4],T=0,_=0,A=0,w=0,C=0;C<l;++C){var M=n.renderable.getLength(),O=n.renderable.getRadius();h&&(M=h[2*C],O=h[2*C+1]);for(var I=0;I<y.length;++I)T=3*C,v[A++]=c[T++],v[A++]=c[T++],v[A++]=c[T++],T=3*C,v[A++]=b[T++]*M,v[A++]=b[T++]*M,v[A++]=b[T++]*M,v[A++]=O,g[w++]=y[I]%2*255,g[w++]=y[I]>=4?255:0,g[w++]=y[I]>=2?255:0,g[w++]=255,_=C*p,m&&(g[w++]=m[_],g[w++]=m[_+1],g[w++]=m[_+2],g[w++]=m[_+3])}o.setElementCount(A/f),o.upload(v,u.ObjectType.ARRAY_BUFFER),o.getColorBO().upload(g,u.ObjectType.ARRAY_BUFFER),n.VBOBuildTime.modified()}}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,T,t),y.default.extend(e,n,t),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(2),u=t(13),s=t(0),l=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(s),c=t(16),d=r(c),f=t(98),m=r(f),p=t(19),v=r(p),g=t(7),h=r(g),b=t(18),y=r(b),x=l.vtkErrorMacro,T={},_=n.newInstance=l.newInstance(o,"vtkOpenGLStickMapper");n.default={newInstance:_,extend:o}},function(e,n){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkStickMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// this shader implements imposters in OpenGL for Sticks\n\nattribute vec4 vertexMC;\nattribute vec3 orientMC;\nattribute vec4 offsetMC;\nattribute float radiusMC;\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n//VTK::Picking::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\nuniform mat3 normalMatrix; // transform model coordinate directions to view coordinates\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvarying vec4 vertexVCVSOutput;\nvarying float radiusVCVSOutput;\nvarying float lengthVCVSOutput;\nvarying vec3 centerVCVSOutput;\nvarying vec3 orientVCVSOutput;\n\nuniform int cameraParallel;\n\nvoid main()\n{\n  //VTK::Picking::Impl\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  vertexVCVSOutput = MCVCMatrix * vertexMC;\n  centerVCVSOutput = vertexVCVSOutput.xyz;\n  radiusVCVSOutput = radiusMC;\n  lengthVCVSOutput = length(orientMC);\n  orientVCVSOutput = normalMatrix * normalize(orientMC);\n\n  // make sure it is pointing out of the screen\n  if (orientVCVSOutput.z < 0.0)\n    {\n    orientVCVSOutput = -orientVCVSOutput;\n    }\n\n  // make the basis\n  vec3 xbase;\n  vec3 ybase;\n  vec3 dir = vec3(0.0,0.0,1.0);\n  if (cameraParallel == 0)\n    {\n    dir = normalize(-vertexVCVSOutput.xyz);\n    }\n  if (abs(dot(dir,orientVCVSOutput)) == 1.0)\n    {\n    xbase = normalize(cross(vec3(0.0,1.0,0.0),orientVCVSOutput));\n    ybase = cross(xbase,orientVCVSOutput);\n    }\n  else\n    {\n    xbase = normalize(cross(orientVCVSOutput,dir));\n    ybase = cross(orientVCVSOutput,xbase);\n    }\n\n  vec3 offsets = offsetMC.xyz*2.0-1.0;\n  vertexVCVSOutput.xyz = vertexVCVSOutput.xyz +\n    radiusVCVSOutput*offsets.x*xbase +\n    radiusVCVSOutput*offsets.y*ybase +\n    0.5*lengthVCVSOutput*offsets.z*orientVCVSOutput;\n\n  gl_Position = VCDCMatrix * vertexVCVSOutput;\n}\n"},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLVolume"),e.buildPass=function(t){n.renderable&&n.renderable.getVisibility()&&t&&(e.prepareNodes(),e.addMissingNode(n.renderable.getMapper()),e.removeUnusedNodes())},e.queryPass=function(e,t){if(e){if(!n.renderable||!n.renderable.getVisibility())return;t.incrementVolumeCount()}},e.traverseVolumePass=function(t){n.renderable&&n.renderable.getVisibility()&&(e.apply(t,!0),n.children[0].traverse(t),e.apply(t,!1))},e.volumePass=function(t){n.renderable&&n.renderable.getVisibility()&&(t?(n.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),n.context.depthMask(!1)):n.context.depthMask(!0))},e.getKeyMatrices=function(){return n.renderable.getMTime()>n.keyMatrixTime.getMTime()&&(n.renderable.computeMatrix(),i.mat4.copy(n.MCWCMatrix,n.renderable.getMatrix()),i.mat4.transpose(n.MCWCMatrix,n.MCWCMatrix),n.renderable.getIsIdentity()?i.mat3.identity(n.normalMatrix):(i.mat3.fromMat4(n.normalMatrix,n.MCWCMatrix),i.mat3.invert(n.normalMatrix,n.normalMatrix)),n.keyMatrixTime.modified()),{mcwc:n.MCWCMatrix,normalMatrix:n.normalMatrix}}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,d,t),c.default.extend(e,n,t),n.keyMatrixTime={},s.default.obj(n.keyMatrixTime),n.normalMatrix=i.mat3.create(),n.MCWCMatrix=i.mat4.create(),s.default.setGet(e,n,["context"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(2),u=t(0),s=r(u),l=t(3),c=r(l),d={},f=n.newInstance=s.default.newInstance(o,"vtkOpenGLVolume");n.default={newInstance:f,extend:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOpenGLVolumeMapper"),e.buildPass=function(){n.zBufferTexture=null},e.opaqueZBufferPass=function(e,t){if(e){var r=t.getZBufferTexture();r!==n.zBufferTexture&&(n.zBufferTexture=r)}},e.volumePass=function(t,r){if(t){n.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),n.context=n.openGLRenderWindow.getContext(),n.tris.setOpenGLRenderWindow(n.openGLRenderWindow),n.scalarTexture.setOpenGLRenderWindow(n.openGLRenderWindow),n.colorTexture.setOpenGLRenderWindow(n.openGLRenderWindow),n.opacityTexture.setOpenGLRenderWindow(n.openGLRenderWindow),n.lightingTexture.setOpenGLRenderWindow(n.openGLRenderWindow),n.jitterTexture.setOpenGLRenderWindow(n.openGLRenderWindow),n.framebuffer.setOpenGLRenderWindow(n.openGLRenderWindow),n.openGLVolume=e.getFirstAncestorOfType("vtkOpenGLVolume");var a=n.openGLVolume.getRenderable();n.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer");var o=n.openGLRenderer.getRenderable();n.openGLCamera=n.openGLRenderer.getViewNodeFor(o.getActiveCamera()),e.renderPiece(o,a)}},e.buildShaders=function(n,t,r){e.getShaderTemplate(n,t,r),e.replaceShaderValues(n,t,r)},e.getShaderTemplate=function(e,t,r){e.Vertex=P.default,n.openGLRenderWindow.getWebgl2()?e.Fragment=D.default:e.Fragment=R.default,e.Geometry=""},e.replaceShaderValues=function(t,r,a){var o=t.Fragment,i=a.getProperty().getInterpolationType(),u=a.getProperty().getUseGradientOpacity(0)&&n.lightingTexture.getComputedGradients(),l=n.scalarTexture.getVolumeInfo();if(n.openGLRenderWindow.getWebgl2())(u||n.lastLightComplexity>0)&&(o=T.default.substitute(o,"//VTK::Normal::Dec",["uniform highp sampler3D normalTexture;"]).result,o=T.default.substitute(o,"//VTK::Normal::Impl",["vec4 normal = texture(normalTexture, ijk);"]).result);else{o=i===I.InterpolationType.LINEAR?T.default.substitute(o,"//VTK::ComputeTCoords",["vec2 tpos = getTextureCoord(ijk, 0.0);","vec2 tpos2 = getTextureCoord(ijk, 1.0);","float zmix = ijk.z - floor(ijk.z);"]).result:T.default.substitute(o,"//VTK::ComputeTCoords",["vec2 tpos = getTextureCoord(ijk, 0.5);"]).result,o=i===I.InterpolationType.LINEAR?T.default.substitute(o,"//VTK::ScalarFunction",["scalar = getScalarValue(tpos);","float scalar2 = getScalarValue(tpos2);","scalar = mix(scalar, scalar2, zmix);"]).result:T.default.substitute(o,"//VTK::ScalarFunction",["scalar = getScalarValue(tpos);"]).result,(u||n.lastLightComplexity>0)&&(o=T.default.substitute(o,"//VTK::Normal::Dec",["uniform sampler2D normalTexture;"]).result,o=i===I.InterpolationType.LINEAR?T.default.substitute(o,"//VTK::Normal::Impl",["vec4 normal = texture2D(normalTexture, tpos);","vec4 normal2 = texture2D(normalTexture, tpos2);","normal = mix(normal, normal2, zmix);"]).result:T.default.substitute(o,"//VTK::Normal::Impl",["vec4 normal = texture2D(normalTexture,tpos);"]).result),o=l.encodedScalars?T.default.substitute(o,"//VTK::ScalarValueFunction::Impl",["vec4 scalarComps = texture2D(texture1, tpos);","return scalarComps.r + scalarComps.g/255.0 + scalarComps.b/65025.0;"]).result:T.default.substitute(o,"//VTK::ScalarValueFunction::Impl","return texture2D(texture1, tpos).r;").result;var c=n.currentInput.getExtent(),d=n.currentInput.getSpacing(),f=s.vec3.create();s.vec3.set(f,(c[1]-c[0])*d[0],(c[3]-c[2])*d[1],(c[5]-c[4])*d[2]);var m=s.vec3.length(f)/n.renderable.getSampleDistance();o=T.default.substitute(o,"//VTK::MaximumSamplesValue",""+Math.ceil(m)).result}u&&(o=T.default.substitute(o,"//VTK::GradientOpacity::Dec",["uniform float goscale;","uniform float goshift;","uniform float gomin;","uniform float gomax;"]).result,o=T.default.substitute(o,"//VTK::GradientOpacity::Impl",["tcolor.a = tcolor.a*clamp(normal.a*normal.a*goscale + goshift, gomin, gomax);"]).result),null!==n.zBufferTexture&&(o=T.default.substitute(o,"//VTK::ZBuffer::Dec",["uniform sampler2D zBufferTexture;","uniform float vpWidth;","uniform float vpHeight;"]).result,o=T.default.substitute(o,"//VTK::ZBuffer::Impl",["vec4 depthVec = texture2D(zBufferTexture, vec2(gl_FragCoord.x / vpWidth, gl_FragCoord.y/vpHeight));","float zdepth = (depthVec.r*256.0 + depthVec.g)/257.0;","zdepth = zdepth * 2.0 - 1.0;","zdepth = -2.0 * camFar * camNear / (zdepth*(camFar-camNear)-(camFar+camNear)) - camNear;","zdepth = -zdepth/rayDir.z;","tbounds.y = min(zdepth,tbounds.y);"]).result),t.Fragment=o,e.replaceShaderLight(t,r,a)},e.replaceShaderLight=function(e,t,r){var a=e.Fragment;switch(n.lastLightComplexity){default:case 0:break;case 1:case 2:case 3:a=T.default.substitute(a,"//VTK::Light::Dec",["uniform float vSpecularPower;","uniform float vAmbient;","uniform float vDiffuse;","uniform float vSpecular;","//VTK::Light::Dec"],!1).result,a=T.default.substitute(a,"//VTK::Light::Impl",["  normal.rgb = 2.0*(normal.rgb - 0.5);","  vec3 diffuse = vec3(0.0, 0.0, 0.0);","  vec3 specular = vec3(0.0, 0.0, 0.0);","  //VTK::Light::Impl","  tcolor.rgb = tcolor.rgb*(diffuse*vDiffuse + vAmbient) + specular*vSpecular;"],!1).result;var o=0;t.getLights().forEach(function(e){e.getSwitch()>0&&(a=T.default.substitute(a,"//VTK::Light::Dec",["uniform vec3 lightColor"+o+";","uniform vec3 lightDirectionWC"+o+"; // normalized","uniform vec3 lightHalfAngleWC"+o+"; // normalized","//VTK::Light::Dec"],!1).result,a=T.default.substitute(a,"//VTK::Light::Impl",["  float df = abs(dot(normal.rgb, -lightDirectionWC"+o+"));","  diffuse += ((df) * lightColor"+o+");","    float sf = pow( abs(dot(lightHalfAngleWC"+o+",normal.rgb)), vSpecularPower);","    specular += ((sf) * lightColor"+o+");","  //VTK::Light::Impl"],!1).result,o++)})}e.Fragment=a},e.getNeedToRebuildShaders=function(t,r,a){var o=0;a.getProperty().getShade()&&(o=0,n.numberOfLights=0,r.getLights().forEach(function(e){e.getSwitch()>0&&(n.numberOfLights++,0===o&&(o=1)),1===o&&(n.numberOfLights>1||1!==e.getIntensity()||!e.lightTypeIsHeadLight())&&(o=2),o<3&&e.getPositional()&&(o=3)}));var i=!1;return n.lastLightComplexity!==o&&(n.lastLightComplexity=o,i=!0),!!(0===t.getProgram()||i||n.lastHaveSeenDepthRequest!==n.haveSeenDepthRequest||!!n.lastZBufferTexture!=!!n.zBufferTexture||t.getShaderSourceTime().getMTime()<e.getMTime()||t.getShaderSourceTime().getMTime()<a.getMTime()||t.getShaderSourceTime().getMTime()<n.currentInput.getMTime()||t.getShaderSourceTime().getMTime()<n.lightingTexture.getGradientsBuildTime().getMTime())&&(n.lastZBufferTexture=n.zBufferTexture,!0)},e.updateShaders=function(t,r,a){if(n.lastBoundBO=t,e.getNeedToRebuildShaders(t,r,a)){var o={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(o,r,a);var i=n.openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);i!==t.getProgram()&&(t.setProgram(i),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else n.openGLRenderWindow.getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),e.setMapperShaderParameters(t,r,a),e.setCameraShaderParameters(t,r,a),e.setPropertyShaderParameters(t,r,a)},e.setMapperShaderParameters=function(t,r,a){var o=t.getProgram();if(t.getCABO().getElementCount()&&(n.VBOBuildTime.getMTime()>t.getAttributeUpdateTime().getMTime()||t.getShaderSourceTime().getMTime()>t.getAttributeUpdateTime().getMTime())&&(o.isAttributeUsed("vertexDC")&&(t.getVAO().addAttributeArray(o,t.getCABO(),"vertexDC",t.getCABO().getVertexOffset(),t.getCABO().getStride(),n.context.FLOAT,3,n.context.FALSE)||k("Error setting vertexDC in shader VAO.")),t.getAttributeUpdateTime().modified()),o.setUniformi("texture1",n.scalarTexture.getTextureUnit()),o.setUniformf("sampleDistance",n.renderable.getSampleDistance()),null!==n.zBufferTexture){o.setUniformi("zBufferTexture",n.zBufferTexture.getTextureUnit());var i=e.getRenderTargetSize();o.setUniformf("vpWidth",i[0]),o.setUniformf("vpHeight",i[1])}},e.setCameraShaderParameters=function(e,t,r){var a=n.openGLCamera.getKeyMatrices(t),o=e.getProgram(),i=n.openGLCamera.getRenderable(),u=i.getClippingRange();o.setUniformf("camThick",u[1]-u[0]),o.setUniformf("camNear",u[0]),o.setUniformf("camFar",u[1]);for(var l=n.currentInput.getBounds(),c=n.currentInput.getDimensions(),d=s.vec3.create(),f=s.vec3.create(),m=1,p=-1,v=1,g=-1,h=0;h<8;++h){s.vec3.set(d,l[h%2],l[2+Math.floor(h/2)%2],l[4+Math.floor(h/4)]),s.vec3.transformMat4(d,d,a.wcvc),s.vec3.normalize(f,d);var b=-u[0]/d[2];s.vec3.scale(d,f,b),s.vec3.transformMat4(d,d,a.vcdc),m=Math.min(d[0],m),p=Math.max(d[0],p),v=Math.min(d[1],v),g=Math.max(d[1],g)}o.setUniformf("dcxmin",m),o.setUniformf("dcxmax",p),o.setUniformf("dcymin",v),o.setUniformf("dcymax",g);var y=n.currentInput.getExtent(),x=n.currentInput.getSpacing(),T=s.vec3.create();s.vec3.set(T,(y[1]-y[0])*x[0],(y[3]-y[2])*x[1],(y[5]-y[4])*x[2]),o.setUniform3f("vSize",T[0],T[1],T[2]),s.vec3.set(d,y[0],y[2],y[4]),n.currentInput.indexToWorldVec3(d,d),s.vec3.transformMat4(d,d,a.wcvc),o.setUniform3f("vOriginVC",d[0],d[1],d[2]);var _=n.currentInput.getIndexToWorld();s.mat4.multiply(n.idxToView,a.wcvc,_),s.mat3.copy(n.idxNormalMatrix,n.currentInput.getDirection()),s.mat3.multiply(n.idxNormalMatrix,a.normalMatrix,n.idxNormalMatrix);var A=s.vec3.length(T)/n.renderable.getSampleDistance();A>n.renderable.getMaximumSamplesPerRay()&&V("The number of steps required "+Math.ceil(A)+" is larger than the\n        specified maximum number of steps "+n.renderable.getMaximumSamplesPerRay()+".\n        Please either change the\n        volumeMapper sampleDistance or its maximum number of samples.");var w=s.vec3.create();if(n.openGLRenderWindow.getWebgl2()?s.vec3.set(w,1,1,1):s.vec3.set(w,c[0]-1,c[1]-1,c[2]-1),s.vec3.divide(w,w,T),o.setUniform3f("vVCToIJK",w[0],w[1],w[2]),!n.openGLRenderWindow.getWebgl2()){var C=n.scalarTexture.getVolumeInfo();o.setUniformf("texWidth",n.scalarTexture.getWidth()),o.setUniformf("texHeight",n.scalarTexture.getHeight()),o.setUniformi("xreps",C.xreps),o.setUniformf("xstride",C.xstride),o.setUniformf("ystride",C.ystride),o.setUniformi("repWidth",C.width),o.setUniformi("repHeight",C.height),o.setUniformi("repDepth",c[2])}for(var M=s.vec3.create(),O=s.vec3.create(),I=0;I<6;++I){switch(I){default:case 0:s.vec3.set(M,1,0,0),s.vec3.set(O,y[1],y[3],y[5]);break;case 1:s.vec3.set(M,-1,0,0),s.vec3.set(O,y[0],y[2],y[4]);break;case 2:s.vec3.set(M,0,1,0),s.vec3.set(O,y[1],y[3],y[5]);break;case 3:s.vec3.set(M,0,-1,0),s.vec3.set(O,y[0],y[2],y[4]);break;case 4:s.vec3.set(M,0,0,1),s.vec3.set(O,y[1],y[3],y[5]);break;case 5:s.vec3.set(M,0,0,-1),s.vec3.set(O,y[0],y[2],y[4])}s.vec3.transformMat3(M,M,n.idxNormalMatrix),s.vec3.transformMat4(O,O,n.idxToView);var S=-1*s.vec3.dot(O,M);o.setUniform3f("vPlaneNormal"+I,M[0],M[1],M[2]),o.setUniformf("vPlaneDistance"+I,S)}var P=s.mat4.create();switch(s.mat4.invert(P,a.vcdc),o.setUniformMatrix("DCVCMatrix",P),n.lastLightComplexity){default:case 0:break;case 1:case 2:case 3:var E=0,R=i.getDirectionOfProjection(),N=[];t.getLights().forEach(function(e){if(e.getSwitch()>0){var n=e.getColor(),t=e.getIntensity();N[0]=n[0]*t,N[1]=n[1]*t,N[2]=n[2]*t,o.setUniform3fArray("lightColor"+E,N);var r=e.getDirection();o.setUniform3fArray("lightDirectionWC"+E,r);var a=[-.5*(r[0]+R[0]),-.5*(r[1]+R[1]),-.5*(r[2]+R[2])];o.setUniform3fArray("lightHalfAngleWC"+E,a),E++}})}},e.setPropertyShaderParameters=function(e,t,r){var a=e.getProgram();a.setUniformi("ctexture",n.colorTexture.getTextureUnit()),a.setUniformi("otexture",n.opacityTexture.getTextureUnit()),a.setUniformi("jtexture",n.jitterTexture.getTextureUnit());var o=n.scalarTexture.getVolumeInfo(),i=o.max-o.min,u=r.getProperty(),s=u.getScalarOpacity(0),l=s.getRange();a.setUniformf("oshift",(o.min-l[0])/(l[1]-l[0])),a.setUniformf("oscale",i/(l[1]-l[0]));var c=u.getRGBTransferFunction(0),d=c.getRange();a.setUniformf("cshift",(o.min-d[0])/(d[1]-d[0])),a.setUniformf("cscale",i/(d[1]-d[0]));var f=n.lightingTexture.getComputedGradients();if(u.getUseGradientOpacity(0)&&f){var m=n.lightingTexture.getVolumeInfo(),p=u.getGradientOpacityMinimumOpacity(0),v=u.getGradientOpacityMaximumOpacity(0);a.setUniformf("gomin",p),a.setUniformf("gomax",v);var g=[u.getGradientOpacityMinimumValue(0),u.getGradientOpacityMaximumValue(0)];a.setUniformf("goscale",m.max*(v-p)/(g[1]-g[0])),a.setUniformf("goshift",-g[0]*(v-p)/(g[1]-g[0])+p)}(n.lastLightComplexity>0||u.getUseGradientOpacity(0))&&f&&a.setUniformi("normalTexture",n.lightingTexture.getTextureUnit()),n.lastLightComplexity>0&&(a.setUniformf("vAmbient",u.getAmbient()),a.setUniformf("vDiffuse",u.getDiffuse()),a.setUniformf("vSpecular",u.getSpecular()),a.setUniformf("vSpecularPower",u.getSpecularPower()))},e.getRenderTargetSize=function(){if(n.lastXYF>1.43){var e=n.framebuffer.getSize();return[n.fvp[0]*e[0],n.fvp[1]*e[1]]}return n.openGLRenderWindow.getSize()},e.renderPieceStart=function(t,r){if(n.renderable.getAutoAdjustSampleDistances()){var a=t.getVTKWindow().getInteractor(),o=a.getLastFrameTime();if(n.avgFrameTime=.97*n.avgFrameTime+.03*o,n.avgWindowArea=.97*n.avgWindowArea+.03/(n.lastXYF*n.lastXYF),t.getVTKWindow().getInteractor().isAnimating()){var i=Math.sqrt(n.avgFrameTime*a.getDesiredUpdateRate()/n.avgWindowArea);i>10&&(i=10),n.targetXYF=i}else n.targetXYF=Math.sqrt(n.avgFrameTime*a.getStillUpdateRate()/n.avgWindowArea);n.targetXYF<1.53&&n.targetXYF>1.33&&(n.targetXYF=n.lastXYF),Math.abs(1-n.targetXYF/n.lastXYF)<.1&&(n.targetXYF=n.lastXYF),n.lastXYF=n.targetXYF}else n.lastXYF=n.renderable.getImageSampleDistance();n.lastXYF<=1.43&&(n.lastXYF=1);var u=n.lastXYF,s=n.openGLRenderWindow.getSize();if(u>1.43){if(n.framebuffer.saveCurrentBindingsAndBuffers(),null===n.framebuffer.getGLFramebuffer())n.framebuffer.create(Math.floor(.7*s[0]),Math.floor(.7*s[1])),n.framebuffer.populateFramebuffer();else{var l=n.framebuffer.getSize();l[0]===Math.floor(.7*s[0])&&l[1]===Math.floor(.7*s[1])||(console.log("resizing"),n.framebuffer.create(Math.floor(.7*s[0]),Math.floor(.7*s[1])),n.framebuffer.populateFramebuffer())}n.framebuffer.bind();var c=n.context;c.clearColor(0,0,0,0),c.colorMask(!0,!0,!0,!0),c.clear(c.COLOR_BUFFER_BIT),c.viewport(0,0,s[0]/u,s[1]/u),n.fvp=[Math.floor(s[0]/u)/Math.floor(.7*s[0]),Math.floor(s[1]/u)/Math.floor(.7*s[1])]}n.context.disable(n.context.DEPTH_TEST),e.updateBufferObjects(t,r),r.getProperty().getInterpolationType()===I.InterpolationType.NEAREST?(n.scalarTexture.setMinificationFilter(O.Filter.NEAREST),n.scalarTexture.setMagnificationFilter(O.Filter.NEAREST),n.lightingTexture.setMinificationFilter(O.Filter.NEAREST),n.lightingTexture.setMagnificationFilter(O.Filter.NEAREST)):(n.scalarTexture.setMinificationFilter(O.Filter.LINEAR),n.scalarTexture.setMagnificationFilter(O.Filter.LINEAR),n.lightingTexture.setMinificationFilter(O.Filter.LINEAR),n.lightingTexture.setMagnificationFilter(O.Filter.LINEAR)),n.lastBoundBO=null,null!==n.zBufferTexture&&n.zBufferTexture.activate()};var t=null,r=!1;e.renderPieceDraw=function(a,o){var i=n.context;n.scalarTexture.activate(),n.opacityTexture.activate(),n.colorTexture.activate(),n.jitterTexture.activate(),(o.getProperty().getShade()||o.getProperty().getUseGradientOpacity(0))&&(n.lightingTexture.getComputedGradients()?(n.lightingTexture.activate(),r||(r=!0,n.renderable.invokeLightingActivated())):(null!==t&&clearTimeout(t),t=setTimeout(function(){n.openGLRenderWindow.modified()},20),r=!1)),e.updateShaders(n.tris,a,o),i.drawArrays(i.TRIANGLES,0,n.tris.getCABO().getElementCount()),n.tris.getVAO().release(),n.scalarTexture.deactivate(),n.colorTexture.deactivate(),n.opacityTexture.deactivate(),n.jitterTexture.deactivate(),(o.getProperty().getShade()||o.getProperty().getUseGradientOpacity(0))&&n.lightingTexture.deactivate()},e.renderPieceFinish=function(e,t){if(null!==n.zBufferTexture&&n.zBufferTexture.deactivate(),n.lastXYF>1.43){if(n.framebuffer.restorePreviousBindingsAndBuffers(),null===n.copyShader){n.copyShader=n.openGLRenderWindow.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","uniform vec2 tfactor;","varying vec2 tcoord;","void main() { tcoord = vec2(vertexDC.x*0.5 + 0.5, vertexDC.y*0.5 + 0.5) * tfactor; gl_Position = vertexDC; }"].join("\n"),["//VTK::System::Dec","//VTK::Output::Dec","uniform sampler2D texture1;","varying vec2 tcoord;","void main() { gl_FragData[0] = texture2D(texture1,tcoord); }"].join("\n"),"");var r=n.copyShader;n.copyVAO=A.default.newInstance(),n.copyVAO.setOpenGLRenderWindow(n.openGLRenderWindow),n.tris.getCABO().bind(),n.copyVAO.addAttributeArray(r,n.tris.getCABO(),"vertexDC",n.tris.getCABO().getVertexOffset(),n.tris.getCABO().getStride(),n.context.FLOAT,3,n.context.FALSE)||k("Error setting vertexDC in copy shader VAO.")}else n.openGLRenderWindow.getShaderCache().readyShaderProgram(n.copyShader);var a=n.openGLRenderWindow.getSize();n.context.viewport(0,0,a[0],a[1]);var o=n.framebuffer.getColorTexture();o.activate(),n.copyShader.setUniformi("texture",o.getTextureUnit()),n.copyShader.setUniform2f("tfactor",n.fvp[0],n.fvp[1]);var i=n.context;i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA),n.context.drawArrays(n.context.TRIANGLES,0,n.tris.getCABO().getElementCount()),o.deactivate(),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA)}},e.renderPiece=function(t,r){if(e.invokeEvent({type:"StartEvent"}),n.renderable.update(),n.currentInput=n.renderable.getInputData(),e.invokeEvent({type:"EndEvent"}),null===n.currentInput)return void k("No input!");e.renderPieceStart(t,r),e.renderPieceDraw(t,r),e.renderPieceFinish(t,r)},e.computeBounds=function(t,r){if(!e.getInput())return void v.default.uninitializeBounds(n.Bounds);n.bounnds=e.getInput().getBounds()},e.updateBufferObjects=function(n,t){e.getNeedToRebuildBufferObjects(n,t)&&e.buildBufferObjects(n,t)},e.getNeedToRebuildBufferObjects=function(t,r){return n.VBOBuildTime.getMTime()<e.getMTime()||n.VBOBuildTime.getMTime()<r.getMTime()||n.VBOBuildTime.getMTime()<n.renderable.getMTime()||n.VBOBuildTime.getMTime()<r.getProperty().getMTime()||n.VBOBuildTime.getMTime()<n.currentInput.getMTime()},e.buildBufferObjects=function(e,t){var r=n.currentInput;if(null!==r){var a=t.getProperty();if(!n.jitterTexture.getHandle()){for(var o=new Uint8Array(1024),i=0;i<1024;++i)o[i]=255*Math.random();n.jitterTexture.setMinificationFilter(O.Filter.LINEAR),n.jitterTexture.setMagnificationFilter(O.Filter.LINEAR),n.jitterTexture.create2DFromRaw(32,32,1,d.VtkDataTypes.UNSIGNED_CHAR,o)}var u=a.getScalarOpacity(0),s=n.renderable.getSampleDistance()/a.getScalarOpacityUnitDistance(0),l=u.getMTime()+"A"+s;if(n.opacityTextureString!==l){var f=u.getRange(),m=new Float32Array(1024);u.getTable(f[0],f[1],1024,m,1);for(var p=new Uint8Array(1024),v=0;v<1024;++v)p[v]=255*(1-Math.pow(1-m[v],s));n.opacityTexture.setMinificationFilter(O.Filter.LINEAR),n.opacityTexture.setMagnificationFilter(O.Filter.LINEAR),n.opacityTexture.create2DFromRaw(1024,1,1,d.VtkDataTypes.UNSIGNED_CHAR,p),n.opacityTextureString=l}var g=a.getRGBTransferFunction(0);if(l=""+g.getMTime(),n.colorTextureString!==l){var h=g.getRange(),b=new Float32Array(3072);g.getTable(h[0],h[1],1024,b,1);for(var y=new Uint8Array(3072),x=0;x<3072;++x)y[x]=255*b[x];n.colorTexture.setMinificationFilter(O.Filter.LINEAR),n.colorTexture.setMagnificationFilter(O.Filter.LINEAR),n.colorTexture.create2DFromRaw(1024,1,3,d.VtkDataTypes.UNSIGNED_CHAR,y),n.colorTextureString=l}if(l=""+r.getMTime(),n.scalarTextureString!==l){var T=r.getDimensions();n.scalarTexture.resetFormatAndType(),n.scalarTexture.create3DOneComponentFromRaw(T[0],T[1],T[2],r.getPointData().getScalars().getDataType(),r.getPointData().getScalars().getData()),n.scalarTextureString=l}var _=a.getShade(),A=a.getUseGradientOpacity(0);if(l=""+r.getMTime(),(_||A)&&n.lightingTextureString!==l&&(n.lightingTexture.resetFormatAndType(),n.lightingTexture.create3DLighting(n.scalarTexture,r.getPointData().getScalars().getData(),r.getSpacing()),n.lightingTextureString=l),!n.tris.getCABO().getElementCount()){for(var w=new Float32Array(12),C=0;C<4;C++)w[3*C]=C%2*2-1,w[3*C+1]=C>1?1:-1,w[3*C+2]=-1;var I=new Uint16Array(8);I[0]=3,I[1]=0,I[2]=1,I[3]=3,I[4]=3,I[5]=0,I[6]=3,I[7]=2;var S=c.default.newInstance({numberOfComponents:3,values:w});S.setName("points");var P=c.default.newInstance({numberOfComponents:1,values:I});n.tris.getCABO().createVBO(P,"polys",M.Representation.SURFACE,{points:S,cellOffset:0})}n.VBOBuildTime.modified()}}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,L,t),C.default.extend(e,n,t),n.VBOBuildTime={},u.default.obj(n.VBOBuildTime,{mtime:0}),n.tris=m.default.newInstance(),n.scalarTexture=y.default.newInstance(),n.opacityTexture=y.default.newInstance(),n.colorTexture=y.default.newInstance(),n.lightingTexture=y.default.newInstance(),n.jitterTexture=y.default.newInstance(),n.jitterTexture.setWrapS(O.Wrap.REPEAT),n.jitterTexture.setWrapT(O.Wrap.REPEAT),n.framebuffer=h.default.newInstance(),n.idxToView=s.mat4.create(),n.idxNormalMatrix=s.mat3.create(),u.default.setGet(e,n,["context"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(2),l=t(5),c=r(l),d=t(8),f=t(23),m=r(f),p=t(1),v=r(p),g=t(20),h=r(g),b=t(12),y=r(b),x=t(7),T=r(x),_=t(33),A=r(_),w=t(3),C=r(w),M=t(17),O=t(15),I=t(101),S=t(102),P=r(S),E=t(103),R=r(E),N=t(104),D=r(N),V=u.default.vtkWarningMacro,k=u.default.vtkErrorMacro,L={context:null,VBOBuildTime:null,scalarTexture:null,scalarTextureString:null,opacityTexture:null,opacityTextureString:null,colorTexture:null,colortextureString:null,lightingTexture:null,lightingTextureString:null,jitterTexture:null,tris:null,framebuffer:null,copyShader:null,copyVAO:null,lastXYF:1,targetXYF:1,zBufferTexture:null,lastZBufferTexture:null,lastLightComplexity:0,fullViewportTime:1,idxToView:null,idxNormalMatrix:null,avgWindowArea:0,avgFrameTime:0},F=n.newInstance=u.default.newInstance(o,"vtkOpenGLVolumeMapper");n.default={newInstance:F,extend:o}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.InterpolationType={NEAREST:0,LINEAR:1,FAST_LINEAR:2};n.default={InterpolationType:r}},function(e,n){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexDC;\n\nvarying vec3 vertexVCVSOutput;\nuniform mat4 DCVCMatrix;\n\nuniform float dcxmin;\nuniform float dcxmax;\nuniform float dcymin;\nuniform float dcymax;\n\nvoid main()\n{\n  // dcsmall is the device coords reduced to the\n  // x y area covered by the volume\n  vec4 dcsmall = vec4(\n    dcxmin + 0.5 * (vertexDC.x + 1.0) * (dcxmax - dcxmin),\n    dcymin + 0.5 * (vertexDC.y + 1.0) * (dcymax - dcymin),\n    vertexDC.z,\n    vertexDC.w);\n  vec4 vcpos = DCVCMatrix * dcsmall;\n  vertexVCVSOutput = vcpos.xyz/vcpos.w;\n  gl_Position = dcsmall;\n}\n"},function(e,n){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\n// the output of this shader\n//VTK::Output::Dec\n\nvarying vec3 vertexVCVSOutput;\n\n// camera values\nuniform float camThick;\nuniform float camNear;\nuniform float camFar;\n\n// values describing the volume geometry\nuniform vec3 vOriginVC;\nuniform vec3 vSize;\nuniform vec3 vPlaneNormal0;\nuniform float vPlaneDistance0;\nuniform vec3 vPlaneNormal1;\nuniform float vPlaneDistance1;\nuniform vec3 vPlaneNormal2;\nuniform float vPlaneDistance2;\nuniform vec3 vPlaneNormal3;\nuniform float vPlaneDistance3;\nuniform vec3 vPlaneNormal4;\nuniform float vPlaneDistance4;\nuniform vec3 vPlaneNormal5;\nuniform float vPlaneDistance5;\n\n// opacity and color textures\nuniform sampler2D otexture;\nuniform float oshift;\nuniform float oscale;\nuniform sampler2D ctexture;\nuniform float cshift;\nuniform float cscale;\n\n// jitter texture\nuniform sampler2D jtexture;\n\n// some 3D texture values\nuniform sampler2D texture1;\nuniform float sampleDistance;\nuniform vec3 vVCToIJK;\nuniform float texWidth;\nuniform float texHeight;\nuniform int xreps;\nuniform float xstride;\nuniform float ystride;\nuniform int repWidth;\nuniform int repHeight;\nuniform int repDepth;\n\n// declaration for intermixed geometry\n//VTK::ZBuffer::Dec\n\n// Lighting values\n//VTK::Light::Dec\n\n// normal calc\n//VTK::Normal::Dec\n\n// gradient opacity\n//VTK::GradientOpacity::Dec\n\nvec2 getTextureCoord(vec3 ijk, float offset)\n{\n  // uncomment the following line to see  the  packed  texture\n  // return vec2(ijk.x/float(repWidth), ijk.y/float(repHeight));\n  int z = int(ijk.z + offset);\n  int yz = z / xreps;\n  int xz = z - yz*xreps;\n\n  float ni = (ijk.x + float(xz * repWidth))/xstride;\n  float nj = (ijk.y + float(yz * repHeight))/ystride;\n\n  vec2 tpos = vec2(ni/texWidth, nj/texHeight);\n\n  return tpos;\n}\n\n// because scalars may be encoded\n// this func will decode them as needed\nfloat getScalarValue(vec2 tpos)\n{\n  //VTK::ScalarValueFunction::Impl\n}\n\nvec2 getRayPointIntersectionBounds(\n  vec3 rayPos, vec3 rayDir,\n  vec3 planeDir, float planeDist,\n  vec2 tbounds, vec3 vPlaneX, vec3 vPlaneY,\n  float vSize1, float vSize2)\n{\n  float result = dot(rayDir, planeDir);\n  if (result == 0.0)\n  {\n    return tbounds;\n  }\n  result = -1.0 * (dot(rayPos, planeDir) + planeDist) / result;\n  vec3 xposVC = rayPos + rayDir*result;\n  vec3 vxpos = xposVC - vOriginVC;\n  vec2 vpos = vec2(\n    dot(vxpos, vPlaneX),\n    dot(vxpos, vPlaneY));\n\n  // on some apple nvidia systems this does not work\n  // if (vpos.x < 0.0 || vpos.x > vSize1 ||\n  //     vpos.y < 0.0 || vpos.y > vSize2)\n  // even just\n  // if (vpos.x < 0.0 || vpos.y < 0.0)\n  // fails\n  // so instead we compute a value that represents in and out\n  //and then compute the return using this value\n  float xcheck = max(0.0, vpos.x * (vpos.x - vSize1)); //  0 means in bounds\n  float check = sign(max(xcheck, vpos.y * (vpos.y - vSize2))); //  0 means in bounds, 1 = out\n\n  return mix(\n   vec2(min(tbounds.x, result), max(tbounds.y, result)), // in value\n   tbounds, // out value\n   check);  // 0 in 1 out\n}\n\nvoid main()\n{\n  float scalar;\n  vec4 scalarComps;\n\n  // camera is at 0,0,0 so rayDir for perspective is just the vc coord\n  vec3 rayDir = normalize(vertexVCVSOutput);\n  vec2 tbounds = vec2(100.0*camFar, -1.0);\n\n  // all this is in View Coordinates\n  tbounds = getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal0, vPlaneDistance0, tbounds, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  tbounds = getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal1, vPlaneDistance1, tbounds, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  tbounds = getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal2, vPlaneDistance2, tbounds, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  tbounds = getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal3, vPlaneDistance3, tbounds, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  tbounds = getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal4, vPlaneDistance4, tbounds, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n  tbounds = getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal5, vPlaneDistance5, tbounds, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n\n  // do not go behind front clipping plane\n  tbounds.x = max(0.0,tbounds.x);\n\n  // do not go PAST far clipping plane\n  float farDist = -camThick/rayDir.z;\n  tbounds.y = min(farDist,tbounds.y);\n\n  // Do not go past the zbuffer value if set\n  // This is used for intermixing opaque geometry\n  //VTK::ZBuffer::Impl\n\n  // do we need to composite?\n  if (tbounds.y > tbounds.x)\n  {\n    // compute starting and ending values in volume space\n    vec3 startVC = vertexVCVSOutput + tbounds.x*rayDir;\n    startVC = startVC - vOriginVC;\n\n    // vpos and endvpos are in VolumeCoords not Index yet\n    vec3 vpos = vec3(\n      dot(startVC, vPlaneNormal0),\n      dot(startVC, vPlaneNormal2),\n      dot(startVC, vPlaneNormal4));\n    vec3 endVC = vertexVCVSOutput + tbounds.y*rayDir;\n    endVC = endVC - vOriginVC;\n    vec3 endvpos = vec3(\n      dot(endVC, vPlaneNormal0),\n      dot(endVC, vPlaneNormal2),\n      dot(endVC, vPlaneNormal4));\n    vec3 vdelta = endvpos - vpos;\n    float numSteps = length(vdelta) / sampleDistance;\n    vdelta = vdelta / numSteps;\n\n    // start slightly inside and apply some jitter\n    float jitter = texture2D(jtexture, gl_FragCoord.xy/32.0).r;\n    vpos = vpos + vdelta*(0.01 + 0.98*jitter);\n    vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n    int count = int(numSteps - 0.2); // end slightly inside\n\n    vec3 ijk = vpos * vVCToIJK;\n    vdelta = vdelta * vVCToIJK;\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      // compute the 2d texture coordinate/s\n      //VTK::ComputeTCoords\n\n      // compute the scalar\n      //VTK::ScalarFunction\n\n      // now map through opacity and color\n      vec4 tcolor = texture2D(ctexture, vec2(scalar * cscale + cshift, 0.5));\n      tcolor.a = texture2D(otexture, vec2(scalar * oscale + oshift, 0.5)).r;\n\n      // compute the normal if needed\n      //VTK::Normal::Impl\n\n      // handle gradient opacity\n      //VTK::GradientOpacity::Impl\n\n      // handle lighting\n      //VTK::Light::Impl\n\n      float mix = (1.0 - color.a);\n\n      // this line should not be needed but nvidia seems to not handle\n      // the break correctly on windows/chrome 58 angle\n      mix = mix * sign(max(float(count - i + 1), 0.0));\n\n      color = color + vec4(tcolor.rgb*tcolor.a, tcolor.a)*mix;\n      if (i >= count) { break; }\n      if (color.a > 0.99) { color.a = 1.0; break; }\n      ijk += vdelta;\n    }\n\n    gl_FragData[0] = vec4(color.rgb/color.a, color.a);\n    // gl_FragData[0] = vec4(tbounds.y/farDist, tbounds.x/farDist, color.b/color.a, 1.0);\n  }\n  else\n  {\n    discard;\n  }\n}\n"},function(e,n){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\n// the output of this shader\n//VTK::Output::Dec\n\nvarying vec3 vertexVCVSOutput;\n\n// camera values\nuniform float camThick;\nuniform float camNear;\nuniform float camFar;\n\n// values describing the volume geometry\nuniform vec3 vOriginVC;\nuniform vec3 vSize;\nuniform vec3 vPlaneNormal0;\nuniform float vPlaneDistance0;\nuniform vec3 vPlaneNormal1;\nuniform float vPlaneDistance1;\nuniform vec3 vPlaneNormal2;\nuniform float vPlaneDistance2;\nuniform vec3 vPlaneNormal3;\nuniform float vPlaneDistance3;\nuniform vec3 vPlaneNormal4;\nuniform float vPlaneDistance4;\nuniform vec3 vPlaneNormal5;\nuniform float vPlaneDistance5;\n\n// opacity and color textures\nuniform sampler2D otexture;\nuniform float oshift;\nuniform float oscale;\nuniform sampler2D ctexture;\nuniform float cshift;\nuniform float cscale;\n\n// jitter texture\nuniform sampler2D jtexture;\n\n// some 3D texture values\nuniform highp sampler3D texture1;\nuniform float sampleDistance;\nuniform vec3 vVCToIJK;\n\n// declaration for intermixed geometry\n//VTK::ZBuffer::Dec\n\n// Lighting values\n//VTK::Light::Dec\n\n// normal calc\n//VTK::Normal::Dec\n\n// gradient opacity\n//VTK::GradientOpacity::Dec\n\nvec2 getRayPointIntersectionBounds(\n  vec3 rayPos, vec3 rayDir,\n  vec3 planeDir, float planeDist,\n  vec2 tbounds, vec3 vPlaneX, vec3 vPlaneY,\n  float vSize1, float vSize2)\n{\n  float result = dot(rayDir, planeDir);\n  if (result == 0.0)\n  {\n    return tbounds;\n  }\n  result = -1.0 * (dot(rayPos, planeDir) + planeDist) / result;\n  vec3 xposVC = rayPos + rayDir*result;\n  vec3 vxpos = xposVC - vOriginVC;\n  vec2 vpos = vec2(\n    dot(vxpos, vPlaneX),\n    dot(vxpos, vPlaneY));\n\n  // on some apple nvidia systems this does not work\n  // if (vpos.x < 0.0 || vpos.x > vSize1 ||\n  //     vpos.y < 0.0 || vpos.y > vSize2)\n  // even just\n  // if (vpos.x < 0.0 || vpos.y < 0.0)\n  // fails\n  // so instead we compute a value that represents in and out\n  //and then compute the return using this value\n  float xcheck = max(0.0, vpos.x * (vpos.x - vSize1)); //  0 means in bounds\n  float check = sign(max(xcheck, vpos.y * (vpos.y - vSize2))); //  0 means in bounds, 1 = out\n\n  return mix(\n   vec2(min(tbounds.x, result), max(tbounds.y, result)), // in value\n   tbounds, // out value\n   check);  // 0 in 1 out\n}\n\nvoid main()\n{\n  float scalar;\n  vec4 scalarComps;\n\n  // camera is at 0,0,0 so rayDir for perspective is just the vc coord\n  vec3 rayDir = normalize(vertexVCVSOutput);\n  vec2 tbounds = vec2(100.0*camFar, -1.0);\n\n  // all this is in View Coordinates\n  tbounds = getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal0, vPlaneDistance0, tbounds, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  tbounds = getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal1, vPlaneDistance1, tbounds, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  tbounds = getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal2, vPlaneDistance2, tbounds, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  tbounds = getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal3, vPlaneDistance3, tbounds, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  tbounds = getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal4, vPlaneDistance4, tbounds, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n  tbounds = getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal5, vPlaneDistance5, tbounds, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n\n  // do not go behind front clipping plane\n  tbounds.x = max(0.0,tbounds.x);\n\n  // do not go PAST far clipping plane\n  float farDist = -camThick/rayDir.z;\n  tbounds.y = min(farDist,tbounds.y);\n\n  // Do not go past the zbuffer value if set\n  // This is used for intermixing opaque geometry\n  //VTK::ZBuffer::Impl\n\n  // do we need to composite?\n  if (tbounds.y > tbounds.x)\n  {\n    // compute starting and ending values in volume space\n    vec3 startVC = vertexVCVSOutput + tbounds.x*rayDir;\n    startVC = startVC - vOriginVC;\n\n    // vpos and endvpos are in VolumeCoords not Index yet\n    vec3 vpos = vec3(\n      dot(startVC, vPlaneNormal0),\n      dot(startVC, vPlaneNormal2),\n      dot(startVC, vPlaneNormal4));\n    vec3 endVC = vertexVCVSOutput + tbounds.y*rayDir;\n    endVC = endVC - vOriginVC;\n    vec3 endvpos = vec3(\n      dot(endVC, vPlaneNormal0),\n      dot(endVC, vPlaneNormal2),\n      dot(endVC, vPlaneNormal4));\n    vec3 vdelta = endvpos - vpos;\n    float numSteps = length(vdelta) / sampleDistance;\n    vdelta = vdelta / numSteps;\n\n    // start slightly inside and apply some jitter\n    float jitter = texture2D(jtexture, gl_FragCoord.xy/32.0).r;\n    vpos = vpos + vdelta*(0.01 + 0.98*jitter);\n    vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n\n    vec3 ijk = vpos * vVCToIJK;\n    vdelta = vdelta * vVCToIJK;\n    float i = 0.0;\n    while (i < numSteps - 0.2)\n    {\n      // compute the scalar\n      scalar = texture(texture1, ijk).r;\n\n      // now map through opacity and color\n      vec4 tcolor = texture2D(ctexture, vec2(scalar * cscale + cshift, 0.5));\n      tcolor.a = texture2D(otexture, vec2(scalar * oscale + oshift, 0.5)).r;\n\n      // compute the normal if needed\n      //VTK::Normal::Impl\n\n      // handle gradient opacity\n      //VTK::GradientOpacity::Impl\n\n      // handle lighting\n      //VTK::Light::Impl\n\n      float mix = (1.0 - color.a);\n\n      color = color + vec4(tcolor.rgb*tcolor.a, tcolor.a)*mix;\n      if (color.a > 0.99) { color.a = 1.0; break; }\n      ijk += vdelta;\n      i += 1.0;\n    }\n\n    gl_FragData[0] = vec4(color.rgb/color.a, color.a);\n    // gl_FragData[0] = vec4(tbounds.y/farDist, tbounds.x/farDist, color.b/color.a, 1.0);\n  }\n  else\n  {\n    discard;\n  }\n}\n"},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkShaderCache"),e.replaceShaderValues=function(e,t,r){n.context.getExtension("OES_standard_derivatives");var a=t;r.length>0&&(a=d.default.substitute(a,"VSOut","GSOut").result);var o="\n";n.context.getExtension("EXT_frag_depth")&&(o="#extension GL_EXT_frag_depth : enable\n");var i=-1!==n.context.getParameter(n.context.VERSION).indexOf("WebGL 2.0"),u="#version 100\n";i&&(u="#version 300 es\n#define attribute in\n#define textureCube texture\n#define texture2D texture\n"),a=d.default.substitute(a,"//VTK::System::Dec",[u+"\n",i?"":"#extension GL_OES_standard_derivatives : enable\n",o,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;var s=d.default.substitute(e,"//VTK::System::Dec",[u+"\n","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;return i&&(s=d.default.substitute(s,"varying","out").result,a=d.default.substitute(a,"varying","in").result,a=d.default.substitute(a,"gl_FragData\\[0\\]","fragOutput0").result,a=d.default.substitute(a,"//VTK::Output::Dec","layout(location = 0) out vec4 fragOutput0;").result),{VSSource:s,FSSource:a,GSSource:d.default.substitute(r,"//VTK::System::Dec",u).result}},e.readyShaderProgramArray=function(n,t,r){var a=e.replaceShaderValues(n,t,r),o=e.getShaderProgram(a.VSSource,a.FSSource,a.GSSource);return e.readyShaderProgram(o)},e.readyShaderProgram=function(n){return n&&(n.getCompiled()||n.compileShader())&&e.bindShader(n)?n:null},e.getShaderProgram=function(e,t,r){var a=""+e+t+r,o=(0,u.default)(a);if(-1===Object.keys(n.shaderPrograms).indexOf(o)){var i=d.default.newInstance();return i.setContext(n.context),i.getVertexShader().setSource(e),i.getFragmentShader().setSource(t),r&&i.getGeometryShader().setSource(r),i.setMd5Hash(o),n.shaderPrograms[o]=i,i}return n.shaderPrograms[o]},e.releaseGraphicsResources=function(t){e.releaseCurrentShader(),Object.keys(n.shaderPrograms).map(function(e){return n.shaderPrograms[e]}).forEach(function(e){return e.releaseGraphicsResources(t)})},e.releaseGraphicsResources=function(){n.astShaderBound&&(n.lastShaderBound.release(),n.lastShaderBound=null)},e.bindShader=function(e){return n.lastShaderBound===e?1:(n.lastShaderBound&&n.lastShaderBound.release(),e.bind(),n.lastShaderBound=e,1)}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.assign(n,m,t),n.shaderPrograms={},l.default.obj(e,n),l.default.setGet(e,n,f),a(e,n),Object.freeze(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(106),u=r(i),s=t(0),l=r(s),c=t(7),d=r(c),f=["lastShaderBound","context"],m={lastShaderBound:null,shaderPrograms:null,context:null},p=n.newInstance=l.default.newInstance(o,"vtkShaderCache");n.default={newInstance:p,extend:o}},function(e,n,t){"use strict";var r;"function"==typeof Symbol&&Symbol.iterator;!function(a){function o(e,n){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t}function i(e,n){return e<<n|e>>>32-n}function u(e,n,t,r,a,u){return o(i(o(o(n,e),o(r,u)),a),t)}function s(e,n,t,r,a,o,i){return u(n&t|~n&r,e,n,a,o,i)}function l(e,n,t,r,a,o,i){return u(n&r|t&~r,e,n,a,o,i)}function c(e,n,t,r,a,o,i){return u(n^t^r,e,n,a,o,i)}function d(e,n,t,r,a,o,i){return u(t^(n|~r),e,n,a,o,i)}function f(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;var t,r,a,i,u,f=1732584193,m=-271733879,p=-1732584194,v=271733878;for(t=0;t<e.length;t+=16)r=f,a=m,i=p,u=v,f=s(f,m,p,v,e[t],7,-680876936),v=s(v,f,m,p,e[t+1],12,-389564586),p=s(p,v,f,m,e[t+2],17,606105819),m=s(m,p,v,f,e[t+3],22,-1044525330),f=s(f,m,p,v,e[t+4],7,-176418897),v=s(v,f,m,p,e[t+5],12,1200080426),p=s(p,v,f,m,e[t+6],17,-1473231341),m=s(m,p,v,f,e[t+7],22,-45705983),f=s(f,m,p,v,e[t+8],7,1770035416),v=s(v,f,m,p,e[t+9],12,-1958414417),p=s(p,v,f,m,e[t+10],17,-42063),m=s(m,p,v,f,e[t+11],22,-1990404162),f=s(f,m,p,v,e[t+12],7,1804603682),v=s(v,f,m,p,e[t+13],12,-40341101),p=s(p,v,f,m,e[t+14],17,-1502002290),m=s(m,p,v,f,e[t+15],22,1236535329),f=l(f,m,p,v,e[t+1],5,-165796510),v=l(v,f,m,p,e[t+6],9,-1069501632),p=l(p,v,f,m,e[t+11],14,643717713),m=l(m,p,v,f,e[t],20,-373897302),f=l(f,m,p,v,e[t+5],5,-701558691),v=l(v,f,m,p,e[t+10],9,38016083),p=l(p,v,f,m,e[t+15],14,-660478335),m=l(m,p,v,f,e[t+4],20,-405537848),f=l(f,m,p,v,e[t+9],5,568446438),v=l(v,f,m,p,e[t+14],9,-1019803690),p=l(p,v,f,m,e[t+3],14,-187363961),m=l(m,p,v,f,e[t+8],20,1163531501),f=l(f,m,p,v,e[t+13],5,-1444681467),v=l(v,f,m,p,e[t+2],9,-51403784),p=l(p,v,f,m,e[t+7],14,1735328473),m=l(m,p,v,f,e[t+12],20,-1926607734),f=c(f,m,p,v,e[t+5],4,-378558),v=c(v,f,m,p,e[t+8],11,-2022574463),p=c(p,v,f,m,e[t+11],16,1839030562),m=c(m,p,v,f,e[t+14],23,-35309556),f=c(f,m,p,v,e[t+1],4,-1530992060),v=c(v,f,m,p,e[t+4],11,1272893353),p=c(p,v,f,m,e[t+7],16,-155497632),m=c(m,p,v,f,e[t+10],23,-1094730640),f=c(f,m,p,v,e[t+13],4,681279174),v=c(v,f,m,p,e[t],11,-358537222),p=c(p,v,f,m,e[t+3],16,-722521979),m=c(m,p,v,f,e[t+6],23,76029189),f=c(f,m,p,v,e[t+9],4,-640364487),v=c(v,f,m,p,e[t+12],11,-421815835),p=c(p,v,f,m,e[t+15],16,530742520),m=c(m,p,v,f,e[t+2],23,-995338651),f=d(f,m,p,v,e[t],6,-198630844),v=d(v,f,m,p,e[t+7],10,1126891415),p=d(p,v,f,m,e[t+14],15,-1416354905),m=d(m,p,v,f,e[t+5],21,-57434055),f=d(f,m,p,v,e[t+12],6,1700485571),v=d(v,f,m,p,e[t+3],10,-1894986606),p=d(p,v,f,m,e[t+10],15,-1051523),m=d(m,p,v,f,e[t+1],21,-2054922799),f=d(f,m,p,v,e[t+8],6,1873313359),v=d(v,f,m,p,e[t+15],10,-30611744),p=d(p,v,f,m,e[t+6],15,-1560198380),m=d(m,p,v,f,e[t+13],21,1309151649),f=d(f,m,p,v,e[t+4],6,-145523070),v=d(v,f,m,p,e[t+11],10,-1120210379),p=d(p,v,f,m,e[t+2],15,718787259),m=d(m,p,v,f,e[t+9],21,-343485551),f=o(f,r),m=o(m,a),p=o(p,i),v=o(v,u);return[f,m,p,v]}function m(e){var n,t="",r=32*e.length;for(n=0;n<r;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}function p(e){var n,t=[];for(t[(e.length>>2)-1]=void 0,n=0;n<t.length;n+=1)t[n]=0;var r=8*e.length;for(n=0;n<r;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}function v(e){return m(f(p(e),8*e.length))}function g(e,n){var t,r,a=p(e),o=[],i=[];for(o[15]=i[15]=void 0,a.length>16&&(a=f(a,8*e.length)),t=0;t<16;t+=1)o[t]=909522486^a[t],i[t]=1549556828^a[t];return r=f(o.concat(p(n)),512+8*n.length),m(f(i.concat(r),640))}function h(e){var n,t,r="0123456789abcdef",a="";for(t=0;t<e.length;t+=1)n=e.charCodeAt(t),a+=r.charAt(n>>>4&15)+r.charAt(15&n);return a}function b(e){return unescape(encodeURIComponent(e))}function y(e){return v(b(e))}function x(e){return h(y(e))}function T(e,n){return g(b(e),b(n))}function _(e,n){return h(T(e,n))}function A(e,n,t){return n?t?T(n,e):_(n,e):t?y(e):x(e)}void 0!==(r=function(){return A}.call(n,t,n,e))&&(e.exports=r)}()},function(e,n,t){"use strict";function r(e,n){n.classHierarchy.push("vtkOpenGLTextureUnitManager"),e.deleteTable=function(){for(var e=0;e<n.numberOfTextureUnits;++e)!0===n.textureUnits[e]&&u("some texture units  were not properly released");n.textureUnits=[],n.numberOfTextureUnits=0},e.setContext=function(t){if(n.context!==t){if(0!==n.context&&e.deleteTable(),n.context=t,n.context){n.numberOfTextureUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(var r=0;r<n.numberOfTextureUnits;++r)n.textureUnits[r]=!1}e.modified()}},e.allocate=function(){for(var t=0;t<n.numberOfTextureUnits;t++)if(!e.isAllocated(t))return n.textureUnits[t]=!0,t;return-1},e.allocateUnit=function(t){return e.isAllocated(t)?-1:(n.textureUnits[t]=!0,t)},e.isAllocated=function(e){return n.textureUnits[e]},e.free=function(e){n.textureUnits[e]=!1}}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,s,t),i.default.obj(e,n),n.textureUnits=[],i.default.get(e,n,["numberOfTextureUnits"]),i.default.setGet(e,n,["context"]),r(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=a;var o=t(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=i.default.vtkErrorMacro,s={context:null,numberOfTextureUnits:0,textureUnits:0},l=n.newInstance=i.default.newInstance(a,"vtkOpenGLTextureUnitManager");n.default={newInstance:l,extend:a}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){return T("vtkRenderer::"+e+" - NOT IMPLEMENTED")}}function o(e,n){for(n.classHierarchy.push("vtkRenderer"),n.background||(n.background=[0,0,0,1]);n.background.length<3;)n.background.push(0);3===n.background.length&&n.background.push(1);var t={type:"ComputeVisiblePropBoundsEvent",renderer:e},r={type:"ResetCameraClippingRangeEvent",renderer:e},o={type:"ResetCameraEvent",renderer:e};e.updateCamera=function(){return n.activeCamera||(x("No cameras are on, creating one."),e.getActiveCameraAndResetIfCreated()),n.activeCamera.render(e),!0},e.updateLightsGeometryToFollowCamera=function(){var t=e.getActiveCameraAndResetIfCreated();n.lights.forEach(function(e){e.lightTypeIsSceneLight()||(e.lightTypeIsHeadLight()?(e.setPositionFrom(t.getPositionByReference()),e.setFocalPointFrom(t.getFocalPointByReference()),e.modified(t.getMTime())):e.lightTypeIsCameraLight()?T("camera lights not supported yet",e):T("light has unknown light type",e))})},e.updateLightGeometry=function(){return!n.lightFollowCamera||e.updateLightsGeometryToFollowCamera()},e.allocateTime=a("allocateTime"),e.updateGeometry=a("updateGeometry"),e.getVTKWindow=function(){return n.renderWindow},e.setLayer=function(t){x(e.getClassName(),e,"setting Layer to ",t),n.layer!==t&&(n.layer=t,e.modified()),e.setPreserveColorBuffer(!!t)},e.setActiveCamera=function(t){return n.activeCamera!==t&&(n.activeCamera=t,e.modified(),e.invokeEvent({type:"ActiveCameraEvent",camera:t}),!0)},e.makeCamera=function(){var n=d.default.newInstance();return e.invokeEvent({type:"CreateCameraEvent",camera:n}),n},e.getActiveCamera=function(){return n.activeCamera||(n.activeCamera=e.makeCamera()),n.activeCamera},e.getActiveCameraAndResetIfCreated=function(){return n.activeCamera||(e.getActiveCamera(),e.resetCamera()),n.activeCamera},e.addActor=e.addViewProp,e.addVolume=e.addViewProp,e.removeActor=function(t){n.actors=n.actors.filter(function(e){return e!==t}),e.removeViewProp(t)},e.removeVolume=function(t){n.volumes=n.volumes.filter(function(e){return e!==t}),e.removeViewProp(t)},e.addLight=function(t){n.lights=[].concat(n.lights,t),e.modified()},e.getActors=function(){return n.actors=[],n.props.forEach(function(e){n.actors=n.actors.concat(e.getActors())}),n.actors},e.getVolumes=function(){return n.volumes=[],n.props.forEach(function(e){n.volumes=n.volumes.concat(e.getVolumes())}),n.volumes},e.removeLight=function(t){n.lights=n.lights.filter(function(e){return e!==t}),e.modified()},e.removeAllLights=function(){n.lights=[]},e.setLightCollection=function(t){n.lights=t,e.modified()},e.makeLight=m.default.newInstance,e.createLight=function(){n.automaticLightCreation&&(n.createdLight&&(e.removeLight(n.createdLight),n.createdLight.delete(),n.createdLight=null),n.createdLight=e.makeLight(),e.addLight(n.createdLight),n.createdLight.setLightTypeToHeadLight(),n.createdLight.setPosition(e.getActiveCamera().getPosition()),n.createdLight.setFocalPoint(e.getActiveCamera().getFocalPoint()))},e.normalizedDisplayToWorld=function(n,t,r,a){var o=e.normalizedDisplayToView(n,t,r);return e.viewToWorld(o[0],o[1],o[2],a)},e.worldToNormalizedDisplay=function(n,t,r,a){var o=e.worldToView(n,t,r);return e.viewToNormalizedDisplay(o[0],o[1],o[2],a)},e.viewToWorld=function(e,t,r,a){if(null===n.activeCamera)return T("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var o=n.activeCamera.getCompositeProjectionMatrix(a,-1,1);u.mat4.invert(o,o),u.mat4.transpose(o,o);var i=u.vec3.fromValues(e,t,r);return u.vec3.transformMat4(i,i,o),[i[0],i[1],i[2]]},e.worldToView=function(e,t,r,a){if(null===n.activeCamera)return T("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var o=n.activeCamera.getCompositeProjectionMatrix(a,-1,1);u.mat4.transpose(o,o);var i=u.vec3.fromValues(e,t,r);return u.vec3.transformMat4(i,i,o),[i[0],i[1],i[2]]},e.computeVisiblePropBounds=function(){n.allBounds[0]=y.default.INIT_BOUNDS[0],n.allBounds[1]=y.default.INIT_BOUNDS[1],n.allBounds[2]=y.default.INIT_BOUNDS[2],n.allBounds[3]=y.default.INIT_BOUNDS[3],n.allBounds[4]=y.default.INIT_BOUNDS[4],n.allBounds[5]=y.default.INIT_BOUNDS[5];var r=!0;e.invokeEvent(t);for(var a=0;a<n.props.length;++a){var o=n.props[a];if(o.getVisibility()&&o.getUseBounds()){var i=o.getBounds();i&&v.default.areBoundsInitialized(i)&&(r=!1,i[0]<n.allBounds[0]&&(n.allBounds[0]=i[0]),i[1]>n.allBounds[1]&&(n.allBounds[1]=i[1]),i[2]<n.allBounds[2]&&(n.allBounds[2]=i[2]),i[3]>n.allBounds[3]&&(n.allBounds[3]=i[3]),i[4]<n.allBounds[4]&&(n.allBounds[4]=i[4]),i[5]>n.allBounds[5]&&(n.allBounds[5]=i[5]))}}return r&&(v.default.uninitializeBounds(n.allBounds),x("Can't compute bounds, no 3D props are visible")),n.allBounds},e.resetCamera=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=t||e.computeVisiblePropBounds(),a=[0,0,0];if(!v.default.areBoundsInitialized(r))return x("Cannot reset camera!"),!1;var i=null;if(!e.getActiveCamera())return T("Trying to reset non-existant camera"),!1;i=n.activeCamera.getViewPlaneNormal(),n.activeCamera.setViewAngle(30),a[0]=(r[0]+r[1])/2,a[1]=(r[2]+r[3])/2,a[2]=(r[4]+r[5])/2;var u=r[1]-r[0],s=r[3]-r[2],l=r[5]-r[4];u*=u,s*=s,l*=l;var c=u+s+l;c=0===c?1:c,c=.5*Math.sqrt(c);var d=v.default.radiansFromDegrees(n.activeCamera.getViewAngle()),f=c,m=c/Math.sin(.5*d),p=n.activeCamera.getViewUp();return Math.abs(v.default.dot(p,i))>.999&&(_("Resetting view-up since view plane normal is parallel"),n.activeCamera.setViewUp(-p[2],p[0],p[1])),n.activeCamera.setFocalPoint(a[0],a[1],a[2]),n.activeCamera.setPosition(a[0]+m*i[0],a[1]+m*i[1],a[2]+m*i[2]),e.resetCameraClippingRange(r),n.activeCamera.setParallelScale(f),n.activeCamera.setPhysicalScale(1/c),n.activeCamera.setPhysicalTranslation(-a[0],-a[1],-a[2]),e.invokeEvent(o),!0},e.resetCameraClippingRange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=t||e.computeVisiblePropBounds();if(!v.default.areBoundsInitialized(a))return x("Cannot reset camera clipping range!"),!1;if(e.getActiveCameraAndResetIfCreated(),!n.activeCamera)return T("Trying to reset clipping range of non-existant camera"),!1;var o=n.activeCamera.computeClippingRange(a),i=0;if(n.activeCamera.getParallelProjection())i=.1*n.activeCamera.getParallelScale();else{var u=v.default.radiansFromDegrees(n.activeCamera.getViewAngle());i=.2*Math.tan(u/2)*o[1]}return o[1]-o[0]<i&&(i=i-o[1]+o[0],o[1]+=i/2,o[0]-=i/2),o[0]<0&&(o[0]=0),o[0]=.99*o[0]-(o[1]-o[0])*n.clippingRangeExpansion,o[1]=1.01*o[1]+(o[1]-o[0])*n.clippingRangeExpansion,o[0]=o[0]>=o[1]?.01*o[1]:o[0],n.nearClippingPlaneTolerance||(n.nearClippingPlaneTolerance=.01),o[0]<n.nearClippingPlaneTolerance*o[1]&&(o[0]=n.nearClippingPlaneTolerance*o[1]),n.activeCamera.setClippingRange(o[0],o[1]),e.invokeEvent(r),!1},e.setRenderWindow=function(e){e!==n.renderWindow&&(n.vtkWindow=e,n.renderWindow=e)},e.visibleActorCount=function(){return n.props.filter(function(e){return e.getVisibility()}).length},e.visibleVolumeCount=e.visibleActorCount,e.getMTime=function(){var e=n.mtime,t=n.activeCamera?n.activeCamera.getMTime():0;t>e&&(e=t);var r=n.createdLight?n.createdLight.getMTime():0;return r>e&&(e=r),e},e.getTransparent=function(){return!!n.preserveColorBuffer},e.isActiveCameraCreated=function(){return!!n.activeCamera}}function i(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,A,t),h.default.extend(e,n,t),l.default.get(e,n,["renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),l.default.setGet(e,n,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","useShadows","pass"]),l.default.getArray(e,n,["actors","volumes","lights"]),l.default.setGetArray(e,n,["background"],4,1),o(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=i;var u=t(2),s=t(0),l=r(s),c=t(109),d=r(c),f=t(110),m=r(f),p=t(1),v=r(p),g=t(111),h=r(g),b=t(37),y=r(b),x=l.default.vtkDebugMacro,T=l.default.vtkErrorMacro,_=l.default.vtkWarningMacro,A={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,createdLight:null,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:1,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:v.default.createUninitializedBounds(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,pass:0},w=n.newInstance=l.default.newInstance(i,"vtkRenderer");n.default={newInstance:w,extend:i}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkCamera");var t=i.mat4.create(),r=i.mat4.create(),a=i.mat4.create(),o=i.vec3.create(),u=i.vec3.fromValues(0,0,-1),s=i.vec3.fromValues(0,1,0),l=i.vec3.create(),f=i.vec3.create(),m=i.vec3.create(),p=i.mat4.create(),v=i.mat4.create(),g=i.vec3.create(),h=i.vec3.create();e.orthogonalizeViewUp=function(){var t=e.getViewMatrix();n.viewUp[0]=t[4],n.viewUp[1]=t[5],n.viewUp[2]=t[6],e.modified()},e.setPosition=function(t,r,a){t===n.position[0]&&r===n.position[1]&&a===n.position[2]||(n.position[0]=t,n.position[1]=r,n.position[2]=a,e.computeDistance(),e.modified())},e.setFocalPoint=function(t,r,a){t===n.focalPoint[0]&&r===n.focalPoint[1]&&a===n.focalPoint[2]||(n.focalPoint[0]=t,n.focalPoint[1]=r,n.focalPoint[2]=a,e.computeDistance(),e.modified())},e.setDistance=function(t){if(n.distance!==t){n.distance=t,n.distance<1e-20&&(n.distance=1e-20,d("Distance is set to minimum."));var r=n.directionOfProjection;n.focalPoint[0]=n.position[0]+r[0]*n.distance,n.focalPoint[1]=n.position[1]+r[1]*n.distance,n.focalPoint[2]=n.position[2]+r[2]*n.distance,e.modified()}},e.computeDistance=function(){var t=n.focalPoint[0]-n.position[0],r=n.focalPoint[1]-n.position[1],a=n.focalPoint[2]-n.position[2];if(n.distance=Math.sqrt(t*t+r*r+a*a),n.distance<1e-20){n.distance=1e-20,d("Distance is set to minimum.");var o=n.directionOfProjection;n.focalPoint[0]=n.position[0]+o[0]*n.distance,n.focalPoint[1]=n.position[1]+o[1]*n.distance,n.focalPoint[2]=n.position[2]+o[2]*n.distance}n.directionOfProjection[0]=t/n.distance,n.directionOfProjection[1]=r/n.distance,n.directionOfProjection[2]=a/n.distance,e.computeViewPlaneNormal()},e.computeViewPlaneNormal=function(){n.viewPlaneNormal[0]=-n.directionOfProjection[0],n.viewPlaneNormal[1]=-n.directionOfProjection[1],n.viewPlaneNormal[2]=-n.directionOfProjection[2]},e.dolly=function(t){if(!(t<=0)){var r=n.distance/t;e.setPosition(n.focalPoint[0]-r*n.directionOfProjection[0],n.focalPoint[1]-r*n.directionOfProjection[1],n.focalPoint[2]-r*n.directionOfProjection[2])}},e.setRoll=function(e){},e.getRoll=function(){},e.roll=function(t){var r=n.position,a=n.focalPoint,o=n.viewUp,u=i.vec4.fromValues(o[0],o[1],o[2],0);i.mat4.identity(p);var s=i.vec3.fromValues(a[0]-r[0],a[1]-r[1],a[2]-r[2]);i.mat4.rotate(p,p,c.default.radiansFromDegrees(t),s),i.vec4.transformMat4(u,u,p),n.viewUp[0]=u[0],n.viewUp[1]=u[1],n.viewUp[2]=u[2],e.modified()},e.azimuth=function(t){var r=n.focalPoint;i.mat4.identity(v),i.mat4.translate(v,v,i.vec3.fromValues(r[0],r[1],r[2])),i.mat4.rotate(v,v,c.default.radiansFromDegrees(t),i.vec3.fromValues(n.viewUp[0],n.viewUp[1],n.viewUp[2])),i.mat4.translate(v,v,i.vec3.fromValues(-r[0],-r[1],-r[2])),i.vec3.transformMat4(g,i.vec3.fromValues(n.position[0],n.position[1],n.position[2]),v),e.setPosition(g[0],g[1],g[2])},e.yaw=function(t){var r=n.position;i.mat4.identity(v),i.mat4.translate(v,v,i.vec3.fromValues(r[0],r[1],r[2])),i.mat4.rotate(v,v,c.default.radiansFromDegrees(t),i.vec3.fromValues(n.viewUp[0],n.viewUp[1],n.viewUp[2])),i.mat4.translate(v,v,i.vec3.fromValues(-r[0],-r[1],-r[2])),i.vec3.transformMat4(h,i.vec3.fromValues(n.focalPoint[0],n.focalPoint[1],n.focalPoint[2]),v),e.setFocalPoint(h[0],h[1],h[2])},e.elevation=function(t){var r=n.focalPoint,a=e.getViewMatrix(),o=[-a[0],-a[1],-a[2]];i.mat4.identity(v),i.mat4.translate(v,v,i.vec3.fromValues(r[0],r[1],r[2])),i.mat4.rotate(v,v,c.default.radiansFromDegrees(t),i.vec3.fromValues(o[0],o[1],o[2])),i.mat4.translate(v,v,i.vec3.fromValues(-r[0],-r[1],-r[2])),i.vec3.transformMat4(g,i.vec3.fromValues(n.position[0],n.position[1],n.position[2]),v),e.setPosition(g[0],g[1],g[2])},e.pitch=function(t){var r=n.position,a=e.getViewMatrix(),o=[a[0],a[1],a[2]];i.mat4.identity(v),i.mat4.translate(v,v,i.vec3.fromValues(r[0],r[1],r[2])),i.mat4.rotate(v,v,c.default.radiansFromDegrees(t),i.vec3.fromValues(o[0],o[1],o[2])),i.mat4.translate(v,v,i.vec3.fromValues(-r[0],-r[1],-r[2])),i.vec3.transformMat4(h,i.vec3.fromValues(n.focalPoint[0],n.focalPoint[1],n.focalPoint[2]),v),e.setFocalPoint(h[0],h[1],h[2])},e.zoom=function(t){t<=0||(n.parallelProjection?n.parallelScale/=t:n.viewAngle/=t,e.modified())},e.setThickness=function(e){},e.setObliqueAngles=function(e,n){},e.physicalOrientationToWorldDirection=function(n){e.getPhysicalToWorldMatrix(a);var t=i.quat.fromValues(n[0],n[1],n[2],n[3]),r=i.quat.create(),o=i.quat.fromValues(0,0,1,0);return i.quat.conjugate(r,t),i.quat.multiply(o,t,o),i.quat.multiply(o,o,r),[o[0],o[1],o[2]]},e.getPhysicalToWorldMatrix=function(n){e.getWorldToPhysicalMatrix(n),i.mat4.invert(n,n)},e.getWorldToPhysicalMatrix=function(e){i.mat4.identity(a),i.vec3.set(l,n.physicalScale,n.physicalScale,n.physicalScale),i.mat4.scale(a,a,l),i.mat4.translate(a,a,n.physicalTranslation);var t=[3];c.default.cross(n.physicalViewNorth,n.physicalViewUp,t);var r=i.mat4.create();r[0]=t[0],r[1]=t[1],r[2]=t[2],r[4]=n.physicalViewUp[0],r[5]=n.physicalViewUp[1],r[6]=n.physicalViewUp[2],r[8]=-n.physicalViewNorth[0],r[9]=-n.physicalViewNorth[1],r[10]=-n.physicalViewNorth[2],i.mat4.transpose(r,r),i.mat4.multiply(e,a,r)},e.computeViewParametersFromPhysicalMatrix=function(r){e.getWorldToPhysicalMatrix(a),i.mat4.multiply(t,r,a),i.mat4.invert(t,t),i.vec3.transformMat4(l,o,t),e.computeDistance();var c=n.distance;e.setPosition(l[0],l[1],l[2]),i.vec3.transformMat4(f,u,t),i.vec3.subtract(f,f,l),i.vec3.normalize(f,f),e.setDirectionOfProjection(f[0],f[1],f[2]),i.vec3.transformMat4(m,s,t),i.vec3.subtract(m,m,l),e.setViewUp(m[0],m[1],m[2]),e.setDistance(c)},e.getViewMatrix=function(){var e=n.position,r=n.focalPoint,a=n.viewUp,o=i.mat4.create();return i.mat4.lookAt(t,i.vec3.fromValues(e[0],e[1],e[2]),i.vec3.fromValues(r[0],r[1],r[2]),i.vec3.fromValues(a[0],a[1],a[2])),i.mat4.transpose(t,t),i.mat4.copy(o,t),o},e.setProjectionMatrix=function(e){n.projectionMatrix=e},e.getProjectionMatrix=function(e,t,a){var o=i.mat4.create();if(n.projectionMatrix)return i.vec3.set(l,n.physicalScale,n.physicalScale,n.physicalScale),i.mat4.copy(o,n.projectionMatrix),i.mat4.scale(o,o,l),i.mat4.transpose(o,o),o;i.mat4.identity(r);var u=n.clippingRange[1]-n.clippingRange[0],s=[n.clippingRange[0]+(t+1)*u/2,n.clippingRange[0]+(a+1)*u/2];if(n.parallelProjection){var d=n.parallelScale*e,f=n.parallelScale,m=(n.windowCenter[0]-1)*d,p=(n.windowCenter[0]+1)*d,v=(n.windowCenter[1]-1)*f,g=(n.windowCenter[1]+1)*f;i.mat4.ortho(r,m,p,v,g,s[0],s[1]),i.mat4.transpose(r,r)}else{if(n.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");var h=Math.tan(c.default.radiansFromDegrees(n.viewAngle)/2),b=void 0,y=void 0;!0===n.useHorizontalViewAngle?(b=n.clippingRange[0]*h,y=n.clippingRange[0]*h/e):(b=n.clippingRange[0]*h*e,y=n.clippingRange[0]*h);var x=(n.windowCenter[0]-1)*b,T=(n.windowCenter[0]+1)*b,_=(n.windowCenter[1]-1)*y,A=(n.windowCenter[1]+1)*y,w=s[0],C=s[1];r[0]=2*w/(T-x),r[5]=2*w/(A-_),r[2]=(x+T)/(T-x),r[6]=(_+A)/(A-_),r[10]=-(w+C)/(C-w),r[14]=-1,r[11]=-2*w*C/(C-w),r[15]=0}return i.mat4.copy(o,r),o},e.getCompositeProjectionMatrix=function(n,t,r){var a=e.getViewMatrix(),o=e.getProjectionMatrix(n,t,r),u=i.mat4.create();return i.mat4.multiply(u,a,o),u},e.getFrustumPlanes=function(e){},e.getOrientation=function(){},e.getOrientationWXYZ=function(){},e.setDirectionOfProjection=function(t,r,a){if(n.directionOfProjection[0]!==t||n.directionOfProjection[1]!==r||n.directionOfProjection[2]!==a){n.directionOfProjection[0]=t,n.directionOfProjection[1]=r,n.directionOfProjection[2]=a;var o=n.directionOfProjection;n.focalPoint[0]=n.position[0]+o[0]*n.distance,n.focalPoint[1]=n.position[1]+o[1]*n.distance,n.focalPoint[2]=n.position[2]+o[2]*n.distance,e.computeViewPlaneNormal()}},e.setDeviceAngles=function(t,r,a,o){var u=i.mat4.create();i.mat4.rotateZ(u,u,c.default.radiansFromDegrees(t)),i.mat4.rotateX(u,u,c.default.radiansFromDegrees(r)),i.mat4.rotateY(u,u,c.default.radiansFromDegrees(a)),i.mat4.rotateZ(u,u,c.default.radiansFromDegrees(-o));var s=i.vec3.fromValues(0,0,-1),l=i.vec3.fromValues(0,1,0),d=i.vec3.create(),f=i.vec3.create();i.vec3.transformMat4(d,s,u),i.vec3.transformMat4(f,l,u);var m=[3];c.default.cross(n.physicalViewNorth,n.physicalViewUp,m);var p=i.mat3.create();p[0]=m[0],p[1]=m[1],p[2]=m[2],p[3]=n.physicalViewNorth[0],p[4]=n.physicalViewNorth[1],p[5]=n.physicalViewNorth[2],p[6]=n.physicalViewUp[0],p[7]=n.physicalViewUp[1],p[8]=n.physicalViewUp[2],i.mat3.transpose(p,p),i.vec3.transformMat3(d,d,p),i.vec3.transformMat3(f,f,p),e.setDirectionOfProjection(d[0],d[1],d[2]),e.setViewUp(f[0],f[1],f[2]),e.modified()},e.setOrientationWXYZ=function(n,t,r,a){var o=i.mat4.create();if(0!==n&&(0!==t||0!==r||0!==a)){var u=c.default.radiansFromDegrees(n),s=i.quat.create();i.quat.setAxisAngle(s,[t,r,a],u),i.quat.toMat4(s,o)}var l=i.vec3.fromValues(0,0,-1),d=i.vec3.create();i.vec3.transformMat4(d,l,o);var f=i.vec3.fromValues(0,1,0),m=i.vec3.create();i.vec3.transformMat4(m,f,o),e.setDirectionOfProjection(d[0],d[1],d[2]),e.setViewUp(m[0],m[1],m[2]),e.modified()},e.computeClippingRange=function(e){var t=null,r=null;t=n.viewPlaneNormal,r=n.position;for(var a=-t[0],o=-t[1],i=-t[2],u=-(a*r[0]+o*r[1]+i*r[2]),s=[a*e[0]+o*e[2]+i*e[4]+u,1e-18],l=0;l<2;l++)for(var c=0;c<2;c++)for(var d=0;d<2;d++){var f=a*e[d]+o*e[2+c]+i*e[4+l]+u;s[0]=f<s[0]?f:s[0],s[1]=f>s[1]?f:s[1]}return s}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,f,t),s.default.obj(e,n),n.viewMatrix=s.default.get(e,n,["distance","thickness"]),s.default.setGet(e,n,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","useScissor","physicalScale"]),s.default.getArray(e,n,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),s.default.setGetArray(e,n,["clippingRange","windowCenter"],2),s.default.setGetArray(e,n,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=n.DEFAULT_VALUES=void 0,n.extend=o;var i=t(2),u=t(0),s=r(u),l=t(1),c=r(l),d=s.default.vtkDebugMacro,f=n.DEFAULT_VALUES={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],thickness:1e3,windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,useScissor:!1,projectionMatrix:null,physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]},m=n.newInstance=s.default.newInstance(o,"vtkCamera");n.default={newInstance:m,extend:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkLight"),e.getTransformedPosition=function(){return n.transformMatrix?[]:[].concat(n.position)},e.getTransformedFocalPoint=function(){return n.transformMatrix?[]:[].concat(n.focalPoint)},e.getDirection=function(){return n.directionMTime<n.mtime&&(n.direction[0]=n.focalPoint[0]-n.position[0],n.direction[1]=n.focalPoint[1]-n.position[1],n.direction[2]=n.focalPoint[2]-n.position[2],l.default.normalize(n.direction),n.directionMTime=n.mtime),n.direction},e.setDirectionAngle=function(n,t){var r=l.default.radiansFromDegrees(n),a=l.default.radiansFromDegrees(t);e.setPosition(Math.cos(r)*Math.sin(a),Math.sin(r),Math.cos(r)*Math.cos(a)),e.setFocalPoint(0,0,0),e.setPositional(0)},e.setLightTypeToHeadLight=function(){e.setLightType("HeadLight")},e.setLightTypeToCameraLight=function(){e.setLightType("CameraLight")},e.setLightTypeToSceneLight=function(){e.setTransformMatrix(null),e.setLightType("SceneLight")},e.lightTypeIsHeadLight=function(){return"HeadLight"===n.lightType},e.lightTypeIsSceneLight=function(){return"SceneLight"===n.lightType},e.lightTypeIsCameraLight=function(){return"CameraLight"===n.lightType}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,d,t),u.default.obj(e,n),u.default.setGet(e,n,["intensity","switch","positional","exponent","coneAngle","transformMatrix","lightType","shadowAttenuation"]),u.default.setGetArray(e,n,["color","position","focalPoint","attenuationValues"],3),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=n.LIGHT_TYPES=void 0,n.extend=o;var i=t(0),u=r(i),s=t(1),l=r(s),c=n.LIGHT_TYPES=["HeadLight","CameraLight","SceneLight"],d={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0},f=n.newInstance=u.default.newInstance(o,"vtkLight");n.default={newInstance:f,extend:o,LIGHT_TYPES:c}},function(e,n,t){"use strict";function r(e){return function(){return s("vtkViewport::"+e+" - NOT IMPLEMENTED")}}function a(e,n){n.classHierarchy.push("vtkViewport"),e.getViewProps=function(){return n.props},e.hasViewProp=function(e){return!!n.props.filter(function(n){return n===e}).length},e.addViewProp=function(t){t&&!e.hasViewProp(t)&&(n.props=n.props.concat(t))},e.removeViewProp=function(e){var t=n.props.filter(function(n){return n!==e});n.props.length!==t.length&&(n.props=t)},e.removeAllViewProps=function(){n.props=[]},e.getViewPropsWithNestedProps=function(){n.allprops=n.props;for(var e=0;e<n.props.length;++e){var t=n.props[e];t.getNestedProps()&&(n.allprops=n.allprops.concat(t.getNestedProps()))}return n.allprops},e.addActor2D=e.addViewProp,e.removeActor2D=function(n){e.removeViewProp(n)},e.getActors2D=function(){return n.actors2D=[],n.props.forEach(function(e){n.actors2D=n.actors2D.concat(e.getActors2D())}),n.actors2D},e.displayToView=function(){return s("call displayToView on your view instead")},e.viewToDisplay=function(){return s("callviewtodisplay on your view instead")},e.getSize=function(){return s("call getSize on your View instead")},e.normalizedDisplayToView=function(n,t,r){var a=e.normalizedDisplayToNormalizedViewport(n,t,r);return e.normalizedViewportToView(a[0],a[1],a[2])},e.normalizedDisplayToNormalizedViewport=function(e,t,r){var a=[n.viewport[2]-n.viewport[0],n.viewport[3]-n.viewport[1]];return[(e-n.viewport[0])/a[0],(t-n.viewport[1])/a[1],r]},e.normalizedViewportToView=function(e,n,t){return[2*e-1,2*n-1,2*t-1]},e.viewToNormalizedDisplay=function(n,t,r){var a=e.viewToNormalizedViewport(n,t,r);return e.normalizedViewportToNormalizedDisplay(a[0],a[1],a[2])},e.normalizedViewportToNormalizedDisplay=function(e,t,r){var a=[n.viewport[2]-n.viewport[0],n.viewport[3]-n.viewport[1]];return[e*a[0]+n.viewport[0],t*a[1]+n.viewport[1],r]},e.viewToNormalizedViewport=function(e,n,t){return[.5*(e+1),.5*(n+1),.5*(t+1)]},e.PickPropFrom=r("PickPropFrom")}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,l,t),u.default.obj(e,n),u.default.event(e,n,"event"),u.default.setGetArray(e,n,["viewport"],4),u.default.setGetArray(e,n,["background","background2"],3),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=u.default.vtkErrorMacro,l={vtkWindow:null,background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]},c=n.newInstance=u.default.newInstance(o,"vtkViewport");n.default={newInstance:c,extend:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n,t){return e[0]*(t[0]-n[0])+e[1]*(t[1]-n[1])+e[2]*(t[2]-n[2])}function o(e,n,t){var r=t[0]*(e[0]-n[0])+t[1]*(e[1]-n[1])+t[2]*(e[2]-n[2]);return Math.abs(r)}function i(e,n,t,r){var a=[];m.default.subtract(e,n,a);var o=m.default.dot(t,a);r[0]=e[0]-o*t[0],r[1]=e[1]-o*t[1],r[2]=e[2]-o*t[2]}function u(e,n,t){var r=m.default.dot(e,n),a=m.default.dot(n,n);0===a&&(a=1),t[0]=e[0]-r*n[0]/a,t[1]=e[1]-r*n[1]/a,t[2]=e[2]-r*n[2]/a}function s(e,n,t,r){var a=[];m.default.subtract(e,n,a);var o=m.default.dot(t,a),i=m.default.dot(t,t);0!==i?(r[0]=e[0]-o*t[0]/i,r[1]=e[1]-o*t[1]/i,r[2]=e[2]-o*t[2]/i):(r[0]=e[0],r[1]=e[1],r[2]=e[2])}function l(e,n,t,r){var a={intersection:!1,t:Number.MAX_VALUE,x:[]},o=[];m.default.subtract(n,e,o);var i=m.default.dot(r,t)-m.default.dot(r,e),u=m.default.dot(r,o),s=void 0,l=void 0;return s=u<0?-u:u,l=i<0?-i*g:i*g,s<=l?a:(a.t=i/u,a.x[0]=e[0]+a.t*o[0],a.x[1]=e[1]+a.t*o[1],a.x[2]=e[2]+a.t*o[2],a.intersection=a.t>=0&&a.t<=1,a)}function c(e,n){n.classHierarchy.push("vtkPlane"),e.distanceToPlane=function(e){return o(e,n.origin,n.normal)},e.projectPoint=function(e,t){i(e,n.origin,n.normal,t)},e.projectVector=function(e,t){u(e,n.normal,t)},e.push=function(e){if(0!==e)for(var t=0;t<3;t++)n.origin[t]+=e*n.normal[t]},e.generalizedProjectPoint=function(e,t){s(e,n.origin,n.normal,t)},e.evaluateFunction=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=[].concat(t);return Array.isArray(t[0])&&(a=t[0]),3!==a.length?Number.MAX_VALUE:n.normal[0]*(a[0]-n.origin[0])+n.normal[1]*(a[1]-n.origin[1])+n.normal[2]*(a[2]-n.origin[2])},e.evaluateGradient=function(e){return[n.normal[0],n.normal[1],n.normal[2]]},e.intersectWithLine=function(e,t){return l(e,t,n.origin,n.normal)}}function d(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,b,t),v.default.obj(e,n),v.default.setGetArray(e,n,["normal","origin"],3),c(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=n.STATIC=void 0,n.vtkPlane=c,n.extend=d;var f=t(1),m=r(f),p=t(0),v=r(p),g=1e-6,h=n.STATIC={evaluate:a,distanceToPlane:o,projectPoint:i,projectVector:u,generalizedProjectPoint:s,intersectWithLine:l},b={normal:[0,0,1],origin:[0,0,0]},y=n.newInstance=v.default.newInstance(d,"vtkPlane");n.default=Object.assign({newInstance:y,extend:d},h)},function(e,n,t){"use strict";function r(e,n){n.classHierarchy.push("vtkRenderWindow"),e.addRenderer=function(t){e.hasRenderer(t)||(t.setRenderWindow(e),n.renderers.push(t),e.modified())},e.removeRenderer=function(t){n.renderers=n.renderers.filter(function(e){return e!==t}),e.modified()},e.hasRenderer=function(e){return-1!==n.renderers.indexOf(e)},e.addView=function(t){e.hasView(t)||(t.setRenderable(e),n.views.push(t),e.modified())},e.removeView=function(t){n.views=n.views.filter(function(e){return e!==t}),e.modified()},e.hasView=function(e){return-1!==n.views.indexOf(e)},e.render=function(){n.interactor?n.interactor.render():n.views.forEach(function(e){return e.traverseAllPasses()})},e.getStatistics=function(){var e={propCount:0,invisiblePropCount:0};return n.renderers.forEach(function(n){n.getViewProps().forEach(function(n){if(n.getVisibility()){e.propCount+=1;var t=n.getMapper();if(t&&t.getPrimativeCount){var r=t.getPrimativeCount();Object.keys(r).forEach(function(n){e[n]||(e[n]=0),e[n]+=r[n]})}}else e.invisiblePropCount+=1})}),e.str=Object.keys(e).map(function(n){return n+": "+e[n]}).join("\n"),e},e.captureImages=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";return e.render(),n.views.map(function(e){return e.captureImage?e.captureImage(t):void 0}).filter(function(e){return!!e})}}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,u,t),i.default.obj(e,n),i.default.setGet(e,n,["interactor","numberOfLayers","views"]),i.default.get(e,n,["neverRendered"]),i.default.getArray(e,n,["renderers"]),i.default.event(e,n,"completion"),r(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=n.DEFAULT_VALUES=void 0,n.extend=a;var o=t(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=n.DEFAULT_VALUES={renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1},s=n.newInstance=i.default.newInstance(a,"vtkRenderWindow");n.default={newInstance:s,extend:a}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkInteractorStyleTrackballCamera"),e.handleMouseMove=function(t){var r=t.position,a=t.pokedRenderer;switch(n.state){case v.IS_ROTATE:e.handleMouseRotate(a,r),e.invokeInteractionEvent({type:"InteractionEvent"});break;case v.IS_PAN:e.handleMousePan(a,r),e.invokeInteractionEvent({type:"InteractionEvent"});break;case v.IS_DOLLY:e.handleMouseDolly(a,r),e.invokeInteractionEvent({type:"InteractionEvent"});break;case v.IS_SPIN:e.handleMouseSpin(a,r),e.invokeInteractionEvent({type:"InteractionEvent"})}n.previousPosition=r},e.handleButton3D=function(t){if(t&&t.pressed&&t.device===p.Device.RightController&&t.input===p.Input.TrackPad)return void e.startCameraPose();t&&!t.pressed&&t.device===p.Device.RightController&&t.input===p.Input.TrackPad&&n.state===v.IS_CAMERA_POSE&&e.endCameraPose()},e.handleMove3D=function(t){switch(n.state){case v.IS_CAMERA_POSE:e.updateCameraPose(t)}},e.updateCameraPose=function(e){var n=e.pokedRenderer.getActiveCamera(),t=n.getPhysicalTranslation(),r=e.gamepad.axes[1],a=.05*r/n.getPhysicalScale(),o=n.physicalOrientationToWorldDirection(e.orientation);n.setPhysicalTranslation(t[0]+o[0]*a,t[1]+o[1]*a,t[2]+o[2]*a)},e.handleLeftButtonPress=function(t){var r=t.position;n.previousPosition=r,t.shiftKey?t.controlKey||t.altKey?e.startDolly():e.startPan():t.controlKey||t.altKey?e.startSpin():e.startRotate()},e.handleLeftButtonRelease=function(){switch(n.state){case v.IS_DOLLY:e.endDolly();break;case v.IS_PAN:e.endPan();break;case v.IS_SPIN:e.endSpin();break;case v.IS_ROTATE:e.endRotate()}},e.handleStartMouseWheel=function(){e.startDolly()},e.handleEndMouseWheel=function(){e.endDolly()},e.handleStartPinch=function(t){n.previousScale=t.scale,e.startDolly()},e.handleEndPinch=function(){e.endDolly()},e.handleStartRotate=function(t){n.previousRotation=t.rotation,e.startRotate()},e.handleEndRotate=function(){e.endRotate()},e.handleStartPan=function(t){n.previousTranslation=t.translation,e.startPan()},e.handleEndPan=function(){e.endPan()},e.handlePinch=function(t){e.dollyByFactor(t.pokedRenderer,t.scale/n.previousScale),n.previousScale=t.scale},e.handlePan=function(t){var r=t.pokedRenderer.getActiveCamera(),a=r.getFocalPoint();a=e.computeWorldToDisplay(t.pokedRenderer,a[0],a[1],a[2]);var o=a[2],i=t.translation,u=n.previousTranslation,s=e.computeDisplayToWorld(t.pokedRenderer,a[0]+i[0]-u[0],a[1]+i[1]-u[1],o),l=e.computeDisplayToWorld(t.pokedRenderer,a[0],a[1],o),c=[];c[0]=l[0]-s[0],c[1]=l[1]-s[1],c[2]=l[2]-s[2],a=r.getFocalPoint();var d=r.getPosition();r.setFocalPoint(c[0]+a[0],c[1]+a[1],c[2]+a[2]),r.setPosition(c[0]+d[0],c[1]+d[1],c[2]+d[2]),n.interactor.getLightFollowCamera()&&t.pokedRenderer.updateLightsGeometryToFollowCamera(),r.orthogonalizeViewUp(),n.previousTranslation=t.translation},e.handleRotate=function(e){var t=e.pokedRenderer.getActiveCamera();t.roll(e.rotation-n.previousRotation),t.orthogonalizeViewUp(),n.previousRotation=e.rotation},e.handleMouseRotate=function(e,t){var r=n.interactor,a=t.x-n.previousPosition.x,o=t.y-n.previousPosition.y,i=r.getView().getViewportSize(e),u=-.1,s=-.1;i[0]&&i[1]&&(u=-20/i[1],s=-20/i[0]);var l=a*s*n.motionFactor,c=o*u*n.motionFactor,d=e.getActiveCamera();Number.isNaN(l)||Number.isNaN(c)||(d.azimuth(l),d.elevation(c),d.orthogonalizeViewUp()),n.autoAdjustCameraClippingRange&&e.resetCameraClippingRange(),r.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()},e.handleMouseSpin=function(e,t){var r=n.interactor,a=e.getActiveCamera(),o=r.getView().getViewportCenter(e),i=m.default.degreesFromRadians(Math.atan2(n.previousPosition.y-o[1],n.previousPosition.x-o[0])),u=m.default.degreesFromRadians(Math.atan2(t.y-o[1],t.x-o[0]))-i;Number.isNaN(u)||(a.roll(u),a.orthogonalizeViewUp())},e.handleMousePan=function(t,r){var a=t.getActiveCamera(),o=a.getFocalPoint();o=e.computeWorldToDisplay(t,o[0],o[1],o[2]);var i=o[2],u=e.computeDisplayToWorld(t,r.x,r.y,i),s=e.computeDisplayToWorld(t,n.previousPosition.x,n.previousPosition.y,i),l=[];l[0]=s[0]-u[0],l[1]=s[1]-u[1],l[2]=s[2]-u[2],o=a.getFocalPoint();var c=a.getPosition();a.setFocalPoint(l[0]+o[0],l[1]+o[1],l[2]+o[2]),a.setPosition(l[0]+c[0],l[1]+c[1],l[2]+c[2]),n.interactor.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()},e.handleMouseDolly=function(t,r){var a=r.y-n.previousPosition.y,o=n.interactor,i=o.getView().getViewportCenter(t),u=n.motionFactor*a/i[1];e.dollyByFactor(t,Math.pow(1.1,u))},e.handleMouseWheel=function(n){e.dollyByFactor(n.pokedRenderer,n.wheelDelta)},e.dollyByFactor=function(e,t){if(!Number.isNaN(t)){var r=e.getActiveCamera();r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/t):(r.dolly(t),n.autoAdjustCameraClippingRange&&e.resetCameraClippingRange()),n.interactor.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()}}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,g,t),l.default.extend(e,n,t),u.default.setGet(e,n,["motionFactor"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(115),l=r(s),c=t(39),d=r(c),f=t(1),m=r(f),p=t(40),v=d.default.States,g={motionFactor:10},h=n.newInstance=u.default.newInstance(o,"vtkInteractorStyleTrackballCamera");n.default=Object.assign({newInstance:h,extend:o})},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkInteractorStyle"),Object.keys(m).forEach(function(t){u.default.event(e,n,"Start"+t+"Event"),e["start"+t]=function(){n.state===f.IS_NONE&&(n.state=m[t],n.interactor.requestAnimation(e),e.invokeStartInteractionEvent({type:"StartInteractionEvent"}),e["invokeStart"+t+"Event"]({type:"Start"+t+"Event"}))},u.default.event(e,n,"End"+t+"Event"),e["end"+t]=function(){n.state===m[t]&&(n.state=f.IS_NONE,n.interactor.cancelAnimation(e),e.invokeEndInteractionEvent({type:"EndInteractionEvent"}),e["invokeEnd"+t+"Event"]({type:"End"+t+"Event"}),n.interactor.render())}}),e.handleKeyPress=function(e){var t=n.interactor,r=null;switch(e.key){case"r":case"R":e.pokedRenderer.resetCamera(),t.render();break;case"w":case"W":r=e.pokedRenderer.getActors(),r.forEach(function(e){e.getProperty().setRepresentationToWireframe()}),t.render();break;case"s":case"S":r=e.pokedRenderer.getActors(),r.forEach(function(e){e.getProperty().setRepresentationToSurface()}),t.render();break;case"v":case"V":r=e.pokedRenderer.getActors(),r.forEach(function(e){e.getProperty().setRepresentationToPoints()}),t.render()}}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,p,t),l.default.extend(e,n,t),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(116),l=r(s),c=t(39),d=r(c),f=d.default.States,m={Rotate:f.IS_ROTATE,Pan:f.IS_PAN,Spin:f.IS_SPIN,Dolly:f.IS_DOLLY,CameraPose:f.IS_CAMERA_POSE,WindowLevel:f.IS_WINDOW_LEVEL,Slice:f.IS_SLICE},p={state:f.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1},v=n.newInstance=u.default.newInstance(o,"vtkInteractorStyle");n.default=Object.assign({newInstance:v,extend:o},d.default)},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n,t,r){return e.getRenderWindow().getViews()[0].worldToDisplay(n,t,r,e)}function o(e,n,t,r){return e.getRenderWindow().getViews()[0].displayToWorld(n,t,r,e)}function i(e,n){function t(){for(;n.subscribedEvents.length;)n.subscribedEvents.pop().unsubscribe()}function r(){d.default.handledEvents.forEach(function(t){e["handle"+t]&&n.subscribedEvents.push(n.interactor["on"+t](e["handle"+t],n.priority))})}n.classHierarchy.push("vtkInteractorObserver"),e.setInteractor=function(a){a!==n.interactor&&(t(),n.interactor=a,a&&n.enabled&&r(),e.modified())},e.setEnabled=function(a){a!==n.enabled&&(t(),a&&(n.interactor?r():f("\n          The interactor must be set before subscribing to events\n        ")),n.enabled=a,e.modified())},e.computeDisplayToWorld=function(e,t,r,a){return e?n.interactor.getView().displayToWorld(t,r,a,e):null},e.computeWorldToDisplay=function(e,t,r,a){return e?n.interactor.getView().worldToDisplay(t,r,a,e):null}}function u(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,p,t),l.default.obj(e,n),l.default.event(e,n,"InteractionEvent"),l.default.event(e,n,"StartInteractionEvent"),l.default.event(e,n,"EndInteractionEvent"),l.default.get(e,n,["interactor"]),l.default.setGet(e,n,["priority"]),i(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=n.STATIC=void 0,n.extend=u;var s=t(0),l=r(s),c=t(38),d=r(c),f=l.default.vtkErrorMacro,m=n.STATIC={computeWorldToDisplay:a,computeDisplayToWorld:o},p={enabled:!0,interactor:null,priority:0,subscribedEvents:[]},v=n.newInstance=l.default.newInstance(u,"vtkInteractorObserver");n.default=Object.assign({newInstance:v,extend:u},m)},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var n=0;return e.filter(function(e,t){return t===n&&(n+=e+1,!0)})}function o(e){return a(e).length}function i(e,n){n.classHierarchy.push("vtkCellArray"),e.getNumberOfCells=function(e){return void 0===n.numberOfCells||e?(n.cellSizes=a(n.values),n.numberOfCells=n.cellSizes.length,n.numberOfCells):n.numberOfCells},e.getCellSizes=function(e){return void 0===n.cellSizes||e?(n.cellSizes=a(n.values),n.cellSizes):n.cellSizes}}function u(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,p,t),d.default.extend(e,n,t),i(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=n.STATIC=void 0,n.extend=u;var s=t(0),l=r(s),c=t(5),d=r(c),f=t(8),m=n.STATIC={extractCellSizes:a,getNumberOfCells:o},p={empty:!0,numberOfComponents:1,dataType:f.VtkDataTypes.UNSIGNED_INT},v=n.newInstance=l.default.newInstance(u,"vtkCellArray");n.default=Object.assign({newInstance:v,extend:u},m)},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkPointSet"),n.points?n.points=(0,u.default)(n.points):n.points=m.default.newInstance(),e.getBounds=function(){return n.points.getBounds()},e.computeBounds=function(){e.getBounds()}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,p,t),d.default.extend(e,n,t),l.default.setGet(e,n,["points"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(11),u=r(i),s=t(0),l=r(s),c=t(21),d=r(c),f=t(41),m=r(f),p={},v=n.newInstance=l.default.newInstance(o,"vtkPointSet");n.default={newInstance:v,extend:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){function t(){e.computeMatrix()}n.classHierarchy.push("vtkProp3D"),e.addPosition=function(t){n.position=n.position.map(function(e,n){return e+t[n]}),e.modified()},e.getOrientationWXYZ=function(){var e=i.quat.create();i.mat4.getRotation(e,n.rotation);var t=i.vec3.create(),r=i.quat.getAxisAngle(t,e);return[f.default.degreesFromRadians(r),t[0],t[1],t[2]]},e.rotateX=function(t){0!==t&&(i.mat4.rotateX(n.rotation,n.rotation,f.default.radiansFromDegrees(t)),e.modified())},e.rotateY=function(t){0!==t&&(i.mat4.rotateY(n.rotation,n.rotation,f.default.radiansFromDegrees(t)),e.modified())},e.rotateZ=function(t){0!==t&&(i.mat4.rotateZ(n.rotation,n.rotation,f.default.radiansFromDegrees(t)),e.modified())},e.rotateWXYZ=function(t,r,a,o){if(0!==t&&(0!==r||0!==a||0!==o)){var u=f.default.radiansFromDegrees(t),s=i.quat.create();i.quat.setAxisAngle(s,[r,a,o],u);var l=i.mat4.create();i.mat4.fromQuat(l,s),i.mat4.multiply(n.rotation,n.rotation,l),e.modified()}},e.setUserMatrix=function(t){i.mat4.copy(n.userMatrix,t),e.modified()},e.getMatrix=function(){return e.computeMatrix(),n.matrix},e.computeMatrix=function(){if(e.getMTime()>n.matrixMTime.getMTime()){i.mat4.identity(n.matrix),n.userMatrix&&i.mat4.multiply(n.matrix,n.matrix,n.userMatrix),i.mat4.translate(n.matrix,n.matrix,n.origin),i.mat4.translate(n.matrix,n.matrix,n.position),i.mat4.multiply(n.matrix,n.matrix,n.rotation),i.mat4.scale(n.matrix,n.matrix,n.scale),i.mat4.translate(n.matrix,n.matrix,[-n.origin[0],-n.origin[1],-n.origin[2]]),i.mat4.transpose(n.matrix,n.matrix),n.isIdentity=!0;for(var t=0;t<4;++t)for(var r=0;r<4;++r)(t===r?1:0)!==n.matrix[t+4*r]&&(n.isIdentity=!1);n.matrixMTime.modified()}},e.getCenter=function(){return c.default.getCenter(n.bounds)},e.getLength=function(){return c.default.getLength(n.bounds)},e.getXRange=function(){return c.default.getXRange(n.bounds)},e.getYRange=function(){return c.default.getYRange(n.bounds)},e.getZRange=function(){return c.default.getZRange(n.bounds)},e.getUserMatrix=function(){return n.userMatrix},e.onModified(t)}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,v,t),p.default.extend(e,n,t),n.matrixMTime={},s.default.obj(n.matrixMTime),s.default.get(e,n,["bounds","isIdentity"]),s.default.setGetArray(e,n,["origin","position","orientation","scale"],3),n.matrix=i.mat4.create(),n.rotation=i.mat4.create(),n.userMatrix=i.mat4.create(),n.transform=null,a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(2),u=t(0),s=r(u),l=t(37),c=r(l),d=t(1),f=r(d),m=t(120),p=r(m),v={origin:[0,0,0],position:[0,0,0],rotation:null,scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null},g=n.newInstance=s.default.newInstance(o,"vtkProp3D");n.default={newInstance:g,extend:o}},function(e,n,t){"use strict";function r(e){return function(){return u.default.vtkErrorMacro("vtkProp::"+e+" - NOT IMPLEMENTED")}}function a(e,n){n.classHierarchy.push("vtkProp"),e.getMTime=function(){for(var e=n.mtime,t=0;t<n.textures.length;++t){var r=n.textures[t].getMTime();r>e&&(e=r)}return e},e.getNestedProps=function(){return null},e.getActors=function(){return null},e.getActors2D=function(){return null},e.getVolumes=function(){return null},e.pick=r("pick"),e.hasKey=r("hasKey"),e.getRedrawMTime=function(){return n.mtime},e.setEstimatedRenderTime=function(e){n.estimatedRenderTime=e,n.savedEstimatedRenderTime=e},e.restoreEstimatedRenderTime=function(){n.estimatedRenderTime=n.savedEstimatedRenderTime},e.addEstimatedRenderTime=function(e){n.estimatedRenderTime+=e},e.setAllocatedRenderTime=function(e){n.allocatedRenderTime=e,n.savedEstimatedRenderTime=n.estimatedRenderTime,n.estimatedRenderTime=0},e.getSupportsSelection=function(){return!1},e.getTextures=function(){return n.textures},e.hasTexture=function(e){return!!n.textures.filter(function(n){return n===e}).length},e.addTexture=function(t){t&&!e.hasTexture(t)&&(n.textures=n.textures.concat(t),e.modified())},e.removeTexture=function(t){var r=n.textures.filter(function(e){return e===t});n.texture.length!==r.length&&(n.textures=r,e.modified())},e.removeAllTextures=function(){n.textures=[],e.modified()}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,s,t),u.default.obj(e,n),u.default.get(e,n,["estimatedRenderTime","allocatedRenderTime"]),u.default.setGet(e,n,["visibility","pickable","dragable","useBounds","renderTimeMultiplier"]),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s={visibility:!0,pickable:!0,dragable:!0,useBounds:!0,allocatedRenderTime:10,estimatedRenderTime:0,savedEstimatedRenderTime:0,renderTimeMultiplier:1,paths:null,textures:[]},l=n.newInstance=u.default.newInstance(o,"vtkProp");n.default={newInstance:l,extend:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkPointSource"),e.requestData=function(e,t){if(!n.deleted){var r=t[0],a=r?r.getPoints().getDataType():"Float32Array",o=d.default.newInstance(),i=n.numberOfPoints,u=new window[a](3*i);o.getPoints().setData(u,3);var s=new Uint32Array(i+1);o.getVerts().setData(s,1);for(var c=void 0,f=void 0,m=void 0,p=void 0,v=void 0,g=0;g<i;g++)c=1-2*l.default.random(),f=Math.sqrt(1-c*c),m=n.radius*Math.pow(l.default.random(),.33333333),p=m*f,v=2*Math.PI*l.default.random(),u[3*g]=n.center[0]+p*Math.cos(v),u[3*g+1]=n.center[1]+p*Math.sin(v),u[3*g+2]=n.center[2]+m*c;s[0]=i;for(var h=0;h<i;h++)s[h+1]=h;t[0]=o}}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,f,t),u.default.obj(e,n),u.default.setGet(e,n,["numberOfPoints","radius"]),u.default.setGetArray(e,n,["center"],3),u.default.algo(e,n,0,1),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(1),l=r(s),c=t(26),d=r(c),f={numberOfPoints:10,center:[0,0,0],radius:.5,pointType:"Float32Array"},m=n.newInstance=u.default.newInstance(o,"vtkPointSource");n.default={newInstance:m,extend:o}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){n.classHierarchy.push("vtkOutlineFilter"),e.requestData=function(e,n){var t=e[0];if(!t)return void c("Invalid or missing input");var r=t.getBounds(),a=l.default.newInstance();a.getPoints().setData(Float32Array.from(d.map(function(e){return r[e]})),3),a.getLines().setData(Uint16Array.from(f)),n[0]=a}}function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,m,t),u.default.obj(e,n),u.default.algo(e,n,1,1),a(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.newInstance=void 0,n.extend=o;var i=t(0),u=r(i),s=t(26),l=r(s),c=u.default.vtkErrorMacro,d=[0,2,4,1,2,4,0,3,4,1,3,4,0,2,5,1,2,5,0,3,5,1,3,5],f=[2,0,1,2,2,3,2,4,5,2,6,7,2,0,2,2,1,3,2,4,6,2,5,7,2,0,4,2,1,5,2,2,6,2,3,7],m={},p=n.newInstance=u.default.newInstance(o,"vtkOutlineFilter");n.default={newInstance:p,extend:o}},function(e,n){e.exports='<table>\n  <tr>\n    <td>Number of Points</td>\n    <td>\n      <input class=\'numberOfPoints\' type="range" min="1" max="500" step="1" value="25" />\n    </td>\n  </tr>\n  <tr>\n    <td>Radius</td>\n    <td>\n      <input class=\'radius\' type="range" min="0.1" max="0.5" step=".01" value="0.25" />\n    </td>\n  </tr>\n</table>\n'}]);
</script>
</body>
</html>
